"use strict";function parseStringToDimension(e){e=e.toLowerCase();var t=e.split(" ");return t=updateDigits(t),t=updateFirstTwoToM(t),t=updateCM(t),t=updateMs(t),t=updateM(t),t=updateMM(t),e=summAll(t)}function updateDigits(e){for(var t=0;t<e.length;t++)"ноль"===e[t]&&(e[t]="0"),"раз"===e[t]&&(e[t]="1"),"один"===e[t]&&(e[t]="1"),"два"===e[t]&&(e[t]="2"),"три"===e[t]&&(e[t]="3"),"четыре"===e[t]&&(e[t]="4"),"пять"===e[t]&&(e[t]="5"),"шесть"===e[t]&&(e[t]="6"),"семь"===e[t]&&(e[t]="7"),"восемь"===e[t]&&(e[t]="8"),"девять"===e[t]&&(e[t]="9");return e}function updateCM(e){for(var t=0;t<e.length;t++)"и"===e[t]&&(e[t]="см"),t>0&&"см"===e[t]&&isNumber(e[t-1])&&(e[t-1]=10*parseInt(e[t-1],10),e.splice(t,1));return e}function updateMM(e){for(var t=0;t<e.length;t++)t>0&&"мм"===e[t]&&isNumber(e[t-1])&&e.splice(t,1);return e}function updateMs(e){for(var t=0;t<e.length;t++)("метр"===e[t]||"1м"===e[0]||"тыща"===e[t]||"тысяча"===e[t])&&(e[t]="м");return e}function updateM(e){for(var t=1;t<e.length;t++)"м"===e[t]&&isNumber(e[t-1])&&(e[t-1]=""+1e3*parseInt(e[t-1],10),e=upadtePostM(e,t),e.splice(t,1));return"м"===e[0]&&(e[0]="1000",e=upadtePostM(e,0)),e}function updateFirstTwoToM(e){return 2==e.length&&isNumber(e[0])&&isNumber(e[1])&&(e[2]=e[1],e[1]="м",parseInt(e[2],10)<100?e[3]="см":e[3]="мм"),e}function upadtePostM(e,t){return t===e.length-2?isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&(e[t+1]=""+10*parseInt(e[t+1],10)):t<e.length-1&&isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&isNumber(e[t+2])&&(e[t+1]=""+10*parseInt(e[t+1],10)),e}function summAll(e){for(var t=0,i=0;i<e.length;i++)t+=parseInt(e[i],10);return""+t}function isNumber(e){return""+parseInt(e,10)===e}function OkResult(e){this.status=!0,this.data=e}function ErrorResult(e,t){this.status=!1,this.code=e,this.message=t,console.error(this.code,this.message)}function doInit(){var e="cvq.nmdp.nuancemobility.net";speechKit.initialize("Credentials",e,443,!1,function(e){printResult(e)},function(e){printResult(e)})}function doCleanup(){speechKit.cleanup(function(e){printResult(e)},function(e){printResult(e)})}function startRecognition(e,t,i){function r(){console.log("FORCE STOP"+l),l===!0&&(console.log("FORCE STOP"),o())}function o(){speechKit.stopRecognition(function(e){n(e)},function(e){console.log(e)})}function n(e){"RecoVolumeUpdate"==e.event?(console.log("RecoVolumeUpdate"),t&&t(e.volumeLevel)):a(e)}function a(t){return console.log("parseAndCallback"+t.event),void 0!=t.results&&t.results.length>0?(e(t.results[0].value),void(l=!1)):"RecoStarted"!=t.event?(e("0"),void(l=!1)):void 0}var l=!0,s=i;console.log("Before startRecognition"),speechKit.startRecognition("dictation",s,function(e){n(e)},function(e){n(e)}),console.log("After startRecognition");setTimeout(r,5e3)}function stopRecognition(){speechKit.stopRecognition(function(e){printRecoResult(e)},function(e){console.log(e)})}function getResult(){speechKit.getResults(function(e){printResult(e)},function(e){console.log("getResult"+e)})}function printResult(e){console.log("printResult "+e.event)}function playTTS(e,t){function i(e){console.log("printTTSResult "+JSON.stringify(e))}if(e.length>0){console.log("Playing TTS");var r=(document.getElementById("tts-language"),t);speechKit.playTTS(e,r,null,function(e){i(e)},function(e){i(e)})}}var isDevice=/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(window.navigator.userAgent)?1:0;!function(){function e(e,t,i,r,o,n,a,l,s){e.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl as loginPage",title:"Login"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl as mainPage",title:"Main"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl as settingsPage",title:"Settings"}).when("/change-pass",{templateUrl:"views/change-pass.html",controller:"ChangePassCtrl as passwordPage",title:"Change Pass"}).when("/change-lang",{templateUrl:"views/change-lang.html",controller:"ChangeLangCtrl as languagePage",title:"Change Language"}).when("/location",{templateUrl:"views/location.html",controller:"LocationCtrl as locationPage",title:"Location"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl as historyPage",title:"History"}).when("/cart",{templateUrl:"views/cart.html",controller:"CartCtrl as cartPage",title:"Cart"}).when("/design",{templateUrl:"views/design.html",controller:"DesignCtrl as designPage",title:"Design"}).otherwise({redirectTo:"/"}),i.translations("ru",o),i.translations("uk",r),i.translations("en",n),i.translations("de",a),i.translations("ro",l),i.translations("it",s),i.preferredLanguage("en").fallbackLanguage("en")}e.$inject=["$routeProvider","$locationProvider","$translateProvider","ukrainianDictionary","russianDictionary","englishDictionary","germanDictionary","romanianDictionary","italianDictionary"],/(chrome|Chromium|safari|firefox|Opera|Yandex|internet explorer|Seamonkey)/i.test(window.navigator.userAgent)&&(isDevice=0),console.log("isDevice===",isDevice),isDevice&&(window.PhonegapApp={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){doInit(),angular.element(document).ready(function(){angular.bootstrap(document,["BauVoiceApp","LoginModule"])})}},PhonegapApp.initialize()),angular.module("BauVoiceApp",["ngRoute","pascalprecht.translate","ngTouch","ngCordova","swipe","LoginModule","MainModule","DesignModule","CartModule","HistoryModule","SettingsModule"]).config(e),angular.module("LoginModule",[]),angular.module("MainModule",[]),angular.module("DesignModule",[]),angular.module("CartModule",[]),angular.module("HistoryModule",[]),angular.module("SettingsModule",[])}(),function(){function e(e,t,i,r,o,n,a,l,s){function d(e){a.cart.allAddElements[e].length>0&&(E.config.detailProductIndex=e,E.config.isAddElementDetail=!0)}function c(){E.config.isAddElementDetail=!1}function u(){E.config.isCartLightView=!E.config.isCartLightView}function p(e){var t=e+1;E.config.isProductComment=E.config.isProductComment===t?0:t}function _(e){e?(E.config.isShowDiscInput=0,E.config.isShowDiscInputAdd=1):(E.config.isShowDiscInput=1,E.config.isShowDiscInputAdd=0)}var E=this;E.constants=t,E.G=i,E.O=r,E.U=n,E.C=a,E.config={currDisConstr:0,isAddElementDetail:0,isCartLightView:0,detailProductIndex:0,isShowDiscInput:0,isShowDiscInputAdd:0,isProductComment:0,element:e("translate")("add_elements.ELEMENT"),elementa:e("translate")("add_elements.ELEMENTA"),elements:e("translate")("add_elements.ELEMENTS"),DELAY_START:t.STEP,typing:"on"},i.global.currOpenPage="cart",i.global.productEditNumber=0,s.joinAllAddElements(),s.calculateOrderPrice(),"main"===i.global.prevOpenPage&&(o.product=o.setDefaultProduct()),i.global.orderEditNumber||(a.cart.customer.customer_location=r.order.customer_location),E.decreaseProductQty=l.decreaseProductQty,E.increaseProductQty=l.increaseProductQty,E.addNewProductInOrder=l.addNewProductInOrder,E.clickDeleteProduct=l.clickDeleteProduct,E.editProduct=l.editProduct,E.showAddElementDetail=d,E.closeAddElementDetail=c,E.viewSwitching=u,E.switchProductComment=p,E.showAllAddElements=l.showAllAddElements,E.openDiscountBlock=s.openDiscountBlock,E.closeDiscountBlock=s.closeDiscountBlock,E.openDiscInput=_,E.approveNewDisc=s.approveNewDisc}e.$inject=["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor","CartStor","CartServ","CartMenuServ"],angular.module("CartModule").controller("CartCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(l){t.use(r.languages[l].label),n.userInfo.langLabel=r.languages[l].label,n.userInfo.langName=r.languages[l].name,o.global.isVoiceHelper&&(o.global.voiceHelperLanguage=a.setLanguageVoiceHelper()),i(function(){e.path("/main")},200)}function s(){e.path("/settings")}var d=this;d.constants=r,d.U=n,d.config={DELAY_START:r.STEP,typing:"on"},d.switchLang=l,d.gotoSettingsPage=s}e.$inject=["$location","$translate","$timeout","globalConstants","GlobalStor","UserStor","NavMenuServ"],angular.module("SettingsModule").controller("ChangeLangCtrl",e)}(),function(){function e(e,t,i,r){function o(){l.config.oldPassword&&i.userInfo.password==r.md5(l.config.oldPassword)&&l.config.newPassword&&l.config.confirmPassword&&l.config.newPassword===l.config.confirmPassword?(l.config.isErrorPassword=0,i.userInfo.password=r.md5(l.config.newPassword),console.log("CHENGE PASSWORD++++",i.userInfo.password),r.updateLocalServerDBs(r.tablesLocalDB.users.tableName,i.userInfo.id,{password:i.userInfo.password}).then(function(){l.config.newPassword=l.config.confirmPassword="",t.gotoSettingsPage()})):l.config.oldPassword&&i.userInfo.password==r.md5(l.config.oldPassword)?l.config.isErrorPassword=1:l.config.isErrorOldPassword=1}function n(){l.config.isErrorPassword=0}function a(){l.config.isErrorOldPassword=0}var l=this;l.U=i,l.config={DELAY_START:e.STEP,oldPassword:0,newPassword:0,confirmPassword:0,isErrorPassword:0,isErrorOldPassword:0,typing:"on"},l.saveNewPassword=o,l.gotoSettingsPage=t.gotoSettingsPage,l.checkError=n,l.checkErrorOld=a}e.$inject=["globalConstants","SettingServ","UserStor","localDB"],angular.module("SettingsModule").controller("ChangePassCtrl",e)}(),function(){function e(e,t,i,r,o,n){function a(t){if(n.design.tempSize.length)i.closeSizeCaclulator();else if(n.design.activeMenuItem=n.design.activeMenuItem===t?0:t,n.design.isDropSubMenu=0,i.hideCornerMarks(),i.deselectAllImpost(),4!==t&&i.deselectAllArc(),i.hideSizeTools(),n.design.activeMenuItem)switch(n.design.activeMenuItem){case 1:d(t),e(function(){n.design.isDropSubMenu=2},C),e(function(){n.design.isDropSubMenu=6},R),e(function(){n.design.isDropSubMenu=8},D),e(function(){n.design.isDropSubMenu=0},v);break;case 2:i.deselectAllGlass(),u(t);break;case 3:d(t),e(function(){n.design.isDropSubMenu=4},C),e(function(){n.design.isDropSubMenu=8},R),e(function(){n.design.isDropSubMenu=12},D),e(function(){n.design.isDropSubMenu=0},v);break;case 4:i.deselectAllGlass(),_(t);break;case 5:n.design.activeSubMenuItem=t}else n.design.activeSubMenuItem=0,i.deselectAllGlass(),i.deselectAllArc(),e(function(){n.design.isImpostDelete=0},300)}function l(){n.design.activeMenuItem=0,n.design.activeSubMenuItem=0,n.design.isDropSubMenu=0}function s(){O.config.isDesignError=1,n.design.activeMenuItem=0,n.design.activeSubMenuItem=0,e(function(){O.config.isDesignError=0},800)}function d(e){if(n.design.activeSubMenuItem=e,!n.design.selectedGlass.length){var t=d3.selectAll("#tamlateSVG .glass");n.design.selectedGlass=t[0],t.classed("glass-active",!0)}}function c(e,t){t.preventDefault();var r=1,o=n.design.selectedGlass.length,a=0;if(1===e)for(l();o>a;a++)i.deleteSash(n.design.selectedGlass[a]);else if((2===e||6===e||8===e)&&(n.design.isDropSubMenu===e?n.design.isDropSubMenu=0:(n.design.isDropSubMenu=e,r=0)),r)for(l();o>a;a++)i.createSash(e,n.design.selectedGlass[a])}function u(e){var t=d3.selectAll("#tamlateSVG .corner_mark");t[0].length?(n.design.activeSubMenuItem=e,t.transition().duration(300).ease("linear").attr("r",50),n.design.selectedCorner=t[0],t.on("click",function(){i.hideCornerMarks();var e=d3.select(this).transition().duration(300).ease("linear").attr("r",50);n.design.selectedCorner.push(e[0][0])})):s()}function p(e,t){t.preventDefault(),l();var r=n.design.selectedCorner.length,o=0;switch(e){case 1:for(;r>o;o++)i.deleteCornerPoints(n.design.selectedCorner[o]);break;case 2:for(;r>o;o++)i.setCornerPoints(n.design.selectedCorner[o]);break;case 3:for(;r>o;o++)i.setCurvCornerPoints(n.design.selectedCorner[o])}}function _(e){var t=d3.selectAll("#tamlateSVG .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});if(t.length){if(n.design.activeSubMenuItem=e,!n.design.selectedArc.length){var i=d3.selectAll(t);n.design.selectedArc=i[0],i.classed("active_svg",!0)}}else s()}function E(e,t){t.preventDefault(),l();var r=n.design.selectedArc.length;1===e?r>1?i.workingWithAllArcs(0):(i.deleteArc(n.design.selectedArc[0]),n.design.selectedArc.length=0):r>1?i.workingWithAllArcs(1):(i.createArc(n.design.selectedArc[0]),n.design.selectedArc.length=0)}function m(t,r){r.preventDefault();var o=1,a=n.design.selectedImpost.length,s=0;if(1===t){if(l(),a){for(;a>s;s++)i.deleteImpost(n.design.selectedImpost[s]);e(function(){n.design.isImpostDelete=0},300)}}else if((4===t||8===t||12===t)&&(n.design.isDropSubMenu===t?n.design.isDropSubMenu=0:(n.design.isDropSubMenu=t,o=0)),o)if(l(),a)i.deselectAllImpost();else{var d=n.design.selectedGlass.length;if(d)for(;d>s;s++)i.createImpost(t,n.design.selectedGlass[s])}}function g(e){e.preventDefault(),l(),i.initMirror()}function f(e){e.preventDefault(),l(),i.positionAxises()}function T(e){e.preventDefault(),l(),i.positionGlasses()}function h(){O.config.isDoorConfig=1,i.closeSizeCaclulator()}function I(e){O.config.selectedStep2||(n.design.doorConfig.doorShapeIndex===e?(n.design.doorConfig.doorShapeIndex="",O.config.selectedStep1=0):(n.design.doorConfig.doorShapeIndex=e,O.config.selectedStep1=1))}function A(e){O.config.selectedStep3||(n.design.doorConfig.sashShapeIndex===e?(n.design.doorConfig.sashShapeIndex="",O.config.selectedStep2=0):(n.design.doorConfig.sashShapeIndex=e,O.config.selectedStep2=1))}function S(e){O.config.selectedStep4||(n.design.doorConfig.handleShapeIndex===e?(n.design.doorConfig.handleShapeIndex="",O.config.selectedStep3=0):(n.design.doorConfig.handleShapeIndex=e,O.config.selectedStep3=1))}function N(e){n.design.doorConfig.lockShapeIndex===e?(n.design.doorConfig.lockShapeIndex="",O.config.selectedStep4=0):(n.design.doorConfig.lockShapeIndex=e,O.config.selectedStep4=1)}function y(){O.config.selectedStep3?(O.config.selectedStep3=0,O.config.selectedStep4=0,n.design.doorConfig.lockShapeIndex="",n.design.doorConfig.handleShapeIndex=""):O.config.selectedStep2?(O.config.selectedStep2=0,n.design.doorConfig.sashShapeIndex=""):O.config.selectedStep1?(O.config.selectedStep1=0,n.design.doorConfig.doorShapeIndex=""):(O.config.isDoorConfig=0,n.design.doorConfig=n.setDefaultDoor())}function L(){i.rebuildSVGTemplate(),O.config.isDoorConfig=0}var O=this,C=300,R=600,D=900,v=1200;O.constants=t,O.G=r,O.P=o,O.D=n,r.global.currOpenPage="design",O.config={isDesignError:0,isDoorConfig:0,selectedStep1:0,selectedStep2:0,selectedStep3:0,selectedStep4:0,DELAY_SHOW_FIGURE_ITEM:1e3,typing:"on"},i.setDefaultTemplate(),4===o.product.construction_type&&i.setIndexDoorConfig(),O.designSaved=i.designSaved,O.designCancel=i.designCancel,O.selectMenuItem=a,O.setDefaultConstruction=i.setDefaultConstruction,O.toggleDoorConfig=h,O.selectDoor=I,O.selectSash=A,O.selectHandle=S,O.selectLock=N,O.closeDoorConfig=y,O.saveDoorConfig=L,O.insertSash=c,O.insertCorner=p,O.insertImpost=m,O.insertArc=E,O.initMirror=g,O.positionAxis=f,O.positionGlass=T,O.stepBack=i.stepBack}e.$inject=["$timeout","globalConstants","DesignServ","GlobalStor","ProductStor","DesignStor"],angular.module("DesignModule").controller("DesignCtrl",e)}(),function(){function e(e,t,i,r){var o=this;o.G=e,o.H=i,o.U=t,e.global.currOpenPage="history",o.createdDate="created",r.downloadOrders(),o.toCurrentCalculation=r.toCurrentCalculation,o.sendOrderToFactory=r.sendOrderToFactory,o.makeOrderCopy=r.makeOrderCopy,o.clickDeleteOrder=r.clickDeleteOrder,o.editOrder=r.editOrder,o.viewSwitching=r.viewSwitching,o.orderSearching=r.orderSearching,o.orderDateSelecting=r.orderDateSelecting,o.openCalendarScroll=r.openCalendarScroll,o.orderSorting=r.orderSorting,o.sortingInit=r.sortingInit}e.$inject=["GlobalStor","UserStor","HistoryStor","HistoryServ"],angular.module("HistoryModule").controller("HistoryCtrl",e)}(),function(){function e(e,t,i,r,o,n){function a(o){l.userNewLocation=o.fullLocation,"settings"===r.global.currOpenPage?(n.userInfo.city_id=o.cityId,n.userInfo.cityName=o.cityName,n.userInfo.countryId=o.countryId,n.userInfo.fullLocation=o.fullLocation,n.userInfo.climaticZone=o.climaticZone,n.userInfo.heatTransfer=o.heatTransfer,e.updateLocalServerDBs(e.tablesLocalDB.users.tableName,n.userInfo.id,{city_id:o.cityId})):"main"===r.global.currOpenPage&&t.setUserGeoLocation(o.cityId,o.cityName,o.climaticZone,o.heatTransfer,o.fullLocation),r.global.startProgramm=!1,i.closeLocationPage()}var l=this;l.userNewLocation=angular.copy(o.order.customer_location),l.locations=r.global.locations.cities.filter(function(e){return e.countryId===n.userInfo.countryId}),l.closeLocationPage=i.closeLocationPage,l.selectCity=a}e.$inject=["localDB","loginServ","SettingServ","GlobalStor","OrderStor","UserStor"],angular.module("SettingsModule").controller("LocationCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l){function s(){var t=e.search(),i=["7d537b6746f925b1703aefa9b8a9a4bc","3f5f0c7d46d318e026f9ba60dceffc65","799e078b084c6d57cea0b0d53a7e3008","9aefeef9c7e53f9de9bb36f32649dc3f","a2da6d85764368b24392740020efbc92","ceb60bfed037baaa484bd7b88d274c98","632b3213660804acb71fe045c6e321ed","04fc711301f3c784d66955d98d399afb","768c1c687efe184ae6dd2420710b8799","f7a5c99c58103f6b65c451efd0f81826","27701bd8dd141b953b94a5c9a44697c0","7f7d5f9f3a660f2b09e3aae62a15e29b","23ff17389acbfd020043268fb49e7048","cd714cc33cfd23e74f414cbb8b9787fe","2959f1aea8db0f7fbba61f0f8474d0ef","a28a19e19b283845c851b4876b97cef4","661e67f8ce5eaf9d63c1b5be6fce1afb","0653e359db756493450c3fb1fc6790b2","ec5fefce8d1d81849b47923d6d1b52c0","d4ccb0f347163d9ee1cd5a106e1ec48b","c500ea6c5baf3deb447be25b90cf5f1c","59a6670111970ede6a77e9b43a5c4787","266021e24dd0bfaaa96f2b5e21d7c800","b8c4b7f74db12fadbe2d979ed93f392b","2482b711a07d1da3efa733aa7014f947","573b8926f015aa477cb6604901b92aea","b54d11c86eb7c8955a50d20f6b3be2f2","3a55b7218a5ca395ac71b3ec9904b6ed","3615d9213b1b3d5fe760901f43a8405f","e50137601a90943ce98b03e90d73272e","d4651afb4e1c749f0bacc7ff5d101982","988a8fa4855bf7ea54057717655d3fc9"],r=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],n=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],l=i.length,s=0;if(t.access){for(;--l>-1;)i[l]===t.access&&(S.user.phone=r[l],S.user.password=n[l],s=1);s?S.user.phone&&S.user.password&&(a.global.isLoader=1,u()):o.importUser(t.access,1).then(function(e){var t=angular.copy(e.user);a.global.isLoader=1,t.therm_coeff_id=angular.copy(e.thermCoeffId),null!==e.factoryLink&&(t.factoryLink=angular.copy(e.factoryLink)),p(t)})}}function d(){S.isOffline=!1}function c(e){S.submitted=1,e.$valid&&(a.global.isLoader=1,S.isOnline?n.isLocalDBExist().then(function(e){S.isLocalDB=e,S.isLocalDB?(console.log("SYNC"),o.selectLocalDB(o.tablesLocalDB.users.tableName,{phone:S.user.phone}).then(function(e){if(e.length){var t=o.md5(S.user.password);t===e[0].password?e[0].locked?(angular.extend(l.userInfo,e[0]),n.prepareLocationToUse().then(function(){_()})):(a.global.isLoader=0,S.isUserNotActive=1):(a.global.isLoader=0,S.isUserPasswordError=1)}else console.log("Sync IMPORT"),u()})):(console.log("IMPORT"),u())}):S.isLocalDB?(console.log("OFFLINE"),o.selectLocalDB(o.tablesLocalDB.users.tableName,{phone:S.user.phone}).then(function(e){if(e.length){var t=o.md5(S.user.password);t===e[0].password?e[0].locked?e[0].factory_id>0?(angular.extend(l.userInfo,e[0]),n.prepareLocationToUse().then(function(){n.setUserLocation(),n.downloadAllData()})):(a.global.isLoader=0,S.isOffline=1):(a.global.isLoader=0,S.isUserNotActive=1):(a.global.isLoader=0,S.isUserPasswordError=1)}else a.global.isLoader=0,S.isUserNotExist=1})):(a.global.isLoader=0,S.isOffline=1))}function u(){o.importUser(S.user.phone).then(function(e){if(e.status){var t=angular.copy(e.user);console.log("USER!!!!!!!!!!!!",S.user.phone,e);var i=o.md5(S.user.password);i===t.password?(t.therm_coeff_id=angular.copy(e.thermCoeffId),null!==e.factoryLink&&(t.factoryLink=angular.copy(e.factoryLink)),p(t)):(a.global.isLoader=0,S.isUserPasswordError=1)}else a.global.isLoader=0,S.isUserNotExist=1})}function p(e){e.locked?o.cleanLocalDB(o.tablesLocalDB).then(function(t){t&&o.createTablesLocalDB(o.tablesLocalDB).then(function(t){t&&(o.insertRowLocalDB(e,o.tablesLocalDB.users.tableName),angular.extend(l.userInfo,e),o.importLocation(l.userInfo.phone,l.userInfo.device_code).then(function(e){e&&n.prepareLocationToUse().then(function(){_()})}))})}):(a.global.isLoader=0,S.isUserNotActive=1)}function _(){n.setUserLocation(),1*l.userInfo.factory_id>0?n.isLocalDBExist().then(function(e){S.isLocalDB=e,S.isLocalDB?n.downloadAllData():E(l.userInfo.factory_id)}):n.collectCityIdsAsCountry().then(function(e){o.importFactories(l.userInfo.phone,l.userInfo.device_code,e).then(function(e){a.global.isLoader=0,e.status?(S.factories=m(e.factories),S.isFactoryId=1):console.log("can not get factories!")})})}function E(){S.isStartImport=1,o.importAllDB(l.userInfo.phone,l.userInfo.device_code).then(function(e){e?(n.downloadAllData(),S.isStartImport=0):console.log("Error!")})}function m(e){for(var t,i=e.length;--i>-1;)for(t=a.global.locations.cities.length;--t>-1;)e[i].city_id===a.global.locations.cities[t].cityId&&(e[i].location=a.global.locations.cities[t].fullLocation);return e}function g(){S.user.factoryId>0?S.isOnline?(a.global.isLoader=1,l.userInfo.factory_id=angular.copy(S.user.factoryId),o.updateLocalServerDBs(o.tablesLocalDB.users.tableName,l.userInfo.id,{factory_id:l.userInfo.factory_id}).then(function(){S.isFactoryId=0,E()})):S.isOffline=1:S.isFactoryNotSelect=1}function f(){S.isFactoryNotSelect=0,S.isFactoryId=0,delete S.user.factoryId}function T(){S.isOnline?n.isLocalDBExist().then(function(e){S.isLocalDB=e,S.isLocalDB?(a.global.isLoader=1,n.prepareLocationToUse(1).then(function(){a.global.isLoader=0,S.isRegistration=1})):(a.global.isLoader=1,o.cleanLocalDB(o.tablesLocalDB).then(function(e){e&&o.createTablesLocalDB(o.tablesLocationLocalDB).then(function(e){e&&o.importLocation().then(function(e){e&&n.prepareLocationToUse(1).then(function(){a.global.isLoader=0,S.isRegistration=1})})})})),S.user={}}):S.isOffline=1}function h(){S.user={},S.isRegistration=0}function I(e){S.submitted=!0,e.$valid&&(S.isOnline?(a.global.isLoader=1,o.importUser(S.user.phone).then(function(e){if(e.status)a.global.isLoader=0,S.isUserExist=1;else{var t={name:S.user.name,phone:S.user.phone,email:S.user.mail,cityId:S.user.city.id,password:o.md5(S.user.phone)};console.log("CREATE USER!!!!!!!!!!!!",t),o.createUserServer(t),a.global.isLoader=0,S.isSendEmail=1,h()}})):S.isOffline=1)}function A(){S.user.country?S.user.region||delete S.user.city:(delete S.user.region,delete S.user.city)}var S=this;S.G=a,S.isOnline=1,S.isOffline=0,S.isLocalDB=0,S.isRegistration=0,S.submitted=0,S.isUserExist=0,S.isUserNotExist=0,S.isUserPasswordError=0,S.isSendEmail=0,S.isUserNotActive=0,S.isFactoryId=0,S.isFactoryNotSelect=0,S.isStartImport=0,S.user={},S.factories=0,S.regPhone=r.REG_PHONE,S.regName=r.REG_NAME,S.regMail=r.REG_MAIL,S.OFFLINE=i("translate")("login.OFFLINE"),S.OK=i("translate")("common_words.OK"),S.USER_CHECK_EMAIL=i("translate")("login.USER_CHECK_EMAIL"),S.USER_NOT_EXIST=i("translate")("login.USER_NOT_EXIST"),S.USER_NOT_ACTIVE=i("translate")("login.USER_NOT_ACTIVE"),S.USER_PASSWORD_ERROR=i("translate")("login.USER_PASSWORD_ERROR"),S.IMPORT_DB=i("translate")("login.IMPORT_DB"),S.MOBILE=i("translate")("login.MOBILE"),S.EMPTY_FIELD=i("translate")("login.EMPTY_FIELD"),S.WRONG_NUMBER=i("translate")("login.WRONG_NUMBER"),S.SHORT_PHONE=i("translate")("login.SHORT_PHONE"),S.PASSWORD=i("translate")("login.PASSWORD"),S.SHORT_PASSWORD=i("translate")("login.SHORT_PASSWORD"),S.ENTER=i("translate")("login.ENTER"),S.REGISTRATION=i("translate")("login.REGISTRATION"),S.SELECT_FACTORY=i("translate")("login.SELECT_FACTORY"),S.SELECT_PRODUCER=i("translate")("login.SELECT_PRODUCER"),S.SELECT=i("translate")("common_words.SELECT"),S.USER_EXIST=i("translate")("login.USER_EXIST"),S.CLIENT_NAME=i("translate")("cart.CLIENT_NAME"),S.WRONG_NAME=i("translate")("login.WRONG_NAME"),S.SHORT_NAME=i("translate")("login.SHORT_NAME"),S.SELECT_COUNTRY=i("translate")("login.SELECT_COUNTRY"),S.SELECT_REGION=i("translate")("login.SELECT_REGION"),S.SELECT_CITY=i("translate")("login.SELECT_CITY"),S.CLIENT_EMAIL=i("translate")("cart.CLIENT_EMAIL"),S.WRONG_EMAIL=i("translate")("cart.WRONG_EMAIL"),S.switchRegistration=T,S.closeRegistration=h,S.enterForm=c,S.registrForm=I,S.selectLocation=A,S.selectFactory=g,S.closeFactoryDialog=f,S.closeOfflineAlert=d,n.getDeviceLanguage(),S.isOnline&&(n.initExport(),s())}e.$inject=["$location","$cordovaNetwork","$filter","globalConstants","localDB","loginServ","GlobalStor","UserStor"],angular.module("LoginModule").controller("LoginCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){var l=this;l.G=r,l.P=o,l.U=n,l.A=a,r.global.currOpenPage="main",r.global.isReport=0,r.global.startProgramm&&(t.saveUserEntry(),t.createOrderData(),t.setCurrDiscounts(),t.setCurrTemplate(),t.prepareTemplates(o.product.construction_type).then(function(){t.prepareMainPage(),t.laminatFiltering(),1===r.global.locations.cities.length&&e.downloadAllCities(1)})),r.global.productEditNumber&&(console.log("EDIT!!!!"),console.log("product = ",o.product),i.createSVGTemplate(o.product.template_source,o.product.profileDepths).then(function(e){o.product.template=e}))}e.$inject=["loginServ","MainServ","SVGServ","GlobalStor","ProductStor","UserStor","AuxStor"],angular.module("MainModule").controller("MainCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c){function u(){a.aux.isTabFrame=!a.aux.isTabFrame}function p(e,t,i){(r.global.isQtyCalculator||r.global.isSizeCalculator)&&s.finishCalculators(),a.aux.isAddElementListView?_(e,t,i):1===a.aux.isFocusedAddElement?o.product.is_addelem_only?s.chooseAddElement(e,t):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,c.initAllGlassXGrid()):s.chooseAddElement(e,t)}function _(t,i,r){if(a.aux.isAddElement===t+"-"+i)a.aux.isAddElement=!1;else if(a.aux.isAddElement===!1){var o=$(r.target).offset();E.coordinats={top:o.top-17},e(function(){s.getAddElementPrice(t,i)},500)}else a.aux.isAddElement=!1,e(function(){var e=$(r.target).offset();E.coordinats={top:e.top-17}},500),e(function(){s.getAddElementPrice(t,i)},1e3)}var E=this;E.constants=i,E.G=r,E.P=o,E.U=n,E.A=a,E.config={DELAY_START:i.STEP,DELAY_SHOW_ELEMENTS_MENU:10*i.STEP,typing:"on"},E.TIP=t("translate")("add_elements_menu.TIP"),E.EMPTY_ELEMENT=t("translate")("add_elements_menu.EMPTY_ELEMENT"),E.NAME_LABEL=t("translate")("add_elements.NAME_LABEL"),E.QTY_LABEL=t("translate")("add_elements.QTY_LABEL"),E.WIDTH_LABEL=t("translate")("add_elements.WIDTH_LABEL"),E.HEIGHT_LABEL=t("translate")("add_elements.HEIGHT_LABEL"),E.ADD=t("translate")("add_elements.ADD"),E.TAB_NAME_SIMPLE_FRAME=t("translate")("add_elements_menu.TAB_NAME_SIMPLE_FRAME"),E.TAB_NAME_HARD_FRAME=t("translate")("add_elements_menu.TAB_NAME_HARD_FRAME"),E.TAB_EMPTY_EXPLAIN=t("translate")("add_elements_menu.TAB_EMPTY_EXPLAIN"),E.closeAddElementsMenu=s.closeAddElementsMenu,E.selectAddElement=p,E.chooseAddElement=s.chooseAddElement,E.chooseAddElementList=s.chooseAddElementList,E.deleteAddElement=s.deleteAddElement,E.showFrameTabs=u,E.initAddElementTools=d.initAddElementTools,E.showInfoBox=l.showInfoBox,E.closeQtyCaclulator=s.closeQtyCaclulator,E.setValueQty=s.setValueQty,E.pressCulculator=s.pressCulculator,E.confirmGrid=s.confirmGrid,E.setGridToAll=s.setGridToAll,E.closeGridSelectorDialog=s.closeGridSelectorDialog}e.$inject=["$timeout","$filter","globalConstants","GlobalStor","ProductStor","UserStor","AuxStor","MainServ","AddElementMenuServ","AddElementsServ","DesignServ"],angular.module("MainModule").controller("addElementMenuCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(e){u.config.activeMenuItem=u.config.activeMenuItem===e?0:e}function s(){r.order.is_instalment=0,r.order.instalment_id=0,r.order.selectedInstalmentPeriod=0,r.order.selectedInstalmentPercent=0,u.config.activeMenuItem=0}function d(){n.cart.isMasterDialog=1}function c(){r.order.is_instalment?n.cart.isCreditDialog=1:n.cart.isOrderDialog=1}var u=this;u.G=i,u.U=o,u.O=r,u.C=n,u.config={activeMenuItem:!1,month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL"),DELAY_START:t.STEP,typing:"on"},u.DELIVERY=e("translate")("cart.DELIVERY"),u.SELF_EXPORT=e("translate")("cart.SELF_EXPORT"),u.FLOOR=e("translate")("cart.FLOOR"),u.ASSEMBLING=e("translate")("cart.ASSEMBLING"),u.WITHOUT_ASSEMBLING=e("translate")("cart.WITHOUT_ASSEMBLING"),u.FREE=e("translate")("cart.FREE"),u.PAYMENT_BY_INSTALMENTS=e("translate")("cart.PAYMENT_BY_INSTALMENTS"),u.WITHOUT_INSTALMENTS=e("translate")("cart.WITHOUT_INSTALMENTS"),u.DELIVERY_DATE=e("translate")("cart.DELIVERY_DATE"),u.FIRST_PAYMENT_LABEL=e("translate")("cart.FIRST_PAYMENT_LABEL"),u.DATE_DELIVERY_LABEL=e("translate")("cart.DATE_DELIVERY_LABEL"),u.MONTHLY_PAYMENT_LABEL=e("translate")("cart.MONTHLY_PAYMENT_LABEL"),u.TOTAL_PRICE_LABEL=e("translate")("cart.TOTAL_PRICE_LABEL"),u.ORDER=e("translate")("cart.ORDER"),u.MEASURE=e("translate")("cart.MEASURE"),u.selectMenuItem=l,u.closeInstalment=s,u.selectFloorPrice=a.selectFloorPrice,u.selectAssembling=a.selectAssembling,u.selectInstalment=a.selectInstalment,u.openMasterDialog=d,u.openOrderDialog=c,u.swipeDiscountBlock=a.swipeDiscountBlock}e.$inject=["$filter","globalConstants","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ"],angular.module("CartModule").controller("CartMenuCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d){function c(e){(a.global.isQtyCalculator||a.global.isSizeCalculator)&&o.finishCalculators(),a.global.activePanel=a.global.activePanel===e?0:e,a.global.showRoomSelectorDialog=0,a.global.configMenuTips=0,a.global.isShowCommentBlock=0,a.global.isTemplateTypeMenu=0,i.stopStartProg(),r.setDefaultAuxParam(),n.removeGlassEventsInSVG(),a.global.showGlassSelectorDialog=0}function u(){r.inputProductInOrder()&&r.goToCart()}function p(){var e=_.config.TOOLTIP.length;++a.global.configMenuTips,a.global.configMenuTips===e&&(a.global.configMenuTips=0,a.global.activePanel=1,a.global.showRoomSelectorDialog=0)}var _=this;_.constants=t,_.G=a,_.O=l,_.P=s,_.U=d,_.config={TOOLTIP:["",e("translate")("mainpage.TEMPLATE_TIP"),e("translate")("mainpage.PROFILE_TIP"),e("translate")("mainpage.GLASS_TIP")],DELAY_START:t.STEP,DELAY_SHOW_CONFIG_LIST:5*t.STEP,DELAY_SHOW_FOOTER:5*t.STEP,DELAY_TYPE_ITEM_TITLE:10*t.STEP,DELAY_SHOW_U_COEFF:20*t.STEP,DELAY_GO_TO_CART:2*t.STEP,typing:"on"},_.CONFIGMENU_CONFIGURATION=e("translate")("mainpage.CONFIGMENU_CONFIGURATION"),_.CONFIGMENU_SIZING=e("translate")("mainpage.CONFIGMENU_SIZING"),_.MM=e("translate")("mainpage.MM"),_.CONFIGMENU_PROFILE=e("translate")("mainpage.CONFIGMENU_PROFILE"),_.CONFIGMENU_GLASS=e("translate")("mainpage.CONFIGMENU_GLASS"),_.CONFIGMENU_HARDWARE=e("translate")("mainpage.CONFIGMENU_HARDWARE"),_.CONFIGMENU_LAMINATION=e("translate")("mainpage.CONFIGMENU_LAMINATION"),_.CONFIGMENU_LAMINATION_TYPE=e("translate")("mainpage.CONFIGMENU_LAMINATION_TYPE"),_.CONFIGMENU_ADDITIONAL=e("translate")("mainpage.CONFIGMENU_ADDITIONAL"),_.CONFIGMENU_NO_ADDELEMENTS=e("translate")("mainpage.CONFIGMENU_NO_ADDELEMENTS"),_.CONFIGMENU_IN_CART=e("translate")("mainpage.CONFIGMENU_IN_CART"),_.SAVE=e("translate")("settings.SAVE"),_.LETTER_M=e("translate")("common_words.LETTER_M"),_.HEATCOEF_VAL=e("translate")("mainpage.HEATCOEF_VAL"),_.selectConfigPanel=c,_.inputProductInOrder=u,_.showNextTip=p}e.$inject=["$filter","globalConstants","GeneralServ","MainServ","AddElementMenuServ","DesignServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").controller("ConfigMenuCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d){function c(i){switch(p.activeMenuItem=p.activeMenuItem===i?0:i,i){case 1:o.stopStartProg(),e.path("/location");break;
case 2:n.getCurrentGeolocation(),p.activeMenuItem=0;break;case 3:o.setPreviosPage(),e.path("/main");break;case 4:e.path("/cart");break;case 5:n.createAddElementsProduct();break;case 6:o.stopStartProg(),n.gotoHistoryPage();break;case 7:o.setPreviosPage(),e.path("/settings");break;case 8:if(p.activeMenuItem=0,d.userInfo.factoryLink.length)if(a.global.isDevice){var r=window.open(d.userInfo.factoryLink);r.close()}else t.open(d.userInfo.factoryLink);break;case 9:n.switchVoiceHelper()}}function u(){p.activeMenuItem=0,n.clickNewProject()}var p=this;p.G=a,p.O=l,p.P=s,p.config={DELAY_SHOW_STEP:.2,DELAY_SHOW_NAV_LIST:5*r.STEP,DELAY_SHOW_NAVICON:10*r.STEP,DELAY_TYPE_NAVTITLE:10*r.STEP,DELAY_TYPE_DIVIDER:10*r.STEP,DELAY_SHOW_ORDERS:35*r.STEP,DELAY_SHOW_NEWCALC_BTN:35*r.STEP,typing:"on"},p.activeMenuItem=0,p.NAVMENU_GEOLOCATION=i("translate")("mainpage.NAVMENU_GEOLOCATION"),p.NAVMENU_CURRENT_GEOLOCATION=i("translate")("mainpage.NAVMENU_CURRENT_GEOLOCATION"),p.NAVMENU_CALCULATIONS=i("translate")("mainpage.NAVMENU_CALCULATIONS"),p.NAVMENU_CURRENT_CALCULATION=i("translate")("mainpage.NAVMENU_CURRENT_CALCULATION"),p.NAVMENU_CART=i("translate")("mainpage.NAVMENU_CART"),p.NAVMENU_ADD_ELEMENTS=i("translate")("mainpage.NAVMENU_ADD_ELEMENTS"),p.NAVMENU_ALL_CALCULATIONS=i("translate")("mainpage.NAVMENU_ALL_CALCULATIONS"),p.NAVMENU_APPENDIX=i("translate")("mainpage.NAVMENU_APPENDIX"),p.NAVMENU_SETTINGS=i("translate")("mainpage.NAVMENU_SETTINGS"),p.NAVMENU_MORE_INFO=i("translate")("mainpage.NAVMENU_MORE_INFO"),p.NAVMENU_VOICE_HELPER=i("translate")("mainpage.NAVMENU_VOICE_HELPER"),p.NAVMENU_NEW_CALC=i("translate")("mainpage.NAVMENU_NEW_CALC"),p.selectMenuItem=c,p.clickNewProject=u}e.$inject=["$location","$window","$filter","globalConstants","GeneralServ","NavMenuServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").controller("NavMenuCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(){n.cart.isAllAddElems=0,n.cart.allAddElemsOrder.length=0,n.cart.addElemsOrderPriceTOTAL=0,n.cart.isSelectedProduct=0,a.aux.showAddElementsMenu=0,a.aux.addElementGroups.length=0,a.aux.searchingWord=""}function s(e){c(e),r.joinAllAddElements(),n.cart.isExistAddElems?i.showAllAddElements():l(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function d(){c(),i.calculateAddElemsProductsPrice(),r.calculateOrderPrice(),r.joinAllAddElements(),l()}function c(e){for(var t,i,r=o.order.products.length;--r>-1;)for(t=o.order.products[r].chosenAddElements.length;--t>-1;)if(i=o.order.products[r].chosenAddElements[t].length)if(e)for(;--i>-1;)o.order.products[r].chosenAddElements[t][i].id===e.id&&o.order.products[r].chosenAddElements[t][i].element_width===e.element_width&&o.order.products[r].chosenAddElements[t][i].element_height===e.element_height&&o.order.products[r].chosenAddElements[t].splice(i,1);else o.order.products[r].chosenAddElements[t].length=0}function u(e){S.config.selectedAddElemUnit=e,p(),S.config.isAddElemUnitDetail=1}function p(){var e,t,i=n.cart.allAddElements.length;S.config.addElemUnitProducts.length=0,console.log("      ",n.cart.allAddElements);for(var r=0;i>r;r++){e=n.cart.allAddElements[r].length;for(var a=0;e>a;a++)if(n.cart.allAddElements[r][a].id===S.config.selectedAddElemUnit.id&&n.cart.allAddElements[r][a].element_width===S.config.selectedAddElemUnit.element_width&&n.cart.allAddElements[r][a].element_height===S.config.selectedAddElemUnit.element_height)if(o.order.products[r].is_addelem_only)t={productIndex:r,is_addelem_only:o.order.products[r].is_addelem_only,name:n.cart.allAddElements[r][a].name,element_width:n.cart.allAddElements[r][a].element_width,element_height:n.cart.allAddElements[r][a].element_height,element_qty:n.cart.allAddElements[r][a].element_qty,elementPriceDis:n.cart.allAddElements[r][a].elementPriceDis},S.config.addElemUnitProducts.push(t);else if(t={productIndex:r,is_addelem_only:o.order.products[r].is_addelem_only,element_qty:n.cart.allAddElements[r][a].element_qty/o.order.products[r].product_qty},o.order.products[r].product_qty>1){for(var l=[],s=1*o.order.products[r].product_qty;--s>-1;)l.push(t);S.config.addElemUnitProducts.push(l)}else S.config.addElemUnitProducts.push(t)}console.warn("addElemUnitProducts++++",S.config.addElemUnitProducts)}function _(){S.config.isAddElemUnitDetail=0,S.config.selectedAddElemUnit={id:0},S.config.isLinkExplodeMenu=0}function E(e,t){console.info("delet----",S.config.selectedAddElemUnit),t?i.decreaseProductQty(e[0].productIndex):(m(e),r.joinAllAddElements()),n.cart.isExistAddElems?(i.showAllAddElements(),p(),g()):(_(),l()),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function m(e){for(var t,i=o.order.products[e].chosenAddElements.length;--i>-1;)if(t=o.order.products[e].chosenAddElements[i].length)for(;--t>-1;)o.order.products[e].chosenAddElements[i][t].id===S.config.selectedAddElemUnit.id&&o.order.products[e].chosenAddElements[i][t].element_width===S.config.selectedAddElemUnit.element_width&&o.order.products[e].chosenAddElements[i][t].element_height===S.config.selectedAddElemUnit.element_height&&o.order.products[e].chosenAddElements[i].splice(t,1)}function g(){for(var e=n.cart.allAddElemsOrder.length,t=1;--e>-1;)n.cart.allAddElemsOrder[e].id===S.config.selectedAddElemUnit.id&&(S.config.selectedAddElemUnit.element_qty=angular.copy(n.cart.allAddElemsOrder[e].element_qty),--t);t&&_()}function f(e,t){console.log(e),console.log(t.center),S.config.isLinkExplodeMenu=!S.config.isLinkExplodeMenu,S.config.explodeMenuTop=t.center.y-50,S.config.explodeMenuLeft=t.center.x-30}function T(e,t){var n=d3.max(o.order.products.map(function(e){return e.product_id})),a=angular.copy(o.order.products[e[0].productIndex]),l=a.product_qty-1;if(a.product_qty=1,t)for(o.order.products[e[0].productIndex].product_qty=1;--l>-1;)i.addCloneProductInOrder(a,n);else o.order.products[e[0].productIndex].product_qty-=1,i.addCloneProductInOrder(a,n);S.config.isLinkExplodeMenu=0,r.joinAllAddElements(),i.showAllAddElements(),p(),g(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function h(){S.config.isSwipeProdSelector=!S.config.isSwipeProdSelector}function I(e){var t=n.cart.selectedProducts[e].length;t?(n.cart.selectedProducts[e].length=0,A()):(n.cart.selectedProducts[e].push(1),n.cart.isSelectedProduct=1)}function A(){for(var e=0,t=n.cart.selectedProducts.length;--t>-1;)n.cart.selectedProducts[t].length&&e++;n.cart.isSelectedProduct=e?1:0}var S=this;S.constants=e,S.config={addElementDATA:t.addElementDATA,selectedAddElemUnit:{id:0},isAddElemUnitDetail:0,addElemUnitProducts:[],isLinkExplodeMenu:0,explodeMenuTop:0,explodeMenuLeft:0,isSwipeProdSelector:0},S.closeAllAddElemsPanel=l,S.deleteAllAddElems=d,S.deleteAddElemsItem=s,S.showAddElemUnitDetail=u,S.closeAddElemUnitDetail=_,S.deleteAddElemUnit=E,S.toggleExplodeLinkMenu=f,S.explodeUnitToProduct=T,S.swipeProductSelector=h,S.selectProductToAddElem=I}e.$inject=["globalConstants","GeneralServ","CartServ","CartMenuServ","OrderStor","CartStor","AuxStor"],angular.module("CartModule").controller("AddElemCartCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l){var s=this;s.G=o,s.P=n,s.U=a,s.A=l,s.config={addElementDATA:t.addElementDATA,DELAY_START:e.STEP,DELAY_SHOW_ELEMENTS_MENU:6*e.STEP,filteredGroups:[],typing:"on"},s.selectAddElement=i.selectAddElement,s.initAddElementTools=i.initAddElementTools,s.deleteAddElement=r.deleteAddElement,s.deleteAllAddElements=r.deleteAllAddElements,s.closeAddElementListView=i.closeAddElementListView,s.pressCulculator=r.pressCulculator}e.$inject=["globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","GlobalStor","ProductStor","UserStor","AuxStor"],angular.module("MainModule").controller("AddElementsListCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(){n.aux.isWindowSchemeDialog=!0}function s(){n.aux.isWindowSchemeDialog=!1}var d=this;d.constants=e,d.G=o,d.P=a,d.A=n,d.config={DELAY_START:e.STEP,addElementDATA:t.addElementDATA,DELAY_SHOW_INSIDESLOPETOP:20*e.STEP,DELAY_SHOW_INSIDESLOPERIGHT:22*e.STEP,DELAY_SHOW_INSIDESLOPELEFT:21*e.STEP,DELAY_SHOW_FORCECONNECT:30*e.STEP,DELAY_SHOW_BALCONCONNECT:35*e.STEP,DELAY_SHOW_BUTTON:40*e.STEP,DELAY_SHOW_ELEMENTS_MENU:12*e.STEP,typing:"on"},d.selectAddElement=i.selectAddElement,d.initAddElementTools=i.initAddElementTools,d.pressCulculator=r.pressCulculator,d.openAddElementListView=i.openAddElementListView,d.showWindowScheme=l,d.closeWindowScheme=s}e.$inject=["globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","GlobalStor","AuxStor","ProductStor"],angular.module("MainModule").controller("AddElementsCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c){function u(e,t){g.config.selectGlassId=e,g.config.selectGlassName=t,a.global.showGlassSelectorDialog=1,o.initAllGlassXGlass()}function p(){var e=d.design.selectedGlass.length;if(e){for(;--e>-1;){var t=d.design.selectedGlass[e].attributes.block_id.nodeValue;i.setGlassToTemplateBlocks(t,g.config.selectGlassId,g.config.selectGlassName)}E(),m()}}function _(){i.setGlassToTemplateBlocks(0,g.config.selectGlassId,g.config.selectGlassName),E(),m()}function E(){a.global.selectLastGlassId=g.config.selectGlassId,d.design.selectedGlass.length=0,i.setCurrentGlass(s.product,a.global.selectLastGlassId),n.createSVGTemplate(s.product.template_source,s.product.profileDepths).then(function(e){s.product.template=angular.copy(e);var t=s.product.hardware.id?s.product.hardware.id:0;i.preparePrice(s.product.template,s.product.profile.id,s.product.glass,t,s.product.lamination.lamination_in_id)})}function m(){o.removeGlassEventsInSVG(),a.global.showGlassSelectorDialog=!a.global.showGlassSelectorDialog}var g=this;g.constants=t,g.G=a,g.P=s,g.config={selectGlassId:0,selectGlassName:"",camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},g.ENERGY_SAVE=e("translate")("panels.ENERGY_SAVE"),g.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),g.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),g.SELECT_ALL=e("translate")("mainpage.SELECT_ALL"),g.SELECT_GLASS_WARN=e("translate")("mainpage.SELECT_GLASS_WARN"),g.selectGlass=u,g.confirmGlass=p,g.setGlassToAll=_,g.closeGlassSelectorDialog=m,g.showInfoBox=i.showInfoBox}e.$inject=["$filter","globalConstants","MainServ","AnalyticsServ","DesignServ","SVGServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor"],angular.module("MainModule").controller("GlassesCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l){function s(e){o.product.hardware.id!==e&&(a.setCurrentHardware(o.product,e),a.preparePrice(o.product.template,o.product.profile.id,o.product.glass,o.product.hardware.id,o.product.lamination.lamination_in_id),l.sendAnalyticsData(n.userInfo.id,r.order.id,o.product.template_id,e,3))}var d=this;d.G=i,d.P=o,d.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.BRAND=e("translate")("panels.BRAND"),d.COUNTRY=e("translate")("panels.COUNTRY"),d.CORROSION_COEFF=e("translate")("panels.CORROSION_COEFF"),d.BURGLAR_COEFF=e("translate")("panels.BURGLAR_COEFF"),d.selectHardware=s,d.showInfoBox=a.showInfoBox}e.$inject=["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor","MainServ","AnalyticsServ"],angular.module("MainModule").controller("HardwaresCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(e){for(var t=r.global.laminats.length;--t>-1;)r.global.laminats[t].type_id===e&&(r.global.laminats[t].isActive=!r.global.laminats[t].isActive,i.laminatFiltering())}function s(e){i.setCurrLamination(e),i.setProfileByLaminat(e).then(function(){})}var d=this;d.G=r,d.P=n,d.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.LAMINAT_INSIDE=e("translate")("panels.LAMINAT_INSIDE"),d.LAMINAT_OUTSIDE=e("translate")("panels.LAMINAT_OUTSIDE"),d.selectLaminat=s,d.initLaminatFilter=l,d.showInfoBox=i.showInfoBox}e.$inject=["$filter","globalConstants","MainServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").controller("LaminationsCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l){function s(e){a.product.profile.id!==e&&(i.setCurrLamination(),i.setCurrentProfile(a.product,e).then(function(){a.product.glass.length=0,i.parseTemplate().then(function(){i.laminatFiltering(),r.sendAnalyticsData(l.userInfo.id,n.order.id,a.product.template_id,e,1)})}))}var d=this;d.G=o,d.P=a,d.config={camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.COUNTRY=e("translate")("panels.COUNTRY"),d.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),d.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),d.selectProfile=s,d.showInfoBox=i.showInfoBox}e.$inject=["$filter","globalConstants","MainServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").controller("ProfilesCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d){function c(){l.global.isTemplateTypeMenu=!l.global.isTemplateTypeMenu}function u(e){function i(){4===e&&r.setDefaultDoorConfig(),l.global.isChangedTemplate=0,n.initNewTemplateType(e)}l.global.isTemplateTypeMenu=0,l.global.isChangedTemplate?o.confirmAlert(t("translate")("common_words.NEW_TEMPLATE_TITLE"),t("translate")("common_words.TEMPLATE_CHANGES_LOST"),i):n.initNewTemplateType(e)}function p(){_.G.global.activePanel=0,e.path("/design")}var _=this;_.constants=i,_.G=l,_.O=s,_.P=d,_.config={DELAY_TEMPLATE_ELEMENT:5*i.STEP,typing:"on"},a.getTemplateImgIcons(function(e){e.status?_.templatesImgs=e.data.templateImgs:console.log(e)}),_.selectNewTemplate=n.selectNewTemplate,_.toggleTemplateType=c,_.selectNewTemplateType=u,_.gotoConstructionPage=p}e.$inject=["$location","$filter","globalConstants","MainServ","GeneralServ","TemplatesServ","optionsServ","GlobalStor","OrderStor","ProductStor"],angular.module("MainModule").controller("TemplatesCtrl",e)}(),function(){function e(e,t){var i=this;i.A=t,i.selectAddElement=e.selectAddElement}e.$inject=["AddElementsServ","AuxStor"],angular.module("MainModule").controller("AddElemGroupMenuCtrl",e)}(),function(){function e(e){function t(){e.global.isAlert=0,e.global.confirmAction()}var i=this;i.G=e,i.clickYes=t}e.$inject=["GlobalStor"],angular.module("MainModule").controller("AlertCtrl",e)}(),function(){function e(e){function t(){e.global.isInfoBox=0,e.global.infoTitle="",e.global.infoImg="",e.global.infoLink="",e.global.infoDescrip=""}var i=this;i.G=e,i.closeInfoBox=t}e.$inject=["GlobalStor"],angular.module("MainModule").controller("infoBoxCtrl",e)}(),function(){function e(e){var t=this;t.G=e}e.$inject=["GlobalStor"],angular.module("MainModule").controller("LoaderCtrl",e)}(),function(){function e(e,t,i,r,o,n){function a(e){o.cart.submitted=!0,e.$valid&&n.sendOrder()}var l=this;l.O=i,l.C=o,l.U=r,l.config={month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL")},l.locations=t.global.locations.cities.filter(function(e){return e.countryId===r.userInfo.countryId}),l.submitForm=a,l.changeLocation=n.changeLocation,l.selectCity=n.selectCity,l.closeOrderDialog=n.closeOrderDialog}e.$inject=["$filter","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ"],angular.module("CartModule").controller("OrderFormCtrl",e)}(),function(){function e(e){var t=this;t.setValueQty=e.setValueQty,t.closeQtyCaclulator=e.closeQtyCaclulator,t.pressCulculator=e.pressCulculator}e.$inject=["AddElementMenuServ"],angular.module("MainModule").controller("qtyCalculatorCtrl",e)}(),function(){function e(e,t,i,r,o,n,a){function l(){o.global.isReport=!o.global.isReport,d(),o.global.isReport&&i.selectLocalDB(i.tablesLocalDB.elements_groups.tableName).then(function(e){c.config.reportMenu=e.filter(function(e){return e.position>0}),c.config.reportMenu.push({id:0,name:t("translate")("common_words.ALL")})}),e.$apply()}function s(e){d(e),e?c.config.reportFilterId=e:c.config.reportFilterId=void 0}function d(e){var t=e?n.product.report.filter(function(t){return t.element_group_id===e}):angular.copy(n.product.report);t.length?c.config.reportPriceTotal=r.roundingValue(t.reduce(function(e,t){return{priceReal:e.priceReal+t.priceReal}}).priceReal,2):c.config.reportPriceTotal=0}var c=this;c.G=o,c.P=n,c.U=a,c.config={reportMenu:[],reportFilterId:void 0,reportPriceTotal:0},c.sortReport=s,$(".main-content").off("keypress").keypress(function(e){(5===a.userInfo.user_type||7===a.userInfo.user_type)&&(82===e.keyCode||114===e.keyCode)&&l()})}e.$inject=["$rootScope","$filter","localDB","GeneralServ","GlobalStor","ProductStor","UserStor"],angular.module("MainModule").controller("ReportCtrl",e)}(),function(){function e(e,t,i,r,o){function n(){t.global.isShowCommentBlock||(t.global.showRoomSelectorDialog=1)}function a(){t.global.isShowCommentBlock=!t.global.isShowCommentBlock}var l=this;l.G=t,l.O=i,l.P=r,l.U=o,l.config={DELAY_SHOW_COEFF:20*e.STEP,DELAY_SHOW_ALLROOMS_BTN:15*e.STEP,typing:"on"},l.showRoomSelectorDialog=n,l.switchComment=a}e.$inject=["globalConstants","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").controller("RoomInfoCtrl",e)}(),function(){function e(e,t,i,r,o,n){function a(e){i.selectNewTemplate(r.global.rooms[e].template_id-1,e+1)}var l=this;l.G=r,l.P=o,l.U=n,l.config={DELAY_SHOW_ROOM:2*e.STEP},l.selectRoom=a,l.closeRoomSelectorDialog=t.closeRoomSelectorDialog}e.$inject=["globalConstants","MainServ","TemplatesServ","GlobalStor","ProductStor","UserStor"],angular.module("MainModule").controller("RoomSelectorCtrl",e)}(),function(){function e(e,t,i,r,o,n){function a(){""!==p.searchingWord?(1===p.searchingWord.length&&o.createAddElementGroups(),i.aux.searchingWord=p.searchingWord):l()}function l(){p.searchingWord="",i.aux.addElementGroups.length=0,i.aux.searchingWord=p.searchingWord,n.closeAddElementsMenu()}function s(){p.searchingWord=p.searchingWord.slice(0,-1),""===p.searchingWord?l():i.aux.searchingWord=p.searchingWord}function d(){""!==p.searchingWord&&(r.history.searchingWord=p.searchingWord)}function c(){p.searchingWord="",r.history.searchingWord="",r.history.isOrderSearch=0}function u(){p.searchingWord=p.searchingWord.slice(0,-1),r.history.searchingWord=p.searchingWord}var p=this;p.G=t,"main"===t.global.currOpenPage||"cart"===t.global.currOpenPage?(p.placeholder=e("translate")("add_elements.INPUT_ADD_ELEMENT"),p.checkChanges=a,p.cancelSearching=l,p.deleteSearchChart=s):"history"===t.global.currOpenPage&&(p.placeholder=e("translate")("history.SEARCH_PLACEHOLDER"),p.checkChanges=d,p.cancelSearching=c,p.deleteSearchChart=u)}e.$inject=["$filter","GlobalStor","AuxStor","HistoryStor","AddElementsServ","AddElementMenuServ"],angular.module("MainModule").controller("searchCtrl",e)}(),function(){function e(e,t,i,r){var o=this;o.isDesignPage=!1,o.D=t,"main"===e.global.currOpenPage?(o.isDesignPage=!1,o.setValueSize=i.setValueSize,o.deleteLastNumber=i.deleteLastNumber,o.closeSizeCaclulator=i.closeSizeCaclulator):(o.isDesignPage=!0,o.setValueSize=r.setValueSize,o.deleteLastNumber=r.deleteLastNumber,o.closeSizeCaclulator=r.closeSizeCaclulator),o.pressCulculator=i.pressCulculator}e.$inject=["GlobalStor","DesignStor","AddElementMenuServ","DesignServ"],angular.module("MainModule").controller("sizeCalculatorCtrl",e)}(),function(){function e(e,t,i){function r(e){t.global.isNavMenu=!t.global.isNavMenu,t.global.isConfigMenu=!t.global.isConfigMenu}function o(e){t.global.isNavMenu&&(t.global.isNavMenu=0,t.global.isConfigMenu=1)}function n(e){t.global.isNavMenu||(t.global.isNavMenu=1,t.global.isConfigMenu=0)}var a=this;a.G=t,a.U=i,a.config={DELAY_SHOW_USER_INFO:40*e.STEP,typing:"on",checked:!1},a.swipeMainPage=r,a.swipeLeft=o,a.swipeRight=n}e.$inject=["globalConstants","GlobalStor","UserStor"],angular.module("MainModule").controller("UserInfoCtrl",e)}(),function(){function e(e,t,i,r,o,n,a,l,s){function d(e,t){y.config.selectedSetting=e,S(t.target.id)}function c(e,t){13==event.which&&p(e,t)}function u(e,t){p(e,t)}function p(e,t){var r={};switch(e){case"user-name":r.name=t;break;case"user-address":r.address=t;break;case"user-email":var o=y.config.mailReg.test(t);o?(y.config.isEmailError=0,r.email=t):y.config.isEmailError=1}$.isEmptyObject(r)||i.updateLocalServerDBs(i.tablesLocalDB.users.tableName,s.userInfo.id,r)}function _(){y.config.isEmailError=0}function E(){y.config.tempAddPhone&&""!==y.config.tempAddPhone?T():m()}function m(){y.config.isInsertPhone=!y.config.isInsertPhone,y.config.tempAddPhone="",y.config.isErrorPhone=0,N()}function g(){y.config.isInsertPhone=0,y.config.isErrorPhone=0}function f(){13==event.which&&T()}function T(){var e=y.config.regex.test(y.config.tempAddPhone);e?(y.config.isInsertPhone=0,y.config.isErrorPhone=0,y.config.addPhones.push(y.config.tempAddPhone),I(y.config.addPhones)):y.config.isErrorPhone=1}function h(e){y.config.addPhones.splice(e,1),I(y.config.addPhones)}function I(e){var t=e.join(",");s.userInfo.city_phone=t,i.updateLocalServerDBs(i.tablesLocalDB.users.tableName,s.userInfo.id,{city_phone:t}),y.config.tempAddPhone=""}function A(){s.userInfo=s.setDefaultUser(),o.global=o.setDefaultGlobal(),n.order=n.setDefaultOrder(),a.product=a.setDefaultProduct(),l.aux=l.setDefaultAuxiliary(),e.path("/login")}function S(e){setTimeout(function(){$("#"+e).find("input").focus()},100)}function N(){setTimeout(function(){$(".set-input-phone").focus()},100)}var y=this;y.U=s,y.config={DELAY_START:t.STEP,DELAY_SHOW_ICONS:10*t.STEP,isInsertPhone:!1,isEmailError:!1,addPhones:[],tempAddPhone:"",regex:t.REG_PHONE,mailReg:t.REG_MAIL,typing:"on"},o.global.currOpenPage="settings",s.userInfo.city_phone&&(y.config.addPhones=s.userInfo.city_phone.split(",")),y.changeSettingData=d,y.appendInputPhone=m,y.cancelAddPhone=g,y.saveChanges=c,y.saveChangesBlur=u,y.changeEmail=_,y.addNewPhone=E,y.saveChangesPhone=f,y.deletePhone=h,y.gotoPasswordPage=r.gotoPasswordPage,y.gotoLanguagePage=r.gotoLanguagePage,y.gotoLocationPage=r.gotoLocationPage,y.closeSettingsPage=r.closeSettingsPage,y.logOut=A}e.$inject=["$location","globalConstants","localDB","SettingServ","GlobalStor","OrderStor","ProductStor","AuxStor","UserStor"],angular.module("SettingsModule").controller("SettingsCtrl",e)}(),function(){function calendarScrollDir($filter,HistoryStor){return{restrict:"E",transclude:!0,replace:!0,scope:{calendarType:"=",orderType:"="},template:function(e,t){var i=1*t.calendarType,r="",o="",n="",a="",l="",s="",d="",c="",u="",p=$filter("translate")("common_words.MONTHS"),_=p.split(", "),E=_.length,m=1,g=0,f=2010,T=(new Date).getFullYear()+1;for(i?(o="date_range_from",n="date_from",a="from_date",l="from_date_"+t.orderType,s="from_month",d="from_month_"+t.orderType,c="from_fullYear",u="from_fullYear_"+t.orderType):(o="date_range_to",n="date_to",a="to_date",l="to_date_"+t.orderType,s="to_month",d="to_month_"+t.orderType,c="to_fullYear",u="to_fullYear_"+t.orderType),r='<div class="date_range outside"><div class="date_range_container"><div class="'+o+'"><form name="'+n+'"><div class="lines"><div></div></div><select class="date" id="'+a+'" name="'+l+'">';32>m;)r+='<option value="'+m+'">'+m+"</option>",m++;for(r+='</select><select class="date" id="'+s+'" name="'+d+'">';E>g;)r+='<option value="'+g+'">'+_[g]+"</option>",g++;for(r+='</select><select class="date" id="'+c+'" name="'+u+'">';T>=f;)r+='<option value="'+f+'">'+f+"</option>",f++;return r+="</select></form></div></div></div>"},link:function(scope,element,attrs){function getIndexForValue(e,t){for(var i=e.options.length;--i>-1;)if(e.options[i].value==t)return i}function update(e,t,i){$("."+e).find("#"+t+"_date").drum("setIndex",i.getDate()-1),$("."+e).find("#"+t+"_month").drum("setIndex",i.getMonth()),$("."+e).find("#"+t+"_fullYear").drum("setIndex",getIndexForValue($("#"+t+"_fullYear")[0],i.getFullYear()))}$(function(){$("select.date").drum({onChange:function(elem){var elemNameArr=elem.name.split("_"),section=elemNameArr[0],isOrder=1*elemNameArr[2],arr={date:"setDate",month:"setMonth",fullYear:"setFullYear"},date=new Date;for(var s in arr){var i=$("form[name='date_"+section+"'] select[id='"+section+"_"+s+"']")[0].value;eval("date."+arr[s]+"("+i+")")}isOrder?(update("history-view",section,date),"from"===section?HistoryStor.history.startDate=date:HistoryStor.history.finishDate=date):(update("draft-view",section,date),"from"===section?HistoryStor.history.startDateDraft=date:HistoryStor.history.finishDateDraft=date),scope.$apply()}});var now=new Date;update("history-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("history-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate()))})}}}calendarScrollDir.$inject=["$filter","HistoryStor"],angular.module("HistoryModule").directive("calendarScroll",calendarScrollDir)}(),function(){function e(e,t,i,r){return{restrict:"E",transclude:!0,link:function(o,n,a){var l=new Date(r.order.order_date).getDate(),s=(new Date).setDate(l+i.global.deliveryCoeff.min_time-1),d=e("date")(r.order.new_delivery_date,"dd.MM.yyyy"),c=e("date")(r.order.delivery_date,"dd.MM.yyyy");$(function(){var i={flat:!0,format:"d.m.Y",locale:{days:[],daysShort:[],daysMin:[],monthsShort:[],months:[]},date:d,min:s,change:function(e){t.checkDifferentDate(c,e),o.$apply()}};i.locale.monthsShort=e("translate")("common_words.MONTHS_SHOT").split(", "),i.locale.months=e("translate")("common_words.MONTHS").split(", "),n.pickmeup(i)})}}}e.$inject=["$filter","CartMenuServ","GlobalStor","OrderStor"],angular.module("CartModule").directive("calendar",e)}(),function(){function e(e,t){return{scope:{fileread:"="},link:function(i,r,o){r.bind("change",function(r){var o=new FormData,n=new FileReader;o.append("user",t.userInfo.id),o.append("file",r.target.files[0]),n.onload=function(t){i.$apply(function(){i.fileread=t.target.result,e.changeAvatar(i.fileread,o)})},n.readAsDataURL(r.target.files[0])})}}}e.$inject=["SettingServ","UserStor"],angular.module("BauVoiceApp").directive("fileread",e)}(),function(){function e(e){return function(t,i){var r,o=t.length,n=[];if(i&&i.length>2)for(r=i.toLowerCase();--o>-1;)0===t[o].fullLocation.toLowerCase().indexOf(r)&&n.push(t[o]);return n=e("orderBy")(n,"cityName",!1)}}e.$inject=["$filter"],angular.module("BauVoiceApp").filter("locationFilter",e)}(),function(){function e(e){return{restrict:"A",scope:{orderDate:"@",typeDate:"="},link:function(t,i,r){function o(t,r){var o,n,a,l,s;a=e("translate")("common_words.MONTHA").split(", "),""!==t?"order"===r?(o=t.split(" "),n=o[0].split("-"),s=parseInt(n[1],10)-1,l=n[2]+" "+a[s]+", "+n[0]):(n=t.split("/"),s=parseInt(n[0],10)-1,l=n[1]+" "+a[s]+", "+n[2]):(o=new Date,l=o.getDate()+" "+a[o.getMonth()]+", "+o.getFullYear()),r||""!==t?i.text(l):i.text("")}o(t.orderDate,t.typeDate),r.$observe("orderDate",function(){o(t.orderDate,t.typeDate)})}}}e.$inject=["$filter"],angular.module("HistoryModule").directive("orderDate",e)}(),function(){function e(){return function(e,t){function i(e,t){angular.forEach(e,function(e){angular.equals(e.order_style,t)&&r.push(e)})}var r=[];return"type"===t?(i(e,"order"),i(e,"master"),i(e,"done")):"first"===t?(angular.forEach(e,function(e){r.push(e)}),r.reverse()):angular.forEach(e,function(e){r.push(e)}),r}}angular.module("HistoryModule").filter("orderSorting",e)}(),function(){function e(){return{restrict:"A",scope:{priceFixed:"@",qtyElement:"@",currencyElement:"@"},link:function(e,t,i){function r(e,i,r){var o=parseFloat((Math.round(100*parseFloat(e))/100*i).toFixed(2))+" "+r;t.text(o)}r(e.priceFixed,e.qtyElement,e.currencyElement),i.$observe("qtyElement",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)}),i.$observe("priceFixed",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)})}}}angular.module("BauVoiceApp").directive("priceFixed",e)}(),function(){function e(e,t){function i(r,o){var n,a,l,s,d,c=2*e.STEP,u=64,p=o.find("#price").children(),_=p.length,E=$(p[0]).children().length,m=0;if(void 0===r)return!1;for(t.playSound(),n="string"==typeof r?r.split(""):r.toFixed(2).split(""),i.revertDigitState=function(){a.animate({top:0},"fast")},i.initDigit=function(){l=n.shift()},i.animateDigit=function(){s="."===l?(E-1)*u:(parseInt(l,10)+1)*u,a.delay(m*c).animate({top:-s/16+"rem"},"fast")},d=_;d>0;d--)a=$(p[m]),d>n.length?i.revertDigitState():(i.initDigit(),i.animateDigit()),m++}return{restrict:"E",replace:!0,transclude:!0,scope:{priceValue:"=",priceCurrency:"="},template:'<div class="price clearfix" data-output="priceValue"><div id="price" class="price-value"><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div></div><div id="currency" class="price-currency">{{ priceCurrency }}</div></div>',
link:function(e,t,r){e.$watch(r.output,function(e){i(e,t)})}}}e.$inject=["globalConstants","SoundPlayServ"],angular.module("BauVoiceApp").directive("price",e)}(),function(){function e(){return{scope:{showDelay:"@"},link:function(e,t,i){function r(){var i="unvisible";setTimeout(function(){t.removeClass(i)},1*e.showDelay)}i.$observe("showDelay",function(){r()})}}}angular.module("BauVoiceApp").directive("showDelay",e)}(),function(){function e(e,t,i,r,o){return{restrict:"E",replace:!0,transclude:!0,scope:{typeConstruction:"@",template:"=",templateWidth:"=",templateHeight:"="},link:function(n,a,l){function s(l,s,_){if(l&&!$.isEmptyObject(l)){var E,m,g,f,T,h,I,A,S=document.createElement("div"),N=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear"),y=.7,L={x:0,y:0};if("icon"===n.typeConstruction?y=1:"edit"===n.typeConstruction&&(y=.6),E=d3.select(S).append("svg").attr({width:s,height:_}),"icon"===n.typeConstruction?E.attr("class","tamlateIconSVG"):"setGlass"===n.typeConstruction?E.attr("id",e.SVG_ID_GLASS):"setGrid"===n.typeConstruction?E.attr("id",e.SVG_ID_GRID):E.attr("id",e.SVG_ID_EDIT),T=r.collectAllPointsOut(l.details),h=t.getMaxMinCoord(T),I=r.setTemplateScale(h,s,_,y),"icon"!==n.typeConstruction&&(L=r.setTemplatePosition(h,s,_,I)),m=E.append("g").attr({id:"main_group",transform:"translate("+L.x+", "+L.y+") scale("+I+","+I+")"}),"edit"===n.typeConstruction&&E.call(d3.behavior.zoom().translate([L.x,L.y]).scale(I).scaleExtent([0,8]).on("zoom",d)),"icon"!==n.typeConstruction){var O=m.append("defs"),C="M4.5,0C2.015,0,0,2.015,0,4.5v6c0,1.56,0.795,2.933,2,3.74V7.5C2,6.119,3.119,5,4.5,5S7,6.119,7,7.5v6.74c1.205-0.807,2-2.18,2-3.74v-6C9,2.015,6.985,0,4.5,0zM7,26.5C7,27.881,5.881,29,4.5,29l0,0C3.119,29,2,27.881,2,26.5v-19C2,6.119,3.119,5,4.5,5l0,0C5.881,5,7,6.119,7,7.5V26.5z";c(O,"dimHorL","-5, -5, 1, 8",-5,-2,0,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),c(O,"dimHorR","-5, -5, 1, 8",-5,-2,180,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),c(O,"dimVertL","4.2, -1, 8, 9",5,2,90,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),c(O,"dimVertR","4.2, -1, 8, 9",5,2,270,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),c(O,"dimArrow","4.2, -1, 8, 9",5,2,"auto",100,60,"M 0,0 L 4,2 L0,4 z","size-line"),c(O,"handleR","0 -1 9 32",4,23,90,29,49,C,"handle-mark"),c(O,"handleL","0 -1 9 32",5,23,270,29,49,C,"handle-mark"),c(O,"handleU","0 -1 9 32",-10,10,270,29,49,C,"handle-mark"),c(O,"handleD","0 -1 9 32",20,10,270,29,49,C,"handle-mark"),i.product.lamination.img_in_id>1&&O.append("pattern").attr("id","laminat").attr("patternUnits","userSpaceOnUse").attr("width",600).attr("height",400).append("image").attr("xlink:href","img/lamination/"+i.product.lamination.img_in_id+".jpg").attr("width",600).attr("height",400)}g=m.append("g").attr({id:"elem_group"}),f=m.append("g").attr({id:"dim_group"}),A=l.details.length;for(var R=1;A>R;R++)if(g.selectAll("path."+l.details[R].id).data(l.details[R].parts).enter().append("path").attr({block_id:l.details[R].id,parent_id:l.details[R].parent,"class":function(e){return"icon"===n.typeConstruction?"glass"===e.type?"glass-icon":"frame-icon":e.doorstep?"doorstep":"glass"===e.type?"glass":"frame"},item_type:function(e){return e.type},item_dir:function(e){return e.dir},item_id:function(e){return e.points[0].id},d:function(e){return e.path},fill:function(e){return i.product.lamination.img_in_id>1?"glass"!==e.type?"url(#laminat)":"":"#f9f9f9"}}),"icon"!==n.typeConstruction){if(l.details[R].sashOpenDir&&g.selectAll("path.sash_mark."+l.details[R].id).data(l.details[R].sashOpenDir).enter().append("path").classed("sash_mark",!0).attr({d:function(e){return N(e.points)},"marker-mid":function(e){var t=l.details[R].sashOpenDir.length;if(l.details[R].handlePos)if(1===t){if(2===l.details[R].handlePos)return"url(#handleR)";if(1===l.details[R].handlePos)return"url(#handleU)";if(4===l.details[R].handlePos)return"url(#handleL)";if(3===l.details[R].handlePos)return"url(#handleD)"}else if(2===t){if(e.points[1].fi<45||e.points[1].fi>315)return"url(#handleR)";if(e.points[1].fi>135&&e.points[1].fi<225)return"url(#handleL)"}}}),"edit"===n.typeConstruction&&1===l.details[R].level){var D=l.details[R].pointsOut.filter(function(e){return e.corner>0});g.selectAll("circle.corner_mark."+l.details[R].id).data(D).enter().append("circle").attr({block_id:l.details[R].id,"class":"corner_mark",parent_id:function(e){return e.id},cx:function(e){return e.x},cy:function(e){return e.y},r:0})}"setGlass"===n.typeConstruction&&(l.details[R].children.length||g.append("text").text(l.details[R].glassTxt).attr({"class":"glass-txt",x:l.details[R].center.x,y:l.details[R].center.y})),"setGrid"===n.typeConstruction&&!l.details[R].children.length&&l.details[R].gridId&&g.append("text").text(l.details[R].gridTxt).attr({"class":"glass-txt",x:l.details[R].center.x,y:l.details[R].center.y})}if("icon"!==n.typeConstruction){for(var v=l.dimension.dimX.length,b=l.dimension.dimY.length,P=l.dimension.dimQ.length,M=0;v>M;M++)u(0,l.dimension.dimX[M],f,N);for(var x=0;b>x;x++)u(1,l.dimension.dimY[x],f,N);for(var w=0;P>w;w++)p(l.dimension.dimQ[w],f,N)}a.html(S),o.removeAllEventsInSVG(),"edit"===n.typeConstruction&&(o.initAllImposts(),o.initAllGlass(),o.initAllArcs(),o.initAllDimension())}}function d(){d3.select("#main_group").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function c(e,t,i,r,o,n,a,l,s,d){e.append("marker").classed(d,!0).attr({id:t,viewBox:i,refX:r,refY:o,markerWidth:a,markerHeight:l,orient:n}).append("path").attr("d",s)}function u(e,t,i,r){var o,a,l=-150,s=50,d=-20,c=160,u=70,p=20,_=[],E=[],m=[],g={x:e?d:t.from,y:e?t.from:d},f={x:e?l:t.from,y:e?t.from:l},T={x:e?d:t.to,y:e?t.to:d},h={x:e?l:t.to,y:e?t.to:l},I={x:e?l+s:t.from,y:e?t.from:l+s},A={x:e?l+s:t.to,y:e?t.to:l+s};_.push(g,f),E.push(T,h),m.push(I,A),o=i.append("g").attr({"class":function(){return e?t.level?"dim_blockY":"dim_block dim_hidden":t.level?"dim_blockX":"dim_block dim_hidden"},block_id:t.blockId,axis:t.axis}),o.append("path").classed("size-line",!0).attr("d",r(E)),o.append("path").classed("size-line",!0).attr("d",r(_)),o.append("path").classed("size-line",!0).attr({d:r(m),"marker-start":function(){return e?"url(#dimVertR)":"url(#dimHorL)"},"marker-end":function(){return e?"url(#dimVertL)":"url(#dimHorR)"}}),a=o.append("g").classed("size-box",!0),"edit"===n.typeConstruction&&a.append("rect").classed("size-rect",!0).attr({x:function(){return e?l-.8*c:(t.from+t.to-c)/2},y:function(){return e?(t.from+t.to-u)/2:l-.8*u},rx:p,ry:p}),a.append("text").text(t.text).attr({"class":function(){return"edit"===n.typeConstruction?"size-txt-edit":"size-txt"},x:function(){return e?l-.8*c:(t.from+t.to-c)/2},y:function(){return e?(t.from+t.to-u)/2:l-.8*u},dx:80,dy:40,type:"line",block_id:t.blockId,size_val:t.text,min_val:t.minLimit,max_val:t.maxLimit,dim_id:t.dimId,from_point:t.from,to_point:t.to,axis:t.axis})}function p(e,t,i){var r,o,a=[],l=20,s={x:e.startX,y:e.startY},d={x:e.midleX,y:e.midleY};a.push(d,s),r=t.append("g").attr({"class":"dim_block_radius",block_id:e.blockId}),r.append("path").classed("size-line",!0).attr({d:i(a),style:"stroke: #000;","marker-end":"url(#dimArrow)"}),o=r.append("g").classed("size-box",!0),"edit"===n.typeConstruction&&o.append("rect").classed("size-rect",!0).attr({x:e.midleX,y:e.midleY,rx:l,ry:l}),o.append("text").text(e.radius).attr({"class":"size-txt-edit",x:e.midleX,y:e.midleY,dx:80,dy:40,type:"curve",block_id:e.blockId,size_val:e.radius,min_val:e.radiusMax,max_val:e.radiusMin,dim_id:e.id,chord:e.lengthChord})}n.$watch("template",function(){s(n.template,n.templateWidth,n.templateHeight)})}}}e.$inject=["globalConstants","GeneralServ","ProductStor","SVGServ","DesignServ"],angular.module("BauVoiceApp").directive("svgTemplate",e)}(),function(){function e(){return{scope:{output:"@",typingDelay:"@"},link:function(e,t,i){function r(){setTimeout(function(){var i,r,o=e.output,n="",a=15;i=setInterval(function(){r=n.length<o.length,r?n+=o[n.length]:clearInterval(i),t.text(n)},a)},1*e.typingDelay)}i.$observe("typing",function(e){"on"===e.toString()&&r()}),i.$observe("output",function(){r()})}}}angular.module("BauVoiceApp").directive("typing",e)}();var NuanceSpeechKitPlugin=function(){};NuanceSpeechKitPlugin.prototype.initialize=function(e,t,i,r,o,n){return Cordova.exec(o,n,"PhoneGapSpeechPlugin","initSpeechKit",[e,t,i,r])},NuanceSpeechKitPlugin.prototype.cleanup=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","cleanupSpeechKit",[])},NuanceSpeechKitPlugin.prototype.startRecognition=function(e,t,i,r){return Cordova.exec(i,r,"PhoneGapSpeechPlugin","startRecognition",[e,t])},NuanceSpeechKitPlugin.prototype.stopRecognition=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopRecognition",[])},NuanceSpeechKitPlugin.prototype.getResults=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","getRecoResult",[])},NuanceSpeechKitPlugin.prototype.playTTS=function(e,t,i,r,o){return Cordova.exec(r,o,"PhoneGapSpeechPlugin","startTTS",[e,t,i])},NuanceSpeechKitPlugin.prototype.stopTTS=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopTTS",[])},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},function(){function e(e,t,i,r,o,n,a,l,s,d,c,u,p,_,E,m,g){function f(){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&W(),a.aux.isFocusedAddElement=0,a.aux.isTabFrame=0,a.aux.isGridSelectorDialog=0,a.aux.selectedGrid=0,a.aux.showAddElementsMenu=0,a.aux.isAddElement=0}function T(){a.aux.auxParameter=0,i.global.isQtyCalculator=0,i.global.isSizeCalculator=0,i.global.isWidthCalculator=0}function h(e,t){if((i.global.isQtyCalculator||i.global.isSizeCalculator)&&W(),void 0===e&&void 0===t){1===a.aux.isFocusedAddElement&&w();var r=a.aux.isFocusedAddElement-1;a.aux.isAddElement=0,o.product.chosenAddElements[r].length=0,y(o.product)}else A(e,t).then(function(e){S(o.product,e),y(o.product)})}function I(e,t){if("main"===i.global.currOpenPage)1===a.aux.isFocusedAddElement?o.product.is_addelem_only?(S(o.product,a.aux.addElementsList[e][t]),y(o.product)):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,_.initAllGlassXGrid()):(S(o.product,a.aux.addElementsList[e][t]),y(o.product));else if("cart"===i.global.currOpenPage)for(var l=n.cart.selectedProducts.length,s=0;l>s;s++)n.cart.selectedProducts[s].length&&(S(r.order.products[s],a.aux.addElementsList[e][t]),m.calculateAddElemsProductsPrice(1),g.joinAllAddElements(),m.collectAllAddElems(),m.getAddElemsPriceTotal(),g.calculateOrderPrice());a.aux.currAddElementPrice=0,a.aux.isAddElement=0}function A(t,i){var r=e.defer();return a.aux.isAddElement=t+"-"+i,Y(t,i,a.aux.addElementsList).then(function(){r.resolve(angular.copy(a.aux.addElementsList[t][i]))}),r.promise}function S(e,t){var i,r=a.aux.isFocusedAddElement-1;if(i=N(e.chosenAddElements[r],t),!i){var o={element_type:r,element_width:0,element_height:0,block_id:0},n=angular.extend(o,t);e.chosenAddElements[r].push(n),2===e.chosenAddElements[r].length&&(a.aux.isTabFrame=1)}}function N(e,t){for(var i=e.length,r=0;--i>-1;)if(e[i].id===t.id&&(t.element_width&&t.element_height&&e[i].element_width===t.element_width&&e[i].element_height===t.element_height&&r++,t.element_width&&!t.element_height&&e[i].element_width===t.element_width&&r++,t.element_width||t.element_height||r++,r)){e[i].element_qty+=1;break}return r}function y(e){var i=e.chosenAddElements.length;for(e.addelem_price=0,e.addelemPriceDis=0;--i>-1;){var o=e.chosenAddElements[i].length;if(o>0)for(;--o>-1;)e.addelem_price+=e.chosenAddElements[i][o].element_qty*e.chosenAddElements[i][o].element_price}e.addelem_price=c.roundingValue(e.addelem_price),e.addelemPriceDis=c.setPriceDis(e.addelem_price,r.order.discount_addelem),t(function(){u.setProductPriceTOTAL(e)},50)}function L(e,t){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&W(),1===a.aux.isFocusedAddElement&&w(o.product.chosenAddElements[e][t].block_id),o.product.chosenAddElements[e].splice(t,1),y(o.product)}function O(){for(var e=o.product.chosenAddElements.length,t=0;e>t;t++)t||o.product.chosenAddElements[t].length&&w(),o.product.chosenAddElements[t].length=0;o.product.addelem_price=0,o.product.addelemPriceDis=0,y(o.product),f()}function C(){if(l.design.selectedGlass.length){var e=l.design.selectedGlass.map(function(e){var t=e.attributes.block_id.nodeValue;return D(t,a.aux.selectedGrid)[0]});P(e)}}function R(){var e=D(0,a.aux.selectedGrid);P(e)}function D(e,t){for(var i=o.product.template_source.details.length,r=[];--i>0;)if(e){if(o.product.template_source.details[i].id===e){v(i),r.push(b(e,i,t));break}}else"sash"===o.product.template_source.details[i].blockType&&(v(i),r.push(b(o.product.template_source.details[i].id,i,t)));return r}function v(e){if(o.product.template_source.details[e].gridId)for(var t=o.product.chosenAddElements[0].length;--t>-1;)o.product.chosenAddElements[0][t].block_id===o.product.template_source.details[e].id&&(1===o.product.chosenAddElements[0][t].element_qty?o.product.chosenAddElements[0].splice(t,1):o.product.chosenAddElements[0][t].element_qty>1&&(o.product.chosenAddElements[0][t].element_qty-=1))}function b(e,t,i){var r,n=o.product.template.details[t].pointsIn.map(function(e){return e.x}),l=o.product.template.details[t].pointsIn.map(function(e){return e.y});return o.product.template_source.details[t].gridId=a.aux.addElementsList[i[0]][i[1]].id,o.product.template_source.details[t].gridTxt=a.aux.addElementsList[i[0]][i[1]].name,r=angular.copy(a.aux.addElementsList[i[0]][i[1]]),r.element_width=d3.max(n)-d3.min(n),r.element_height=d3.max(l)-d3.min(l),r.block_id=e,r}function P(e){_.getGridPrice(e).then(function(e){var t=e.length;if(a.aux.currAddElementPrice=0,t){for(;--t>-1;)S(o.product,e[t]),a.aux.currAddElementPrice+=e[t].elementPriceDis;a.aux.currAddElementPrice=c.roundingValue(a.aux.currAddElementPrice),a.aux.isAddElement=a.aux.selectedGrid[0]+"-"+a.aux.selectedGrid[1],y(o.product),M(),x()}})}function M(){p.createSVGTemplate(o.product.template_source,o.product.profileDepths).then(function(e){o.product.template=angular.copy(e)})}function x(){_.removeGlassEventsInSVG(),l.design.selectedGlass.length=0,a.aux.selectedGrid=0,a.aux.isGridSelectorDialog=!a.aux.isGridSelectorDialog}function w(e){for(var t=o.product.template_source.details.length;--t>0;)if(e){if(o.product.template_source.details[t].id===e&&o.product.template_source.details[t].gridId){delete o.product.template_source.details[t].gridId,delete o.product.template_source.details[t].gridTxt;break}}else o.product.template_source.details[t].gridId&&(delete o.product.template_source.details[t].gridId,delete o.product.template_source.details[t].gridTxt);M()}function G(e){var t=a.aux.currentAddElementId,i=a.aux.auxParameter.split("-")[0]-1;return o.product.chosenAddElements[i][t].element_qty<2&&0>e?!1:o.product.chosenAddElements[i][t].element_qty<6&&-5==e?!1:void(a.aux.tempSize.length?(o.product.chosenAddElements[i][t].element_qty=parseInt(a.aux.tempSize.join(""),10)+e,a.aux.tempSize.length=0):o.product.chosenAddElements[i][t].element_qty+=e)}function U(){T(),a.aux.tempSize.length=0,y(o.product)}function k(e){var t;if(13===e.which)i.global.isQtyCalculator?U():i.global.isSizeCalculator&&F();else if(8===e.which)V();else{switch(e.which){case 48:case 96:t=0;break;case 49:case 97:t=1;break;case 50:case 98:t=2;break;case 51:case 99:t=3;break;case 52:case 100:t=4;break;case 53:case 101:t=5;break;case 54:case 102:t=6;break;case 55:case 103:t=7;break;case 56:case 104:t=8;break;case 57:case 105:t=9}void 0!==t&&H(t)}}function H(e){var t=a.aux.tempSize.length;(4===t||1===t&&!a.aux.tempSize[0])&&(a.aux.tempSize.length=0),"0"===e?t&&a.aux.tempSize[0]&&(a.aux.tempSize.push(e),B()):"00"===e?t&&a.aux.tempSize[0]&&(3>t?a.aux.tempSize.push(0,0):3===t&&a.aux.tempSize.push(0),B()):(a.aux.tempSize.push(e),B())}function V(){a.aux.tempSize.pop(),a.aux.tempSize.length<1&&a.aux.tempSize.push(0),B()}function B(){var e="",t=a.aux.currentAddElementId,r=a.aux.auxParameter.split("-")[0]-1;e=parseInt(a.aux.tempSize.join(""),10),i.global.isQtyCalculator?o.product.chosenAddElements[r][t].element_qty=e:i.global.isSizeCalculator&&(i.global.isWidthCalculator?o.product.chosenAddElements[r][t].element_width=e:o.product.chosenAddElements[r][t].element_height=e)}function F(){var e=a.aux.currentAddElementId,t=a.aux.auxParameter.split("-")[0]-1;a.aux.tempSize.length=0,T(),Y(t,e,o.product.chosenAddElements).then(function(){y(o.product)})}function Y(e,t,i){var o={currencyId:s.userInfo.currencyId,elementId:i[e][t].id,elementWidth:i[e][t].element_width/1e3,elementHeight:i[e][t].element_height/1e3};return d.getAdditionalPrice(o).then(function(o){return o&&(a.aux.currAddElementPrice=c.roundingValue(c.setPriceDis(o.priceTotal,r.order.discount_addelem)),i[e][t].element_price=angular.copy(c.roundingValue(o.priceTotal)),i[e][t].elementPriceDis=angular.copy(a.aux.currAddElementPrice)),o})}function W(){i.global.isSizeCalculator?F():i.global.isQtyCalculator&&U(),a.aux.currentAddElementId=0}var z=this;return z.publicObj={closeAddElementsMenu:f,chooseAddElement:h,chooseAddElementList:I,getAddElementPrice:A,deleteAddElement:L,deleteAllAddElements:O,finishCalculators:W,confirmGrid:C,setGridToAll:R,closeGridSelectorDialog:x,pressCulculator:k,setValueQty:G,closeQtyCaclulator:U,setValueSize:H,deleteLastNumber:V,changeElementSize:B,closeSizeCaclulator:F},z.publicObj}e.$inject=["$q","$timeout","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor","DesignStor","UserStor","localDB","GeneralServ","MainServ","SVGServ","DesignServ","AnalyticsServ","CartServ","CartMenuServ"],angular.module("MainModule").factory("AddElementMenuServ",e)}(),function(){function e(e,t,i,r,o,n,a){function l(t){(o.global.isQtyCalculator||o.global.isSizeCalculator)&&r.finishCalculators(),a.aux.showAddElementsMenu?a.aux.isFocusedAddElement===t?r.closeAddElementsMenu():(r.closeAddElementsMenu(),e(function(){s(t)},g)):s(t)}function s(e){a.aux.isFocusedAddElement=e,a.aux.showAddElementsMenu=t.activeClass,d(e)}function d(e){var t=e-1;a.aux.addElementsMenuStyle=i.addElementDATA[t].typeClass+"-theme",a.aux.addElementsType=angular.copy(o.global.addElementsAll[t].elementType),a.aux.addElementsList=angular.copy(o.global.addElementsAll[t].elementsList)}function c(e,t,l){if(a.aux.auxParameter===e+"-"+t+"-"+l)r.finishCalculators();else{(o.global.isQtyCalculator||o.global.isSizeCalculator)&&r.finishCalculators();n.product.chosenAddElements[e-1][l];switch(a.aux.auxParameter=e+"-"+t+"-"+l,a.aux.currentAddElementId=l,a.aux.calculatorStyle=i.addElementDATA[e-1].typeClass+"-theme",t){case 1:o.global.isQtyCalculator=1;break;case 2:o.global.isSizeCalculator=1,o.global.isWidthCalculator=1;break;case 3:o.global.isSizeCalculator=1,o.global.isWidthCalculator=0}}}function u(){a.aux.isAddElementListView=1,_()}function p(){a.aux.isAddElementListView=0,_()}function _(){a.aux.isFocusedAddElement=0,a.aux.isTabFrame=0,a.aux.showAddElementsMenu=0,a.aux.isAddElement=0,a.aux.isGridSelectorDialog=0,(o.global.isQtyCalculator||o.global.isSizeCalculator)&&r.finishCalculators()}function E(){var e=i.addElementDATA.length,t=0;for(a.aux.addElementGroups.length=0;e>t;t++)if(o.global.addElementsAll[t].elementsList){var r={};r.groupId=t+1,r.groupName=angular.copy(i.addElementDATA[t].name),r.groupClass=i.addElementDATA[t].typeClass+"-theme",a.aux.addElementGroups.push(r)}}var m=this,g=12*t.STEP;return m.publicObj={selectAddElement:l,initAddElementTools:c,openAddElementListView:u,closeAddElementListView:p,createAddElementGroups:E},m.publicObj}e.$inject=["$timeout","globalConstants","GeneralServ","AddElementMenuServ","GlobalStor","ProductStor","AuxStor"],angular.module("MainModule").factory("AddElementsServ",e)}(),function(){function e(e,t){function i(i,r,o,n,a){var l={user_id:i,order_id:r,calculation_id:o,element_id:n,date:new Date},s="";switch(a){case 1:s="profile_analytics";break;case 2:break;case 3:s="hardware_analytics";break;case 4:}e.insertServer(t.userInfo.phone,t.userInfo.device_code,s,l)}var r=this;return r.analyticsObjSource={user_id:0,order_id:0,element_id:0,element_type:0},r.publicObj={sendAnalyticsData:i},r.publicObj}e.$inject=["localDB","UserStor"],angular.module("BauVoiceApp").factory("AnalyticsServ",e)}(),function(){function e(e,t,i,r,o,n,a){function l(){var e,t,i,r,a,l,s,d=o.order.products.length,c=0;for(n.cart.allAddElements.length=0,n.cart.isExistAddElems=0,a=0;d>a;a++){for(i=[],e=o.order.products[a].chosenAddElements.length,l=0;e>l;l++)if(t=o.order.products[a].chosenAddElements[l].length,t>0)for(s=0;t>s;s++){r=angular.copy(o.order.products[a].chosenAddElements[l][s]);var u={id:r.id,list_group_id:r.list_group_id,name:r.name,elementPriceDis:r.elementPriceDis,element_price:r.element_price,element_qty:r.element_qty*o.order.products[a].product_qty,element_type:r.element_type,element_width:r.element_width,element_height:r.element_height};i.push(u)}i.length&&c++,n.cart.allAddElements.push(i)}c&&(n.cart.isExistAddElems=1)}function s(e){o.order.floor_id!==e.id&&(o.order.floor_id=e.id,e.id?(o.order.floorName=e.name,o.order.floor_price=e.priceReal,o.order.delivery_user_id=e.user_id):(o.order.floorName="",o.order.floor_price=0,o.order.delivery_user_id=0),T())}function d(e){o.order.mounting_id!==e.id&&(o.order.mounting_id=e.id,e.id?(o.order.mountingName=e.name,o.order.mounting_price=e.priceReal,o.order.mounting_user_id=e.user_id):(o.order.mountingName="",o.order.mounting_price=0,o.order.mounting_user_id=0),T())}function c(e,t,i){o.order.instalment_id!==e&&(o.order.is_instalment=1,o.order.instalment_id=e,o.order.selectedInstalmentPeriod=t,o.order.selectedInstalmentPercent=i,h(o.order.order_price,o.order.order_price_primary,o.order.order_price_dis,o.order.orderPricePrimaryDis))}function u(e,t){var l=e.split("."),s=t.split("."),d=new Date(l[2],l[1]-1,l[0]),c=new Date(s[2],s[1]-1,s[0]),u=Math.floor((c-d)/864e5);if(o.order.delivery_price=0,u&&u>0){var m=u/7,g=0,h=0,I=0;1>=m?(g=r.global.deliveryCoeff.week_1,h=a.userInfo.discConstrByWeek[0],I=a.userInfo.discAddElemByWeek[0]):m>1&&2>=m?(g=r.global.deliveryCoeff.week_2,h=a.userInfo.discConstrByWeek[1],I=a.userInfo.discAddElemByWeek[1]):m>2&&3>=m?(g=r.global.deliveryCoeff.week_3,h=a.userInfo.discConstrByWeek[2],I=a.userInfo.discAddElemByWeek[2]):m>3&&4>=m?(g=r.global.deliveryCoeff.week_4,h=a.userInfo.discConstrByWeek[3],I=a.userInfo.discAddElemByWeek[3]):m>4&&5>=m?(g=r.global.deliveryCoeff.week_5,h=a.userInfo.discConstrByWeek[4],I=a.userInfo.discAddElemByWeek[4]):m>5&&6>=m?(g=r.global.deliveryCoeff.week_6,h=a.userInfo.discConstrByWeek[5],I=a.userInfo.discAddElemByWeek[5]):m>6&&7>=m?(g=r.global.deliveryCoeff.week_7,h=a.userInfo.discConstrByWeek[6],I=a.userInfo.discAddElemByWeek[6]):m>7&&(g=r.global.deliveryCoeff.week_8,h=a.userInfo.discConstrByWeek[7],I=a.userInfo.discAddElemByWeek[7]),h?(o.order.discount_construct=h,L(h),f()):(o.order.discount_construct=angular.copy(a.userInfo.discountConstr),L(o.order.discount_construct),f()),I?(o.order.discount_addelem=I,y(I),f()):(o.order.discount_addelem=angular.copy(a.userInfo.discountAddElem),y(o.order.discount_addelem),f()),g?(n.cart.discountDeliveyPlant=g,p(),o.order.is_date_price_less=1,o.order.is_date_price_more=0,o.order.is_old_price=1):(f(),E())}else if(u&&0>u){i.setCurrDiscounts(),y(o.order.discount_addelem),L(o.order.discount_construct),f();var A=Math.abs(r.global.deliveryCoeff.standart_time+u);n.cart.marginDeliveyPlant=1*r.global.deliveryCoeff.percents[A],n.cart.marginDeliveyPlant?(_(),o.order.is_date_price_more=1,o.order.is_date_price_less=0,o.order.is_old_price=1):E()}else i.setCurrDiscounts(),y(o.order.discount_addelem),L(o.order.discount_construct),f(),E();o.order.new_delivery_date=c.getTime(),T()}function p(){o.order.delivery_price=t.roundingValue(o.order.productsPriceDis*n.cart.discountDeliveyPlant/100)}function _(){o.order.delivery_price=t.roundingValue(o.order.productsPriceDis*n.cart.marginDeliveyPlant/100)}function E(){o.order.is_date_price_less=0,o.order.is_date_price_more=0,o.order.is_old_price=0}function m(e){if(e)for(var t=e.length;--t>-1;)if(e[t].type)switch(e[t].type){case 1:e[t].priceReal=Math.round(e[t].price*n.cart.qtyTotal);break;case 2:e[t].priceReal=Math.round(e[t].price*n.cart.squareTotal);break;case 3:e[t].priceReal=Math.round(e[t].price*n.cart.perimeterTotal);break;case 4:e[t].priceReal=Math.round(o.order.productsPriceDis*e[t].price/100);break;default:e[t].priceReal=Math.round(e[t].price)}}function g(){f(),n.cart.discountDeliveyPlant&&p(),n.cart.marginDeliveyPlant&&_(),T(),m(r.global.supplyData),m(r.global.assemblingData)}function f(){var e=o.order.products.length;for(o.order.templates_price=0,o.order.addelems_price=0,o.order.products_price=0,o.order.productsPriceDis=0,n.cart.squareTotal=0,n.cart.perimeterTotal=0,n.cart.qtyTotal=0;--e>-1;)o.order.addelems_price+=o.order.products[e].addelem_price*o.order.products[e].product_qty,o.order.templates_price+=o.order.products[e].template_price*o.order.products[e].product_qty,o.order.products_price+=o.order.products[e].product_price*o.order.products[e].product_qty,o.order.productsPriceDis+=o.order.products[e].productPriceDis*o.order.products[e].product_qty,n.cart.squareTotal+=o.order.products[e].template_square*o.order.products[e].product_qty,n.cart.perimeterTotal+=.002*(o.order.products[e].template_width+o.order.products[e].template_height)*o.order.products[e].product_qty,n.cart.qtyTotal+=o.order.products[e].product_qty;o.order.addelems_price=t.roundingValue(o.order.addelems_price),o.order.templates_price=t.roundingValue(o.order.templates_price),o.order.products_price=t.roundingValue(o.order.products_price),n.cart.squareTotal=t.roundingValue(n.cart.squareTotal),n.cart.perimeterTotal=t.roundingValue(n.cart.perimeterTotal),n.cart.qtyTotal=t.roundingValue(n.cart.qtyTotal),o.order.productsPriceDis?o.order.productsPriceDis=t.roundingValue(o.order.productsPriceDis):o.order.productsPriceDis=angular.copy(o.order.products_price)}function T(){if(o.order.order_price=0,o.order.order_price_dis=0,I(),o.order.order_price=o.order.products_price,o.order.order_price_dis=t.roundingValue(o.order.productsPriceDis+o.order.floor_price+o.order.mounting_price),o.order.order_price_primary=angular.copy(o.order.order_price),o.order.orderPricePrimaryDis=angular.copy(o.order.order_price_dis),o.order.delivery_price)if(o.order.is_date_price_more)n.cart.marginDeliveyPlant&&(o.order.order_price+=o.order.products_price*n.cart.marginDeliveyPlant/100),o.order.order_price_dis+=o.order.delivery_price;else if(o.order.is_date_price_less)n.cart.discountDeliveyPlant&&(o.order.order_price-=o.order.products_price*n.cart.discountDeliveyPlant/100),o.order.order_price_dis-=o.order.delivery_price;else{var e=r.global.deliveryCoeff.percents[r.global.deliveryCoeff.standart_time];e&&(o.order.order_price-=o.order.products_price*e/100)}o.order.order_price=t.roundingValue(o.order.order_price),o.order.order_price_dis=t.roundingValue(o.order.order_price_dis),n.cart.discountPriceDiff=t.roundingValue(o.order.order_price-o.order.order_price_dis),h(o.order.order_price,o.order.order_price_primary,o.order.order_price_dis,o.order.orderPricePrimaryDis)}function h(e,i,r,n){o.order.is_instalment&&(o.order.payment_first=t.roundingValue(e*o.order.selectedInstalmentPercent/100),o.order.payment_monthly=t.roundingValue((e-o.order.payment_first)/o.order.selectedInstalmentPeriod),o.order.paymentFirstDis=t.roundingValue(r*o.order.selectedInstalmentPercent/100),o.order.paymentMonthlyDis=t.roundingValue((r-o.order.paymentFirstDis)/o.order.selectedInstalmentPeriod),i&&(o.order.payment_first_primary=t.roundingValue(i*o.order.selectedInstalmentPercent/100),o.order.payment_monthly_primary=t.roundingValue((i-o.order.payment_first_primary)/o.order.selectedInstalmentPeriod),o.order.paymentFirstPrimaryDis=t.roundingValue(n*o.order.selectedInstalmentPercent/100),o.order.paymentMonthlyPrimaryDis=t.roundingValue((n-o.order.paymentFirstPrimaryDis)/o.order.selectedInstalmentPeriod)))}function I(){var e=new Date(o.order.new_delivery_date).getDay(),i=0;switch(e){case 0:i=a.userInfo.mount_sun?a.userInfo.mount_sun:0;break;case 1:i=a.userInfo.mount_mon?a.userInfo.mount_mon:0;break;case 2:i=a.userInfo.mount_tue?a.userInfo.mount_tue:0;break;case 3:i=a.userInfo.mount_wed?a.userInfo.mount_wed:0;break;case 4:i=a.userInfo.mount_thu?a.userInfo.mount_thu:0;break;case 5:i=a.userInfo.mount_fri?a.userInfo.mount_fri:0;break;case 6:i=a.userInfo.mount_sat?a.userInfo.mount_sat:0}o.order.mounting_price=t.roundingValue(o.order.mounting_price*(1+i/100))}function A(){n.cart.tempConstructDisc=1*o.order.discount_construct,n.cart.tempAddelemDisc=1*o.order.discount_addelem,n.cart.isShowDiscount=1}function S(){n.cart.isShowDiscount=0}function N(){n.cart.isShowDiscount||(n.cart.tempConstructDisc=1*o.order.discount_construct,n.cart.tempAddelemDisc=1*o.order.discount_addelem),n.cart.isShowDiscount=!n.cart.isShowDiscount}function y(e){for(var i=o.order.products.length,r=0;i>r;r++){var n=o.order.products[r].productPriceDis-o.order.products[r].addelemPriceDis;o.order.products[r].addelemPriceDis=t.setPriceDis(o.order.products[r].addelem_price,e),o.order.products[r].productPriceDis=t.roundingValue(n+o.order.products[r].addelemPriceDis);for(var a=o.order.products[r].chosenAddElements.length,s=0;a>s;s++){var d=o.order.products[r].chosenAddElements[s].length;if(d>0)for(var c=0;d>c;c++)o.order.products[r].chosenAddElements[s][c].elementPriceDis=t.setPriceDis(o.order.products[r].chosenAddElements[s][c].element_price,e)}}l()}function L(e){for(var i=o.order.products.length,r=0;i>r;r++)o.order.products[r].productPriceDis=angular.copy(t.roundingValue(t.setPriceDis(o.order.products[r].template_price,e)+o.order.products[r].addelemPriceDis))}function O(e){e?(n.cart.tempAddelemDisc=C(n.cart.tempAddelemDisc),n.cart.tempAddelemDisc>a.userInfo.discountAddElemMax&&(n.cart.tempAddelemDisc=1*a.userInfo.discountAddElemMax),o.order.discount_addelem=1*n.cart.tempAddelemDisc,y(o.order.discount_addelem)):(n.cart.tempConstructDisc=C(n.cart.tempConstructDisc),n.cart.tempConstructDisc>a.userInfo.discountConstrMax&&(n.cart.tempConstructDisc=1*a.userInfo.discountConstrMax),o.order.discount_construct=1*n.cart.tempConstructDisc,L(o.order.discount_construct)),g()}function C(e){return null==e?e=0:e%1&&(e=parseFloat(e.toFixed(1))),e}function R(){var o;r.global.isLoader=1,o=n.cart.isMasterDialog?"master":"order",i.saveOrderInDB(n.cart.customer,1,o).then(function(){D(),t.setPreviosPage(),r.global.isLoader=0,e.path("/history")})}function D(){n.cart.submitted=0,n.cart.isCityBox=0,r.global.orderEditNumber>0?n.fillOrderForm():(P(o.order.customer_city_id,o.order.customer_city,o.order.customer_location),n.cart.customer.customer_sex=0),n.cart.isMasterDialog=0,n.cart.isOrderDialog=0,n.cart.isCreditDialog=0}function v(){n.cart.customer.customer_location?n.cart.isCityBox=1:n.cart.isCityBox=0}function b(e){P(e.cityId,e.cityName,e.fullLocation),n.cart.isCityBox=0}function P(){n.cart.customer.customer_city_id=arguments[0],n.cart.customer.customer_city=arguments[1],n.cart.customer.customer_location=arguments[2]}var M=this;return M.publicObj={joinAllAddElements:l,selectFloorPrice:s,selectAssembling:d,selectInstalment:c,checkDifferentDate:u,calculateOrderPrice:g,calculateAllProductsPrice:f,calculateTotalOrderPrice:T,changeProductPriceAsDiscount:L,changeAddElemPriceAsDiscount:y,openDiscountBlock:A,closeDiscountBlock:S,swipeDiscountBlock:N,approveNewDisc:O,closeOrderDialog:D,changeLocation:v,selectCity:b,sendOrder:R},M.publicObj}e.$inject=["$location","GeneralServ","MainServ","GlobalStor","OrderStor","CartStor","UserStor"],angular.module("CartModule").factory("CartMenuServ",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d){function c(){i.setPreviosPage(),r.createNewProduct()}function u(e){a.order.products[e].product_qty+=1,o.joinAllAddElements(),o.calculateOrderPrice()}function p(e){1===a.order.products[e].product_qty?_(e):(a.order.products[e].product_qty-=1,o.calculateOrderPrice()),o.joinAllAddElements()}function _(e){function r(){a.order.products.splice(e,1),s.cart.allAddElements.splice(e,1),o.calculateOrderPrice(),a.order.products.length>0;
}i.confirmAlert(t("translate")("common_words.DELETE_PRODUCT_TITLE"),t("translate")("common_words.DELETE_PRODUCT_TXT"),r)}function E(t,o){l.product=angular.copy(a.order.products[t]),n.global.productEditNumber=l.product.product_id,n.global.isCreatedNewProduct=1,n.global.isChangedTemplate=1,r.prepareMainPage(),"auxiliary"===o&&(n.global.activePanel=6),i.setPreviosPage(),e.path("/main")}function m(){g(),f(),T(),s.cart.isAllAddElems=1,d.aux.isAddElementListView=1}function g(){var e,t,r,o=angular.copy(s.cart.allAddElements),n=o.length;for(s.cart.allAddElemsOrder.length=0;--n>-1;)if(e=o[n].length)for(;--e>-1;)if(t=s.cart.allAddElemsOrder.length){for(r=1;--t>-1;)s.cart.allAddElemsOrder[t].id===o[n][e].id&&s.cart.allAddElemsOrder[t].element_width===o[n][e].element_width&&s.cart.allAddElemsOrder[t].element_height===o[n][e].element_height&&(s.cart.allAddElemsOrder[t].element_qty=i.roundingValue(s.cart.allAddElemsOrder[t].element_qty+o[n][e].element_qty),--r);r&&s.cart.allAddElemsOrder.push(o[n][e])}else s.cart.allAddElemsOrder.push(o[n][e]);console.warn(s.cart.allAddElemsOrder)}function f(){var e=a.order.products.length;for(s.cart.addElemsOrderPriceTOTAL=0;--e>-1;)s.cart.addElemsOrderPriceTOTAL+=a.order.products[e].addelemPriceDis*a.order.products[e].product_qty;s.cart.addElemsOrderPriceTOTAL=i.roundingValue(s.cart.addElemsOrderPriceTOTAL)}function T(){s.cart.selectedProducts.length=0,s.cart.selectedProducts=a.order.products.map(function(){return[]})}function h(e){for(var t,o,n=a.order.products.length;--n>-1;){if(a.order.products[n].addelem_price=0,a.order.products[n].addelemPriceDis=0,e)for(t=a.order.products[n].chosenAddElements.length;--t>-1;)if(o=a.order.products[n].chosenAddElements[t].length){for(;--o>-1;)a.order.products[n].addelem_price+=a.order.products[n].chosenAddElements[t][o].element_qty*a.order.products[n].chosenAddElements[t][o].element_price;a.order.products[n].addelem_price=i.roundingValue(a.order.products[n].addelem_price),a.order.products[n].addelemPriceDis=i.setPriceDis(a.order.products[n].addelem_price,a.order.discount_addelem)}r.setProductPriceTOTAL(a.order.products[n])}}function I(e){var t=d3.max(a.order.products.map(function(e){return e.product_id})),i=angular.copy(a.order.products[e]);A(i,t),o.joinAllAddElements(),o.calculateOrderPrice()}function A(e,t){++t,e.product_id=t,a.order.products.push(e)}var S=this;return S.publicObj={increaseProductQty:u,decreaseProductQty:p,addNewProductInOrder:c,clickDeleteProduct:_,editProduct:E,showAllAddElements:m,collectAllAddElems:g,getAddElemsPriceTotal:f,calculateAddElemsProductsPrice:h,createProductCopy:I,addCloneProductInOrder:A},S.publicObj}e.$inject=["$location","$filter","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor"],angular.module("CartModule").factory("CartServ",e)}(),function(){angular.module("BauVoiceApp").constant("globalConstants",{serverIP:"http://api.windowscalculator.net",STEP:50,REG_PHONE:/^\d+$/,REG_NAME:/^[a-zA-Z]+$/,REG_MAIL:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,svgTemplateIconWidth:70,svgTemplateIconHeight:70,svgTemplateIconBigWidth:500,svgTemplateIconBigHeight:450,svgTemplateWidth:1022,svgTemplateHeight:767,squareLimit:.15,minSizeLimit:100,minSizeLimitStulp:300,minRadiusHeight:10,activeClass:"active",SVG_ID_EDIT:"tamlateSVG",SVG_ID_GLASS:"tamlateSVGGlass",SVG_ID_GRID:"tamlateSVGGrid",languages:[{label:"uk",name:"Українська"},{label:"ru",name:"Русский"},{label:"en",name:"English"},{label:"de",name:"Deutsch"},{label:"ro",name:"Român"},{label:"it",name:"Italiano"}]})}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c,u,p,_,E,m,g){function f(){_.designSource.templateSourceTEMP=angular.copy(m.product.template_source),_.designSource.templateTEMP=angular.copy(m.product.template),_.design.templateSourceTEMP=angular.copy(m.product.template_source),_.design.templateTEMP=angular.copy(m.product.template)}function T(){Ue(1).then(function(){m.product.template_source=angular.copy(_.design.templateSourceTEMP),m.product.template=angular.copy(_.design.templateTEMP),u.createSVGTemplateIcon(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){m.product.templateIcon=angular.copy(e)}),4===m.product.construction_type&&(m.product.door_shape_id=_.design.doorShapeList[_.design.doorConfig.doorShapeIndex].shapeId,m.product.door_sash_shape_id=_.design.doorShapeList[_.design.doorConfig.sashShapeIndex].shapeId,m.product.door_handle_shape_id=_.design.doorShapeList[_.design.doorConfig.handleShapeIndex].shapeId,m.product.door_lock_shape_id=_.design.doorShapeList[_.design.doorConfig.lockShapeIndex].shapeId),p.global.templatesSource[m.product.templateIndex]=angular.copy(m.product.template_source);var e=s.checkSashInTemplate(m.product);e?p.global.isSashesInTemplate||(p.global.isSashesInTemplate=1,m.product.hardware=p.global.hardwares[0][0]):(m.product.hardware={},m.product.hardware.id=0,p.global.isSashesInTemplate=0);var t=S();t&&N(m.product.chosenAddElements[0]),s.preparePrice(m.product.template,m.product.profile.id,m.product.glass,m.product.hardware.id,m.product.lamination.lamination_in_id).then(function(){p.global.isChangedTemplate=1,I()})})}function h(){Be(),I()}function I(){_.design=_.setDefaultDesign(),p.global.activePanel=0,p.global.isNavMenu=0,p.global.isConfigMenu=1,t.path("/main")}function A(){Be(),_.design=_.setDefaultDesign(),f(),4===m.product.construction_type&&y()}function S(){var e=m.product.chosenAddElements[0].length,t=0;if(e)e:for(;--e>-1;)for(var i=m.product.template.details.length;--i>0;)if(m.product.template.details[i].id===m.product.chosenAddElements[0][e].block_id){if(!m.product.template.details[i].gridId){m.product.chosenAddElements[0].splice(e,1);continue e}var r=m.product.template.details[i].pointsIn.map(function(e){return e.x}),o=m.product.template.details[i].pointsIn.map(function(e){return e.y}),n={};n.width=d3.max(r)-d3.min(r),n.height=d3.max(o)-d3.min(o),(m.product.chosenAddElements[0][e].element_width!==n.width||m.product.chosenAddElements[0][e].element_height!==n.height)&&(m.product.chosenAddElements[0][e].element_width=n.width,m.product.chosenAddElements[0][e].element_height=n.height,t=1)}return t}function N(e){var t=o.defer(),i=e.map(function(e){var t=o.defer(),i={currencyId:g.userInfo.currencyId,elementId:e.id,elementWidth:e.element_width/1e3,elementHeight:e.element_height/1e3};return l.getAdditionalPrice(i).then(function(i){i?(e.element_price=angular.copy(a.roundingValue(i.priceTotal)),e.elementPriceDis=angular.copy(a.setPriceDis(i.priceTotal,E.order.discount_addelem)),t.resolve(e)):t.reject(i)}),t.promise});return t.resolve(o.all(i)),t.promise}function y(){_.designSource.doorConfig.doorShapeIndex=L(_.design.doorShapeList,m.product.door_shape_id),_.designSource.doorConfig.sashShapeIndex=L(_.design.doorShapeList,m.product.door_sash_shape_id),_.designSource.doorConfig.handleShapeIndex=L(_.design.doorShapeList,m.product.door_handle_shape_id),_.designSource.doorConfig.lockShapeIndex=L(_.design.doorShapeList,m.product.door_lock_shape_id),_.design.doorConfig=_.setDefaultDoor()}function L(e,t){for(var i=e.length,r=0;i>r;r++)if(e[r].shapeId===t)return r}function O(){_.design.selectedImpost.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").each(function(){var t=d3.select(this);t.on(je,function(){if(_.design.tempSize.length)Ue(),He();else{var i=C(t[0][0],_.design.selectedImpost);i?(t.classed("frame-active",!0),_.design.activeMenuItem=3,_.design.isImpostDelete=1,_.design.activeSubMenuItem=3,w(),U(),Be(),e.$apply()):(t.classed("frame-active",!1),_.design.selectedImpost.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply(),_.design.isImpostDelete=0))}})})}function C(e,t){for(var i=1,r=e.attributes.block_id.nodeValue,o=t.length;--o>-1;)if(t[o].attributes.block_id.nodeValue===r){t.splice(o,1),i=0;break}return i&&t.push(e),i}function R(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").each(function(){var t=d3.select(this);t.on(je,function(){if(_.design.tempSize.length)Ue(),He();else{var i=C(t[0][0],_.design.selectedGlass),r=t[0][0].attributes.block_id.nodeValue;i?(t.classed("glass-active",!0),w(),G(),U(),Be(),b(r),e.$apply()):(t.classed("glass-active",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block[block_id="+r+"]").classed("dim_hidden",!0),_.design.selectedGlass.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,x(),e.$apply()))}})})}function D(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_GLASS+" .glass").each(function(){var e=d3.select(this);e.on(je,function(){var t=C(e[0][0],_.design.selectedGlass);t?e.classed("glass-active",!0):e.classed("glass-active",!1)})})}function v(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_GRID+" .glass").each(function(){var e=d3.select(this);e.on(je,function(){for(var t=m.product.template.details,i=t.length,r=e[0][0].attributes.block_id.nodeValue;--i>0;)if(t[i].id===r)if("sash"===t[i].blockType){var o=C(e[0][0],_.design.selectedGlass);o?e.classed("glass-active",!0):e.classed("glass-active",!1)}else F(r,n.SVG_ID_GRID)})})}function b(e){var t=d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block[block_id="+e+"]"),i=t[0].length,r=0,o=0;if(i){for(;--i>-1;)t[0][i].attributes.axis&&("x"===t[0][i].attributes.axis.nodeValue?++r:"y"===t[0][i].attributes.axis.nodeValue&&++o);r&&d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockX").classed("dim_shiftX",1),o&&d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockY").classed("dim_shiftY",1),t.classed("dim_hidden",0)}}function P(){var t=d3.selectAll("#"+n.SVG_ID_EDIT+" .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});t.length&&d3.selectAll(t).each(function(){var t=d3.select(this);t.on(je,function(){if(_.design.tempSize.length)Ue(),He();else{var i=M(t[0][0],_.design.selectedArc);i?(t.classed("active_svg",!0),k(),w(),G(),Be(),e.$apply()):(t.classed("active_svg",!1),_.design.selectedArc.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply()))}})})}function M(e,t){for(var i=1,r=e.attributes.item_id.nodeValue,o=t.length;--o>-1;)if(t[o].attributes.item_id.nodeValue===r){t.splice(o,1),i=0;break}return i&&t.push(e),i}function x(){d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockX").classed("dim_shiftX",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockY").classed("dim_shiftY",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block").classed("dim_hidden",!0)}function w(){_.design.selectedCorner.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .corner_mark").transition().duration(300).ease("linear").attr("r",0)}function G(){_.design.selectedImpost.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").classed("frame-active",!1)}function U(){_.design.selectedArc.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .frame").classed("active_svg",!1)}function k(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").classed("glass-active",!1)}function H(){u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e)})}function V(e,t){var i,r=t.__data__,o=t.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details,l=a.length,s=d3.min(r.sizes);if(8===e||9===e)s>=n.minSizeLimitStulp?(8===e?i=[{openDir:[4],handlePos:0,sashType:4},{openDir:[1,2],handlePos:2,sashType:17}]:9===e&&(i=[{openDir:[1,4],handlePos:4,sashType:17},{openDir:[2],handlePos:0,sashType:4}]),B(o,i)):F(o);else if(s>=n.minSizeLimit||r.square>=n.squareLimit){_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));for(var d=1;l>d;d++)if(a[d].id===o){switch(a[d].blockType="sash",a[d].gridId=0,a[d].gridTxt="",e){case 2:a[d].openDir=[4],a[d].handlePos=4,a[d].sashType=2;break;case 3:a[d].openDir=[2],a[d].handlePos=2,a[d].sashType=2;break;case 4:a[d].openDir=[1],a[d].handlePos=1,a[d].sashType=7;break;case 5:a[d].openDir=[3],a[d].handlePos=3,a[d].sashType=2;break;case 6:a[d].openDir=[1,2],a[d].handlePos=2,a[d].sashType=6;break;case 7:a[d].openDir=[1,4],a[d].handlePos=4,a[d].sashType=6}H()}}else F(o)}function B(e,t){var i,r,o,n,a,l=_.design.templateTEMP.details,s=l.length,d=_.design.templateSourceTEMP.details,c=90,p=0;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--s>0;)l[s].id===e&&(i=1*s,r=Number(l[s].id.replace(/\D+/g,"")));o=ce(d),n=u.cteateLineByAngel(l[i].center,c),a=ue(n,l[i].linesOut),a.length>2&&pe(a);var E=a.length;if(2===E){for(;--E>-1;)Ee(a[E],r,i,d,p,1),me(++o,i,d,1,t[E]);H()}else F(e)}function F(e,t){var i=t?t:n.SVG_ID_EDIT,r=d3.select("#"+i+" .glass[block_id="+e+"]"),o=1;r.classed("error_glass",!0);var a=setInterval(function(){11===o&&clearInterval(a),o%2?r.classed("error_glass",!1):r.classed("error_glass",!0),o++},50)}function Y(e){var t=e.attributes.block_id.nodeValue,i=_.design.templateSourceTEMP.details,r=i.length,o=0;_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));for(var n=1;r>n;n++)if(i[n].id===t){o=W(i[n].parent,i,r),o?(he(i[o].children[0],i),he(i[o].children[1],i),i[o].children.length=0,delete i[o].impost):z(i[n]);break}H()}function W(e,t,i){for(var r=0;--i>0;)t[i].id===e&&t[i].impost&&"shtulp"===t[i].impost.impostAxis[0].type&&(r=i);return r}function z(e){e.blockType="frame",delete e.openDir,delete e.handlePos,delete e.sashType,delete e.gridId,delete e.gridTxt}function K(e){for(var t=_.design.templateSourceTEMP.details,i=e.details.length,r=0;--i>0;)if(e.details[i].level&&"sash"===e.details[i].blockType)for(var o=e.details[i].parts.length;--o>-1;)if("glass"===e.details[i].parts[o].type){var a=d3.min(e.details[i].parts[o].sizes);a<=n.minSizeLimit&&a<=n.minSizeLimit&&(z(t[i]),r=1)}return r}function j(e){var t=e.__data__.id,i=Number(t.replace(/\D+/g,"")),r=e.attributes.block_id.nodeValue,o=_.design.templateSourceTEMP.details,n=_.design.templateTEMP.details,a=n.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--a>0;)n[a].id===r&&(e.__data__.view?Q(t,i,n[a].linesOut,a,o):ie("qc"+i,r,o));H()}function q(e){var t=e.__data__.id,i=Number(t.replace(/\D+/g,"")),r=e.attributes.block_id.nodeValue,o=_.design.templateSourceTEMP.details,n=_.design.templateTEMP.details,a=n.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--a>0;)if(n[a].id===r)if(e.__data__.view)Q(t,i,n[a].linesOut,a,o),Z(i,a,o);else for(var l=n[a].linesOut.length,s=0;l>s;s++)n[a].linesOut[s].from.id==="c"+i+"-2"&&n[a].linesOut[s].to.id==="c"+i+"-1"&&J("corner","qc"+i,n[a].linesOut[s],i,a,o);H()}function Q(e,t,i,r,o){for(var n=i.length,a=0;n>a;a++)i[a].from.id===e?X(1,t,i[a],r,o):i[a].to.id===e&&X(2,t,i[a],r,o);for(var l=o[r].pointsOut.length;--l>-1;)o[r].pointsOut[l].id===e&&(o[r].pointsOut[l].view=0)}function X(e,t,i,r,o){var n=200,a={type:"corner",id:"c"+t+"-"+e,dir:"line"};1===e?(a.x=(i.from.x*(i.size-n)+i.to.x*n)/i.size,a.y=(i.from.y*(i.size-n)+i.to.y*n)/i.size):2===e&&(a.x=(i.from.x*n+i.to.x*(i.size-n))/i.size,a.y=(i.from.y*n+i.to.y*(i.size-n))/i.size),o[r].pointsOut.push(a)}function Z(e,t,i){for(var r=i[t].pointsOut.length,o={};--r>-1;)"corner"===i[t].pointsOut[r].type&&(i[t].pointsOut[r].id==="c"+e+"-2"&&(o.from=i[t].pointsOut[r]),i[t].pointsOut[r].id==="c"+e+"-1"&&(o.to=i[t].pointsOut[r]));u.setLineCoef(o),o.size=a.roundingValue(Math.hypot(o.to.x-o.from.x,o.to.y-o.from.y),1),J("corner","qc"+e,o,e,t,i)}function J(e,t,i,r,o,n){var a={type:e,blockId:n[o].id,id:t,heightQ:i.size/4,fromPId:i.from.id,toPId:i.to.id,positionQ:r};n[o].pointsQ||(n[o].pointsQ=[]),n[o].pointsQ.push(a)}function ee(e){var t=e.__data__.id,i=Number(t.replace(/\D+/g,"")),r=e.attributes.block_id.nodeValue,o=_.design.templateSourceTEMP.details,n=o.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),te(["c"+i+"-1","c"+i+"-2"],r,o),ie("qc"+i,r,o);--n>0;)if(o[n].id===r)for(var a=o[n].pointsOut.length;--a>-1;)o[n].pointsOut[a].id===t&&(o[n].pointsOut[a].view=1);H()}function te(e,t,i){for(var r=i.length;--r>0;)if(i[r].id===t)for(var o=i[r].pointsOut.length;--o>-1;)for(var n=e.length;--n>-1;)if(i[r].pointsOut[o].id===e[n]){i[r].pointsOut.splice(o,1);break}}function ie(e,t,i){for(var r=i.length;--r>0;)if(i[r].id===t&&i[r].pointsQ)for(var o=i[r].pointsQ.length;--o>-1;)if(i[r].pointsQ[o].id===e){i[r].pointsQ.splice(o,1);break}}function re(e){var t=o.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("frame"===i.type){var r,n,a,l=Number(i.points[0].id.replace(/\D+/g,"")),s=e.attributes.block_id.nodeValue,d=angular.copy(_.design.templateTEMP.details),c=d.length,p=_.design.templateSourceTEMP.details;_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));for(var E=1;c>E;E++)if(d[E].id===s)for(var g=d[E].linesOut.length;--g>-1;)d[E].linesOut[g].from.id===i.points[0].id&&d[E].linesOut[g].to.id===i.points[1].id&&(r=E,n=d[E].linesOut[g]);i.points[0].fi<180&&i.points[1].fi<180?a=1:i.points[0].fi<90&&i.points[1].fi>270?a=2:i.points[0].fi>180&&i.points[1].fi>180?a=3:i.points[0].fi<270&&i.points[1].fi>90&&(a=4);var f=u.setQPointCoord(a,n,n.size/2);1===a?(oe(1,0,f.y,d),oe(1,0,f.y,p),f.y=0):4===a&&(oe(1,1,f.x,d),oe(1,1,f.x,p),f.x=0),f.y&&f.x||(n=ae(i.points,r,p)),J("arc","qa"+l,n,a,r,p),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=K(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function oe(e,t,i,r){for(var o=r.length;--o>0;)if(r[o].level&&(r[o].pointsOut.length&&ne(e,t,r[o].pointsOut,r[o].pointsOut.length,i),r[o].pointsIn.length&&ne(e,t,r[o].pointsIn,r[o].pointsIn.length,i),r[o].impost)){var n=r[o].impost.impostAxis.length;n&&ne(e,t,r[o].impost.impostAxis,n,i)}}function ne(e,t,i,r,o){for(;--r>-1;)t?e?i[r].x+=o:i[r].x-=o:e?i[r].y+=o:i[r].y-=o}function ae(e,t,i){for(var r,o=u.centerBlock(i[t].pointsOut),n=u.sortingPoints(i[t].pointsOut,o),a=u.setLines(n),l=a.length;--l>-1;)a[l].from.id===e[0].id&&a[l].to.id===e[1].id&&(r=a[l]);return r}function le(e){var t=o.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("arc"===i.type){var r=i.points[1].id,n=e.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details;_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),ie(r,n,a),i.points[1].x?i.points[1].y||oe(0,0,i.points[0].y,a):oe(0,1,i.points[0].x,a),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=K(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function se(e){var t=_.design.selectedArc.shift(),r=t.attributes.item_id.nodeValue,o=d3.select("#"+n.SVG_ID_EDIT+" [item_id="+r+"]");o[0].length&&(e?re(o[0][0]).then(function(){_.design.selectedArc.length&&i(function(){se(e)},1)}):le(o[0][0]).then(function(){_.design.selectedArc.length&&i(function(){se(e)},1)}))}function de(e,t){var i,r,o,a,l,s,d,c=t.__data__,p=t.attributes.block_id.nodeValue,E=d3.min(c.sizes),m=_.design.templateTEMP.details,g=m.length,f=_.design.templateSourceTEMP.details,T=0,h=0;if(E>=n.minSizeLimit&&c.square>=n.squareLimit){switch(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),e){case 2:i=90;break;case 3:i=180,T=1;break;case 4:i=170,T=1;break;case 5:i=190,T=1;break;case 6:i=80;break;case 7:i=100;break;case 8:i=90,h=1,r=2;break;case 9:i=90,h=1,r=4;break;case 10:i=180,T=1,h=1,r=1;break;case 11:i=180,T=1,h=1,r=3;break;case 12:i=100,h=1,r=1;break;case 13:i=100,h=1,r=3;break;case 14:i=10,T=1,h=1,r=4;break;case 15:i=10,T=1,h=1,r=2}for(var I=1;g>I;I++)m[I].id===p&&(o=I,a=Number(m[I].id.replace(/\D+/g,"")));l=ce(f),s=u.cteateLineByAngel(m[o].center,i),d=ue(s,m[o].linesOut),d.length>2&&pe(d);var A=d.length;if(2===A){for(;--A>-1;)Ee(d[A],a,o,f,T),me(++l,o,f);if(h){var S=ge(r,s,m[o].linesIn,m[o].pointsIn);fe(S,r,a,o,f)}H()}else F(p)}else F(p)}function ce(e){for(var t=e.length,i=0;--t>0;){var r=Number(e[t].id.replace(/\D+/g,""));r>i&&(i=r)}return i}function ue(e,t){for(var i=[],r=t.length,o=0;r>o;o++){var n,a;if(n=u.getCoordCrossPoint(e,t[o]),n.x>=0&&n.y>=0){a=u.checkLineOwnPoint(n,t[o].to,t[o].from);var l=u.isInsidePointInLine(a);if(l){var s=u.checkEqualPoints(n,i);if(s){var d=_e(t[o].from,n);if(d){var c=_e(t[o].to,n);c&&i.push(n)}}}}}return i}function pe(e){for(var t=5,i=e.length;--i>-1;)for(var r=e.length;--r>-1;){var o=Math.abs(e[i].x-e[r].x),n=Math.abs(e[i].y-e[r].y);if(o>0&&t>o&&n>0&&t>n){e.splice(i,1);break}}}function _e(e,t){var i=1,r=40,o=t.x-e.x,n=t.y-e.y;return o>0&&r>o&&n>0&&r>n&&(i=0),i}function Ee(e,t,i,r,o,n){var a={type:"impost",id:"ip"+t,x:Math.round(e.x),y:Math.round(e.y),dir:"line",dimType:o};n&&(a.type="shtulp",a.id="sht"+t),r[i].impost||(r[i].impost={impostAxis:[],impostOut:[],impostIn:[]}),r[i].impost.impostAxis.push(a)}function me(e,t,i,r,o){var n={type:"skylight",id:"block_"+e,level:i[t].level+1,blockType:"frame",parent:i[t].id,children:[],pointsOut:[],pointsIn:[],parts:[],glassId:i[t].glassId,glassTxt:i[t].glassTxt};r&&(n.blockType="sash",angular.extend(n,o)),i[t].children.push(n.id),i.push(n)}function ge(e,t,i,r){var o=ue(t,i);if(2===o.length){var n,l,s,d,c={from:o[0],to:o[1]},p=a.roundingValue(Math.hypot(c.from.x-c.to.x,c.from.y-c.to.y)/2,1),r=angular.copy(r),_=r.length,E=[];for(u.setLineCoef(c),s=u.setQPointCoord(e,c,p),c.coefA||1!==e?c.coefB||4!==e||(s.x-=2*p):s.y-=2*p,d=u.setPointLocationToLine(c.from,c.to,s);--_>-1;){var m=u.setPointLocationToLine(c.from,c.to,r[_]);m>0&&d>0?E.push(r[_]):0>m&&0>d&&E.push(r[_])}return E.push(c.from,c.to),n=u.centerBlock(E),l=a.roundingValue(Math.abs((c.coefA*n.x+c.coefB*n.y+c.coefC)/Math.hypot(c.coefA,c.coefB)),1),l>p?p/2:l/2}}function fe(e,t,i,r,o){var n={blockId:o[r].id,dir:"curv",id:"qi"+i,heightQ:e,positionQ:t};o[r].impost.impostAxis.push(n)}function Te(e){var t=e.attributes.block_id.nodeValue,i=_.design.templateSourceTEMP.details,r=i.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--r>0;)if(i[r].id===t){he(i[r].children[0],i),he(i[r].children[1],i),i[r].children.length=0,delete i[r].impost;break}H()}function he(e,t){for(var i=t.length;--i>0;)if(t[i].id===e){var r=t[i].children.length;r?(he(t[i].children[0],t),he(t[i].children[1],t),t.splice(i,1)):t.splice(i,1);break}}function Ie(){var e=_.design.templateSourceTEMP.details,t=e.length,r=u.collectAllPointsOut(_.design.templateTEMP.details),o=d3.max(r,function(e){return e.x});_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),Ae(o,e,t);for(var n=1;t>n;n++)1===e[n].level&&Le(n,t,e);H(),i(function(){_.design.activeMenuItem=0},500)}function Ae(e,t,i){for(var r=1;i>r;r++){if(t[r].level&&t[r].pointsQ){var o=t[r].pointsQ.length;if(o)for(;--o>-1;)t[r].pointsQ[o].id.indexOf("qa")+1?Ne(t[r].pointsQ[o]):t[r].pointsQ[o].id.indexOf("qc")+1&&ye(t[r].pointsQ[o])}if(t[r].impost&&(Se(e,t[r].impost.impostAxis),t[r].impost.impostAxis[2])){var n={from:t[r].impost.impostAxis[0],to:t[r].impost.impostAxis[1]};u.setLineCoef(n),n.coefA&&n.coefB?ye(t[r].impost.impostAxis[2]):Ne(t[r].impost.impostAxis[2])}t[r].pointsOut.length&&Se(e,t[r].pointsOut),t[r].pointsIn.length&&Se(e,t[r].pointsIn)}}function Se(e,t){for(var i=t.length;--i>-1;)0===t[i].x?t[i].x=e:t[i].x===e?t[i].x=0:t[i].x=e-t[i].x}function Ne(e){4===e.positionQ?e.positionQ=2:2===e.positionQ&&(e.positionQ=4)}function ye(e){4===e.positionQ?e.positionQ=3:2===e.positionQ?e.positionQ=1:1===e.positionQ?e.positionQ=2:3===e.positionQ&&(e.positionQ=4)}function Le(e,t,i){var r=i[e].children.length;if(r){var o=i[e].children.pop();i[e].children.unshift(o);for(var n=1;t>n;n++)(i[n].id===i[e].children[0]||i[n].id===i[e].children[1])&&Le(n,t,i)}}function Oe(){var e,t,i,r,o,n,a,l,s,d,c,p,E,m=_.design.templateSourceTEMP.details,g=m.length,f=_.design.templateTEMP.details,T=[],h=[];for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),c=1;g>c;c++)1===m[c].level&&T.push(m[c].pointsOut.map(function(e){return e.x}));for(e=T.length,p=0;e>p;p++){for(h=[],t=d3.min(T[p]),i=d3.max(T[p]),c=1;g>c;c++)m[c].impost&&m[c].impost.impostAxis&&m[c].impost.impostAxis[0].x===m[c].impost.impostAxis[1].x&&m[c].impost.impostAxis[0].x>t&&m[c].impost.impostAxis[0].x<i&&(r={ind:c,x:m[c].impost.impostAxis[0].x},h.push(r));for(o=Math.round(i/(h.length+1)),n=h.sort(u.sortByX),a=n.length,E=0;a>E;E++)l=E?n[E-1].x+o:t+o,s=Ce(f[n[E].ind].pointsOut,l,m[n[E].ind].impost.impostAxis[0].y),d=Ce(f[n[E].ind].pointsOut,l,m[n[E].ind].impost.impostAxis[1].y),s||d||(n[E].x=l,m[n[E].ind].impost.impostAxis[0].x=l,m[n[E].ind].impost.impostAxis[1].x=l)}H()}function Ce(e,t,i){for(var r={x:t,y:i},o=0,n=0,a=e.length,l=0;a>l;l++)if(n=e[l+1]?u.setPointLocationToLine(e[l],e[l+1],r):u.setPointLocationToLine(e[l],e[0],r),n>0){o=n;break}return o}function Re(){var e,t,i,r,o,n,l,s,d,c,u,p,E,m,g,f,T,h,I,A,S,N=_.design.templateTEMP.details,y=N.length,L=_.design.templateSourceTEMP.details,O=_.design.selectedGlass.length,C=[];if(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),O)for(E=0;O>E;E++)for(e=_.design.selectedGlass[E].attributes.block_id.nodeValue,m=1;y>m;m++)N[m].id===e&&De(N[m],C);else for(m=1;y>m;m++)!N[m].children.length&&N[m].glassPoints&&De(N[m],C);if(t=C.length,i=a.roundingValue(C.reduce(function(e,t){return{width:e.width+t.width}}).width/t),2===t){r=C[0].imps.length,o=C[1].imps.length,n=0;e:for(g=0;r>g;g++)for(f=0;o>f;f++)if(C[1].imps[f].id===C[0].imps[g].id){n=C[1].imps[f].id;break e}}for(T=0;t>T;T++)for(l=C[T].imps.length,d=Math.round(i-C[T].width),h=0;l>h;h++)if(!C[T].imps[h].isChanged&&(c=0,2===t?C[T].imps[h].id===n&&(c=1):c=1,c))for(C[T].imps[h].x<C[T].maxX&&(d*=-1),C[T].imps[h].x+=d,I=0;t>I;I++)if(h!==I)for(s=C[I].imps.length,A=0;s>A;A++)T!==I&&C[I].imps[A].id===C[T].imps[h].id&&(C[I].imps[A].isChanged=1,C[I].width-=d);for(T=0;t>T;T++)for(l=C[T].imps.length,h=0;l>h;h++)if(!C[T].imps[h].isChanged)for(u=Number(C[T].imps[h].id.replace(/\D+/g,"")),S=1;y>S;S++)p=Number(L[S].id.replace(/\D+/g,"")),p===u&&L[S].impost&&(L[S].impost.impostAxis[0].x=1*C[T].imps[h].x,L[S].impost.impostAxis[1].x=1*C[T].imps[h].x);H()}function De(e,t){for(var i,r,o,n,a,l,s={imps:[]},d=e.pointsOut.filter(function(e){return"impost"===e.type||"shtulp"===e.type}),c=d.length,u=0;c>u;u++){for(i=0,r=0,l=0;c>l;l++)u!==l&&d[l].id===d[u].id&&(r=1,d[l].x===d[u].x&&(i=1));if(!r)break;if(i){for(o=1,n=s.imps.length;--n>-1;)s.imps[n].id===d[u].id&&(o=0);o&&s.imps.push(d[u])}}s.imps.length&&(a=e.glassPoints.map(function(e){return e.x}),s.minX=d3.min(a),s.maxX=d3.max(a),s.width=s.maxX-s.minX,t.push(s))}function ve(){d3.selectAll("#"+n.SVG_ID_EDIT+" .size-box").each(function(){var t=d3.select(this);t.on(je,function(){var i=t.select(".size-rect"),r=i[0][0].attributes[0].nodeValue.indexOf("active")+1;if(_.design.tempSize.length)Ue(),He();else{if(r)Be();else{Fe(),i.classed("active",!0);var o=t.select(".size-txt-edit");o.classed("active",!0),_.design.oldSize=o[0][0],_.design.minSizeLimit=+o[0][0].attributes[8].nodeValue,_.design.maxSizeLimit=+o[0][0].attributes[9].nodeValue,p.global.isVoiceHelper?(_.design.openVoiceHelper=1,startRecognition(be,Pe,p.global.voiceHelperLanguage)):(p.global.isSizeCalculator=1,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0)}e.$apply()}})}),d3.select(window).on("keydown",function(){p.global.isSizeCalculator&&Me(d3.event)})}function be(t){_.design.voiceTxt=t,e.$apply(),i(function(){var i=parseStringToDimension(t);"NaN"==i&&(i=r("translate")("construction.VOICE_NOT_UNDERSTAND")),playTTS(i),xe(i),e.$apply()},1e3)}function Pe(t){t>100?(_.design.loudVoice=!0,_.design.quietVoice=!1):(_.design.loudVoice=!1,_.design.quietVoice=!0),e.$apply()}function Me(t){var i;if(13===t.which)Ue(),e.$apply();else if(8===t.which)we();else{switch(t.which){case 48:case 96:i=0;break;case 49:case 97:i=1;break;case 50:case 98:i=2;break;case 51:case 99:i=3;break;case 52:case 100:i=4;break;case 53:case 101:i=5;break;case 54:case 102:i=6;break;case 55:case 103:i=7;break;case 56:case 104:i=8;break;case 57:case 105:i=9}void 0!==i&&xe(i)}}function xe(e){var t=_.design.tempSize.length;if(p.global.isVoiceHelper){var i=parseInt(e,10);_.design.voiceTxt="",_.design.openVoiceHelper=!1,i>0&&1e4>i&&(_.design.tempSize=(""+i).split(""),Ge()),Fe()}else(4===t||1===t&&!_.design.tempSize[0])&&(_.design.tempSize.length=0),"0"===e?t&&_.design.tempSize[0]&&(_.design.tempSize.push(e),Ge()):"00"===e?t&&_.design.tempSize[0]&&(3>t?_.design.tempSize.push(0,0):3===t&&_.design.tempSize.push(0),Ge()):(_.design.tempSize.push(e),Ge())}function we(){_.design.tempSize.pop(),_.design.tempSize.length<1&&_.design.tempSize.push(0),Ge()}function Ge(){for(var e="",t=0;t<_.design.tempSize.length;t++)e+=_.design.tempSize[t].toString();var i=d3.select(_.design.oldSize);i.text(e),p.global.isVoiceHelper&&Ue()}function Ue(e){var t=o.defer();if(_.design.tempSize.length){var i=parseInt(_.design.tempSize.join(""),10);i>=_.design.minSizeLimit&&i<=_.design.maxSizeLimit?(ke(i),Be(),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),He(),t.resolve(1)})):(i<_.design.minSizeLimit?p.global.isVoiceHelper?(playTTS(r("translate")("construction.VOICE_SMALLEST_SIZE"),p.global.voiceHelperLanguage),Fe(),H()):(_.design.isMinSizeRestriction=1,_.design.isMaxSizeRestriction=0):i>_.design.maxSizeLimit&&(p.global.isVoiceHelper?(playTTS(r("translate")("construction.VOICE_BIGGEST_SIZE"),p.global.voiceHelperLanguage),Fe(),H()):(_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=1)),t.resolve(1))}else Be(),t.resolve(1);return _.design.openVoiceHelper=0,_.design.loudVoice=0,_.design.quietVoice=0,e?t.promise:void 0}function ke(e){_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0,_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));var t=_.design.templateSourceTEMP.details,i=(_.design.templateTEMP.details,_.design.oldSize.attributes[6].nodeValue),r=_.design.oldSize.attributes[5].nodeValue,o=_.design.oldSize.attributes[10].nodeValue,n=t.length;if("curve"===r){var a=Ve(+_.design.oldSize.attributes[11].nodeValue,e);e:for(var l=1;n>l;l++)if(t[l].id===i){if(t[l].pointsQ)for(var s=t[l].pointsQ.length;--s>-1;)if(t[l].pointsQ[s].id===o){t[l].pointsQ[s].heightQ=a;break e}if(t[l].impost&&t[l].impost.impostAxis[2].id===o){t[l].impost.impostAxis[2].heightQ=a;break e}}}else if(o.indexOf("qa")+1){for(var l=1;n>l;l++)if(1===t[l].level){var s=t[l].pointsQ.length;if(s)for(;--s>-1;)t[l].pointsQ[s].id===o&&(t[l].pointsQ[s].heightQ=e)}}else for(var d=+_.design.oldSize.attributes[11].nodeValue,c=+_.design.oldSize.attributes[12].nodeValue,u=_.design.oldSize.attributes[13].nodeValue,l=1;n>l;l++){var p=t[l].pointsOut.length;if(p)for(;--p>-1;)"x"===u?t[l].pointsOut[p].x===c&&(t[l].pointsOut[p].x=d+e):"y"===u&&t[l].pointsOut[p].y===c&&(t[l].pointsOut[p].y=d+e);if(t[l].impost)for(var E=0;2>E;E++)"x"===u?t[l].impost.impostAxis[E].x===c&&(t[l].impost.impostAxis[E].x=d+e):"y"===u&&t[l].impost.impostAxis[E].y===c&&(t[l].impost.impostAxis[E].y=d+e)}}function He(){_.design.tempSize.length=0,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0}function Ve(e,t){return a.roundingValue(t-Math.sqrt(Math.pow(t,2)-Math.pow(e,2)/4),1)}function Be(){Fe(),p.global.isSizeCalculator=0,_.design.openVoiceHelper=0}function Fe(){d3.selectAll("#"+n.SVG_ID_EDIT+" .size-rect").classed("active",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .size-txt-edit").classed("active",!1)}function Ye(){d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").each(function(){d3.select(this).on(je,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").each(function(){d3.select(this).on(je,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .frame").each(function(){d3.select(this).on(je,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .size-box").each(function(){d3.select(this).on(je,null)}),d3.select(window).on("keydown",null)}function We(){d3.selectAll("#"+n.SVG_ID_GLASS+" .glass").each(function(){d3.select(this).on(je,null).classed("glass-active",!1);
}),d3.selectAll("#"+n.SVG_ID_GRID+" .glass").each(function(){d3.select(this).on(je,null).classed("glass-active",!1)}),d3.select(window).on("keydown",null)}function ze(){var e=_.design.designSteps.length-1;_.design.templateSourceTEMP=angular.copy(_.design.designSteps[e]),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e)}),_.design.designSteps.pop(),He(),Be()}var Ke=this,je=p.global.isDevice?"touchstart":"click";return Ke.publicObj={setDefaultTemplate:f,designSaved:T,designCancel:h,setDefaultConstruction:A,initAllImposts:O,initAllGlass:R,initAllGlassXGlass:D,initAllGlassXGrid:v,initAllArcs:P,initAllDimension:ve,hideCornerMarks:w,deselectAllImpost:G,deselectAllArc:U,deselectAllGlass:k,rebuildSVGTemplate:H,createSash:V,deleteSash:Y,setCornerPoints:j,setCurvCornerPoints:q,deleteCornerPoints:ee,createArc:re,deleteArc:le,workingWithAllArcs:se,createImpost:de,deleteImpost:Te,initMirror:Ie,positionAxises:Oe,positionGlasses:Re,removeAllEventsInSVG:Ye,removeGlassEventsInSVG:We,setValueSize:xe,deleteLastNumber:we,closeSizeCaclulator:Ue,hideSizeTools:Be,stepBack:ze,getGridPrice:N,setIndexDoorConfig:y},Ke.publicObj}e.$inject=["$rootScope","$location","$timeout","$filter","$q","globalConstants","GeneralServ","localDB","MainServ","AnalyticsServ","optionsServ","SVGServ","GlobalStor","DesignStor","OrderStor","ProductStor","UserStor"],angular.module("DesignModule").factory("DesignServ",e)}(),function(){function e(e,t,i,r,o){function n(){o.global.startProgramm&&"main"===o.global.currOpenPage&&(o.global.startProgramm=0)}function a(){o.global.prevOpenPage=o.global.currOpenPage}function l(e,t){for(var t=t?t:2,i=typeof e,r="1",o=0;t>o;o++)r+="0";return r*=1,"string"===i?parseFloat((Math.round(parseFloat(e)*r)/r).toFixed(t)):"number"===i?parseFloat((Math.round(e*r)/r).toFixed(t)):void 0}function s(e,t){return e*t}function d(e,t){return l(e*(1-t/100))}function c(e,t){return e-t}function u(e){return e.filter(function(e,t,i){return t==i.indexOf(e)})}function p(e){var t={minX:d3.min(e,function(e){return e.x}),maxX:d3.max(e,function(e){return e.x}),minY:d3.min(e,function(e){return e.y}),maxY:d3.max(e,function(e){return e.y})};return t}function _(e,t,i){o.global.isAlert=1,o.global.alertTitle=e||"",o.global.alertDescr=t||"",o.global.confirmAction=i}var E=this,m=[{id:20,name:e("translate")("add_elements.GRIDS"),typeClass:"aux-grid",delay:5*r.STEP},{id:21,name:e("translate")("add_elements.VISORS"),typeClass:"aux-visor",delay:6*r.STEP},{id:9,name:e("translate")("add_elements.SPILLWAYS"),typeClass:"aux-spillway",delay:6*r.STEP},{id:19,name:e("translate")("add_elements.OUTSIDE"),typeClass:"aux-outside",delay:10*r.STEP},{id:26,name:e("translate")("add_elements.LOUVERS"),typeClass:"aux-louver",delay:15*r.STEP},{id:19,name:e("translate")("add_elements.INSIDE"),typeClass:"aux-inside",delay:20*r.STEP},{id:12,name:e("translate")("add_elements.CONNECTORS"),typeClass:"aux-connectors",delay:30*r.STEP},{id:27,name:e("translate")("add_elements.FAN"),typeClass:"aux-fan",delay:31*r.STEP},{id:8,name:e("translate")("add_elements.WINDOWSILLS"),typeClass:"aux-windowsill",delay:13*r.STEP},{id:24,name:e("translate")("add_elements.HANDLELS"),typeClass:"aux-handle",delay:28*r.STEP},{id:18,name:e("translate")("add_elements.OTHERS"),typeClass:"aux-others",delay:31*r.STEP}];return E.publicObj={addElementDATA:m,stopStartProg:n,setPreviosPage:a,roundingValue:l,addMarginToPrice:s,setPriceDis:d,sorting:c,removeDuplicates:u,getMaxMinCoord:p,confirmAlert:_},t.onbeforeunload=function(){return e("translate")("common_words.PAGE_REFRESH")},t.addEventListener("keydown",function(e){8!==e.keyCode||$(e.target).is("input, textarea")||e.preventDefault()}),E.publicObj}e.$inject=["$filter","$window","$document","globalConstants","GlobalStor"],angular.module("BauVoiceApp").factory("GeneralServ",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c,u,p){function _(){o.setPreviosPage(),l.global.isCreatedNewProduct&&l.global.isCreatedNewProject?e.path("/main"):n.createNewProject()}function E(){r.selectLocalDB(r.tablesLocalDB.orders.tableName,{order_type:1}).then(function(e){var t=angular.copy(e),i=t.length;if(u.history.isEmptyResult=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);u.history.ordersSource=angular.copy(t),u.history.orders=angular.copy(t)}else u.history.isEmptyResult=1})}function m(e,i){function n(){for(var e=u.history.orders.length,t=0;e>t;t++)u.history.orders[t].id===i&&(u.history.orders[t].order_style=M,u.history.ordersSource[t].order_style=M,r.updateLocalServerDBs(r.tablesLocalDB.orders.tableName,i,{order_style:M,sended:new Date}))}e!==P&&o.confirmAlert(t("translate")("common_words.SEND_ORDER_TITLE"),t("translate")("common_words.SEND_ORDER_TXT"),n)}function g(e,i){function a(){for(var e,t=u.history.orders.length,o=0;t>o;o++)u.history.orders[o].id===i&&(e=angular.copy(u.history.orders[o]));e.id=n.createOrderID(),e.order_number=0,e.order_hz="---",e.created=new Date,e.modified=new Date,r.insertServer(c.userInfo.phone,c.userInfo.device_code,r.tablesLocalDB.orders.tableName,e).then(function(t){t.status&&(e.order_number=t.order_number),u.history.orders.push(e),u.history.ordersSource.push(e),r.insertRowLocalDB(e,r.tablesLocalDB.orders.tableName)}),l(i,e.id,r.tablesLocalDB.order_products.tableName),l(i,e.id,r.tablesLocalDB.order_addelements.tableName)}function l(e,t,i){r.selectLocalDB(i,{order_id:e}).then(function(e){if(e.length){var o=angular.copy(e),n=o.length,a=0;if(n>0)for(;n>a;a++)delete o[a].id,o[a].modified=new Date,o[a].order_id=t,r.insertRowLocalDB(o[a],i),r.insertServer(c.userInfo.phone,c.userInfo.device_code,i,o[a])}else console.log("Empty result = ",e)})}e!==P&&o.confirmAlert(t("translate")("common_words.COPY_ORDER_TITLE"),t("translate")("common_words.COPY_ORDER_TXT"),a)}function f(e,i,a){function l(){var t,o;e?(t=u.history.orders,o=u.history.ordersSource):(t=u.history.drafts,o=u.history.draftsSource);for(var a=t.length;--a>-1;)if(t[a].id===i){t.splice(a,1),o.splice(a,1);break}t.length||(u.history.isEmptyResult=1),n.deleteOrderInDB(i),e&&r.deleteOrderServer(c.userInfo.phone,c.userInfo.device_code,i)}a.preventDefault(),a.stopPropagation(),o.confirmAlert(t("translate")("common_words.DELETE_ORDER_TITLE"),t("translate")("common_words.DELETE_ORDER_TXT"),l)}function T(t,i){l.global.isLoader=1,l.global.orderEditNumber=i,s.order=s.setDefaultOrder();for(var r=t?u.history.orders.length:u.history.drafts.length;--r>-1;)t?u.history.orders[r].id===i&&(angular.extend(s.order,u.history.orders[r]),p.fillOrderForm()):u.history.drafts[r].id===i&&(angular.extend(s.order,u.history.drafts[r]),p.fillOrderForm());s.order.order_date=new Date(s.order.order_date).getTime(),s.order.delivery_date=new Date(s.order.delivery_date).getTime(),s.order.new_delivery_date=new Date(s.order.new_delivery_date).getTime(),h(1,s.order.floor_id,l.global.supplyData),h(2,s.order.mounting_id,l.global.assemblingData),h(3,s.order.instalment_id,l.global.instalmentsData),delete s.order.additional_payment,delete s.order.created,delete s.order.sended,delete s.order.state_to,delete s.order.state_buch,delete s.order.batch,delete s.order.base_price,delete s.order.factory_margin,delete s.order.purchase_price,delete s.order.sale_price,delete s.order.modified,I().then(function(){S().then(function(){l.global.isConfigMenu=1,l.global.isNavMenu=0,o.setPreviosPage(),l.global.isLoader=0,e.path("/cart")})})}function h(e,t,i){if(t)for(var r=i.length;--r>-1;)if(i[r].id===t)switch(e){case 1:s.order.floorName=angular.copy(i[r].name);break;case 2:s.order.mountingName=angular.copy(i[r].name);break;case 3:s.order.selectedInstalmentPeriod=angular.copy(i[r].name),s.order.selectedInstalmentPercent=angular.copy(i[r].value)}}function I(){var e=i.defer();return r.selectLocalDB(r.tablesLocalDB.order_products.tableName,{order_id:l.global.orderEditNumber}).then(function(t){var r=angular.copy(t);if(r.length){var c=r.map(function(e){var t=i.defer(),r=d.setDefaultProduct();return angular.extend(r,e),delete r.id,delete r.modified,r.is_addelem_only?t.resolve(1):(r.template_source=JSON.parse(r.template_source),n.setCurrentProfile(r,r.profile_id).then(function(){if(r.glass_id){var e=r.glass_id.split(", "),i=e.length;if(i)for(;--i>-1;)A(r,1*e[i])}l.global.isSashesInTemplate=n.checkSashInTemplate(r),n.setCurrentHardware(r,r.hardware_id),n.setCurrLamination(r.lamination_id),delete r.lamination_id,delete r.lamination_in_id,delete r.lamination_out_id,t.resolve(r)})),t.promise});i.all(c).then(function(t){var r=t.map(function(e){var t=i.defer();return a.createSVGTemplateIcon(e.template_source,e.profileDepths).then(function(i){e.templateIcon=i,delete e.profile_id,delete e.glass_id,delete e.hardware_id,e.addelemPriceDis=o.setPriceDis(e.addelem_price,s.order.discount_addelem),e.productPriceDis=o.setPriceDis(e.template_price,s.order.discount_construct)+e.addelemPriceDis,s.order.products.push(e),t.resolve(1)}),t.promise});e.resolve(i.all(r))})}else e.reject(r)}),e.promise}function A(e,t){var i=l.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});i.length&&e.glass.unshift(n.fineItemById(t,i[0].glasses))}function S(){var e=i.defer();return r.selectLocalDB(r.tablesLocalDB.order_addelements.tableName,{order_id:l.global.orderEditNumber}).then(function(t){var i=angular.copy(t),r=i.length,n=s.order.products.length;if(r)for(;--r>-1;)for(var a=0;n>a;a++)i[r].product_id===s.order.products[a].product_id&&(i[r].id=angular.copy(i[r].element_id),delete i[r].element_id,delete i[r].modified,i[r].elementPriceDis=o.setPriceDis(i[r].element_price,s.order.discount_addelem),s.order.products[a].chosenAddElements[i[r].element_type].push(i[r]),r||e.resolve(1));else e.resolve(1)}),e.promise}function N(){u.history.isOrderDate=0,u.history.isOrderDateDraft=0,u.history.isDraftView=!u.history.isDraftView,u.history.drafts.length||y()}function y(){r.selectLocalDB(r.tablesLocalDB.orders.tableName,{order_type:0}).then(function(e){var t=angular.copy(e),i=t.length;if(u.history.isEmptyResultDraft=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);u.history.draftsSource=angular.copy(t),u.history.drafts=angular.copy(t)}else u.history.isEmptyResultDraft=1})}function L(){u.history.isOrderSearch=1,u.history.isOrderDate=0,u.history.isOrderSort=0}function O(){var e;u.history.isDraftView?(u.history.isOrderDateDraft&&(e=C(u.history.draftsSource,u.history.startDateDraft,u.history.finishDateDraft),e&&(u.history.drafts=e)),u.history.isOrderDateDraft=!u.history.isOrderDateDraft,u.history.isOrderSortDraft=0):(u.history.isOrderDate&&(e=C(u.history.ordersSource,u.history.startDate,u.history.finishDate),e&&(u.history.orders=e)),u.history.isOrderDate=!u.history.isOrderDate,u.history.isOrderSearch=0,u.history.isOrderSort=0)}function C(e,t,i){if(""!==t||""!==i){var r,o,n;if(r=angular.copy(e),o=new Date(t).valueOf(),n=new Date(i).valueOf(),""!==t&&""!==i&&o>n)return!1;for(var a=r.length-1;a>=0;a--){var l=new Date(r[a].created).valueOf();(o>l||l>n)&&r.splice(a,1)}return r}return!1}function R(e){u.history.isDraftView?"start-date"!==e||u.history.isStartDateDraft?"finish-date"!==e||u.history.isFinishDateDraft?"full-date"!==e||u.history.isAllPeriodDraft?(u.history.isStartDateDraft=0,u.history.isFinishDateDraft=0,u.history.isAllPeriodDraft=0):(u.history.isStartDateDraft=0,u.history.isFinishDateDraft=0,u.history.isAllPeriodDraft=1,u.history.startDateDraft="",u.history.finishDateDraft="",u.history.drafts=angular.copy(u.history.draftsSource)):(u.history.isStartDateDraft=0,u.history.isFinishDateDraft=1,u.history.isAllPeriodDraft=0):(u.history.isStartDateDraft=1,u.history.isFinishDateDraft=0,u.history.isAllPeriodDraft=0):"start-date"!==e||u.history.isStartDate?"finish-date"!==e||u.history.isFinishDate?"full-date"!==e||u.history.isAllPeriod?(u.history.isStartDate=0,u.history.isFinishDate=0,u.history.isAllPeriod=0):(u.history.isStartDate=0,u.history.isFinishDate=0,u.history.isAllPeriod=1,u.history.startDate="",u.history.finishDate="",u.history.orders=angular.copy(u.history.ordersSource)):(u.history.isStartDate=0,u.history.isFinishDate=1,u.history.isAllPeriod=0):(u.history.isStartDate=1,u.history.isFinishDate=0,u.history.isAllPeriod=0)}function D(){u.history.isDraftView?(u.history.isOrderSortDraft=!u.history.isOrderSortDraft,u.history.isOrderDateDraft=0):(u.history.isOrderSort=!u.history.isOrderSort,u.history.isOrderSearch=0,u.history.isOrderDate=0)}function v(e,t){u.history.isDraftView?u.history.isSortTypeDraft===t?(u.history.isSortTypeDraft=0,u.history.reverseDraft=1):(u.history.isSortTypeDraft=t,"first"===u.history.isSortTypeDraft&&(u.history.reverseDraft=1),"last"===u.history.isSortTypeDraft&&(u.history.reverseDraft=0)):e?u.history.isFilterType===t?u.history.isFilterType=void 0:u.history.isFilterType=t:u.history.isSortType===t?(u.history.orders=angular.copy(u.history.ordersSource),u.history.isSortType="last"):u.history.isSortType=t}var b=this,P="master",M="done";return b.publicObj={toCurrentCalculation:_,downloadOrders:E,sendOrderToFactory:m,makeOrderCopy:g,clickDeleteOrder:f,editOrder:T,viewSwitching:N,orderSearching:L,orderDateSelecting:O,openCalendarScroll:R,orderSorting:D,sortingInit:v},b.publicObj}e.$inject=["$location","$filter","$q","localDB","GeneralServ","MainServ","SVGServ","GlobalStor","OrderStor","ProductStor","UserStor","HistoryStor","CartStor"],angular.module("HistoryModule").factory("HistoryServ",e)}(),function(){function e(e,t,i,r,o,n,a){function l(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return j.transaction(function(t){t.executeSql("DROP TABLE IF EXISTS "+e,[],function(){i.resolve(1)},function(){console.log("not find deleting table"),i.resolve(0)})}),i.promise});return t.all(r)}function s(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return j.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+$[e].tableName+" (id INTEGER PRIMARY KEY AUTOINCREMENT, "+$[e].prop+", modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP"+$[e].foreignKey+")",[],function(){i.resolve(1)},function(){console.log("Something went wrong with creating table "+$[e].tableName),i.resolve(0)})}),i.promise});return t.all(r)}function d(e,t){var i=Object.keys(e),r=i.join(", "),o=i.map(function(t){return e[t]=u(e[t]),"'"+e[t]+"'"}).join(", ");j.transaction(function(e){e.executeSql("INSERT INTO "+t+" ("+r+") VALUES ("+o+")",[],null,function(){console.log("Something went wrong with insert into "+t)})})}function c(e){var i=[],r=Object.keys(e.tables),o=r.length;return j.transaction(function(n){for(var a=0;o>a;a++){var l=e.tables[r[a]].fields.join(", "),s=e.tables[r[a]].rows.length;if(s)for(var d=0;s>d;d++){var c=t.defer(),p=e.tables[r[a]].rows[d].map(function(e){return e=u(e),"'"+e+"'"}).join(", ");n.executeSql("INSERT INTO "+r[a]+" ("+l+") VALUES ("+p+")",[],function(){c.resolve(1)},function(e){console.log("Error!!! ",r[a],l),c.resolve(0)}),i.push(c.promise)}}}),t.all(i)}function u(e){return angular.isString(e)&&e.indexOf("'")+1?e.replace(/'/g,"''"):e}function p(e,i,r){var o=t.defer(),n=r?r:"*",a="";if(i){a=" WHERE ";var l=Object.keys(i);a+=l[0]+" = '"+i[l[0]]+"'";var s=l.length;if(s>1)for(var d=1;s>d;d++)a+=" AND "+l[d]+" = '"+i[l[d]]+"'"}return j.transaction(function(t){t.executeSql("SELECT "+n+" FROM "+e+a,[],function(e,t){var i=t.rows.length;if(i){for(var r=[],n=0;i>n;n++)r.push(t.rows.item(n));o.resolve(r)}else o.resolve(0)},function(e,t){0===Object.keys(e).length&&5===t.code&&o.resolve(0)})}),o.promise}function _(e,t,i){var r="",o=Object.keys(t),n=o.length,a=Object.keys(i),l=a.length,s="";if(n)for(var d=0;n>d;d++)s+=d?", "+o[d]+" = '"+t[o[d]]+"'":o[d]+" = '"+t[o[d]]+"'";if(l&&(r=" WHERE ",r+=a[0]+" = '"+i[a[0]]+"'",l>1))for(var c=1;l>c;c++)r+=" AND "+a[c]+" = '"+i[a[c]]+"'";j.transaction(function(t){t.executeSql("UPDATE "+e+" SET "+s+r,[],function(){},function(){console.log("Something went wrong with updating "+e+" record")})})}function E(e,t){var i="";if(t){var r=Object.keys(t),o=r.length;if(i=" WHERE "+r[0]+" = '"+t[r[0]]+"'",o>1)for(var n=1;o>n;n++)i+=" AND "+r[n]+" = '"+t[r[n]]+"'"}j.transaction(function(t){t.executeSql("DELETE FROM "+e+i,[],null,function(){console.log("Something went wrong with insert into "+e)})})}function m(i,o){var n=t.defer(),a=o?"/api/login?type=1":"/api/login";return e.post(r.serverIP+a,{login:i}).then(function(e){n.resolve(e.data)},function(){console.log("Something went wrong with User recive!"),n.resolve({status:0})}),n.promise}function g(i,o){var n=t.defer();return e.get(r.serverIP+"/api/get/locations?login="+i+"&access_token="+o).then(function(e){e.data.status?c(e.data).then(function(){n.resolve(1)}):(console.log("Error!"),n.resolve(0))},function(){console.log("Something went wrong with Location!"),n.resolve(0)}),n.promise}function f(i,o,n){var a=t.defer();return e.get(r.serverIP+"/api/get/factories-by-country?login="+i+"&access_token="+o+"&cities_ids="+n).then(function(e){a.resolve(e.data)},function(){console.log("Something went wrong with get factories!"),a.resolve({status:0})}),a.promise}function T(i,o){var n=t.defer();return console.log("Import database begin!"),e.get(r.serverIP+"/api/sync?login="+i+"&access_token="+o).then(function(e){console.log("importAllDB+++",e),e.data.status?c(e.data).then(function(){n.resolve(1)}):(console.log("Error!"),n.resolve(0))},function(){console.log("Something went wrong with importing Database!"),n.resolve(0)}),n.promise}function h(i,o,n,a){var l=t.defer(),s={model:n,row:JSON.stringify(a)};return e.post(r.serverIP+"/api/insert?login="+i+"&access_token="+o,s).then(function(e){console.log("send changes to server success:",e),l.resolve(e.data)},function(e){console.log("send changes to server failed"),l.resolve(e.data)}),l.promise}function I(i,o,n){var a=n.map(function(n){var a=t.defer();return e.post(r.serverIP+"/api/update?login="+i+"&access_token="+o,n).then(function(e){console.log("send changes to server success:",e),a.resolve(1)},function(){console.log("send changes to server failed"),a.resolve(0)}),a.promise});return t.all(a)}function A(t){e.post(r.serverIP+"/api/register",t).then(function(e){console.log(e)},function(){console.log("Something went wrong when user creating!")})}function S(t,i){var o=new Date;e.get(r.serverIP+"/api/signed?login="+t+"&access_token="+i+"&date="+o).then(function(){console.log("Sucsess!")},function(){console.log("Something went wrong!")})}function N(t,i,o){var n={orderId:1*o};e.post(r.serverIP+"/api/remove-order?login="+t+"&access_token="+i,n).then(function(e){console.log(e.data)},function(){console.log("Something went wrong with order delete!")})}function y(e,i,r){var o=t.defer(),a=[{model:e,rowId:i,field:JSON.stringify(r)}];return _(e,r,{id:i}),I(n.userInfo.phone,n.userInfo.device_code,a).then(function(e){e||d(a,$["export"].tableName),o.resolve(1)}),o.promise}function L(i){var o=t.defer();e.post(r.serverIP+"/api/load-avatar",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){console.log("send changes to server success:",e),o.resolve(1)},function(){console.log("send changes to server failed"),o.resolve(0)})}function O(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,r,o,n,a;return o=2147483648&e,n=2147483648&t,i=1073741824&e,r=1073741824&t,a=(1073741823&e)+(1073741823&t),i&r?2147483648^a^o^n:i|r?1073741824&a?3221225472^a^o^n:1073741824^a^o^n:a^o^n}function r(e,t,i){return e&t|~e&i}function o(e,t,i){return e&i|t&~i}function n(e,t,i){return e^t^i}function a(e,t,i){return t^(e|~i)}function l(e,o,n,a,l,s,d){return e=i(e,i(i(r(o,n,a),l),d)),i(t(e,s),o)}function s(e,r,n,a,l,s,d){return e=i(e,i(i(o(r,n,a),l),d)),i(t(e,s),r)}function d(e,r,o,a,l,s,d){return e=i(e,i(i(n(r,o,a),l),d)),i(t(e,s),r)}function c(e,r,o,n,l,s,d){return e=i(e,i(i(a(r,o,n),l),d)),i(t(e,s),r)}function u(e){for(var t,i=e.length,r=i+8,o=(r-r%64)/64,n=16*(o+1),a=Array(n-1),l=0,s=0;i>s;)t=(s-s%4)/4,l=s%4*8,a[t]=a[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,a[t]=a[t]|128<<l,a[n-2]=i<<3,a[n-1]=i>>>29,a}function p(e){var t,i,r="",o="";for(i=0;3>=i;i++)t=e>>>8*i&255,o="0"+t.toString(16),r+=o.substr(o.length-2,2);return r}function _(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var E,m,g,f,T,h,I,A,S,N=Array(),y=7,L=12,O=17,C=22,R=5,D=9,v=14,b=20,P=4,M=11,x=16,w=23,G=6,U=10,k=15,H=21;for(e=_(e),N=u(e),h=1732584193,I=4023233417,A=2562383102,S=271733878,E=0;E<N.length;E+=16)m=h,g=I,f=A,T=S,h=l(h,I,A,S,N[E+0],y,3614090360),S=l(S,h,I,A,N[E+1],L,3905402710),A=l(A,S,h,I,N[E+2],O,606105819),I=l(I,A,S,h,N[E+3],C,3250441966),h=l(h,I,A,S,N[E+4],y,4118548399),S=l(S,h,I,A,N[E+5],L,1200080426),A=l(A,S,h,I,N[E+6],O,2821735955),I=l(I,A,S,h,N[E+7],C,4249261313),h=l(h,I,A,S,N[E+8],y,1770035416),S=l(S,h,I,A,N[E+9],L,2336552879),A=l(A,S,h,I,N[E+10],O,4294925233),I=l(I,A,S,h,N[E+11],C,2304563134),h=l(h,I,A,S,N[E+12],y,1804603682),S=l(S,h,I,A,N[E+13],L,4254626195),A=l(A,S,h,I,N[E+14],O,2792965006),I=l(I,A,S,h,N[E+15],C,1236535329),h=s(h,I,A,S,N[E+1],R,4129170786),S=s(S,h,I,A,N[E+6],D,3225465664),A=s(A,S,h,I,N[E+11],v,643717713),I=s(I,A,S,h,N[E+0],b,3921069994),h=s(h,I,A,S,N[E+5],R,3593408605),S=s(S,h,I,A,N[E+10],D,38016083),A=s(A,S,h,I,N[E+15],v,3634488961),I=s(I,A,S,h,N[E+4],b,3889429448),h=s(h,I,A,S,N[E+9],R,568446438),S=s(S,h,I,A,N[E+14],D,3275163606),A=s(A,S,h,I,N[E+3],v,4107603335),I=s(I,A,S,h,N[E+8],b,1163531501),h=s(h,I,A,S,N[E+13],R,2850285829),S=s(S,h,I,A,N[E+2],D,4243563512),A=s(A,S,h,I,N[E+7],v,1735328473),I=s(I,A,S,h,N[E+12],b,2368359562),h=d(h,I,A,S,N[E+5],P,4294588738),S=d(S,h,I,A,N[E+8],M,2272392833),A=d(A,S,h,I,N[E+11],x,1839030562),I=d(I,A,S,h,N[E+14],w,4259657740),h=d(h,I,A,S,N[E+1],P,2763975236),S=d(S,h,I,A,N[E+4],M,1272893353),A=d(A,S,h,I,N[E+7],x,4139469664),I=d(I,A,S,h,N[E+10],w,3200236656),h=d(h,I,A,S,N[E+13],P,681279174),S=d(S,h,I,A,N[E+0],M,3936430074),A=d(A,S,h,I,N[E+3],x,3572445317),I=d(I,A,S,h,N[E+6],w,76029189),h=d(h,I,A,S,N[E+9],P,3654602809),S=d(S,h,I,A,N[E+12],M,3873151461),A=d(A,S,h,I,N[E+15],x,530742520),I=d(I,A,S,h,N[E+2],w,3299628645),h=c(h,I,A,S,N[E+0],G,4096336452),S=c(S,h,I,A,N[E+7],U,1126891415),A=c(A,S,h,I,N[E+14],k,2878612391),I=c(I,A,S,h,N[E+5],H,4237533241),h=c(h,I,A,S,N[E+12],G,1700485571),S=c(S,h,I,A,N[E+3],U,2399980690),A=c(A,S,h,I,N[E+10],k,4293915773),I=c(I,A,S,h,N[E+1],H,2240044497),h=c(h,I,A,S,N[E+8],G,1873313359),S=c(S,h,I,A,N[E+15],U,4264355552),A=c(A,S,h,I,N[E+6],k,2734768916),I=c(I,A,S,h,N[E+13],H,1309151649),h=c(h,I,A,S,N[E+4],G,4149444226),S=c(S,h,I,A,N[E+11],U,3174756917),A=c(A,S,h,I,N[E+2],k,718787259),I=c(I,A,S,h,N[E+9],H,3951481745),h=i(h,m),I=i(I,g),A=i(A,f),S=i(S,T);var V=p(h)+p(I)+p(A)+p(S);return V.toLowerCase()}function C(e){var i=t.defer(),r=e.sizes.map(function(i,r,o){var n=t.defer();if(i.length&&e.ids[r])if(r===o.length-1)D(e.ids[r],i,e.laminationId).then(function(e){e.length?n.resolve(e):n.resolve(0)});else if(angular.isArray(e.ids[r])){var a=e.ids[r].map(function(e){var i=t.defer();return p($.lists.tableName,{id:e},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});t.all(a).then(function(e){for(var t=angular.copy(e),i=t.length,r=[],o=0;i>o;o++)t[o]&&(t[o][0].amendment_pruning&&(t[o][0].amendment_pruning/=1e3),r.push(t[o][0]));r.length>1?n.resolve(r):1===r.length?n.resolve(r[0]):n.resolve(0)})}else p($.lists.tableName,{id:e.ids[r]},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){var t=angular.copy(e);t&&t.length?(t[0].amendment_pruning&&(t[0].amendment_pruning/=1e3),n.resolve(t[0])):n.resolve(0)});else n.resolve(0);return n.promise});return i.resolve(t.all(r)),i.promise}function R(e){var i=t.defer();return p($.lists.tableName,{id:e},"parent_element_id, name, waste, amendment_pruning").then(function(e){e&&e.length?(e[0].amendment_pruning&&(e[0].amendment_pruning/=1e3),i.resolve(e[0])):i.resolve(0)}),i.promise}function D(e,i,r){var o=t.defer();return p($.window_hardwares.tableName,{window_hardware_group_id:e}).then(function(e){var t=e.length,n=[],a=i.length;if(t){for(var l=0;a>l;l++){for(var s=angular.copy(e),d=[],c=[],u=i[l].openDir.length,p=0;u>p;p++)4===i[l].openDir[p]?i[l].openDir[p]=2:2==i[l].openDir[p]?i[l].openDir[p]=3:i[l].openDir[p]=1;d=s.filter(function(e){if(e.window_hardware_type_id==i[l].type&&(e.window_hardware_color_id==r||!e.window_hardware_color_id)){if(1==u)return e.direction_id==i[l].openDir[0]||1==e.direction_id;if(2==u)return e.direction_id==i[l].openDir[0]||e.direction_id==i[l].openDir[1]||1==e.direction_id}}),c=d.filter(function(e){if(e.min_width&&e.max_width&&!e.min_height&&!e.max_height){if(i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!e.min_width&&!e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height)return e}else if(e.min_width&&e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height&&i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!(e.min_width||e.max_width||e.min_height||e.max_height))return e}),n.push(c)}n.length?o.resolve(n):o.resolve(0)}else o.resolve(0)}),o.promise}function v(e){var i=t.defer(),r=e.map(function(e,i,r){var o=t.defer();if(e)if(angular.isArray(e)){var n=e.map(function(e){var o=t.defer();if(i===r.length-1){if(angular.isArray(e)){var n=e.map(function(e){var i=t.defer();return b(e.child_id).then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});o.resolve(t.all(n))}}else b(e.id).then(function(e){e.length?o.resolve(e):o.resolve(0)});return o.promise});t.all(n).then(function(e){var t=e.length,i=[];if(t)for(var r=0;t>r;r++)angular.isArray(e[r])?i.push(e[r]):e[r][0]?i.push(e[r][0]):i.push(e[r]);i.length?o.resolve(i):o.resolve(0)})}else{var a=0;a=i===r.length-1?e.child_id:e.id,a?b(a).then(function(e){e.length?o.resolve(e):o.resolve(0)}):o.resolve(0)}else o.resolve(0);return o.promise});return i.resolve(t.all(r)),i.promise}function b(e){var i=t.defer(),r=[],o=[];return angular.isArray(e)?r=e:r.push(e),function n(){if(r.length){var e=r.shift(0),t=0;t="object"==typeof e?e.childId:e,p($.list_contents.tableName,{parent_list_id:t}).then(function(t){var i=t.length;if(i)for(var a=0;i>a;a++)if("object"==typeof e&&(t[a].parentId=e.parentId),o.push(t[a]),"list"===t[a].child_type){var l={childId:t[a].child_id,parentId:t[a].id};r.push(l)}n()})}else o.length?i.resolve(o):i.resolve(0)}(),i.promise}function P(e){var i=t.defer(),r=e.map(function(e,i,r){var o=t.defer();if(e)if(angular.isArray(e)){var n=e.map(function(e){var o=t.defer();if(i===r.length-1){if(angular.isArray(e)){var n=e.map(function(e){var i=t.defer();return"element"===e.child_type?i.resolve(M(1,e.child_id)):R(e.child_id).then(function(t){angular.extend(e,t),i.resolve(M(1,t.parent_element_id))}),i.promise});o.resolve(t.all(n))}}else o.resolve(M(0,e.parent_element_id));return o.promise});t.all(n).then(function(e){var t=e.length,r=[];if(t)if(5===i||6===i)r=e;else for(var n=0;t>n;n++)if(e[n])if(angular.isArray(e[n])){for(var a=[],l=e[n].length,s=0;l>s;s++)e[n][s]&&a.push(e[n][s][0]);r.push(a)}else r.push(e[n][0]);r.length?o.resolve(r):o.resolve(0)})}else i===r.length-1?"element"===e.child_type?o.resolve(M(0,e.child_id)):R(e.child_id).then(function(t){angular.extend(e,t),o.resolve(M(0,t.parent_element_id))}):o.resolve(M(0,e.parent_element_id));else o.resolve(0);return o.promise});return i.resolve(t.all(r)),i.promise}function M(e,i){var r=t.defer();return p($.elements.tableName,{id:i},"id, sku, currency_id, price, name, element_group_id").then(function(t){t.length?e?r.resolve(t):r.resolve(t[0]):r.resolve(0)}),r.promise}function x(e){var i=t.defer();if(e.length){var r=e.map(function(e){var i=t.defer();if(e&&e.length){var r=e.map(function(e){var i=t.defer();if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();if(e)if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();return e?"element"===e.child_type?i.resolve(M(0,e.child_id)):R(e.child_id).then(function(t){angular.extend(e,t),i.resolve(M(0,t.parent_element_id))}):i.resolve(0),i.promise});i.resolve(t.all(r))}else"element"===e.child_type?i.resolve(M(0,e.child_id)):R(e.child_id).then(function(t){angular.extend(e,t),i.resolve(M(0,t.parent_element_id))});else i.resolve(0);return i.promise});i.resolve(t.all(r))}else e?"element"===e.child_type?i.resolve(M(0,e.child_id)):R(e.child_id).then(function(t){angular.extend(e,t),i.resolve(M(0,t.parent_element_id))}):i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise}function w(e,t){var i=e.kitsElem.length,r=0,o=[];e.priceTotal=0;for(var n=0;i>n;n++)if(e.kitsElem[n])if(r=t[n].length,angular.isArray(e.kitsElem[n]))for(var a=e.kitsElem[n].length,l=0;a>l;l++)if(angular.isArray(e.kitsElem[n][l]))for(var s=e.kitsElem[n][l].length,d=0;s>d;d++)G(n,e.kits[n][l][d],e.kitsElem[n][l][d],t[n][l],1,e,o);else G(n,e.kits[n][l],e.kitsElem[n][l],t[n],r,e,o);else G(n,e.kits[n],e.kitsElem[n],t[n],r,e,o);return o}function G(e,t,r,a,l,s,d){var c=0,u=0,p=0,_=1,E={},m=t.waste?1+t.waste/100:1;if(6===e){for(var g=0;l>g;g++)if(a[g].elemId===t.id)for(var f=a[g].sizes.length;--f>-1;)E=angular.copy(r),u=a[g].sizes[f]+t.amendment_pruning,c=u*E.price*m,n.userInfo.currencyId!=E.currency_id&&(c=U(c,E.currency_id)),E.qty=angular.copy(_),E.size=o.roundingValue(u,3),E.priceReal=o.roundingValue(c,3),s.priceTotal+=c,d.push(E)}else for(var T=0;l>T;T++){if(E=angular.copy(r),5===e){var h=0;a[T].elemId===t.id&&(u=a[T].square,p=o.roundingValue(a[T].square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+a[T].sizes[0]+" x "+a[T].sizes[1]+")",c=u*E.price*m,h++)}else 7===e?(_=t.count,c=_*E.price*m):(u=a[T]+t.amendment_pruning,c=u*E.price*m);(5===e&&h||5!==e)&&(n.userInfo.currencyId!=E.currency_id&&(c=U(c,E.currency_id)),E.qty=angular.copy(_),E.size=o.roundingValue(u,3),E.sizeLabel=p,E.priceReal=o.roundingValue(c,3),s.priceTotal+=c,d.push(E))}}function U(e,t){var i,r,o=a.global.currencies.length,l=0;if(o)for(;o>l;l++)a.global.currencies[l].id===n.userInfo.currencyId&&(i=l),a.global.currencies[l].id===t&&(r=l);return a.global.currencies[i]&&a.global.currencies[r]&&(e*=a.global.currencies[r].value),e}function k(e,t){for(var i=e.consist.length,r=0;i>r;r++)if(e.consist[r]){var o=t.sizes[r].length,n=e.consist[r].length;if(n)if(angular.isArray(e.kits[r]))for(var a=0;n>a;a++)if(5===r||6===r)for(var l=t.sizes[r].length,s=0;l>s;s++)t.sizes[r][s].elemId===e.kits[r][a].id&&e.consistElem[r][a]&&H(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][s],e.kits[r][a],e);else e.consistElem[r][a]&&H(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][a],e.kits[r][a],e);else for(var s=0;o>s;s++)for(var a=0;n>a;a++)e.consistElem[r][a]&&H(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][s],e.kits[r],e)}}function H(e,t,i,r,a,l){if(e===l.consist.length-1){if(angular.isArray(i))for(var s=i.length,d=r.openDir.length,c=0;s>c;c++)if(angular.isArray(i[c])){var u=i[c].length,p=0;e:for(;u>p;p++)if(V(t[c][p],r.openDir,d)){var _=angular.copy(i[c][p]),E=0,m=1;if(t[c][p].parent_list_id===a[c].child_id)m=a[c].waste?1+a[c].waste/100:1,_.qty=F(a[c].count,t[c][p].value,t[c][p].rules_type_id),"list"===t[c][p].child_type&&(t[c][p].newValue=angular.copy(_.qty));else for(var g=0;u>g;g++)if(t[c][p].parent_list_id===t[c][g].child_id&&t[c][p].parentId===t[c][g].id){if(!V(t[c][g],r.openDir,d))continue e;m=t[c][g].waste?1+t[c][g].waste/100:1,_.qty=F(t[c][g].newValue,t[c][p].value,t[c][p].rules_type_id),"list"===t[c][p].child_type&&(t[c][p].newValue=angular.copy(_.qty))}E=_.qty*i[c][p].price*m,E&&(n.userInfo.currencyId!=i[c][p].currency_id&&(E=U(E,i[c][p].currency_id)),
_.priceReal=o.roundingValue(E,3),_.size=0,l.constrElements.push(_),l.priceTotal+=_.priceReal)}}}else if(angular.isArray(i))for(var f=i.length,T=0;f>T;T++)if(6===e)for(var h=r.sizes.length;--h>-1;)B(e,r.sizes[h],a,t[T],i[T],t,l);else B(e,r,a,t[T],i[T],t,l);else if(6===e)for(var h=r.sizes.length;--h>-1;)B(e,r.sizes[h],a,t,i,l.consist[e],l);else B(e,r,a,t,i,l.consist[e],l)}function V(e,t,i){if(1==e.direction_id)return 1;for(var r=0,o=0;i>o;o++)t[o]===e.direction_id&&r++;return r}function B(e,t,r,n,a,l,s){if(n.parent_list_id===r.id){var d=1,c=1,u=0,p=r.waste?1+r.waste/100:1;5===e?5===n.rules_type_id?(d=t.square,c=t.square,u=o.roundingValue(t.square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+t.sizes[0]+" x "+t.sizes[1]+")"):21===n.rules_type_id?(d=t.sizes[0],c=t.sizes[0]):22===n.rules_type_id?(d=t.sizes[1],c=t.sizes[1]):c=t.square:(d=o.roundingValue(t+r.amendment_pruning,3),c=t),"list"===n.child_type&&(n.newValue=F(d,n.value,n.rules_type_id)),Y(1,c,n,a,r.amendment_pruning,p,s,u)}else for(var _=l.length,E=0;_>E;E++)if(n.parent_list_id===l[E].child_id&&n.parentId===l[E].id){var p=l[E].waste?1+l[E].waste/100:1,m=1;"list"===n.child_type&&(n.newValue=F(l[E].newValue,n.value,n.rules_type_id)),2===l[E].rules_type_id&&(2===n.rules_type_id||4===n.rules_type_id||15===n.rules_type_id)&&(m=l[E].newValue),Y(m,l[E].newValue,n,a,l[E].amendment_pruning,p,s)}}function F(e,t,i){var r=0;switch(i){case 1:case 21:case 22:r=o.roundingValue(e-t,3);break;case 2:case 5:var n=1>e?1:parseInt(e);r=n*t;break;case 3:case 12:case 14:r=o.roundingValue(Math.round(e)*t,3);break;case 6:case 7:case 8:case 9:case 13:case 23:r=o.roundingValue(e*t,3);break;default:r=t}return r}function Y(e,t,i,r,a,l,s,d){if(r){var c=angular.copy(r),u=0,p=0,_=1;switch(9===c.element_group_id&&(p=t),i.rules_type_id){case 1:case 21:case 22:p=o.roundingValue(t+a-i.value,3);break;case 3:_=(t+a)*i.value;break;case 5:_=i.value;break;case 6:case 23:_=(t+a)*i.value;break;case 2:case 4:case 15:_=e*i.value;break;default:p=o.roundingValue(t+a,3)}u=p?p*_*r.price*l:_*r.price*l,n.userInfo.currencyId!=r.currency_id&&(u=U(u,r.currency_id)),c.priceReal=u,c.size=o.roundingValue(p,3),c.sizeLabel=d,c.qty=_,s.constrElements.push(c),s.priceTotal+=c.priceReal}}function W(e){var i=t.defer(),r={},n={};return C(e).then(function(t){r.kits=t,v(r.kits).then(function(t){r.consist=t,P(r.kits).then(function(t){r.kitsElem=t,x(r.consist).then(function(t){r.consistElem=t,r.constrElements=w(r,e.sizes),k(r,e),r.priceTotal=o.roundingValue(r.priceTotal),n.constrElements=angular.copy(r.constrElements),n.priceTotal=isNaN(r.priceTotal)?0:angular.copy(r.priceTotal),i.resolve(n)})})})}),i.promise}function z(e){var i=t.defer(),r={},a={constrElements:[],priceTotal:0};return b(angular.copy(e.elementId)).then(function(t){a.consist=t,R(e.elementId).then(function(t){t?(a.kits=t,M(0,a.kits.parent_element_id).then(function(t){a.kitsElem=t,x([a.consist]).then(function(t){if(a.consistElem=t[0],e.elementWidth>0){var l=0,s=0;e.elementHeight?(l=o.roundingValue(e.elementWidth*e.elementHeight,3),s=o.roundingValue((e.elementWidth+a.kits.amendment_pruning)*(e.elementHeight+a.kits.amendment_pruning),3)):(l=e.elementWidth,s=e.elementWidth+a.kits.amendment_pruning);var d=a.kits.waste?1+a.kits.waste/100:1,c=angular.copy(a.kitsElem),u=o.roundingValue(s*c.price*d);if(n.userInfo.currencyId!=c.currency_id&&(u=U(u,c.currency_id)),c.qty=1,c.size=s,c.priceReal=u,a.priceTotal+=u,a.constrElements.push(c),a.consistElem){var p=a.consist.length;if(p)for(var _=0;p>_;_++)if(a.consist[_])if(a.consist[_].parent_list_id===e.elementId)"list"===a.consist[_].child_type&&(a.consist[_].newValue=F(s,a.consist[_].value,a.consist[_].rules_type_id)),Y(1,l,a.consist[_],a.consistElem[_],a.kits.amendment_pruning,d,a);else for(var E=0;p>E;E++)a.consist[_].parent_list_id===a.consist[E].child_id&&a.consist[_].parentId===a.consist[E].id&&(d=a.consist[E].waste?1+a.consist[E].waste/100:1,"list"===a.consist[_].child_type&&(a.consist[_].newValue=F(a.consist[E].newValue,a.consist[_].value,a.consist[_].rules_type_id)),Y(a.consist[_].newValue,a.consist[E].newValue,a.consist[_],a.consistElem[_],a.consist[E].amendment_pruning,d,a))}}a.priceTotal=o.roundingValue(a.priceTotal),r.constrElements=angular.copy(a.constrElements),r.priceTotal=angular.copy(a.priceTotal),i.resolve(r)})})):i.resolve(a)})}),i.promise}var K=this,j=openDatabase("bauvoice","1.0","bauvoice",5e6),$={addition_folders:{tableName:"addition_folders",prop:"name VARCHAR(255), addition_type_id INTEGER, factory_id INTEGER, position INTEGER, img VARCHAR, description VARCHAR, link VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(addition_type_id) REFERENCES addition_types(id)"},cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},currencies:{tableName:"currencies",prop:"name VARCHAR(100), value NUMERIC(10, 2), factory_id INTEGER, is_base INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},directions:{tableName:"directions",prop:"name VARCHAR(255)",foreignKey:""},elements_groups:{tableName:"elements_groups",prop:"name VARCHAR(255), base_unit INTEGER, position INTEGER",foreignKey:""},beed_profile_systems:{tableName:"beed_profile_systems",prop:"profile_system_id INTEGER, list_id INTEGER, glass_width INTEGER",foreignKey:", FOREIGN KEY(list_id) REFERENCES lists(id)"},glass_folders:{tableName:"glass_folders",prop:"name VARCHAR(255), img VARCHAR, position INTEGER, factory_id INTEGER, description VARCHAR, link VARCHAR, is_base INTEGER",foreignKey:""},glass_prices:{tableName:"glass_prices",prop:"element_id INTEGER, col_1_range NUMERIC(10, 2), col_1_price NUMERIC(10, 2), col_2_range_1 NUMERIC(10, 2), col_2_range_2 NUMERIC(10, 2), col_2_price NUMERIC(10, 2), col_3_range_1 NUMERIC(10, 2), col_3_range_2 NUMERIC(10, 2), col_3_price NUMERIC(10, 2), col_4_range_1 NUMERIC(10, 2), col_4_range_2 NUMERIC(10, 2), col_4_price NUMERIC(10, 2), col_5_range NUMERIC(10, 2), col_5_price NUMERIC(10, 2), table_width INTEGER",foreignKey:""},lamination_factory_colors:{tableName:"lamination_factory_colors",prop:"name VARCHAR(255), lamination_type_id INTEGER, factory_id INTEGER",foreignKey:", FOREIGN KEY(lamination_type_id) REFERENCES lamination_default_colors(id), FOREIGN KEY(factory_id) REFERENCES factories(id)"},lamination_types:{tableName:"lamination_types",prop:"name VARCHAR(255)",foreignKey:""},lists_groups:{tableName:"lists_groups",prop:"name VARCHAR(255)",foreignKey:""},lists_types:{tableName:"lists_types",prop:"name VARCHAR(255), image_add_param VARCHAR(100)",foreignKey:""},options_coefficients:{tableName:"options_coefficients",prop:"rentability_percent INTEGER, rentability_hrn_m INTEGER, rentability_hrn INTEGER, others_percent INTEGER, others_hrn_m INTEGER, others_hrn INTEGER, transport_cost_percent INTEGER, transport_cost_hrn_m INTEGER, transport_cost_hrn INTEGER, salary_manager_percent INTEGER, salary_manager_hrn_m INTEGER, salary_manager_hrn INTEGER, rent_offices_percent INTEGER, rent_offices_hrn_m INTEGER, rent_offices_hrn INTEGER, salary_itr_percent INTEGER, salary_itr_hrn_m INTEGER, salary_itr_hrn INTEGER, rent_production_percent INTEGER, rent_production_hrn_m INTEGER, rent_production_hrn INTEGER, salary_glass_percent INTEGER, salary_glass_hrn_m INTEGER, salary_glass_hrn INTEGER, salary_assembly_percent INTEGER, salary_assembly_hrn_m INTEGER, salary_assembly_hrn INTEGER, estimated_cost INTEGER, factory_id INTEGER, plan_production INTEGER, margin NUMERIC(10, 2), coeff NUMERIC(10, 2)",foreignKey:""},options_discounts:{tableName:"options_discounts",prop:"factory_id INTEGER, min_time INTEGER, standart_time INTEGER, base_time INTEGER, week_1 INTEGER, week_2 INTEGER, week_3 INTEGER, week_4 INTEGER, week_5 INTEGER, week_6 INTEGER, week_7 INTEGER, week_8 INTEGER, percents ARRAY",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},elements:{tableName:"elements",prop:"heat_coeff INTEGER, name VARCHAR(255), element_group_id INTEGER, currency_id INTEGER, supplier_id INTEGER, margin_id INTEGER, waste NUMERIC(10, 2), is_optimized INTEGER, is_virtual INTEGER, is_additional INTEGER, weight_accounting_unit NUMERIC(10, 3), glass_folder_id INTEGER, min_width NUMERIC, min_height NUMERIC, max_width NUMERIC, max_height NUMERIC, max_sq NUMERIC, transcalency NUMERIC(10, 2), glass_width INTEGER, factory_id INTEGER, price NUMERIC(10, 2), amendment_pruning NUMERIC(10, 2), noise_coeff NUMERIC, sku VARCHAR(100), lamination_in_id INTEGER, lamination_out_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(glass_folder_id) REFERENCES glass_folders(id), FOREIGN KEY(margin_id) REFERENCES margin_types(id), FOREIGN KEY(supplier_id) REFERENCES suppliers(id), FOREIGN KEY(currency_id) REFERENCES currencies(id), FOREIGN KEY(element_group_id) REFERENCES elements_groups(id)"},profile_system_folders:{tableName:"profile_system_folders",prop:"name VARCHAR(255), factory_id INTEGER, position INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},profile_systems:{tableName:"profile_systems",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, is_editable INTEGER, is_default INTEGER, position INTEGER, country VARCHAR(100), cameras INTEGER, heat_coeff INTEGER, noise_coeff INTEGER, heat_coeff_value NUMERIC(5,2), link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},profile_laminations:{tableName:"profile_laminations",prop:"profile_id INTEGER, lamination_in_id INTEGER, lamination_out_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, code_sync VARCHAR",foreignKey:""},rules_types:{tableName:"rules_types",prop:"name VARCHAR(255), parent_unit INTEGER, child_unit INTEGER, suffix VARCHAR(15)",foreignKey:""},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"},users:{tableName:"users",prop:" email VARCHAR(255), password VARCHAR(255), factory_id INTEGER, name VARCHAR(255), phone VARCHAR(100), locked INTEGER, user_type INTEGER, city_phone VARCHAR(100), city_id INTEGER, fax VARCHAR(100), avatar VARCHAR(255), birthday DATE, sex VARCHAR(100), mount_mon NUMERIC(5,2), mount_tue NUMERIC(5,2), mount_wed NUMERIC(5,2), mount_thu NUMERIC(5,2), mount_fri NUMERIC(5,2), mount_sat NUMERIC(5,2), mount_sun NUMERIC(5,2), device_code VARCHAR(250), last_sync TIMESTAMP, address VARCHAR, therm_coeff_id INTEGER, factoryLink VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(city_id) REFERENCES cities(id)"},users_discounts:{tableName:"users_discounts",prop:"user_id INTEGER, max_construct NUMERIC(5,1), max_add_elem NUMERIC(5,1), default_construct NUMERIC(5,1), default_add_elem NUMERIC(5,1), week_1_construct NUMERIC(5,1), week_1_add_elem NUMERIC(5,1), week_2_construct NUMERIC(5,1), week_2_add_elem NUMERIC(5,1), week_3_construct NUMERIC(5,1), week_3_add_elem NUMERIC(5,1), week_4_construct NUMERIC(5,1), week_4_add_elem NUMERIC(5,1), week_5_construct NUMERIC(5,1), week_5_add_elem NUMERIC(5,1), week_6_construct NUMERIC(5,1), week_6_add_elem NUMERIC(5,1), week_7_construct NUMERIC(5,1), week_7_add_elem NUMERIC(5,1), week_8_construct NUMERIC(5,1), week_8_add_elem NUMERIC(5,1)",foreignKey:""},users_deliveries:{tableName:"users_deliveries",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},users_mountings:{tableName:"users_mountings",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},lists:{tableName:"lists",prop:"name VARCHAR(255), list_group_id INTEGER, list_type_id INTEGER, a NUMERIC(10, 2), b NUMERIC(10, 2), c NUMERIC(10, 2), d NUMERIC(10, 2), parent_element_id INTEGER, position NUMERIC, add_color_id INTEGER, addition_folder_id INTEGER, amendment_pruning NUMERIC(10, 2), waste NUMERIC(10, 2), cameras INTEGER, link VARCHAR, description VARCHAR, img VARCHAR, beed_lamination_id INTEGER",foreignKey:", FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(list_group_id) REFERENCES lists_groups(id), FOREIGN KEY(add_color_id) REFERENCES addition_colors(id)"},list_contents:{tableName:"list_contents",prop:"parent_list_id INTEGER, child_id INTEGER, child_type VARCHAR(255), value NUMERIC(10, 7), rules_type_id INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, lamination_type_id INTEGER",foreignKey:", FOREIGN KEY(parent_list_id) REFERENCES lists(id), FOREIGN KEY(rules_type_id) REFERENCES rules_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(lamination_type_id) REFERENCES lamination_types(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_types:{tableName:"window_hardware_types",prop:"name VARCHAR(255), short_name VARCHAR(100)",foreignKey:""},window_hardware_folders:{tableName:"window_hardware_folders",prop:"name VARCHAR, factory_id INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardware_groups:{tableName:"window_hardware_groups",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, is_editable INTEGER, is_group INTEGER, is_in_calculation INTEGER, is_default INTEGER, position INTEGER, producer VARCHAR(255), country VARCHAR(255), noise_coeff INTEGER, heat_coeff INTEGER, min_height INTEGER, max_height INTEGER, min_width INTEGER, max_width INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardwares:{tableName:"window_hardwares",prop:"window_hardware_type_id INTEGER, min_width INTEGER, max_width INTEGER, min_height INTEGER, max_height INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, length INTEGER, count INTEGER, child_id INTEGER, child_type VARCHAR(100), position INTEGER, factory_id INTEGER, window_hardware_group_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(window_hardware_type_id) REFERENCES window_hardware_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(window_hardware_group_id) REFERENCES window_hardware_groups(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_colors:{tableName:"window_hardware_colors",prop:"name VARCHAR(255)",foreignKey:""},window_hardware_handles:{tableName:"window_hardware_handles",prop:"element_id INTEGER, location VARCHAR(255), constant_value NUMERIC(10, 2)",foreignKey:""},elements_profile_systems:{tableName:"elements_profile_systems",prop:"profile_system_id INTEGER, element_id INTEGER",foreignKey:""},orders:{tableName:"orders",prop:"order_number VARCHAR, order_hz VARCHAR, order_date TIMESTAMP, order_type INTEGER, order_style VARCHAR, user_id INTEGER, created TIMESTAMP, additional_payment VARCHAR, sended TIMESTAMP, state_to TIMESTAMP, state_buch TIMESTAMP, batch VARCHAR, base_price NUMERIC(13, 2), factory_margin NUMERIC(11, 2), factory_id INTEGER, purchase_price NUMERIC(10, 2), sale_price NUMERIC(10, 2), climatic_zone INTEGER, heat_coef_min NUMERIC, products_qty INTEGER, templates_price NUMERIC, addelems_price NUMERIC, products_price NUMERIC, delivery_date TIMESTAMP, new_delivery_date TIMESTAMP, delivery_price NUMERIC, is_date_price_less INTEGER, is_date_price_more INTEGER, floor_id INTEGER, floor_price NUMERIC, mounting_id INTEGER, mounting_price NUMERIC, is_instalment INTEGER, instalment_id INTEGER, is_old_price INTEGER, payment_first NUMERIC, payment_monthly NUMERIC, payment_first_primary NUMERIC, payment_monthly_primary NUMERIC, order_price NUMERIC, order_price_dis NUMERIC, order_price_primary NUMERIC, discount_construct NUMERIC, discount_addelem NUMERIC, discount_construct_max NUMERIC, discount_addelem_max NUMERIC, delivery_user_id NUMERIC, mounting_user_id NUMERIC, default_term_plant NUMERIC, disc_term_plant NUMERIC, margin_plant NUMERIC, customer_name TEXT, customer_email TEXT, customer_phone VARCHAR(30), customer_phone_city VARCHAR(20), customer_city_id INTEGER, customer_city VARCHAR, customer_address TEXT, customer_location VARCHAR, customer_itn INTEGER, customer_starttime VARCHAR, customer_endtime VARCHAR, customer_target VARCHAR, customer_sex INTEGER, customer_age INTEGER, customer_education INTEGER, customer_occupation INTEGER, customer_infoSource INTEGER",foreignKey:""},order_products:{tableName:"order_products",prop:"order_id NUMERIC, product_id INTEGER, is_addelem_only INTEGER, room_id INTEGER, construction_type INTEGER, template_id INTEGER, template_source TEXT, template_width NUMERIC, template_height NUMERIC, template_square NUMERIC, profile_id INTEGER, glass_id VARCHAR, hardware_id INTEGER, lamination_id INTEGER, lamination_out_id INTEGER, lamination_in_id INTEGER, door_shape_id INTEGER, door_sash_shape_id INTEGER, door_handle_shape_id INTEGER, door_lock_shape_id INTEGER, heat_coef_total NUMERIC, template_price NUMERIC, addelem_price NUMERIC, product_price NUMERIC, comment TEXT, product_qty INTEGER",foreignKey:""},order_addelements:{tableName:"order_addelements",prop:"order_id NUMERIC, product_id INTEGER, element_type INTEGER, element_id INTEGER, name VARCHAR, element_width NUMERIC, element_height NUMERIC, element_price NUMERIC, element_qty INTEGER, block_id INTEGER",foreignKey:""},template_groups:{tableName:"template_groups",prop:"name VARCHAR(255)",foreignKey:""},templates:{tableName:"templates",prop:"group_id INTEGER,name VARCHAR(255),icon TEXT,template_object TEXT",foreignKey:""},background_templates:{tableName:"background_templates",prop:"factory_id INTEGER,desc_1 VARCHAR(255),desc_2 VARCHAR(255),template_id INTEGER,group_id INTEGER,position INTEGER,img VARCHAR",foreignKey:""},"export":{tableName:"export",prop:"model VARCHAR, rowId INTEGER, field TEXT",foreignKey:""}},q={cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"}};return K.publicObj={tablesLocalDB:$,tablesLocationLocalDB:q,cleanLocalDB:l,createTablesLocalDB:s,insertRowLocalDB:d,insertTablesLocalDB:c,selectLocalDB:p,updateLocalDB:_,deleteRowLocalDB:E,importUser:m,importLocation:g,importFactories:f,importAllDB:T,insertServer:h,updateServer:I,createUserServer:A,exportUserEntrance:S,deleteOrderServer:N,updateLocalServerDBs:y,sendIMGServer:L,md5:O,calculationPrice:W,getAdditionalPrice:z,currencyExgange:U},K.publicObj}e.$inject=["$http","$q","$filter","globalConstants","GeneralServ","UserStor","GlobalStor"],angular.module("BauVoiceApp").factory("localDB",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c,u,p,_){function E(){if(c.global.isDevice=isDevice,c.global.isDevice)t.getPreferredLanguage().then(function(e){console.log("language++",e),m(e.value),r.use(_.userInfo.langLabel)},function(e){console.log("No language defined")});else{var e=navigator.language||navigator.userLanguage;m(e),r.use(_.userInfo.langLabel)}}function m(e){for(var t=l.languages.length;--t>-1;)if(l.languages[t].label.indexOf(e)+1){_.userInfo.langLabel=l.languages[t].label,_.userInfo.langName=l.languages[t].name;break}}function g(){var t=e.defer();return console.log("EXPORT"),a.selectLocalDB(a.tablesLocalDB["export"].tableName).then(function(e){e.length&&a.selectLocalDB(a.tablesLocalDB.users.tableName).then(function(i){i.length&&a.updateServer(i[0].phone,i[0].device_code,e).then(function(e){console.log("FINISH export",e),e&&(a.cleanLocalDB({"export":1}),t.resolve(1))})})}),t.promise}function f(){var t=e.defer();return a.selectLocalDB("sqlite_sequence").then(function(e){e&&e.length>5?t.resolve(1):t.resolve(0)}),t.promise}function T(t){var i,r,o=e.defer();return a.selectLocalDB(a.tablesLocalDB.countries.tableName,null,"id, name, currency_id as currency").then(function(e){i=e.length,i?c.global.locations.countries=angular.copy(e):console.log("Error!!!",e)}).then(function(){a.selectLocalDB(a.tablesLocalDB.regions.tableName,null,"id, name, country_id as countryId, climatic_zone as climaticZone, heat_transfer as heatTransfer").then(function(e){r=e.length,r?c.global.locations.regions=angular.copy(e):console.log("Error!!!",e)}).then(function(){h(t).then(function(){o.resolve(1)})})}),o.promise}function h(t){var i,r,o,n=e.defer(),l=t?null:{id:_.userInfo.city_id};return a.selectLocalDB(a.tablesLocalDB.cities.tableName,l,"id as cityId, name as cityName, region_id as regionId").then(function(e){if(o=e.length){for(c.global.locations.cities=angular.copy(e);--o>-1;)for(r=c.global.locations.regions.length;--r>-1;)if(c.global.locations.cities[o].regionId===c.global.locations.regions[r].id)for(c.global.locations.cities[o].fullLocation=""+c.global.locations.cities[o].cityName+", "+c.global.locations.regions[r].name,c.global.locations.cities[o].climaticZone=c.global.locations.regions[r].climaticZone,c.global.locations.cities[o].heatTransfer=c.global.locations.regions[r].heatTransfer,i=c.global.locations.countries.length;--i>-1;)c.global.locations.regions[r].countryId===c.global.locations.countries[i].id&&(c.global.locations.cities[o].countryId=c.global.locations.countries[i].id,c.global.locations.cities[o].currencyId=c.global.locations.countries[i].currency);n.resolve(1)}else n.resolve(0)}),n.promise}function I(){var t=e.defer(),i=c.global.locations.cities.map(function(e){return e.countryId===_.userInfo.countryId?e.cityId:void 0}).join(",");return t.resolve(i),t.promise}function A(){for(var e=c.global.locations.cities.length;--e>-1;)c.global.locations.cities[e].cityId===_.userInfo.city_id&&(_.userInfo.cityName=c.global.locations.cities[e].cityName,_.userInfo.countryId=c.global.locations.cities[e].countryId,_.userInfo.climaticZone=c.global.locations.cities[e].climaticZone,_.userInfo.heatTransfer=_.userInfo.therm_coeff_id?s.roundingValue(1/c.global.locations.cities[e].heatTransfer):c.global.locations.cities[e].heatTransfer,_.userInfo.fullLocation=c.global.locations.cities[e].fullLocation,S(_.userInfo.city_id,_.userInfo.cityName,_.userInfo.climaticZone,_.userInfo.heatTransfer,_.userInfo.fullLocation))}function S(e,t,i,r,o){u.order.customer_city_id=e,u.order.customer_city=t,u.order.climatic_zone=i,u.order.heat_coef_min=r,u.order.customer_location=o}function N(){y().then(function(e){e&&L().then(function(e){e&&O().then(function(e){e&&e.length?(c.global.margins=angular.copy(e[0]),C().then(function(e){e&&e.length?(c.global.deliveryCoeff=angular.copy(e[0]),c.global.deliveryCoeff.percents=e[0].percents.split(",").map(function(e){return 1*e}),R(a.tablesLocalDB.profile_system_folders.tableName,a.tablesLocalDB.profile_systems.tableName,c.global.profilesType,c.global.profiles).then(function(e){e&&v().then(function(e){e&&(b(),R(a.tablesLocalDB.window_hardware_folders.tableName,a.tablesLocalDB.window_hardware_groups.tableName,c.global.hardwareTypes,c.global.hardwares).then(function(e){e&&P().then(function(){w().then(function(){M().then(function(e){e&&e.length&&(c.global.laminats=angular.copy(e).map(function(e){return e.isActive=0,e}),c.global.laminats.push({id:1,type_id:1,isActive:0,name:n("translate")("mainpage.WHITE_LAMINATION")}),x().then(function(){c.global.laminatCouples.push(angular.copy(p.product.lamination))})),H(),c.global.isLoader=0,o.path("/main")})})})}))})})):console.error("not find options_discounts!")})):console.error("not find options_coefficients!")})})})}function y(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.currencies.tableName,null,"id, is_base, name, value").then(function(e){var i=e.length;if(e&&i){for(c.global.currencies=e;--i>-1;)1===e[i].is_base&&(_.userInfo.currencyId=e[i].id,/uah/i.test(e[i].name)?_.userInfo.currency="₴":/rub/i.test(e[i].name)?_.userInfo.currency="":/(usd|\$)/i.test(e[i].name)?_.userInfo.currency="$":/eur/i.test(e[i].name)?_.userInfo.currency="€":_.userInfo.currency="¤");t.resolve(1)}else console.error("not find currencies!"),t.resolve(0)}),t.promise}function L(){var t=e.defer();return _.userInfo.avatar=l.serverIP+_.userInfo.avatar,a.selectLocalDB(a.tablesLocalDB.users_discounts.tableName).then(function(e){var i=angular.copy(e[0]);if(i){_.userInfo.discountConstr=1*i.default_construct,_.userInfo.discountAddElem=1*i.default_add_elem,_.userInfo.discountConstrMax=1*i.max_construct,_.userInfo.discountAddElemMax=1*i.max_add_elem;for(var r=Object.keys(i),o=r.length,n=0;o>n;n++)r[n].indexOf("week")+1&&(r[n].indexOf("construct")+1?_.userInfo.discConstrByWeek.push(1*i[r[n]]):r[n].indexOf("add_elem")+1&&_.userInfo.discAddElemByWeek.push(1*i[r[n]]));t.resolve(1)}else console.error("not find users_discounts!"),t.resolve(0)}),t.promise}function O(){return a.selectLocalDB(a.tablesLocalDB.options_coefficients.tableName,null,"margin, coeff").then(function(e){return e})}function C(){return a.selectLocalDB(a.tablesLocalDB.options_discounts.tableName).then(function(e){return e})}function R(t,i,r,o){var n=e.defer();return a.selectLocalDB(t).then(function(t){var l=angular.copy(t).sort(function(e,t){return s.sorting(e.position,t.position)}),d=l.length;if(d){r.length=0,angular.extend(r,l);var c=l.map(function(t){var r=e.defer();return t.img=D(t.img),a.selectLocalDB(i,{folder_id:t.id}).then(function(e){if(e.length){var t=angular.copy(e).sort(function(e,t){return s.sorting(e.position,t.position)});r.resolve(t)}else r.resolve(0)}),r.promise});e.all(c).then(function(e){for(var t=e.length,i=[],a=0;t>a;a++){var l=e[a].length;if(e[a]&&l){for(;--l>-1;)e[a][l].img=D(e[a][l].img);o.push(e[a]),i.push(e[a][0].folder_id)}}var s=i.length,d=r.length;if(s)for(;--d>-1;){for(var c=0,u=0;s>u;u++)r[d].id===i[u]&&(c=1);c||r.splice(d,1)}n.resolve(1)})}else n.resolve(0)}),n.promise}function D(e){if(e){if(/^.*\.(jpg|jpeg|png|gif|tiff)$/i.test(e)){var t=l.serverIP+""+e;if(c.global.isDevice){var r=e.split("/").pop(),o=cordova.file.documentsDirectory+""+r,n=!0,a={};return console.log("image name ====",r),console.log("image path ====",o),i.download(t,o,a,n).then(function(e){console.log("Success!",e)},function(e){console.log("Error!",e)},function(e){}),o}return t}return""}}function v(){for(var t=e.defer(),i=c.global.profiles.length,r=[];--i>-1;)for(var o=c.global.profiles[i].length;--o>-1;)r.push(c.global.profiles[i][o].id);var n=r.map(function(t){var i=e.defer(),r={profileId:t,glassTypes:[],glasses:[]};return a.selectLocalDB(a.tablesLocalDB.glass_folders.tableName).then(function(e){e.length?(r.glassTypes=angular.copy(e),c.global.glassesAll.push(r),i.resolve(1)):i.resolve(0)}),i.promise});return e.all(n).then(function(i){if(i){var r=c.global.glassesAll.map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.elements_profile_systems.tableName,{profile_system_id:t.profileId}).then(function(e){var t=e.length;t?i.resolve(e):i.resolve(0)}),i.promise});e.all(r).then(function(i){for(var r=i.length,o=[],n=[],l=0;r>l;l++){var s=e.defer();if(i[l]){var d=i[l].map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.elements.tableName,{id:t.element_id}).then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});s.resolve(e.all(d))}else s.resolve(0);o.push(s.promise)}for(var u=0;r>u;u++){var p=e.defer();console.warn(i[u]);var _=i[u].map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.lists.tableName,{parent_element_id:t.element_id}).then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});p.resolve(e.all(_)),n.push(p.promise)}e.all(o).then(function(e){var t=e.length;if(t)for(var i=0;t>i;i++)c.global.glassesAll[i].glasses=e[i]}),e.all(n).then(function(e){var i=e.length;if(i)for(var r=0;i>r;r++)c.global.glassesAll[r].glassLists=e[r],t.resolve(1)})})}}),t.promise}function b(){for(var e=c.global.glassesAll.length,t=0;e>t;t++){for(var i=c.global.glassesAll[t].glassLists.length,r=c.global.glassesAll[t].glassTypes.length,o=[],n=[],a=0;i>a;a++)c.global.glassesAll[t].glassLists[a].parent_element_id===c.global.glassesAll[t].glasses[a].id&&(c.global.glassesAll[t].glasses[a].elem_id=angular.copy(c.global.glassesAll[t].glasses[a].id),c.global.glassesAll[t].glasses[a].id=angular.copy(c.global.glassesAll[t].glassLists[a].id),c.global.glassesAll[t].glasses[a].name=angular.copy(c.global.glassesAll[t].glassLists[a].name),c.global.glassesAll[t].glasses[a].cameras=angular.copy(c.global.glassesAll[t].glassLists[a].cameras),c.global.glassesAll[t].glasses[a].position=angular.copy(c.global.glassesAll[t].glassLists[a].position),c.global.glassesAll[t].glasses[a].img=angular.copy(c.global.glassesAll[t].glassLists[a].img),c.global.glassesAll[t].glasses[a].img=D(c.global.glassesAll[t].glasses[a].img),c.global.glassesAll[t].glasses[a].link=angular.copy(c.global.glassesAll[t].glassLists[a].link),c.global.glassesAll[t].glasses[a].description=angular.copy(c.global.glassesAll[t].glassLists[a].description));for(c.global.glassesAll[t].glassTypes.sort(function(e,t){return s.sorting(e.position,t.position)});--r>-1;){c.global.glassesAll[t].glassTypes[r].img=D(c.global.glassesAll[t].glassTypes[r].img);var l=c.global.glassesAll[t].glasses.filter(function(e){return e.glass_folder_id===c.global.glassesAll[t].glassTypes[r].id});l.length&&(o.unshift(c.global.glassesAll[t].glassTypes[r]),l.sort(function(e,t){return s.sorting(e.position,t.position)}),n.unshift(l))}c.global.glassesAll[t].glassTypes=angular.copy(o),c.global.glassesAll[t].glasses=angular.copy(n),delete c.global.glassesAll[t].glassLists}}function P(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.background_templates.tableName).then(function(e){var i=angular.copy(e),r=i.length;if(r){for(i=i.sort(function(e,t){return s.sorting(e.position,t.position)});--r>-1;)i[r].img=D(i[r].img),$("<img />").attr("src",i[r].img);c.global.rooms=i}t.resolve(1)}),t.promise}function M(){return a.selectLocalDB(a.tablesLocalDB.lamination_factory_colors.tableName,null,"id, name, lamination_type_id as type_id").then(function(e){return e})}function x(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.profile_laminations.tableName).then(function(e){if(e){c.global.laminatCouples=angular.copy(e);for(var i,r=c.global.laminatCouples.length,o=c.global.laminats.length;--r>-1;)for(delete c.global.laminatCouples[r].code_sync,delete c.global.laminatCouples[r].modified,i=0;o>i;i++)c.global.laminats[i].id===c.global.laminatCouples[r].lamination_in_id&&(c.global.laminatCouples[r].laminat_in_name=c.global.laminats[i].name,c.global.laminatCouples[r].img_in_id=c.global.laminats[i].type_id),c.global.laminats[i].id===c.global.laminatCouples[r].lamination_out_id&&(c.global.laminatCouples[r].laminat_out_name=c.global.laminats[i].name,c.global.laminatCouples[r].img_out_id=c.global.laminats[i].type_id);t.resolve(1)}else t.resolve(1)}),t.promise}function w(){var t=e.defer();return G().then(function(){U().then(function(){k().then(function(){t.resolve(1)})})}),t.promise}function G(){var t=e.defer(),i=s.addElementDATA.map(function(e){return a.selectLocalDB(a.tablesLocalDB.lists.tableName,{list_group_id:e.id})});return e.all(i).then(function(e){for(var i=angular.copy(e),r=i.length,o=0;r>o;o++){var n={elementType:[],elementsList:i[o]};c.global.addElementsAll.push(n)}t.resolve(1)}),t.promise}function U(){var t=e.defer(),i=c.global.addElementsAll.map(function(t){var i=e.defer();if(t.elementsList&&t.elementsList.length){var r=t.elementsList.map(function(t){var i=e.defer();return t.img=D(t.img),
a.selectLocalDB(a.tablesLocalDB.elements.tableName,{id:t.parent_element_id}).then(function(e){e&&e.length?(c.global.tempAddElements.push(angular.copy(e[0])),i.resolve(1)):i.resolve(0)}),i.promise});i.resolve(e.all(r))}else i.resolve(0);return i.promise});return t.resolve(e.all(i)),t.promise}function k(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.addition_folders.tableName).then(function(e){var i=c.global.addElementsAll.length,r={id:0,name:n("translate")("add_elements.OTHERS")};for(e&&e.length&&(e=e.sort(function(e,t){return s.sorting(e.position,t.position)}));--i>-1;)if(c.global.addElementsAll[i].elementsList){e&&e.length&&(c.global.addElementsAll[i].elementType=angular.copy(e)),c.global.addElementsAll[i].elementType.push(r);for(var o=[],l=[],d=c.global.addElementsAll[i].elementType.length,u=c.global.addElementsAll[i].elementsList.length,p=c.global.tempAddElements.length,_=0;d>_;_++){for(var E=[],m=0;u>m;m++)if(c.global.addElementsAll[i].elementType[_].id===c.global.addElementsAll[i].elementsList[m].addition_folder_id){var g=0,f=0;switch(c.global.addElementsAll[i].elementsList[m].list_group_id){case 21:case 9:case 8:case 19:case 12:g=1e3;break;case 20:case 26:g=1e3,f=1e3}c.global.addElementsAll[i].elementsList[m].element_width=g,c.global.addElementsAll[i].elementsList[m].element_height=f,c.global.addElementsAll[i].elementsList[m].element_qty=1;for(var T=0;p>T;T++)c.global.tempAddElements[T].id===c.global.addElementsAll[i].elementsList[m].parent_element_id&&(c.global.tempAddElements[T].price=s.addMarginToPrice(angular.copy(c.global.tempAddElements[T].price),c.global.margins.margin),c.global.addElementsAll[i].elementsList[m].element_price=a.currencyExgange(c.global.tempAddElements[T].price,c.global.tempAddElements[T].currency_id));E.push(angular.copy(c.global.addElementsAll[i].elementsList[m]))}E.length?(E=n("orderBy")(E,"name"),o.push(E)):l.push(_)}o.length?c.global.addElementsAll[i].elementsList=angular.copy(o):c.global.addElementsAll[i].elementsList=0;var h=l.length;if(h)for(;--h>-1;)c.global.addElementsAll[i].elementType.splice(l[h],1)}t.resolve(1)}),t.promise}function H(){a.selectLocalDB(a.tablesLocalDB.users_deliveries.tableName).then(function(e){e.length&&(c.global.supplyData=angular.copy(e))}),a.selectLocalDB(a.tablesLocalDB.users_mountings.tableName).then(function(e){e.length&&(c.global.assemblingData=angular.copy(e))}),d.getInstalment(function(e){e.status?c.global.instalmentsData=e.data.instalment:console.log(e)})}var V=this;return V.publicObj={getDeviceLanguage:E,initExport:g,isLocalDBExist:f,prepareLocationToUse:T,downloadAllCities:h,collectCityIdsAsCountry:I,setUserLocation:A,setUserGeoLocation:S,downloadAllData:N},V.publicObj}e.$inject=["$q","$cordovaGlobalization","$cordovaFileTransfer","$translate","$location","$filter","localDB","globalConstants","GeneralServ","optionsServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("LoginModule").factory("loginServ",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d,c,u,p,_,E,m){function g(){o.exportUserEntrance(_.userInfo.phone,_.userInfo.device_code)}function f(){var e;u.order.id=T(),u.order.order_date=(new Date).getTime(),e=new Date(u.order.order_date).getDate()+c.global.deliveryCoeff.standart_time,u.order.delivery_date=(new Date).setDate(e),u.order.new_delivery_date=angular.copy(u.order.delivery_date)}function T(){var e=(new Date).getTime();return 1*(_.userInfo.id+""+e)}function h(){u.order.discount_construct=angular.copy(_.userInfo.discountConstr),u.order.discount_addelem=angular.copy(_.userInfo.discountAddElem)}function I(){p.product.construction_type=c.global.rooms[0].group_id,p.product.template_id=c.global.rooms[0].template_id-1}function A(e){var i=t.defer();return S(e).then(function(e){e?(c.global.templatesSourceSTORE=angular.copy(e),c.global.templatesSource=angular.copy(e),N(p.product).then(function(){O().then(function(){i.resolve(1)})})):i.resolve(0)}),i.promise}function S(e){var r=t.defer();switch(e){case 1:s.getTemplatesWindow(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_WINDOW"),r.resolve(e.data.windows)):console.log(e)});break;case 2:s.getTemplatesWindowDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY_ENTER"),r.resolve(e.data.windowDoor)):console.log(e)});break;case 3:s.getTemplatesBalcony(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY"),r.resolve(e.data.balconies)):console.log(e)});break;case 4:s.getTemplatesDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_DOOR"),r.resolve(e.data.doors)):console.log(e)})}return r.promise}function N(e,i){var r=t.defer();return i?e.profile=angular.copy(y(i,c.global.profiles)):e.profile=angular.copy(c.global.profiles[0][0]),t.all([L(e.profile.rama_list_id),L(e.profile.rama_still_list_id),L(e.profile.stvorka_list_id),L(e.profile.impost_list_id),L(e.profile.shtulp_list_id)]).then(function(t){e.profileDepths.frameDepth=t[0],e.profileDepths.frameStillDepth=t[1],e.profileDepths.sashDepth=t[2],e.profileDepths.impostDepth=t[3],e.profileDepths.shtulpDepth=t[4],r.resolve(1)}),r.promise}function y(e,t){for(var i=t.length;--i>-1;)for(var r=t[i].length;--r>-1;)if(t[i][r].id===e)return t[i][r]}function L(e){var i=t.defer();return o.selectLocalDB(o.tablesLocalDB.lists.tableName,{id:e}).then(function(e){var t={};e.length&&(t.a=e[0].a,t.b=e[0].b,t.c=e[0].c,t.d=e[0].d),i.resolve(t)}),i.promise}function O(){var e=t.defer();return C(p.product.template_id).then(function(){P(p.product);var t=p.product.hardware.id?p.product.hardware.id:0;M(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){e.resolve(1)})}),e.promise}function C(e){var i=t.defer();return c.global.isChangedTemplate||(p.product.template_source=angular.copy(c.global.templatesSource[e])),D(p.product),a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e),c.global.isSashesInTemplate=R(p.product),a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e),i.resolve(1)})}),i.promise}function R(e){for(var t=e.template_source.details.length,i=0;--t>0;)"sash"===e.template_source.details[t].blockType&&++i;return i}function D(e,t){if(e.glass.length=0,t)for(var i=n.removeDuplicates(v()),r=i.length;--r>-1;)e.glass.push(y(i[r],c.global.glasses));else{var o=c.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});o.length&&(c.global.glassTypes=angular.copy(o[0].glassTypes),c.global.glasses=angular.copy(o[0].glasses),e.glass.push(angular.copy(c.global.glasses[0][0])),c.global.selectLastGlassId=e.glass[0].id,b(0,e.glass[0].id,e.glass[0].sku))}}function v(){for(var e=p.product.template_source.details.length,t=[];--e>0;)p.product.template_source.details[e].children.length||p.product.template_source.details[e].glassId&&t.push(angular.copy(p.product.template_source.details[e].glassId));return t}function b(e,t,i){for(var r=p.product.template_source.details.length;--r>0;)if(e){if(p.product.template_source.details[r].id===e){p.product.template_source.details[r].glassId=t,p.product.template_source.details[r].glassTxt=i;break}}else p.product.template_source.details[r].glassId=t,p.product.template_source.details[r].glassTxt=i}function P(e,t){t?e.hardware=y(t,c.global.hardwares):c.global.isSashesInTemplate?e.hardware=c.global.hardwares[0][0]:e.hardware={}}function M(e,i,r,o,a){var l=t.defer();return c.global.isLoader=1,x(i,a).then(function(t){var i=n.removeDuplicates(angular.copy(t).map(function(t){for(var i=e.priceElements.beadsSize.length;--i>-1;)e.priceElements.beadsSize[i].glassId===t.glassId&&(e.priceElements.beadsSize[i].elemId=t.beadId);return t.beadId})),a={laminationId:p.product.lamination.img_in_id,ids:[p.product.profile.rama_list_id,p.product.profile.rama_still_list_id,p.product.profile.stvorka_list_id,p.product.profile.impost_list_id,p.product.profile.shtulp_list_id,r.length>1?r.map(function(e){return e.id}):r[0].id,i.length>1?i:i[0],o],sizes:[]};for(var s in e.priceElements)a.sizes.push(angular.copy(e.priceElements[s]));p.product.template_width=0,p.product.template_height=0,p.product.template_square=0;for(var E=p.product.template.details[0].overallDim.length;--E>-1;)p.product.template_width+=p.product.template.details[0].overallDim[E].w,p.product.template_height+=p.product.template.details[0].overallDim[E].h,p.product.template_square+=p.product.template.details[0].overallDim[E].square;w(a).then(function(e){l.resolve(1),e&&(5===_.userInfo.user_type||7===_.userInfo.user_type)&&(p.product.report=G(e.constrElements))}),U(a),c.global.startProgramm&&d.sendAnalyticsData(_.userInfo.id,u.order.id,p.product.template_id,p.product.profile.id,1)}),l.promise}function x(e,i){var r=t.defer(),n=p.product.glass.map(function(r){var n=t.defer();return r.glass_width?(o.selectLocalDB(o.tablesLocalDB.beed_profile_systems.tableName,{profile_system_id:e,glass_width:r.glass_width},"list_id").then(function(e){var a=e.length,l={glassId:r.id,beadId:0};if(a)if(a>1){var s=e.map(function(e){var r=t.defer();return o.selectLocalDB(o.tablesLocalDB.lists.tableName,{id:e},"beed_lamination_id").then(function(e){console.log("lamId++++",e),e&&(e[0]===i?r.resolve(1):r.resolve(0))}),r.promise});t.all(s).then(function(t){console.log("finish++++",t);for(var i=t.length;--i>-1;)t[i]&&(l.beadId=e[i].list_id,n.resolve(l))})}else l.beadId=e[0].list_id,n.resolve(l);else console.log("Error!!",result),n.resolve(0)}),n.promise):void 0});return r.resolve(t.all(n)),r.promise}function w(e){var i=t.defer();return o.calculationPrice(e).then(function(e){e.priceTotal?(p.product.template_price=n.roundingValue(n.addMarginToPrice(e.priceTotal,c.global.margins.coeff),2),k(p.product),i.resolve(e)):(p.product.template_price=0,i.resolve(0))}),i.promise}function G(e){var t,i,r,o=[],a=e.length,l=0;if(a){for(;a>l;l++)if(t=angular.copy(e[l]),t.element_id=angular.copy(t.id),t.amount=angular.copy(t.qty),delete t.id,delete t.amendment_pruninng,delete t.currency_id,delete t.qty,delete t.waste,l){if(i=o.length,r=0,i){for(;--i>-1;)o[i].element_id===t.element_id&&o[i].size===t.size&&(r++,o[i].amount+=t.amount,o[i].priceReal+=t.priceReal);r||o.push(t)}}else o.push(t);for(i=o.length;--i>-1;)o[i].amount=n.roundingValue(o[i].amount,3),o[i].priceReal=n.roundingValue(n.addMarginToPrice(o[i].priceReal,c.global.margins.coeff),2)}return o}function U(e){for(var t=0,i=e.sizes[5].length,r=p.product.glass.length,o=0,a=0,l=0;--i>-1;){for(var s=0;r>s;s++)e.sizes[5][i].elemId==p.product.glass[s].id&&(angular.isNumber(p.product.glass[s].transcalency)||(p.product.glass[s].transcalency=1),o+=p.product.glass[s].transcalency*e.sizes[5][i].square);t+=e.sizes[5][i].square}o=n.roundingValue(o),t=n.roundingValue(t,3),angular.isNumber(p.product.profile.heat_coeff_value)||(p.product.profile.heat_coeff_value=1),a=p.product.profile.heat_coeff_value*(p.product.template_square-t),l=a+o,_.userInfo.therm_coeff_id?p.product.heat_coef_total=n.roundingValue(l/p.product.template_square):p.product.heat_coef_total=n.roundingValue(p.product.template_square/l)}function k(e){var t=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time];e.product_price=n.roundingValue(e.template_price+e.addelem_price),e.productPriceDis=n.setPriceDis(e.template_price,u.order.discount_construct)+e.addelemPriceDis,t&&(e.productPriceDis=n.setPriceDis(e.productPriceDis,t)),c.global.isLoader=0}function H(e,t){if(c.global.isInfoBox!==e){for(var i=t.length,r={};--i>-1;)t[i].lamination_type_id?t[i].lamination_type_id===e&&(r=t[i]):t[i].id===e&&(r=t[i]);$.isEmptyObject(r)||(c.global.infoTitle=r.name,c.global.infoImg=r.img,c.global.infoLink=r.link,c.global.infoDescrip=r.description,c.global.isInfoBox=e)}}function V(){c.global.showRoomSelectorDialog=0,c.global.configMenuTips=c.global.startProgramm?1:0}function B(){var e,t=c.global.laminats.length,i=c.global.laminatCouples.filter(function(e){return e.profile_id?e.profile_id===p.product.profile.id:!0}),r=0;for(c.global.lamGroupFiltered.length=0;--t>-1;)if(c.global.laminats[t].isActive)for(r=1,e=i.length;--e>-1;)i[e].img_in_id===c.global.laminats[t].type_id?F(i[e].id)&&c.global.lamGroupFiltered.push(i[e]):i[e].img_out_id===c.global.laminats[t].type_id&&F(i[e].id)&&c.global.lamGroupFiltered.push(i[e]);c.global.lamGroupFiltered.length||r||(c.global.lamGroupFiltered=i)}function F(e){for(var t=c.global.lamGroupFiltered.length,i=1;--t>-1;)c.global.lamGroupFiltered[t].id===e&&(i=0);return i}function Y(e){var t=c.global.laminatCouples.length;for(W();--t>-1;)e?c.global.laminatCouples[t].id===e&&(p.product.lamination=c.global.laminatCouples[t]):c.global.laminatCouples[t].id||(p.product.lamination=c.global.laminatCouples[t])}function W(){for(var e=c.global.laminats.length;--e>-1;)c.global.laminats[e].isActive=0}function z(e){var i=t.defer();return e?(p.product.profile.rama_list_id=p.product.lamination.rama_list_id,p.product.profile.rama_still_list_id=p.product.lamination.rama_still_list_id,p.product.profile.stvorka_list_id=p.product.lamination.stvorka_list_id,p.product.profile.impost_list_id=p.product.lamination.impost_list_id,p.product.profile.shtulp_list_id=p.product.lamination.shtulp_list_id):p.product.profile=angular.copy(y(p.product.profile.id,c.global.profiles)),t.all([L(p.product.profile.rama_list_id),L(p.product.profile.rama_still_list_id),L(p.product.profile.stvorka_list_id),L(p.product.profile.impost_list_id),L(p.product.profile.shtulp_list_id)]).then(function(e){p.product.profileDepths.frameDepth=e[0],p.product.profileDepths.frameStillDepth=e[1],p.product.profileDepths.sashDepth=e[2],p.product.profileDepths.impostDepth=e[3],p.product.profileDepths.shtulpDepth=e[4],a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e);var t=p.product.hardware.id?p.product.hardware.id:0;M(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){i.resolve(1)}),a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e)})})}),i.promise}function K(){console.log("new project!!!!!!!!!!!!!!",u.order),p.product=p.setDefaultProduct(),f(),h(),c.global.isChangedTemplate=0,c.global.isShowCommentBlock=0,c.global.isCreatedNewProject=1,c.global.isCreatedNewProduct=1,I(),A(p.product.construction_type).then(function(){c.global.isLoader=0,Q(),W(),B(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function j(){console.log("new product!!!!!!!!!!!!!!!"),p.product=p.setDefaultProduct(),c.global.isCreatedNewProduct=1,c.global.isChangedTemplate=0,I(),A(p.product.construction_type).then(function(){Q(),W(),B(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function q(){p.product.door_shape_id=0,p.product.door_sash_shape_id=0,p.product.door_handle_shape_id=0,p.product.door_lock_shape_id=0}function Q(){c.global.isNavMenu=0,c.global.isConfigMenu=1,c.global.activePanel=0,X(),c.global.startProgramm&&(r(function(){c.global.showRoomSelectorDialog=1},2e3),r(V,5e3))}function X(){E.aux.isWindowSchemeDialog=0,E.aux.isAddElementListView=0,E.aux.isFocusedAddElement=0,E.aux.isTabFrame=0,E.aux.isAddElementListView=0,E.aux.showAddElementsMenu=0,E.aux.addElementGroups.length=0,E.aux.searchingWord="",E.aux.isGridSelectorDialog=0}function Z(){var e=1;if(p.product.is_addelem_only&&(e=J()),e){if(c.global.tempAddElements.length=0,c.global.configMenuTips=0,c.global.isShowCommentBlock=0,X(),c.global.productEditNumber)for(var t=u.order.products.length;--t>-1;)u.order.products[t].product_id===c.global.productEditNumber&&(u.order.products[t]=angular.copy(p.product));else p.product.product_id=u.order.products.length>0?u.order.products.length+1:1,p.product.template_source.beads=angular.copy(p.product.template.priceElements.beadsSize),delete p.product.template,u.order.products.push(p.product);c.global.isCreatedNewProduct=0,n.stopStartProg()}return e}function J(){for(var e=p.product.chosenAddElements.length,t=0;--e>-1;)p.product.chosenAddElements[e].length&&t++;return t}function ee(){r(function(){n.setPreviosPage(),e.path("/cart")},100)}function te(e,i,r){var a=t.defer();c.global.orderEditNumber&&(ie(c.global.orderEditNumber),o.deleteOrderServer(_.userInfo.phone,_.userInfo.device_code,c.global.orderEditNumber),c.global.orderEditNumber=0),angular.extend(u.order,e);for(var s=u.order.products.length,d=0;s>d;d++){var p=angular.copy(u.order.products[d]);p.order_id=u.order.id,p.template_source=JSON.stringify(u.order.products[d].template_source),p.profile_id=u.order.products[d].profile.id,p.glass_id=u.order.products[d].glass.map(function(e){return e.id}).join(", "),p.hardware_id=u.order.products[d].hardware.id?u.order.products[d].hardware.id:0,p.lamination_id=u.order.products[d].lamination.id,p.lamination_in_id=u.order.products[d].lamination.lamination_in_id,p.lamination_out_id=u.order.products[d].lamination.lamination_out_id,p.modified=new Date,p.template&&delete p.template,delete p.templateIcon,delete p.profile,delete p.glass,delete p.hardware,delete p.lamination,delete p.chosenAddElements,delete p.profileDepths,delete p.addelemPriceDis,delete p.productPriceDis,delete p.report,u.order.products_qty+=u.order.products[d].product_qty,console.log("SEND PRODUCT------",p),o.insertRowLocalDB(p,o.tablesLocalDB.order_products.tableName),i&&o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.order_products.tableName,p);for(var E=angular.copy(u.order.products[d].report),g=E.length;--g>-1;)E[g].order_id=u.order.id,E[g].price=angular.copy(E[g].priceReal),delete E[g].priceReal;for(var f=u.order.products[d].chosenAddElements.length,T=0;f>T;T++){var h=u.order.products[d].chosenAddElements[T].length;if(h>0)for(var I=0;h>I;I++){var A={order_id:u.order.id,product_id:u.order.products[d].product_id,element_type:u.order.products[d].chosenAddElements[T][I].element_type,element_id:u.order.products[d].chosenAddElements[T][I].id,name:u.order.products[d].chosenAddElements[T][I].name,element_width:u.order.products[d].chosenAddElements[T][I].element_width,element_height:u.order.products[d].chosenAddElements[T][I].element_height,element_price:u.order.products[d].chosenAddElements[T][I].element_price,element_qty:u.order.products[d].chosenAddElements[T][I].element_qty,block_id:u.order.products[d].chosenAddElements[T][I].block_id,modified:new Date};console.log("SEND ADD",A),o.insertRowLocalDB(A,o.tablesLocalDB.order_addelements.tableName),i&&o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.order_addelements.tableName,A)}}}var S=angular.copy(u.order);return S.order_date=new Date(u.order.order_date),S.order_type=i,S.order_style=r,S.factory_id=_.userInfo.factory_id,S.user_id=_.userInfo.id,S.delivery_date=new Date(u.order.delivery_date),S.new_delivery_date=new Date(u.order.new_delivery_date),S.customer_sex=u.order.customer_sex?+u.order.customer_sex:0,S.customer_age=u.order.customer_age?u.order.customer_age.id:0,S.customer_education=u.order.customer_education?u.order.customer_education.id:0,S.customer_occupation=u.order.customer_occupation?u.order.customer_occupation.id:0,S.customer_infoSource=u.order.customer_infoSource?u.order.customer_infoSource.id:0,S.products_qty=n.roundingValue(u.order.products_qty),S.discount_construct_max=_.userInfo.discountConstrMax,S.discount_addelem_max=_.userInfo.discountAddElemMax,S.default_term_plant=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time],S.disc_term_plant=m.cart.discountDeliveyPlant,S.margin_plant=m.cart.marginDeliveyPlant,i&&(S.additional_payment="",S.created=new Date,S.sended=new Date(0),S.state_to=new Date(0),S.state_buch=new Date(0),S.batch="---",S.base_price=0,S.factory_margin=0,S.purchase_price=0,S.sale_price=0,S.modified=new Date),delete S.products,delete S.floorName,delete S.mountingName,delete S.selectedInstalmentPeriod,delete S.selectedInstalmentPercent,delete S.productsPriceDis,delete S.orderPricePrimaryDis,delete S.paymentFirstDis,delete S.paymentMonthlyDis,delete S.paymentFirstPrimaryDis,delete S.paymentMonthlyPrimaryDis,console.log("!!!!orderData!!!!",S),i?o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.orders.tableName,S).then(function(e){e.status&&(S.order_number=e.order_number),o.insertRowLocalDB(S,o.tablesLocalDB.orders.tableName),a.resolve(1)}):(o.insertRowLocalDB(S,o.tablesLocalDB.orders.tableName),a.resolve(1)),u.order=u.setDefaultOrder(),l.setUserGeoLocation(_.userInfo.city_id,_.userInfo.cityName,_.userInfo.climaticZone,_.userInfo.heatTransfer,_.userInfo.fullLocation),c.global.isCreatedNewProject=0,a.promise}function ie(e){o.deleteRowLocalDB(o.tablesLocalDB.orders.tableName,{id:e}),o.deleteRowLocalDB(o.tablesLocalDB.order_products.tableName,{order_id:e}),o.deleteRowLocalDB(o.tablesLocalDB.order_addelements.tableName,{order_id:e})}var re=this;return re.publicObj={saveUserEntry:g,createOrderData:f,createOrderID:T,setCurrDiscounts:h,setCurrTemplate:I,prepareTemplates:A,downloadAllTemplates:S,setCurrentProfile:N,setCurrentGlass:D,setGlassToTemplateBlocks:b,setCurrentHardware:P,fineItemById:y,parseTemplate:O,saveTemplateInProduct:C,checkSashInTemplate:R,preparePrice:M,setProductPriceTOTAL:k,showInfoBox:H,closeRoomSelectorDialog:V,laminatFiltering:B,setCurrLamination:Y,setProfileByLaminat:z,createNewProject:K,createNewProduct:j,setDefaultDoorConfig:q,prepareMainPage:Q,setDefaultAuxParam:X,inputProductInOrder:Z,goToCart:ee,saveOrderInDB:te,deleteOrderInDB:ie},re.publicObj}e.$inject=["$location","$q","$filter","$timeout","localDB","GeneralServ","SVGServ","loginServ","optionsServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","UserStor","AuxStor","CartStor"],angular.module("MainModule").factory("MainServ",e)}(),function(){function e(e,t,i,r,o,n,a,l,s,d){function c(){function e(e){var i=e.coords.latitude,r=e.coords.longitude;t.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+i+","+r+"&sensor=true&language=ru").success(function(e,t,i,r){var o=e.results[0].formatted_address.split(", ");s.order.customer_city_id=156,s.order.customer_city=o[o.length-3],s.order.climatic_zone=7,s.order.heat_coef_min=.99,s.order.customer_location=o[o.length-3]+", "+o[o.length-2]+", "+o[o.length-1]}).error(function(e,t,i,r){alert(t)})}function i(e){alert(e.message)}r.getCurrentPosition().then(e,i)}function u(){l.global.isVoiceHelper=!l.global.isVoiceHelper,l.global.isVoiceHelper&&(l.global.voiceHelperLanguage=p(),playTTS(i("translate")("construction.VOICE_SWITCH_ON"),l.global.voiceHelperLanguage))}function p(){var e="ru_RU";return e}function _(){l.global.isNavMenu=!1,l.global.isConfigMenu=!0,o.setPreviosPage(),e.path("/history")}function E(){o.stopStartProg(),d.product.is_addelem_only?n.createNewProduct():(d.product=d.setDefaultProduct(),n.closeRoomSelectorDialog(),n.setDefaultAuxParam(),d.product.is_addelem_only=1,l.global.isNavMenu=0,l.global.isConfigMenu=1,l.global.activePanel=6)}function m(){l.global.startProgramm?(o.stopStartProg(),n.prepareMainPage()):(l.global.isLoader=1,l.global.isCreatedNewProject&&l.global.isCreatedNewProduct?n.inputProductInOrder()&&(a.calculateOrderPrice(),n.saveOrderInDB({},0,"")):l.global.isCreatedNewProject&&!l.global.isCreatedNewProduct&&n.saveOrderInDB({},0,""),o.setPreviosPage(),n.createNewProject())}var g=this;return g.publicObj={getCurrentGeolocation:c,setLanguageVoiceHelper:p,switchVoiceHelper:u,gotoHistoryPage:_,createAddElementsProduct:E,clickNewProject:m},g.publicObj}e.$inject=["$location","$http","$filter","$cordovaGeolocation","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor"],angular.module("MainModule").factory("NavMenuServ",e)}(),function(){function e(e){return{getTemplateImgIcons:function(t){t(new OkResult({templateImgs:[{id:1,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/1.png"},{id:2,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/3.png"},{id:3,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/4.png"},{id:4,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/5.png"},{id:5,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/6.png"},{id:6,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/7.png"},{id:7,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/8.png"},{id:8,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/9.png"},{id:9,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/10.png"},{id:10,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/11.png"},{id:11,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/12.png"}]}))},getTemplatesWindow:function(e){e(new OkResult({windows:[{name:"Глухое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],
pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Одностворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:530,y:0,dir:"line"},{type:"impost",id:"ip3",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1050,y:0,dir:"line"},{type:"impost",id:"ip3",x:1050,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:0,dir:"line"},{type:"impost",id:"ip3",x:700,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_10","block_11"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_10",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_11",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesWindowDoor:function(e){e(new OkResult({windowDoor:[{name:"Выход на балкон",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1","block_2"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp5",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp6",x:2e3,y:0,dir:"line",view:1},{type:"frame",id:"fp7",x:2e3,y:2100,dir:"line",view:1},{type:"frame",id:"fp8",x:1300,y:2100,dir:"line",view:1}],pointsIn:[],parts:[],glassId:0,glassTxt:"",openDir:[1,4],handlePos:4,sashType:2}]}]}))},getTemplatesBalcony:function(e){e(new OkResult({balconies:[{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesDoor:function(e){e(new OkResult({doors:[{name:"Одностворчатая",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:700,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:700,y:2100,dir:"line",view:1},{type:"frame",id:"fp4",x:0,y:2100,dir:"line",view:1}],pointsIn:[],parts:[],glassId:0,glassTxt:"",openDir:[1,4],handlePos:4,sashType:2}]}]}))},getInstalment:function(e){e(new OkResult({instalment:[{id:1,name:1,value:15},{id:2,name:2,value:20},{id:3,name:3,value:25},{id:4,name:4,value:30},{id:5,name:5,value:35}]}))}}}e.$inject=["$filter"],angular.module("BauVoiceApp").factory("optionsServ",e)}(),function(){function e(e,t,i,r,o){function n(e,t){o.userInfo.avatar=e,i.sendIMGServer(t),i.updateLocalDB(i.tablesLocalDB.users.tableName,{avatar:e},{id:o.userInfo.id})}function a(){t.path("/"+r.global.currOpenPage)}function l(){t.path("/location")}function s(){t.path("/change-pass")}function d(){t.path("/change-lang")}function c(){t.path("/settings")}function u(){console.log("prevOpenPage +++",r.global.prevOpenPage),t.path(r.global.prevOpenPage)}var p=this;return p.publicObj={changeAvatar:n,closeLocationPage:a,gotoLocationPage:l,gotoPasswordPage:s,gotoLanguagePage:d,gotoSettingsPage:c,closeSettingsPage:u},p.publicObj}e.$inject=["$rootScope","$location","localDB","GlobalStor","UserStor"],angular.module("SettingsModule").factory("SettingServ",e)}(),function(){function e(){function e(){var e=document.getElementById("sounds");e.play()}var t=this;return t.soundsIntervals={menu:{start:7.93,end:11.7},swip:{start:8,end:9},price:{from:21.5,to:23.2},fly:{start:.57,end:1.59},switching:{start:1.81,end:2.88}},t.publicObj={playSound:e},t.publicObj}angular.module("BauVoiceApp").factory("SoundPlayServ",e)}(),function(){function e(e,t,i,r,o){function n(t,i){var r={},o=e.defer();r.details=angular.copy(t.details),r.priceElements={framesSize:[],frameSillSize:[],sashsSize:[],impostsSize:[],shtulpsSize:[],glassSquares:[],beadsSize:[],sashesBlock:[]};for(var n=r.details.length,a=0;n>a;a++)if(r.details[a].level)1===r.details[a].level&&r.details[a].pointsQ&&I(r.details[a]),r.details[a].center=d(r.details[a].pointsOut),r.details[a].pointsOut=c(r.details[a].pointsOut,r.details[a].center),r.details[a].linesOut=p(r.details[a].pointsOut),1===r.details[a].level?r.details[a].pointsIn=m(r.details[a].linesOut,i,"frame"):(r.details[a].center=d(r.details[a].pointsIn),r.details[a].pointsIn=c(r.details[a].pointsIn,r.details[a].center)),r.details[a].linesIn=p(r.details[a].pointsIn),1===r.details[a].level&&(B(r.details),$.merge(r.details[a].parts,x(r.details[a].pointsOut,r.details[a].pointsIn,r.priceElements))),r.details[a].children.length?"sash"===r.details[a].blockType&&(r.details[a].sashPointsOut=Y(m(r.details[a].linesIn,i,"sash-out"),"sash"),r.details[a].sashLinesOut=p(r.details[a].sashPointsOut),r.details[a].sashPointsIn=m(r.details[a].sashLinesOut,i,"sash-in"),r.details[a].sashLinesIn=p(r.details[a].sashPointsIn),r.details[a].hardwarePoints=m(r.details[a].sashLinesOut,i,"hardware"),r.details[a].hardwareLines=p(r.details[a].hardwarePoints),$.merge(r.details[a].parts,x(r.details[a].sashPointsOut,r.details[a].sashPointsIn,r.priceElements)),r.details[a].sashOpenDir=W(r.details[a].openDir,r.details[a].sashLinesIn),J(r.details[a].sashType,r.details[a].openDir,r.details[a].hardwareLines,r.priceElements)):"frame"===r.details[a].blockType?(r.details[a].beadPointsOut=Y(r.details[a].pointsIn,"bead"),r.details[a].beadLinesOut=p(r.details[a].beadPointsOut),r.details[a].beadPointsIn=m(r.details[a].beadLinesOut,i,"frame-bead"),r.details[a].glassPoints=m(r.details[a].beadLinesOut,i,"frame-glass"),r.details[a].parts.push(k(r.details[a].glassPoints,r.priceElements,r.details[a].glassId)),$.merge(r.details[a].parts,x(r.details[a].beadPointsOut,r.details[a].beadPointsIn,r.priceElements,r.details[a].glassId))):"sash"===r.details[a].blockType&&(r.details[a].sashPointsOut=Y(m(r.details[a].linesIn,i,"sash-out"),"sash"),r.details[a].sashLinesOut=p(r.details[a].sashPointsOut),r.details[a].sashPointsIn=m(r.details[a].sashLinesOut,i,"sash-in"),r.details[a].sashLinesIn=p(r.details[a].sashPointsIn),r.details[a].hardwarePoints=m(r.details[a].sashLinesOut,i,"hardware"),r.details[a].hardwareLines=p(r.details[a].hardwarePoints),r.details[a].beadPointsOut=Y(r.details[a].sashPointsIn,"bead"),r.details[a].beadLinesOut=p(r.details[a].beadPointsOut),r.details[a].beadPointsIn=m(r.details[a].beadLinesOut,i,"sash-bead"),r.details[a].beadLinesIn=p(r.details[a].beadPointsIn),r.details[a].glassPoints=m(r.details[a].beadLinesOut,i,"sash-glass"),$.merge(r.details[a].parts,x(r.details[a].sashPointsOut,r.details[a].sashPointsIn,r.priceElements)),r.details[a].parts.push(k(r.details[a].glassPoints,r.priceElements,r.details[a].glassId)),$.merge(r.details[a].parts,x(r.details[a].beadPointsOut,r.details[a].beadPointsIn,r.priceElements,r.details[a].glassId)),r.details[a].sashOpenDir=W(r.details[a].openDir,r.details[a].beadLinesIn),J(r.details[a].sashType,r.details[a].openDir,r.details[a].hardwareLines,r.priceElements)),A(r.details[a],r.details,i),r.details[a].children.length&&r.details[a].parts.push(ee(r.details[a].impost.impostIn,r.priceElements));else{var l=r.details[a].children.length,s=0;if(1===l)for(;n>s;s++)r.details[a].children[0]===r.details[s].id&&(r.details[s].position="single");else if(l>1)for(;n>s;s++)r.details[a].children[0]===r.details[s].id?r.details[s].position="first":r.details[a].children[l-1]===r.details[s].id&&(r.details[s].position="last");r.details[a].overallDim=[]}return r.dimension=ue(r.details),o.resolve(r),o.promise}function a(t,i){var r=e.defer(),o=angular.copy(i),a=2;for(var l in o)for(var s in o[l])o[l][s]*=a;return n(t,o).then(function(e){r.resolve(e)}),r.promise}function l(e,t,i,r){var o,n=e.maxX-e.minX+300,a=e.maxY-e.minY,l=d3.scale.linear().domain([0,1]).range([0,r]);return n>a?o=l(t>n?n/t:n>t?t/n:1):a>=n&&(o=l(i>a?a/i:a>i?i/a:1)),o}function s(e,t,i,r){var o={x:(t-(e.minX+e.maxX)*r)/2,y:(i-(e.minY+e.maxY)*r)/2};return o}function d(e){var t=e.length,i={x:e.reduce(function(e,t){return"curv"===t.dir?e+t.xQ:e+t.x},0)/t,y:e.reduce(function(e,t){return"curv"===t.dir?e+t.yQ:e+t.y},0)/t};return i}function c(e,t){for(var i=e.length,r=0;i>r;r++)e[r].fi=u(t,e[r]);return e.sort(function(e,t){return t.fi-e.fi}),e}function u(e,t){var i;return i="curv"===t.dir?Math.atan2(e.y-t.yQ,t.xQ-e.x)*(180/Math.PI):Math.atan2(e.y-t.y,t.x-e.x)*(180/Math.PI),0>i&&(i+=360),i}function p(e){for(var t=[],r=e.length,o=0;r>o;o++)if("frame"!==e[o].type||e[o].view){var n,a={};a.from=angular.copy(e[o]),a.dir=e[o].dir,o===r-1?(n=0,"frame"!==e[n].type||e[n].view||(n=1)):(n=o+1,"frame"!==e[n].type||e[n].view||(n=n===r-1?0:o+2)),a.to=angular.copy(e[n]),a.type=E(e[o].id,e[n].id),"line"===a.dir&&(a.dir="curv"===e[n].dir?"curv":"line"),a.size=i.roundingValue(Math.hypot(a.to.x-a.from.x,a.to.y-a.from.y)),_(a),t.push(a)}var l=t.pop();return t.unshift(l),t}function _(e){e.coefA=e.from.y-e.to.y,e.coefB=e.to.x-e.from.x,e.coefC=e.from.x*e.to.y-e.to.x*e.from.y}function E(e,t){var i="";return i=e.indexOf("ip")+1&&t.indexOf("ip")+1?"impost":e.indexOf("sht")+1&&t.indexOf("sht")+1&&e===t?"shtulp":"frame"}function m(e,t,i){for(var r=[],o=e.length,n=0;o>n;n++){var a,l=angular.copy(e[n]),s={},d={};l.coefC=g(t,l,i),a=n===o-1?0:n+1,s=angular.copy(e[a]),s.coefC=g(t,s,i),d=f(l,s),r.push(d)}return r}function g(e,t,i){var r=0,o=20;switch(i){case"frame":"frame"===t.type?r=e.frameDepth.c:"impost"===t.type?r=e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.b/2);break;case"frame-bead":case"sash-bead":r=o;break;case"frame-glass":"frame"===t.type?r=e.frameDepth.d-e.frameDepth.c:"impost"===t.type&&(r=e.impostDepth.b-e.impostDepth.c/2);break;case"sash-out":"frame"===t.type?r=e.frameDepth.b-e.frameDepth.c:"impost"===t.type?r=e.impostDepth.d-e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.a/2-e.shtulpDepth.b/2);break;case"sash-in":r=e.sashDepth.c;break;case"hardware":r=e.sashDepth.b;break;case"sash-glass":r=e.sashDepth.d-e.sashDepth.c}var n=t.coefC-r*Math.hypot(t.coefA,t.coefB);return n}function f(e,t){var i={},r={},o=T(e,t);if(o){var n=e.to.x,a=e.to.y,l={coefA:e.coefB,coefB:-e.coefA,coefC:e.coefA*a-e.coefB*n};r=re(e,l)}else r=re(e,t);return i.x=r.x,i.y=r.y,"impost"===e.type||"impost"===t.type?i.type="impost":"shtulp"===e.type||"shtulp"===t.type?i.type="shtulp":i.type="frame","curv"===e.to.dir?(i.dir="curv",i.xQ=e.to.xQ,i.yQ=e.to.yQ):i.dir="line",i.id=e.to.id,i.view=1,i}function T(e,t){var i=h(e),r=h(t);return i===r?1:0}function h(e){var t=e.from.x,i=e.from.y,r=e.to.x,o=e.to.y;return Math.round((o-i)/(r-t))}function I(e){var t=e.pointsQ.length;if(t)for(var i=0;t>i;i++){for(var r=e.pointsOut.length,o=0,n=0,a=0;r>a;a++)e.pointsQ[i].fromPId===e.pointsOut[a].id&&(o=e.pointsOut[a]),e.pointsQ[i].toPId===e.pointsOut[a].id&&(n=e.pointsOut[a]);if(o&&n){var l,s={from:o,to:n},d=ne(o,n),c={type:e.pointsQ[i].type,id:e.pointsQ[i].id,dir:"curv",xQ:d.x,yQ:d.y};_(s),l=M(e.pointsQ[i].positionQ,s,2*e.pointsQ[i].heightQ),c.x=l.x,c.y=l.y,s.coefA||1!==e.pointsQ[i].positionQ?s.coefB||4!==e.pointsQ[i].positionQ||(c.x-=4*e.pointsQ[i].heightQ):c.y-=4*e.pointsQ[i].heightQ,e.pointsOut.push(angular.copy(c)),e.pointsQ[i].midleX=c.xQ,e.pointsQ[i].midleY=c.yQ,Se(e.pointsQ[i],o,c,n)}}}function A(e,t,i){if(e.children.length){var r,o,n,a,l=t.length,s=e.impost.impostAxis.length,d=angular.copy(e.impost.impostAxis[0]),c=angular.copy(e.impost.impostAxis[1]),p=angular.copy(e.pointsOut);"sash"===e.blockType?(r=angular.copy(e.sashPointsIn),o=e.sashLinesIn):(r=angular.copy(e.pointsIn),o=e.linesIn);for(var E=o.length,m=1;l>m;m++)t[m].id===e.children[0]?n=m:t[m].id===e.children[1]&&(a=m);var f={type:"impost"===d.type?"impost":"shtulp",from:d,to:c},T={type:"impost"===d.type?"impost":"shtulp",from:c,to:d};_(f),_(T);var h=angular.copy(f),I=angular.copy(T);h.coefC=g(i,h,"frame"),I.coefC=g(i,I,"frame");for(var m=0;E>m;m++)S(0,0,m,E,o,h,d,e.impost.impostIn),S(1,0,m,E,o,I,c,e.impost.impostIn),S(0,1,m,E,o,f,d,e.impost.impostOut,r);if(3===s){for(var A,N=e.impost.impostOut.length,m=0;N>m;m++)e.impost.impostOut[m].fi=u(e.center,e.impost.impostOut[m]),e.impost.impostAxis[m].fi=u(e.center,e.impost.impostAxis[m]);e.impost.impostOut[0].fi!==e.impost.impostAxis[0].fi&&e.impost.impostOut.reverse(),A=O(0,1,e.impost),O(0,0,e.impost),O(1,0,e.impost),t[n].pointsOut.push(angular.copy(A)),t[a].pointsOut.push(angular.copy(A)),e.impost.impostAxis[2].midleX=A.xQ,e.impost.impostAxis[2].midleY=A.yQ,Se(e.impost.impostAxis[2],e.impost.impostOut[0],A,e.impost.impostOut[1])}var y=angular.copy(e.impost.impostAxis);C(y,p,t[n].pointsOut,t[a].pointsOut),C(y,r,t[n].pointsIn,t[a].pointsIn),R(e.impost.impostIn,t[n].pointsIn,t[a].pointsIn);var L,D=e.linesOut.length;e.impost.impostAxis[2]&&(L=angular.copy(e.impost.impostAxis[2])),e.impost.impostAxis.length=0;for(var m=0;D>m;m++)S(0,0,m,D,e.linesOut,f,d,e.impost.impostAxis);L&&e.impost.impostAxis.push(L);for(var m=0;2>m;m++)t[n].pointsOut.push(angular.copy(e.impost.impostAxis[m])),t[a].pointsOut.push(angular.copy(e.impost.impostAxis[m]))}}function S(e,t,i,r,o,n,a,l,s){var d=re(o[i],n),c=oe(d,o[i].to,o[i].from),u=N(c);if(u){var p=angular.copy(a);if(p.group=e,p.x=d.x,p.y=d.y,"curv"===o[i].dir){var _=y(t,n),E=Q(i,r,o,_,d);E.length&&(p.x=E[0].x,p.y=E[0].y,p.t=E[0].t)}var m=v(p,l);m&&("curv"===o[i].dir&&t&&L(i,r,o,p,s),l.push(angular.copy(p)))}}function N(e){var t=0;return e.x===1/0&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&e.y===1/0?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)?t=1:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&$.isNumeric(e.y)?(e.y<-2||e.y>2)&&(t=1):$.isNumeric(e.x)&&e.y>=0&&e.y<=1&&(e.x<-2||e.x>2)&&(t=1),t}function y(e,t){var i=ne(t.from,t.to);if(e)return i;var r={coefA:t.coefB,coefB:-t.coefA,coefC:t.coefA*i.y-t.coefB*i.x};return re(t,r)}function L(e,t,i,r,o){var n,a,l,s,d;i[e].from.id.indexOf("q")+1?(l=e-1,i[l]||(l=t-1),s=i[l].from,d=i[e].to,n=angular.copy(i[e].from)):i[e].to.id.indexOf("q")+1&&(l=e+1,i[l]||(l=0),s=i[e].from,d=i[l].to,n=angular.copy(i[e].to)),a=angular.copy(n);var c=P(r.t,s,n),u=P(r.t,a,d),p=ne(s,r),_=ne(r,d);n.x=c.x,n.y=c.y,n.xQ=p.x,n.yQ=p.y,a.x=u.x,a.y=u.y,a.xQ=_.x,a.yQ=_.y;for(var E=o.length;--E>-1;)o[E].id===n.id&&o.splice(E,1);var m=v(n,o);m&&o.push(n);var g=v(a,o);g&&o.push(a)}function O(e,t,i){var r,o=[];if(t?(r={type:"impost",id:i.impostAxis[2].id,dir:"curv"},o.push(i.impostOut[0],i.impostOut[1])):(r=angular.copy(i.impostOut[2]),o=i.impostIn.filter(function(t){return t.group===e&&"line"===t.dir?1:0})),2===o.length){var n,a={from:angular.copy(o[0]),to:angular.copy(o[1])},l=ne(a.from,a.to);if(_(a),n=M(i.impostAxis[2].positionQ,a,2*i.impostAxis[2].heightQ),r.x=n.x,r.y=n.y,r.xQ=l.x,r.yQ=l.y,r.group=e,a.coefA||1!==i.impostAxis[2].positionQ?a.coefB||4!==i.impostAxis[2].positionQ||(r.x-=4*i.impostAxis[2].heightQ):r.y-=4*i.impostAxis[2].heightQ,t)return i.impostOut.push(r),r;i.impostIn.push(r)}}function C(e,t,i,r){for(var o=t.length,n=0;o>n;n++){var a=D(e[0],e[1],t[n]);if(a>0){var l=0;r.length&&(l=b(t[n].id,r)),l||r.push(angular.copy(t[n]))}else if(0>a){var l=0;i.length&&(l=b(t[n].id,i)),l||i.push(angular.copy(t[n]))}}}function R(e,t,i){for(var r=e.length,o=0;r>o;o++)e[o].group?i.push(angular.copy(e[o])):t.push(angular.copy(e[o]))}function D(e,t,i){return(i.x-t.x)*(i.y-e.y)-(i.y-t.y)*(i.x-e.x)}function v(e,t){var i=1,r=t.length;if(r)for(;--r>-1;)t[r].x===e.x&&t[r].y===e.y&&(i=0);return i}function b(e,t){var i=0,r=t.length;if(r)for(;--r>-1;)t[r].id.slice(0,3)===e.slice(0,3)&&t[r].id.slice(0,3).indexOf("q")+1&&(i=1);return i}function P(e,t,r){var o={x:i.roundingValue((1-e)*t.x+e*r.x),y:i.roundingValue((1-e)*t.y+e*r.y)};return o}function M(e,t,r){var o=ne(t.from,t.to),n={};if(t.coefA&&t.coefB)switch(e){case 1:n.y=o.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),n.x=o.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)));break;case 2:n.y=o.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),n.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)))+o.x;break;case 3:n.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.y,n.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)))+o.x;break;case 4:n.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.y,n.x=o.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)))}else n.x=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.x,n.y=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.x-o.x,2)))+o.y;return n.y=i.roundingValue(n.y,1),n.x=i.roundingValue(n.x,1),n}function x(e,t,n,a){for(var l,s,d=e.filter(function(e){return"frame"!==e.type||e.view?!0:!1}),c=[],u=d.length,p={glassId:a,sizes:[]},_=0;u>_;_++)if(0!==_||"curv"!==d[_].dir){var E={type:d[_].type,dir:"line",points:[]};if(_===u-1){if("curv"===d[_].dir)break;"curv"===d[0].dir?(E.type="arc",E.points.push(d[_],d[0],d[1],t[1],t[0],t[_]),("corner"===d[_].type||"corner"===d[1].type)&&(E.type="arc-corner"),E.dir="curv"):4!==r.product.construction_type||1!==o.design.doorConfig.doorShapeIndex&&2!==o.design.doorConfig.doorShapeIndex?4===r.product.construction_type&&3===o.design.doorConfig.doorShapeIndex&&"frame"===d[0].type&&"fp3"===d[0].id?(l=angular.copy(d[0]),l.y=1*t[0].y,w(E,d[_],l,t[0],t[_])):w(E,d[_],d[0],t[0],t[_]):"frame"===d[0].type&&"fp3"===d[0].id?(l=angular.copy(t[0]),l.y=1*d[0].y,w(E,d[_],d[0],l,t[_])):w(E,d[_],d[0],t[0],t[_])}else if("curv"===d[_].dir||"curv"===d[_+1].dir)E.type="arc",E.points.push(d[_],d[_+1]),d[_+2]?(E.points.push(d[_+2],t[_+2]),("corner"===d[_].type||"corner"===d[_+2].type)&&(E.type="arc-corner")):(E.points.push(d[0],t[0]),("corner"===d[_].type||"corner"===d[0].type)&&(E.type="arc-corner")),E.points.push(t[_+1],t[_]),E.dir="curv",_++;else if(4!==r.product.construction_type||1!==o.design.doorConfig.doorShapeIndex&&2!==o.design.doorConfig.doorShapeIndex)4===r.product.construction_type&&3===o.design.doorConfig.doorShapeIndex?("frame"===d[_].type&&"fp3"===d[_].id&&(l=angular.copy(t[_]),l.x=1*d[_].x,s=angular.copy(t[_+1]),s.x=1*d[_+1].x,w(E,d[_],d[_+1],s,l),E.doorstep=1),"frame"===d[_].type&&"fp4"===d[_].id?(l=angular.copy(d[_]),l.y=1*t[_].y,w(E,l,d[_+1],t[_+1],t[_])):("frame"===d[_].type&&"fp3"!==d[_].id||"frame"!==d[_].type)&&w(E,d[_],d[_+1],t[_+1],t[_])):w(E,d[_],d[_+1],t[_+1],t[_]);else{if(1===o.design.doorConfig.doorShapeIndex&&"frame"===d[_].type&&"fp3"===d[_].id)continue;2===o.design.doorConfig.doorShapeIndex&&"frame"===d[_].type&&"fp3"===d[_].id&&(l=angular.copy(d[_]),l.x=1*t[_].x,s=angular.copy(d[_+1]),s.x=1*t[_+1].x,w(E,l,s,t[_+1],t[_]),E.doorstep=1),"frame"===d[_].type&&"fp4"===d[_].id?(l=angular.copy(t[_]),l.y=1*d[_].y,w(E,d[_],d[_+1],t[_+1],l)):("frame"===d[_].type&&"fp3"!==d[_].id||"frame"!==d[_].type)&&w(E,d[_],d[_+1],t[_+1],t[_])}E.path=G(E.points),E.size=U(E.points);var m=i.roundingValue(angular.copy(E.size)/1e3,3);"bead"===d[_].type?(E.type="bead",p.sizes.push(m)):"sash"===d[_].type?(E.type="sash",n.sashsSize.push(m)):"frame"===E.type&&(E.sill?n.frameSillSize.push(m):n.framesSize.push(m)),c.push(E)}return p.sizes.length&&n.beadsSize.push(p),c}function w(e,t,i,r,o){e.points.push(t,i,r,o),("corner"===t.type||"corner"===i.type)&&(e.type="corner"),t.sill&&i.sill&&(e.sill=1)}function G(e){var t="M "+e[0].x+","+e[0].y,i=1,r=e.length;if(4===r)for(;r>i;i++)t+=" L "+e[i].x+","+e[i].y,i===r-1&&(t+=" Z");else if(6===r)for(;r>i;i++)3===i?t+=" L "+e[i].x+","+e[i].y:(t+=" Q "+e[i].x+","+e[i].y+" "+e[i+1].x+","+e[i+1].y,i++),i===r-1&&(t+=" Z");return t}function U(e){var t=e.length,r=0;if(2===t||4===t)r=i.roundingValue(Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y),1);else if(3===t||6===t)for(var o=.01,n=0;1>=n;){var a=2*((1-n)*(e[1].x-e[0].x)+n*(e[2].x-e[1].x)),l=2*((1-n)*(e[1].y-e[0].y)+n*(e[2].y-e[1].y));r+=Math.hypot(a,l)*o,n+=o}return r}function k(e,t,r){for(var o={type:"glass",points:e,path:"M ",square:0},n={elemId:r},a=e.length,l=0;a>l;l++)0===l&&("curv"===e[l].dir?o.path+=e[a-1].x+","+e[a-1].y:o.path+=e[l].x+","+e[l].y),"curv"===e[l].dir?(o.path+=" Q "+e[l].x+","+e[l].y+",",e[l+1]?o.path+=e[l+1].x+","+e[l+1].y:o.path+=e[0].x+","+e[0].y+" Z",l++):(o.path+=" L "+e[l].x+","+e[l].y,l===a-1&&(o.path+=" Z"));return o.square=H(e),o.sizes=V(e),n.square=angular.copy(o.square),n.sizes=angular.copy(o.sizes).map(function(e){return i.roundingValue(e/1e3,3)}),t.glassSquares.push(n),o}function H(e){for(var t=0,i=e.length,r=0;i>r;r++)t+=e[r+1]?e[r].x*e[r+1].y-e[r].y*e[r+1].x:e[r].x*e[0].y-e[r].y*e[0].x;return t/=2e6}function V(e){for(var t=e.length,r=[],o=0;t>o;o++){var n,a=0;if(0!==o||"curve"!==e[o].dir){if(n=e[o+1]?o+1:0,"curve"===e[n].dir){var l,s=.01,d=0;for(l=e[o+2]?o+2:1;1>=d;){var c=2*((1-d)*(e[n].x-e[o].x)+d*(e[l].x-e[n].x)),u=2*((1-d)*(e[n].y-e[o].y)+d*(e[l].y-e[n].y));a+=Math.hypot(c,u)*s,d+=s}++o}else a=i.roundingValue(Math.hypot(e[n].x-e[o].x,e[n].y-e[o].y),1);r.push(a)}}return r}function B(e){for(var t=e.length,i=1;t>i;i++)if(1===e[i].level){var r=e[i].pointsOut.length,o=0;if("single"===e[i].position)for(;r>o;o++)e[i].pointsOut[o].corner=F(e[i].pointsOut,r-1,o);else if("first"===e[i].position)for(;r>o;o++)e[i].pointsOut[o].fi>90&&e[i].pointsOut[o].fi<270&&(e[i].pointsOut[o].corner=F(e[i].pointsOut,r-1,o));else if("last"===e[i].position)for(;r>o;o++)(e[i].pointsOut[o].fi<90||e[i].pointsOut[o].fi>270)&&(e[i].pointsOut[o].corner=F(e[i].pointsOut,r-1,o))}}function F(e,t,i){return 0===i?"arc"!==e[t].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0:i===t?"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[0].type?1:0:"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0}function Y(e,t){for(var i=angular.copy(e),r=i.length;--r>-1;)i[r].type=t;return i}function W(e,t){for(var i=[],r=z(t),o=d(r),n=e.length,a=0;n>a;a++){var l={type:"sash-dir",points:[]};switch(e[a]){case 1:l.points.push(K(1,o,225,t),K(3,o,90,t),K(1,o,315,t));break;case 2:l.points.push(K(2,o,225,t),K(4,o,180,t),K(2,o,135,t));break;case 3:l.points.push(K(3,o,135,t),K(1,o,270,t),K(3,o,45,t));break;case 4:l.points.push(K(4,o,45,t),K(2,o,180,t),K(4,o,315,t))}i.push(l);
}return i}function z(e){for(var t=[],i=e.length,r=0;i>r;r++)if("curv"===e[r].dir){var o,n,a=.5,l={},s=r;0===r?(o=i-1,n=r+1):r===i-1?(o=r-1,n=0):(o=r-1,n=r+1),l.x=Z(e[o].to.x,e[s].to.x,e[n].to.x,a),l.y=Z(e[o].to.y,e[s].to.y,e[n].to.y,a),t.push(l)}else t.push(e[r].to);return t}function K(e,t,i,r){var o=j(t,i),n=q(e,o,r);return n}function j(e,t){var i=Math.tan(t*Math.PI/180),r={center:e,coefA:i,coefB:-1,coefC:e.y-i*e.x};return r}function q(e,t,i){for(var r=i.length,o=0;r>o;o++){var n,a,l,s;if(n=re(t,i[o]),n.x>=0&&n.y>=0&&(a=oe(n,i[o].to,i[o].from),l=N(a))){if("curv"===i[o].dir&&(s=Q(o,r,i,t.center,n),s.length&&(n.x=s[0].x,n.y=s[0].y)),n.fi=u(t.center,n),!e)return n;switch(e){case 1:if(n.fi>180)return n;break;case 2:if(n.fi>90&&n.fi<270)return n;break;case 3:if(n.fi<180)return n;break;case 4:if(n.fi>270||n.fi<90)return n}}}}function Q(e,t,i,r,o){var n,a,l,s,d,c;return i[e].from.id.indexOf("q")+1?(c=e-1,i[c]||(c=t-1),n=i[c].from,a=i[e].from,l=i[e].to):i[e].to.id.indexOf("q")+1&&(c=e+1,i[c]||(c=0),n=i[e].from,a=i[e].to,l=i[c].to),s=r,d=o,X(n,a,l,s,d)}function X(e,t,r,o,n){var a,l,s,d,c=[],u={x:o.y-n.y,y:n.x-o.x},p={x:e.x-2*t.x+r.x,y:e.y-2*t.y+r.y},_={x:2*(t.x-e.x),y:2*(t.y-e.y)},E={x:e.x,y:e.y},m=o.x*n.y-n.x*o.y,g=[];if(a=Math.abs(u.x)===Math.abs(u.y)?Math.abs(u.x*p.x)+Math.abs(u.y*p.y):Math.abs(u.x)?Math.abs(u.y)?u.x*p.x+u.y*p.y:u.x*p.x+p.y:p.x+u.y*p.y,l=(u.x*_.x+u.y*_.y)/a,s=(u.x*E.x+u.y*E.y+m)/a,d=l*l-4*s,d>0){var f=Math.sqrt(d);g.push(i.roundingValue((-l+f)/2),i.roundingValue((-l-f)/2))}else 0===d&&g.push(i.roundingValue(-l/2));for(var T=0;T<g.length;T++){var h=g[T];if(h>0&&1>h){var I={t:h,x:Z(e.x,t.x,r.x,h),y:Z(e.y,t.y,r.y,h)},A=Math.min(o.x,n.x,e.x,t.x,r.x),S=Math.min(o.y,n.y,e.y,t.y,r.y),N=Math.max(o.x,n.x,e.x,t.x,r.x),y=Math.max(o.y,n.y,e.y,t.y,r.y);o.x===n.x&&I.y>=S&&I.y<=y?c.push(I):o.y===n.y&&I.x>=A&&I.x<=N?c.push(I):I.x>=A&&I.y>=S&&I.x<=N&&I.y<=y&&c.push(I)}}return c}function Z(e,t,r,o){return i.roundingValue(o*o*(e-2*t+r)-2*o*(e-t)+e)}function J(e,t,i,r){for(var o={sizes:[],openDir:t,type:e},n=i.length;--n>-1;)o.sizes.push(i[n].size);r.sashesBlock.push(o)}function ee(e,t){var r=e[0].type,o=e.length,n={type:r,dir:"line"};if(4===o){var a=d(e);n.points=c(e,a)}else 6===o&&(n.dir="curv",n.points=te(e));n.path=G(n.points);var l=ie(o,n.points);n.size=U(l);var s=i.roundingValue(angular.copy(n.size)/1e3,3);return"impost"===r?t.impostsSize.push(s):"shtulp"===r&&t.shtulpsSize.push(s),n}function te(e){for(var t,i,r=[],o=[],n=[],a=e.length,l=0;a>l;l++)e[l].id.indexOf("qi")+1&&(e[l].group?i=e[l]:t=e[l]);for(var l=0;a>l;l++)if(!(e[l].id.indexOf("qi")+1)){var s=D(t,i,e[l]);s>0?o.push(e[l]):n.push(e[l])}for(var d=0;d<o.length;d++)o[d].group?r.unshift(o[d]):r.push(o[d]);r.unshift(i),r.push(t);for(var c=0;c<n.length;c++)n[c].group?r.unshift(n[c]):r.push(n[c]);return r}function ie(e,t){var i=[];if(4===e)for(;--e>-1;)t[e].group&&i.push(t[e]);else if(6===e){for(var r=0;e>r;r++)t[r].group&&(t[r].id.indexOf("ip")+1||t[r].id.indexOf("sht")+1)&&i.push(t[r]);for(var r=0;e>r;r++)t[r].group&&t[r].id.indexOf("qi")+1&&i.splice(1,0,t[r])}return i}function re(e,t){var r=e.coefA*t.coefB-t.coefA*e.coefB,o=e.coefB*t.coefC-t.coefB*e.coefC,n=t.coefA*e.coefC-e.coefA*t.coefC,a={x:i.roundingValue(i.roundingValue(o/r,3)),y:i.roundingValue(i.roundingValue(n/r,3))};return a.x===-0?a.x=0:a.y===-0&&(a.y=0),a}function oe(e,t,r){var o={x:i.roundingValue((e.x-t.x)/(r.x-t.x)),y:i.roundingValue((e.y-t.y)/(r.y-t.y))};return o.x===-(1/0)?o.x=1/0:o.y===-(1/0)&&(o.y=1/0),o.x===-0?o.x=0:o.y===-0&&(o.y=0),o}function ne(e,t){var i={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return i}function ae(e){for(var t=[],i=e.length;--i>0;){var r=e[i].pointsOut.length;if(r)for(;--r>-1;)t.push(angular.copy(e[i].pointsOut[r]))}return le(3,t),t}function le(e,t){for(var i=t.length;--i>-1;){for(var r=t.length,o=0,n=0;r>n;n++)switch(e){case 1:t[n].x===t[i].x&&o++;break;case 2:t[n].y===t[i].y&&o++;break;case 3:t[n].x===t[i].x&&t[n].y===t[i].y&&o++}o>1&&t.splice(i,1)}}function se(e,t){for(var i=t.length;--i>-1;)for(var r=t.length;--r>-1;)if(i!==r&&t[i]&&t[r])switch(e){case 1:t[i].x===t[r].x&&("impost"!==t[r].type&&"shtulp"!==t[r].type||"frame"!==t[i].type&&"corner"!==t[i].type?delete t[i]:delete t[r]);break;case 2:t[i].y===t[r].y&&("impost"!==t[r].type&&"shtulp"!==t[r].type||"frame"!==t[i].type&&"corner"!==t[i].type?delete t[i]:delete t[r])}return t.filter(function(e){return e?1:0})}function de(e,t){return e.x-t.x}function ce(e,t){return e.y-t.y}function ue(e){var t,i,r,o={dimX:[],dimY:[],dimQ:[]},n=e.length,a=e[0].maxSizeLimit;r=ae(e),r=r.filter(function(e){return"curv"===e.dir||e.t?0:1}),t=angular.copy(r),i=angular.copy(r),le(1,t),le(2,i),t.sort(de),i.sort(ce);for(var l=1;n>l;l++){var s=e[l].pointsOut.length;if(1===e[l].level){for(var d,c=[],u=[],p={w:0,h:0},_=0;s>_;_++)e[l].pointsOut[_].id.indexOf("fp")+1?c.push(e[l].pointsOut[_]):e[l].pointsOut[_].id.indexOf("qa")+1&&u.push(e[l].pointsOut[_]);if(d=angular.copy(c),le(1,c),le(2,d),c.sort(de),d.sort(ce),ge(1,"x",c,o.dimX,t,e[l].id,a),ge(1,"y",d,o.dimY,i,e[l].id,a),pe(1,e[l].id,u,o,e,n),e[l].pointsQ){var E=e[l].pointsQ.length;if(E)for(;--E>-1;)o.dimQ.push(e[l].pointsQ[E])}_e(p,o),p.square=H(e[l].pointsOut),e[0].overallDim.push(p)}if(!e[l].children.length){var m,g=[],f=[];Ee(g,e[l].pointsOut);for(var T=1;n>T;T++)e[T].id===e[l].parent&&e[T].impost&&e[T].impost.impostAxis[2]&&o.dimQ.push(e[T].impost.impostAxis[2]);f=angular.copy(r),m=angular.copy(g),g.length>1&&(g=se(1,g),g.sort(de),ge(0,"x",g,o.dimX,f,e[l].id,a),m=se(2,m),m.sort(ce),ge(0,"y",m,o.dimY,f,e[l].id,a))}}return o.dimX=angular.copy(me(o.dimX)),o.dimY=angular.copy(me(o.dimY)),o}function pe(e,r,o,n,a,l){for(var s=o.length;--s>-1;){for(var d={blockId:r,level:e,dimId:o[s].id,minLimit:t.minRadiusHeight},c=1;l>c;c++)if(1===a[c].level&&a[c].pointsQ){var u=a[c].pointsQ.length;if(u)for(var p=0;u>p;p++)if(a[c].pointsQ[p].id===d.dimId){switch(a[c].pointsQ[p].positionQ){case 1:d.axis="y",d.from=angular.copy(a[c].pointsQ[p].startY),d.to=angular.copy(a[c].pointsQ[p].midleY);break;case 2:d.axis="x",d.from=angular.copy(a[c].pointsQ[p].midleX),d.to=angular.copy(a[c].pointsQ[p].startX);break;case 3:d.axis="y",d.from=angular.copy(a[c].pointsQ[p].midleY),d.to=angular.copy(a[c].pointsQ[p].startY);break;case 4:d.axis="x",d.from=angular.copy(a[c].pointsQ[p].startX),d.to=angular.copy(a[c].pointsQ[p].midleX)}d.text=i.roundingValue(angular.copy(a[c].pointsQ[p].heightQ),1),d.maxLimit=a[c].pointsQ[p].lengthChord/4}}"x"===d.axis?n.dimX.push(d):n.dimY.push(d)}}function _e(e,t){for(var i=t.dimX.length,r=t.dimY.length;--i>-1;)t.dimX[i].level&&(e.w+=t.dimX[i].text);for(;--r>-1;)t.dimY[r].level&&(e.h+=t.dimY[r].text)}function Ee(e,t){for(var i=t.length;--i>-1;)t[i].t||"curv"===t[i].dir||t[i].id.indexOf("fp")+1&&!t[i].view||e.push(t[i])}function me(e){var t=e.filter(function(e){return 1===e.level}),i=t.length,r=e.filter(function(e){for(var r=0,o=0;i>o;o++)e.level||e.from!==t[o].from||e.to!==t[o].to||++r;return r?void 0:1});return r}function ge(e,t,i,r,o,n,a){for(var l=i.length-1,s=0;l>s;s++)r.push(fe(e,t,s,s+1,i,o,n,a))}function fe(e,t,r,o,n,a,l,s){var d,c={blockId:l,level:e,axis:t,dimId:n[o].id,from:"x"===t?angular.copy(n[r].x):angular.copy(n[r].y),to:"x"===t?angular.copy(n[o].x):angular.copy(n[o].y)};return c.text=i.roundingValue(Math.abs(c.to-c.from),1),d=e?Te(c,a,s):he(t,n[o],c.from,a,s),c.minLimit=d.minL,c.maxLimit=d.maxL,c}function Te(e,r,o){for(var n={},a=r.length,l=0;a>l;l++)"x"===e.axis?r[l].x===e.to&&(n.minL=r[l-1]?i.roundingValue(r[l-1].x+t.minSizeLimit,1):t.minSizeLimit,n.maxL=r[l+1]?i.roundingValue(r[l+1].x-e.from-t.minSizeLimit,1):o):r[l].y===e.to&&(n.minL=r[l-1]?i.roundingValue(r[l-1].y+t.minSizeLimit,1):t.minSizeLimit,n.maxL=r[l+1]?i.roundingValue(r[l+1].y-e.from-t.minSizeLimit,1):o);return n}function he(e,r,o,n,a){for(var l={},s=Ie(e,r,n),d=s.length,c=0;d>c;c++){for(var u=0,p=0;d>p;p++)if(s[p].id===r.id){var _=r.x-s[p].x,E=r.y-s[p].y;"x"===e&&_>0?u=1:"y"===e&&E>0&&(u=1)}"x"===e?s[c].x===r.x&&(s[c-1]&&u?r.id===s[c-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.x-s[c-1].x-t.minSizeLimit,1):l.minL=t.minSizeLimit,l.maxL=s[c+1]?i.roundingValue(r.x-o+(s[c+1].x-r.x-t.minSizeLimit),1):a):s[c].y===r.y&&(s[c-1]&&u?r.id===s[c-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.y-s[c-1].y-t.minSizeLimit,1):l.minL=t.minSizeLimit,l.maxL=s[c+1]?i.roundingValue(r.y-o+(s[c+1].y-r.y-t.minSizeLimit),1):a)}return l}function Ie(e,t,i){var r=[],o=i.length,n=0;if("x"===e){for(;o>n;n++)(t.y===i[n].y||i[n].id.indexOf("fp")+1)&&r.push(i[n]);le(1,r),r.sort(de)}else{for(;o>n;n++)(t.x===i[n].x||i[n].id.indexOf("fp")+1)&&r.push(i[n]);le(2,r),r.sort(ce)}return r}function Ae(e){var t=0;return e.x===1/0||e.y===1/0?t=0:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)&&(t=1),t}function Se(e,r,o,n){e.startX=Z(r.x,o.x,n.x,.5),e.startY=Z(r.y,o.y,n.y,.5),e.lengthChord=i.roundingValue(Math.hypot(n.x-r.x,n.y-r.y)),e.radius=Ne(e.lengthChord,e.heightQ),e.radiusMax=Ne(e.lengthChord,e.lengthChord/4),e.radiusMin=Ne(e.lengthChord,t.minRadiusHeight)}function Ne(e,t){return Math.round(t/2+e*e/(8*t))}var ye=this;return ye.publicObj={createSVGTemplate:n,createSVGTemplateIcon:a,collectAllPointsOut:ae,setTemplateScale:l,setTemplatePosition:s,centerBlock:d,sortingPoints:c,getAngelPoint:u,setLines:p,setLineCoef:_,getNewCoefC:g,setPointLocationToLine:D,intersectionQ:X,cteateLineByAngel:j,getIntersectionInCurve:Q,getCoordCrossPoint:re,checkLineOwnPoint:oe,isInsidePointInLine:N,getCoordSideQPCurve:P,checkEqualPoints:v,setQPointCoord:M,getCenterLine:ne,checkInsidePointInLineEasy:Ae,sortByX:de},ye.publicObj}e.$inject=["$q","globalConstants","GeneralServ","ProductStor","DesignStor"],angular.module("MainModule").factory("SVGServ",e)}(),function(){function e(e,t,i,r,o,n,a,l){function s(i,r){function n(){d(),o.global.isChangedTemplate=0,c(i,r)}o.global.isTemplateTypeMenu=0,o.global.isChangedTemplate?t.confirmAlert(e("translate")("common_words.NEW_TEMPLATE_TITLE"),e("translate")("common_words.TEMPLATE_CHANGES_LOST"),n):c(i,r)}function d(){o.global.templatesSource[a.product.template_id]=angular.copy(o.global.templatesSourceSTORE[a.product.template_id])}function c(e,t){t?(i.closeRoomSelectorDialog(),a.product.room_id=t-1,a.product.construction_type!==o.global.rooms[t-1].group_id?(a.product.construction_type=o.global.rooms[t-1].group_id,i.downloadAllTemplates(a.product.construction_type).then(function(t){t&&(o.global.templatesSourceSTORE=angular.copy(t),o.global.templatesSource=angular.copy(t),u(e))})):u(e)):a.product.template_id!==e&&u(e)}function u(e){a.product.template_id=e,i.saveTemplateInProduct(e).then(function(){a.product.glass.length=0,i.setCurrentGlass(a.product),i.setCurrentHardware(a.product);var e=a.product.hardware.id?a.product.hardware.id:0;i.preparePrice(a.product.template,a.product.profile.id,a.product.glass,e,a.product.lamination.img_in_id),r.sendAnalyticsData(l.userInfo.id,n.order.id,a.product.template_id,a.product.profile.id,1)})}function p(e){a.product.construction_type=e,a.product.template_id=0,i.prepareTemplates(e)}var _=this;return _.publicObj={selectNewTemplate:s,initNewTemplateType:p},_.publicObj}e.$inject=["$filter","GeneralServ","MainServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","UserStor"],angular.module("MainModule").factory("TemplatesServ",e)}(),function(){function e(){function e(){var e=angular.copy(t.publicObj.auxiliarySource);return e}var t=this;return t.publicObj={auxiliarySource:{addElementsType:[],addElementsList:[],showAddElementsMenu:0,addElementsMenuStyle:0,isFocusedAddElement:0,isAddElement:0,currentAddElementId:0,auxParameter:0,tempSize:[],currAddElementPrice:0,isTabFrame:0,isAddElementListView:0,isWindowSchemeDialog:0,isGridSelectorDialog:0,selectedGrid:0,calculatorStyle:"",addElementGroups:[],searchingWord:""},setDefaultAuxiliary:e},t.publicObj.aux=e(),t.publicObj}angular.module("MainModule").factory("AuxStor",e)}(),function(){function e(e,t){function i(){var e=angular.copy(o.publicObj.cartSource);return e}function r(){o.publicObj.cart.customer.customer_name=angular.copy(t.order.customer_name),o.publicObj.cart.customer.customer_location=angular.copy(t.order.customer_location),o.publicObj.cart.customer.customer_address=angular.copy(t.order.customer_address),o.publicObj.cart.customer.customer_city=angular.copy(t.order.customer_city),o.publicObj.cart.customer.customer_city_id=angular.copy(t.order.customer_city_id),o.publicObj.cart.customer.customer_email=angular.copy(t.order.customer_email),o.publicObj.cart.customer.customer_phone=angular.copy(t.order.customer_phone),o.publicObj.cart.customer.customer_phone_city=angular.copy(t.order.customer_phone_city),o.publicObj.cart.customer.customer_itn=angular.copy(t.order.customer_itn),o.publicObj.cart.customer.customer_starttime=angular.copy(t.order.customer_starttime),o.publicObj.cart.customer.customer_endtime=angular.copy(t.order.customer_endtime),o.publicObj.cart.customer.customer_target=angular.copy(t.order.customer_target),o.publicObj.cart.customer.customer_sex=angular.copy(t.order.customer_sex),o.publicObj.cart.customer.customer_age=angular.copy(t.order.customer_age),o.publicObj.cart.customer.customer_education=angular.copy(t.order.customer_education),o.publicObj.cart.customer.customer_occupation=angular.copy(t.order.customer_occupation),o.publicObj.cart.customer.customer_infoSource=angular.copy(t.order.customer_infoSource)}var o=this;return o.publicObj={cartSource:{allAddElements:[],isShowDiscount:0,tempConstructDisc:0,tempAddelemDisc:0,discountPriceDiff:0,discountDeliveyPlant:0,marginDeliveyPlant:0,squareTotal:0,perimeterTotal:0,qtyTotal:0,isExistAddElems:0,isAllAddElems:0,allAddElemsOrder:[],addElemsOrderPriceTOTAL:0,isSelectedProduct:0,selectedProducts:[],isMasterDialog:0,isOrderDialog:0,isCreditDialog:0,submitted:0,isCityBox:0,customer:{customer_sex:0}},optionAge:[{id:1,name:"20-30"},{id:2,name:"31-40"},{id:3,name:"41-50"},{id:4,name:"51-60"},{id:5,name:e("translate")("cart.CLIENT_AGE_OLDER")+" 61"}],optionEductaion:[{id:1,name:e("translate")("cart.CLIENT_EDUC_MIDLE")},{id:2,name:e("translate")("cart.CLIENT_EDUC_SPEC")},{id:3,name:e("translate")("cart.CLIENT_EDUC_HIGH")},{id:4,name:e("translate")("cart.CLIENT_EDUC_4")}],optionOccupation:[{id:1,name:e("translate")("cart.CLIENT_OCCUP_WORKER")},{id:2,name:e("translate")("cart.CLIENT_OCCUP_HOUSE")},{id:3,name:e("translate")("cart.CLIENT_OCCUP_BOSS")},{id:4,name:e("translate")("cart.CLIENT_OCCUP_STUD")},{id:5,name:e("translate")("cart.CLIENT_OCCUP_PENSION")},{id:6,name:e("translate")("cart.UNKNOWN")}],optionInfo:[{id:1,name:"TV"},{id:2,name:"InterNET"},{id:3,name:e("translate")("cart.CLIENT_INFO_PRESS")},{id:4,name:e("translate")("cart.CLIENT_INFO_FRIEND")},{id:5,name:e("translate")("cart.CLIENT_INFO_ADV")}],setDefaultCart:i,fillOrderForm:r},o.publicObj.cart=i(),o.publicObj}e.$inject=["$filter","OrderStor"],angular.module("CartModule").factory("CartStor",e)}(),function(){function e(e){function t(){var e=angular.copy(r.publicObj.designSource);return e}function i(){var e=angular.copy(r.publicObj.designSource.doorConfig);return e}var r=this;return r.publicObj={designSource:{templateSourceTEMP:{},templateTEMP:{},designSteps:[],activeMenuItem:0,activeSubMenuItem:0,isDropSubMenu:0,isImpostDelete:0,selectedGlass:[],selectedCorner:[],selectedImpost:[],selectedArc:[],openVoiceHelper:!1,loudVoice:!1,quietVoice:!1,voiceTxt:"",selectedGlassId:0,isDimAnimate:0,oldSize:0,tempSize:[],isMinSizeRestriction:0,isMaxSizeRestriction:0,minSizeLimit:200,maxSizeLimit:5e3,doorShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.DOOR_TYPE1"),shapeIcon:"img/door-config/doorstep.png",shapeIconSelect:"img/door-config-selected/doorstep.png"},{shapeId:2,shapeLabel:e("translate")("panels.DOOR_TYPE2"),shapeIcon:"img/door-config/no-doorstep.png",shapeIconSelect:"img/door-config-selected/no-doorstep.png"},{shapeId:3,shapeLabel:e("translate")("panels.DOOR_TYPE3")+"1",shapeIcon:"img/door-config/doorstep-al1.png",shapeIconSelect:"img/door-config-selected/doorstep-al1.png"},{shapeId:4,shapeLabel:e("translate")("panels.DOOR_TYPE3")+"2",shapeIcon:"img/door-config/doorstep-al2.png",shapeIconSelect:"img/door-config-selected/doorstep-al2.png"}],sashShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.SASH_TYPE1")+", 98"+e("translate")("mainpage.MM")},{shapeId:2,shapeLabel:e("translate")("panels.SASH_TYPE2")+", 116"+e("translate")("mainpage.MM")},{shapeId:3,shapeLabel:e("translate")("panels.SASH_TYPE3")+", 76"+e("translate")("mainpage.MM")}],handleShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.HANDLE_TYPE1"),shapeIcon:"img/door-config/lever-handle.png",shapeIconSelect:"img/door-config-selected/lever-handle.png"},{shapeId:2,shapeLabel:e("translate")("panels.HANDLE_TYPE2"),shapeIcon:"img/door-config/standart-handle.png",shapeIconSelect:"img/door-config-selected/standart-handle.png"}],lockShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.LOCK_TYPE1"),shapeIcon:"img/door-config/onelock.png",shapeIconSelect:"img/door-config-selected/onelock.png"},{shapeId:2,shapeLabel:e("translate")("panels.LOCK_TYPE2"),shapeIcon:"img/door-config/multilock.png",shapeIconSelect:"img/door-config-selected/multilock.png"}],doorConfig:{doorShapeIndex:0,sashShapeIndex:0,handleShapeIndex:0,lockShapeIndex:0}},setDefaultDesign:t,setDefaultDoor:i},r.publicObj.design=t(),r.publicObj}e.$inject=["$filter"],angular.module("DesignModule").factory("DesignStor",e)}(),function(){function e(){function e(){var e=angular.copy(t.publicObj.globalSource);return e}var t=this;return t.publicObj={globalSource:{isDevice:0,isLoader:0,startProgramm:1,isNavMenu:1,isConfigMenu:0,activePanel:0,configMenuTips:0,isCreatedNewProject:1,isCreatedNewProduct:1,productEditNumber:0,orderEditNumber:0,prevOpenPage:"",currOpenPage:"main",isChangedTemplate:0,isVoiceHelper:0,voiceHelperLanguage:"",showGlassSelectorDialog:0,isShowCommentBlock:0,isTemplateTypeMenu:0,showRoomSelectorDialog:0,rooms:[],templateLabel:"",templatesSource:[],templatesSourceSTORE:[],isSashesInTemplate:0,profiles:[],profilesType:[],glassesAll:[],glassTypes:[],glasses:[],selectLastGlassId:0,hardwares:[],hardwareTypes:[],laminats:[],laminatCouples:[],lamGroupFiltered:[],addElementsAll:[],tempAddElements:[],supplyData:[],assemblingData:[],instalmentsData:[],isInfoBox:0,infoTitle:"",infoImg:"",infoLink:"",infoDescrip:"",isReport:0,currencies:[],locations:{countries:[],regions:[],cities:[]},margins:{},deliveryCoeff:{},isAlert:0,alertTitle:"",alertDescr:"",confirmAction:0,isQtyCalculator:0,isSizeCalculator:0,isWidthCalculator:0},setDefaultGlobal:e},t.publicObj.global=e(),t.publicObj}angular.module("BauVoiceApp").factory("GlobalStor",e)}(),function(){function e(){function e(){var e=angular.copy(t.publicObj.historySource);return e}var t=this;return t.publicObj={historySource:{orders:[],ordersSource:[],isEmptyResult:0,isOrderSearch:0,searchingWord:"",isOrderDate:0,startDate:"",finishDate:"",isStartDate:0,isFinishDate:0,isAllPeriod:1,isOrderSort:0,isSortType:"last",isFilterType:void 0,isDraftView:0,drafts:[],draftsSource:[],isEmptyResultDraft:0,isOrderDateDraft:0,startDateDraft:"",finishDateDraft:"",isStartDateDraft:0,isFinishDateDraft:0,isAllPeriodDraft:1,isOrderSortDraft:0,isSortTypeDraft:"last",reverseDraft:1},setDefaultHistory:e},t.publicObj.history=e(),t.publicObj}angular.module("HistoryModule").factory("HistoryStor",e)}(),function(){function e(){function e(){var e=angular.copy(t.publicObj.orderSource);return e}var t=this;return t.publicObj={orderSource:{id:0,order_number:0,order_hz:"---",order_type:1,order_date:0,order_style:"",climatic_zone:0,heat_coef_min:0,discount_construct:0,discount_addelem:0,discount_construct_max:0,discount_addelem_max:0,delivery_user_id:0,mounting_user_id:0,default_term_plant:0,disc_term_plant:0,margin_plant:0,products_qty:0,products:[],templates_price:0,addelems_price:0,products_price:0,productsPriceDis:0,delivery_date:0,new_delivery_date:0,delivery_price:0,is_date_price_less:0,is_date_price_more:0,floor_id:0,floorName:"",floor_price:0,mounting_id:0,mountingName:"",mounting_price:0,is_instalment:0,instalment_id:0,selectedInstalmentPeriod:0,selectedInstalmentPercent:0,is_old_price:0,payment_first:0,payment_monthly:0,payment_first_primary:0,payment_monthly_primary:0,paymentFirstDis:0,paymentMonthlyDis:0,paymentFirstPrimaryDis:0,paymentMonthlyPrimaryDis:0,order_price:0,order_price_dis:0,order_price_primary:0,orderPricePrimaryDis:0,customer_name:"",customer_email:"",customer_phone:"",customer_phone_city:"",customer_address:"",customer_location:"",customer_city:"",customer_city_id:0,customer_itn:0,customer_starttime:"",customer_endtime:"",customer_target:"",customer_sex:0,customer_age:0,customer_education:0,customer_occupation:0,customer_infoSource:0},setDefaultOrder:e},t.publicObj.order=e(),t.publicObj}angular.module("BauVoiceApp").factory("OrderStor",e)}(),function(){function e(e){function t(){var e=angular.copy(i.publicObj.productSource);return e}var i=this;return i.publicObj={productSource:{product_id:0,is_addelem_only:0,room_id:0,construction_type:1,heat_coef_total:0,template_id:0,template_source:{},template:{},templateIcon:{},template_width:0,template_height:0,template_square:0,profile:{},glass:[],hardware:{},profileDepths:{frameDepth:{},frameStillDepth:{},sashDepth:{},impostDepth:{},shtulpDepth:{}},lamination:{id:0,lamination_in_id:1,lamination_out_id:1,laminat_in_name:e("translate")("mainpage.WHITE_LAMINATION"),laminat_out_name:e("translate")("mainpage.WHITE_LAMINATION"),img_in_id:1,img_out_id:1},chosenAddElements:[[],[],[],[],[],[],[],[],[],[],[]],door_shape_id:1,door_sash_shape_id:1,door_handle_shape_id:1,door_lock_shape_id:1,template_price:0,addelem_price:0,addelemPriceDis:0,product_price:0,productPriceDis:0,report:[],comment:"",product_qty:1},setDefaultProduct:t},i.publicObj.product=t(),i.publicObj}e.$inject=["$filter"],angular.module("BauVoiceApp").factory("ProductStor",e)}(),function(){function e(){function e(){var e=angular.copy(t.publicObj.userInfoSource);return e}var t=this;return t.publicObj={userInfoSource:{cityName:"",regionName:"",countryName:"",fullLocation:"",climaticZone:0,heatTransfer:0,langLabel:"en",langName:"English",currencyId:0,currency:"",discountConstr:0,discountAddElem:0,discountConstrMax:0,discountAddElemMax:0,discConstrByWeek:[],discAddElemByWeek:[],factoryLink:""},setDefaultUser:e},t.publicObj.userInfo=e(),t.publicObj}angular.module("BauVoiceApp").factory("UserStor",e)}(),function(){angular.module("BauVoiceApp").constant("germanDictionary",{common_words:{CHANGE:"untreu sein",MONTHS:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTHS_SHOT:"Jan, Feb, Mär, Apr, Mai, Jun, Jul, Aug, Sep, Okt, Nov, Dez",MONTHA:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTH_LABEL:"Monat",MONTHA_LABEL:"Monats",MONTHS_LABEL:"Monate",ALL:"alles",MIN:"min.",MAX:"maks.",BUTTON_Y:"JA",BUTTON_N:"NEIN",DELETE_PRODUCT_TITLE:"Die Entfernung!",DELETE_PRODUCT_TXT:"Sie wollen das Produkt entfernen?",DELETE_ORDER_TITLE:"Die Entfernung der Bestellung!",DELETE_ORDER_TXT:"Sie wollen die Bestellung entfernen?",COPY_ORDER_TITLE:"Das Kopieren!",COPY_ORDER_TXT:"Sie wollen der Bestellung kopieren?",SEND_ORDER_TITLE:"In die Produktion!",SEND_ORDER_TXT:"Sie wollen die Bestellung auf den Betrieb absenden?",NEW_TEMPLATE_TITLE:"Template-Wechsel",TEMPLATE_CHANGES_LOST:"Die Template-Änderungen gehen verloren! Fortfahren?",PAGE_REFRESH:"Das Neuladen der Seite zu Datenverlust führen!",SELECT:"wählen",AND:"und",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Einloggen",PASS_CODE:"Teilen Sie diesen Kode dem Manager mit.",YOUR_CODE:"Ihr Kode: ",EMPTY_FIELD:"Füllen Sie dieses Feld aus.",WRONG_NUMBER:"Die falsche Nummer.",SHORT_NAME:"Eine zu kurze Namen",SHORT_PASSWORD:"Die viel zu kleine Parole",SHORT_PHONE:"Zu wenig Telefonnummer.",IMPORT_DB_START:"Warten begann Laden der Datenbank",IMPORT_DB_FINISH:"Vielen Dank für das Herunterladen abgeschlossen ist",MOBILE:"Handy",PASSWORD:"Passwort",REGISTRATION:"Anmeldung",SELECT_COUNTRY:"Land wählen",SELECT_REGION:"Region wählen",SELECT_CITY:"Wählen Sie die Stadt",USER_EXIST:"Dieser Benutzer ist bereits vorhanden! Versuchen Sie es erneut.",USER_NOT_EXIST:"Ein solcher Benutzer nicht existiert. Registrieren.",USER_NOT_ACTIVE:"Sie haben Ihr Profil aktiviert. Überprüfen Sie Ihre E-Mail.",USER_CHECK_EMAIL:"Bestätigungsemail wurde Ihnen in der E-Mail gesendet.",SELECT_PRODUCER:"Hersteller auswählen",SELECT_FACTORY:"Sie haben noch keine gewählten Hersteller",USER_PASSWORD_ERROR:"ungültiges Kennwort!",OFFLINE:"Keine Verbindung zum Internet!",IMPORT_DB:"Databases JETZT HERUNTERLADEN! Warten Sie mal!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"Die Klimazone",THERMAL_RESISTANCE:"Wärmeübertragung",AIR_CIRCULATION:"Der Koeffizient des Luftwechsels",NAVMENU_GEOLOCATION:"Die Anordnung zu wählen",NAVMENU_CURRENT_GEOLOCATION:"Die laufende Anordnung",NAVMENU_CURRENT_CALCULATION:"Die laufende Berechnung",NAVMENU_CART:"Der Korb der Berechnung",NAVMENU_ADD_ELEMENTS:"Die zusätzlichen Elemente",NAVMENU_ALL_CALCULATIONS:"Bestellverlauf",NAVMENU_SETTINGS:"Einstellungen",NAVMENU_MORE_INFO:"Es gibt als mehrere Informationen",NAVMENU_VOICE_HELPER:"Der Stimmverwaltung",NAVMENU_CALCULATIONS:"Die Berechnungen",NAVMENU_APPENDIX:"Anwendung",NAVMENU_NEW_CALC:"+Neue Berechnungs",CONFIGMENU_CONFIGURATION:"Die Konfiguration und die Umfänge",CONFIGMENU_SIZING:"Die Breite * die Höhe",CONFIGMENU_PROFILE:"Profil",CONFIGMENU_GLASS:"Bauglasplatte",CONFIGMENU_HARDWARE:"Zubehör",CONFIGMENU_LAMINATION:"Laminierung",CONFIGMENU_LAMINATION_TYPE:"in den Zimmer / Die Fassade",WHITE_LAMINATION:"Weiß",CONFIGMENU_ADDITIONAL:"Zusätzlich",CONFIGMENU_IN_CART:"Zum Warenkorb",VOICE_SPEACH:"Sprechen...",COMMENT:"Lassen Sie eine Notiz in der Größenordnung hier.",ROOM_SELECTION:"Die Wahl Template",CONFIGMENU_NO_ADDELEMENTS:"Zusätzliche Elemente ausgewählt",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Um die Größe zu ändern, klicken Sie hier",PROFILE_TIP:"Um ein Profil auszuwählen, klicken Sie hier",GLASS_TIP:"Um eine doppelt verglasten Fenster auszuwählen, klicken Sie hier",SELECT_ALL:"Alle auswählen",SELECT_GLASS_WARN:"Klicken Sie auf die Verglasung zu ändern, Sie wollen"},panels:{TEMPLATE_WINDOW:"Fenster",TEMPLATE_BALCONY:"Altan",TEMPLATE_DOOR:"Tür",TEMPLATE_BALCONY_ENTER:"Der Ausgang auf den Balkon",TEMPLATE_EDIT:"Editieren",TEMPLATE_DEFAULT:"Das Projekt als Voreinstellung",COUNTRY:"Land",BRAND:"Das Warenzeichen",HEAT_INSULATION:"warm Isolation",NOICE_INSULATION:"Isolierung",CORROSION_COEFF:"Korrosionsschutz",BURGLAR_COEFF:"Diebstahlschutz",LAMINAT_INSIDE:"im Raum",LAMINAT_OUTSIDE:"Straßenfront",ONE_WINDOW_TYPE:"Das Einaufklappbare",TWO_WINDOW_TYPE:"Das Zweiaufklappbare",THREE_WINDOW_TYPE:"Das Dreiaufklappbare",CAMERa:"Kameras",CAMER:"Kameras",CAMERs:"Kameras",ENERGY_SAVE:"+Energiesparen",DOOR_TYPE1:"Nach dem Perimeter",DOOR_TYPE2:"Ohne Schwelle",DOOR_TYPE3:"Die Aluminiumschwelle, Typ",SASH_TYPE1:"Interzimmer",SASH_TYPE2:"Tür- t-bildlich",SASH_TYPE3:"Fenster",HANDLE_TYPE1:"Druck- die Garnitur",HANDLE_TYPE2:"Der standardmäßige Bürogriff",LOCK_TYPE1:"One-Stop-Verriegelung",LOCK_TYPE2:"Multipoint-Latch"},add_elements:{CHOOSE:"Wählen",ADD:"drauflegen",GRID:"Moskitonetz",VISOR:"Deflektor",SPILLWAY:"Entwässerungsanlage",OUTSIDE:"Außen Pisten",LOUVERS:"Jalousie",INSIDE:"Innen Pisten",CONNECTORS:"Zwischenstepsel",FAN:"Mikroventilation",WINDOWSILL:"Fensterbank",HANDLEL:"Griff",OTHERS:"Übrige",GRIDS:"Moskitonetze",VISORS:"Visiere",SPILLWAYS:"Entwässerungsanlagen",WINDOWSILLS:"Fensterbänke",HANDLELS:"Griff",NAME_LABEL:"Benennung",ARTICUL_LABEL:"Nachschlagewerke",QTY_LABEL:"pcs",SIZE_LABEL:"Größe",WIDTH_LABEL:"Breite",HEIGHT_LABEL:"Höhe",OTHER_ELEMENTS1:"Noch",OTHER_ELEMENTS2:"Komponente ...",SCHEME_VIEW:"Schematisch",LIST_VIEW:"Liste",INPUT_ADD_ELEMENT:"Komponente hinzufügen",CANCEL:"Stornierung",TOTAL_PRICE_TXT:"Gesamte zusätzliche Komponenten in der Menge von:",ELEMENTS:"Komponenten",ELEMENT:"Komponente",ELEMENTA:"Komponente"},add_elements_menu:{TIP:"Wählen Sie ein Element aus der Liste",EMPTY_ELEMENT:"Ohne das Element",TAB_NAME_SIMPLE_FRAME:"Einfacher Aufbau",TAB_NAME_HARD_FRAME:"Verbundstruktur",TAB_EMPTY_EXPLAIN:"Wählen Sie den Anfangspunkt zu starten Bau."},construction:{SASH_SHAPE:"Flügel",ANGEL_SHAPE:"Winkel",IMPOST_SHAPE:"Abgaben",ARCH_SHAPE:"Gewölbe",POSITION_SHAPE:"Position",UNITS_DESCRIP:"Da die Einheiten in mm",PROJECT_DEFAULT:"Standardprojekt",DOOR_CONFIG_LABEL:"Anordnung der Türen",DOOR_CONFIG_DESCTIPT:"Türrahmen",SASH_CONFIG_DESCTIPT:"Torblatt",HANDLE_CONFIG_DESCTIPT:"Griff",LOCK_CONFIG_DESCTIPT:"Verschluss",STEP:"Schritt",LABEL_DOOR_TYPE:"Wählen Sie ein Design Türrahmen",LABEL_SASH_TYPE:"Wählen Sie die Art des Türblattes",LABEL_HANDLE_TYPE:"Wählen Sie die Art der Griff",LABEL_LOCK_TYPE:"Wählen Sie die Art der Sperre",VOICE_SWITCH_ON:"Voice-Modus aktiviert ist",VOICE_NOT_UNDERSTAND:"es ist nicht klar",VOICE_SMALLEST_SIZE:"zu klein",VOICE_BIGGEST_SIZE:"zu groß",VOICE_SMALL_GLASS_BLOCK:"zu kleine Oberlichter",NOT_AVAILABLE:"nicht Verfügbar!"},history:{SEARCH_PLACEHOLDER:"Suche nach Stichwort",DRAFT_VIEW:"Entwürfe Berechnungen",HISTORY_VIEW:"Siedlungsgeschichte",PHONE:"Telefon",CLIENT:"Der Kunde",ADDRESS:"Anschrift",FROM:"von ",UNTIL:"vor ",PAYMENTS:"Zahlungen",ALLPRODUCTS:"Produkte",ON:"bis",DRAFT:"Entwurf",DATE_RANGE:"Datumsbereich",ALL_TIME:"Die ganze Zeit",SORTING:"Sortierung",NEWEST_FIRST:"Mit der Zeit: neue zuerst",NEWEST_LAST:"Zu der Zeit, neue am Ende",SORT_BY_TYPE:"Nach Art",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Nur aktiv",SORT_SHOW_WAIT:"Nur angemeldete",SORT_SHOW_DONE:"nur abgeschlossen",BY_YOUR_REQUEST:"Je nach Wunsch",NOT_FIND:"nichts gefunden",WAIT_MASTER:"erwartet Gager",INCLUDED:"inbegriffen"},cart:{ALL_ADD_ELEMENTS:"Alle Anbauteile bestellen",ADD_ORDER:"Fügen Sie das Produkt",PRODUCT_QTY:"Anzahl der Produkte",LIGHT_VIEW:"Kurzansicht",FULL_VIEW:"Vollansicht",DELIVERY:"Lieferung",SELF_EXPORT:"Abholen",FLOOR:"Etage",ASSEMBLING:"Montage",WITHOUT_ASSEMBLING:"ohne Montage",FREE:"kostenlos",PAYMENT_BY_INSTALMENTS:"Ratenzahlung",WITHOUT_INSTALMENTS:"losen Raten",DELIVERY_DATE:"Liefertermin",TOTAL_PRICE_LABEL:"Insgesamt Lieferung auf",MONTHLY_PAYMENT_LABEL:"monatlichen Zahlungen auf",DATE_DELIVERY_LABEL:"Geliefert auf",FIRST_PAYMENT_LABEL:"Die erste Zahlung",ORDER:"Bestellen",MEASURE:"Maßnahme",READY:"Bereit",CALL_MASTER:"Rufen Gager zu berechnen",CALL_MASTER_DESCRIP:"Um Gager nennen wir brauchen etwas für Sie zu wissen. Beide Felder sind Pflichtfelder.",CLIENT_LOCATION:"Lage",CLIENT_ADDRESS:"Anschrift",CALL_ORDER:"Bestellung zur Berechnung",CALL_ORDER_DESCRIP:"Um den Auftrag zu erfüllen, müssen wir etwas über Sie wissen.",CALL_ORDER_CLIENT_INFO:"Kundeninformation (muss ausgefüllt werden):",CLIENT_NAME:"Vollständiger Name",CALL_ORDER_DELIVERY:"Liefern Sie eine Bestellung für",CALL_ORDER_TOTAL_PRICE:"insgesamt",CALL_ORDER_ADD_INFO:"Extras (optional):",CLIENT_EMAIL:"E-Mail",ADD_PHONE:"Zusätzliche Telefon",CALL_CREDIT:"Machen Tranche und um zu berechnen",CALL_CREDIT_DESCRIP:"Um Raten anordnen und erfüllen den Auftrag, wir haben etwas für Sie zu wissen.",CALL_CREDIT_CLIENT_INFO:"Ratenzahlung:",CREDIT_TARGET:"Der Zweck der Registrierung von Raten",CLIENT_ITN:"Individuelle Steuernummers",CALL_START_TIME:"Rufen Sie aus:",CALL_END_TIME:"vor:",CALL_CREDIT_PARTIAL_PRICE:"auf",ADDELEMENTS_EDIT_LIST:"Liste bearbeiten ...",ADDELEMENTS_PRODUCT_COST:"einem Produkt",HEAT_TRANSFER:"Wärmeübertragung",WRONG_EMAIL:"Falsche E-Mail",LINK_BETWEEN_COUPLE:"zwischen einem Paar von",LINK_BETWEEN_ALL:"unter allen",CLIENT_SEX:"Paul",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Alter",CLIENT_AGE_OLDER:"älteren",CLIENT_EDUCATION:"Das wichtigste Kriterium Ihrer Wahl",CLIENT_EDUC_MIDLE:"Guter Preis",CLIENT_EDUC_SPEC:"Bildermacher",CLIENT_EDUC_HIGH:"Markenprofil und Hardware",CLIENT_EDUC_4:"Empfehlungen Verkäufers",CLIENT_OCCUPATION:"Beschäftigung",CLIENT_OCCUP_WORKER:"Mitarbeiter",CLIENT_OCCUP_HOUSE:"Hausfrau",CLIENT_OCCUP_BOSS:"Entrepreneur",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Retired",CLIENT_INFO_SOURCE:"Source",
CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"Von Freunden",CLIENT_INFO_ADV:"Visuelle Werbung",SELECT_PLACEHOLD:"wählen Sie Ihre Variante",NO_DISASSEMBL:"Ohne Demontage",STANDART_ASSEMBL:"Der Standardmäßige",VIP_ASSEMBL:"Der VIP-Montage",DISCOUNT:"Rabatt",DISCOUNT_SELECT:"Die Auswahl der Preisnachlässe",DISCOUNT_WITH:"Im Hinblick auf die Preisnachlässe",DISCOUNT_WITHOUT:"Ohne Rabatte",DISCOUNT_WINDOW:"Rabatt auf ein Produkt",DISCOUNT_ADDELEM:"Discount auf zusätzliche Elemente",ORDER_COMMENT:"Anmerkung Bestellen",UNKNOWN:"unbekannt"},settings:{AUTHORIZATION:"Autorisierung:",CHANGE_PASSWORD:"Kennwort ändern",CHANGE_LANGUAGE:"ändern Sie die Sprache",PRIVATE_INFO:"Persönliche Informationen:",USER_NAME:"Gesprächspartner",CITY:"Stadt",ADD_PHONES:"Zusätzliche Telefone:",INSERT_PHONE:"Hinzufügen einer Telefon",CLIENT_SUPPORT:"Poderzhka Benutzer",LOGOUT:"Beenden Sie die Anwendung",SAVE:"Speichern",CURRENT_PASSWORD:"Die Jetzige",NEW_PASSWORD:"Neu",CONFIRM_PASSWORD:"Bestätigen",NO_CONFIRM_PASS:"Ungültiges Passwort"}})}(),function(){angular.module("BauVoiceApp").constant("englishDictionary",{common_words:{CHANGE:"Change",MONTHS:"January, February, March, April, May, June, July, August, September, October, November, December",MONTHS_SHOT:"Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sept, Oct, Nov, Dec",MONTHA:"January, February, March, April, May, June, July, August, September, October, November, December",MONTH_LABEL:"month",MONTHA_LABEL:"months",MONTHS_LABEL:"months",ALL:"All",MIN:"min.",MAX:"max.",BUTTON_Y:"YES",BUTTON_N:"NO",DELETE_PRODUCT_TITLE:"Delete!",DELETE_PRODUCT_TXT:"Do you want to delete a product?",DELETE_ORDER_TITLE:"Delete of order!",DELETE_ORDER_TXT:"Do you want to delete an order?",COPY_ORDER_TITLE:"Printing-down!",COPY_ORDER_TXT:"Do you want to do the copy of order?",SEND_ORDER_TITLE:"In a production!",SEND_ORDER_TXT:"Do you want to send an order on a factory?",NEW_TEMPLATE_TITLE:"Template changing",TEMPLATE_CHANGES_LOST:"The template changes will lost! Continue?",PAGE_REFRESH:"Reloading the page will lead to data loss!",SELECT:"Select",AND:"and",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"To enter",PASS_CODE:"You will reveal to this code the manager.",YOUR_CODE:"Your code: ",EMPTY_FIELD:"You should to fill this field.",WRONG_NUMBER:"Incorrect number.",SHORT_NAME:"Too short name",SHORT_PASSWORD:"Too little password.",SHORT_PHONE:"Too little phone number.",IMPORT_DB_START:"Wait, began loading the database",IMPORT_DB_FINISH:"Thank you for the download is complete",MOBILE:"Mobile telephone",PASSWORD:"Password",REGISTRATION:"Registration",SELECT_COUNTRY:"Select country",SELECT_REGION:"Select region",SELECT_CITY:"Select city",USER_EXIST:"Sorry, but this user already exists! Please, try again.",USER_NOT_EXIST:"Sorry, but this user not exists! Registrate please.",USER_NOT_ACTIVE:"Sorry, but your profile is not active. Please check your email.",USER_CHECK_EMAIL:"The confirmed email was send to you. Please check your email.",SELECT_PRODUCER:"Choose the producer",SELECT_FACTORY:"Please select the producer",USER_PASSWORD_ERROR:"Sorry, but your password is wrong!",OFFLINE:"No internet connection!",IMPORT_DB:"DataBase Import was started! Waite please!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"climatic area",THERMAL_RESISTANCE:"heat transfer",AIR_CIRCULATION:"coefficient of ventilation",NAVMENU_GEOLOCATION:"To choose a location",NAVMENU_CURRENT_GEOLOCATION:"Current location",NAVMENU_CURRENT_CALCULATION:"Current calculation",NAVMENU_CART:"Basket of calculation",NAVMENU_ADD_ELEMENTS:"Add. elements",NAVMENU_ALL_CALCULATIONS:"Order history",NAVMENU_SETTINGS:"Settings",NAVMENU_MORE_INFO:"More information",NAVMENU_VOICE_HELPER:"Voice control",NAVMENU_CALCULATIONS:"Calculations",NAVMENU_APPENDIX:"Appendix",NAVMENU_NEW_CALC:"+New calculation",CONFIGMENU_CONFIGURATION:"Configuration and sizes",CONFIGMENU_SIZING:"width * height",CONFIGMENU_PROFILE:"Profile",CONFIGMENU_GLASS:"Glazing",CONFIGMENU_HARDWARE:"accessories",CONFIGMENU_LAMINATION:"Lamination",CONFIGMENU_LAMINATION_TYPE:"room / Facade",WHITE_LAMINATION:"White",CONFIGMENU_ADDITIONAL:"Additionally",CONFIGMENU_IN_CART:"In a basket",VOICE_SPEACH:"You talk...",COMMENT:"Leave a note on the order here.",ROOM_SELECTION:"Template selection",CONFIGMENU_NO_ADDELEMENTS:"Add Elements are not choosen",HEATCOEF_VAL:"W",TEMPLATE_TIP:"To change the size, click here",PROFILE_TIP:"To select a profile, click here",GLASS_TIP:"To select a double-glazed window, click here",SELECT_ALL:"Take all",SELECT_GLASS_WARN:"Click on the glazing, you want to change"},panels:{TEMPLATE_WINDOW:"Window",TEMPLATE_BALCONY:"Balcony",TEMPLATE_DOOR:"Door",TEMPLATE_BALCONY_ENTER:"Exit to a balcony",TEMPLATE_EDIT:"edit",TEMPLATE_DEFAULT:"Project by default",COUNTRY:"country",BRAND:"trademark",HEAT_INSULATION:"thermal insulation",NOICE_INSULATION:"noise isolation",CORROSION_COEFF:"Anticorrosion",BURGLAR_COEFF:"Burglar",LAMINAT_INSIDE:"In room",LAMINAT_OUTSIDE:"Facade",ONE_WINDOW_TYPE:"One-casement",TWO_WINDOW_TYPE:"Two-casement",THREE_WINDOW_TYPE:"Three-leaf",CAMERa:"cameras",CAMER:"cameras",CAMERs:"cameras",ENERGY_SAVE:"+energy saving",DOOR_TYPE1:"on perimeter",DOOR_TYPE2:"without threshold",DOOR_TYPE3:"aluminum threshold, type",SASH_TYPE1:"the interroom",SASH_TYPE2:"the door T-shaped",SASH_TYPE3:"the window",HANDLE_TYPE1:"press set",HANDLE_TYPE2:"standard office handle",LOCK_TYPE1:"one-locking with a latch",LOCK_TYPE2:"multilocking with a latch"},add_elements:{CHOOSE:"select",ADD:"add",GRID:"mosquito grid",VISOR:"peak",SPILLWAY:"water outflow",OUTSIDE:"external slopes",LOUVERS:"blinds",INSIDE:"internal slopes",CONNECTORS:"connector",FAN:"microairing",WINDOWSILL:"windowsill",HANDLEL:"handle",OTHERS:"other",GRIDS:"mosquito grids",VISORS:"peaks",SPILLWAYS:"Drainages",WINDOWSILLS:"sills",HANDLELS:"handle",NAME_LABEL:"name",ARTICUL_LABEL:"reference",QTY_LABEL:"pcs.",SIZE_LABEL:"size",WIDTH_LABEL:"width",HEIGHT_LABEL:"height",OTHER_ELEMENTS1:"Yet",OTHER_ELEMENTS2:"component...",SCHEME_VIEW:"Schematically",LIST_VIEW:"List",INPUT_ADD_ELEMENT:"Add Component",CANCEL:"cancel",TOTAL_PRICE_TXT:"Total additional components in the amount of:",ELEMENTS:"components",ELEMENT:"component",ELEMENTA:"component"},add_elements_menu:{TIP:"Select an item from the list",EMPTY_ELEMENT:"Without the element",TAB_NAME_SIMPLE_FRAME:"Simple design",TAB_NAME_HARD_FRAME:"Composite structure",TAB_EMPTY_EXPLAIN:"Please select the first item to start up construction."},construction:{SASH_SHAPE:"shutters",ANGEL_SHAPE:"corners",IMPOST_SHAPE:"imposts",ARCH_SHAPE:"arches",POSITION_SHAPE:"position",UNITS_DESCRIP:"All Units are in mm",PROJECT_DEFAULT:"Default project",DOOR_CONFIG_LABEL:"configuration of doors",DOOR_CONFIG_DESCTIPT:"door frame",SASH_CONFIG_DESCTIPT:"door leaf",HANDLE_CONFIG_DESCTIPT:"handle",LOCK_CONFIG_DESCTIPT:"lock",STEP:"step",LABEL_DOOR_TYPE:"Select a design door frame",LABEL_SASH_TYPE:"Select the type of door leaf",LABEL_HANDLE_TYPE:"Select the type of handle",LABEL_LOCK_TYPE:"Select the type of lock",VOICE_SWITCH_ON:"The voice helper is switched on",VOICE_NOT_UNDERSTAND:"It is not clear",VOICE_SMALLEST_SIZE:"The smallest size",VOICE_BIGGEST_SIZE:"The biggest size",VOICE_SMALL_GLASS_BLOCK:"too small skylights",NOT_AVAILABLE:"Not Available!"},history:{SEARCH_PLACEHOLDER:"Search by keyword",DRAFT_VIEW:"Drafts calculations",HISTORY_VIEW:"History of settlements",PHONE:"phone",CLIENT:"client",ADDRESS:"address",FROM:"from ",UNTIL:"to ",PAYMENTS:"payments",ALLPRODUCTS:"products",ON:"on",DRAFT:"Draft",DATE_RANGE:"Date Range",ALL_TIME:"For all time",SORTING:"Sorting",NEWEST_FIRST:"By the time: new first",NEWEST_LAST:"By the time new at the end of",SORT_BY_TYPE:"By type",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Only active",SORT_SHOW_WAIT:"Only pending",SORT_SHOW_DONE:"Only completed",BY_YOUR_REQUEST:"According to your request",NOT_FIND:"nothing found",WAIT_MASTER:"expects gager",INCLUDED:"included"},cart:{ALL_ADD_ELEMENTS:"All additional elements order",ADD_ORDER:"Add the product",PRODUCT_QTY:"number of products",LIGHT_VIEW:"Short view",FULL_VIEW:"Full view",DELIVERY:"Delivery",SELF_EXPORT:"Pickup",FLOOR:"floor",ASSEMBLING:"mounting",WITHOUT_ASSEMBLING:"without mounting",FREE:"free",PAYMENT_BY_INSTALMENTS:"Payment by installments",WITHOUT_INSTALMENTS:"free installments",DELIVERY_DATE:"Delivery date",TOTAL_PRICE_LABEL:"Total Delivered on",MONTHLY_PAYMENT_LABEL:"monthly payments on",DATE_DELIVERY_LABEL:"Delivered on",FIRST_PAYMENT_LABEL:"The first payment",ORDER:"To order",MEASURE:"Measure",READY:"Ready",CALL_MASTER:"Call gager to calculate",CALL_MASTER_DESCRIP:"To call gager we need something for you to know. Both fields are required.",CLIENT_LOCATION:"Location",CLIENT_ADDRESS:"address",CALL_ORDER:"Ordering for calculating",CALL_ORDER_DESCRIP:"In order to fulfill the order, we need to something about you know.",CALL_ORDER_CLIENT_INFO:"Customer Information (must be filled):",CLIENT_NAME:"Full Name",CALL_ORDER_DELIVERY:"Deliver an order for",CALL_ORDER_TOTAL_PRICE:"in all",CALL_ORDER_ADD_INFO:"Extras (Optional):",CLIENT_EMAIL:"Email",ADD_PHONE:"Additional phone",CALL_CREDIT:"Making installment and order to calculate",CALL_CREDIT_DESCRIP:"To arrange installments and fulfill the order, we have something for you to know.",CALL_CREDIT_CLIENT_INFO:"Installment:",CREDIT_TARGET:"The purpose of registration of installments",CLIENT_ITN:"Individual Tax Number",CALL_START_TIME:"Call from:",CALL_END_TIME:"prior to:",CALL_CREDIT_PARTIAL_PRICE:"on",ADDELEMENTS_EDIT_LIST:"Edit List ...",ADDELEMENTS_PRODUCT_COST:"one product",HEAT_TRANSFER:"heat transfer",WRONG_EMAIL:"Incorrect e-mail",LINK_BETWEEN_COUPLE:"between couple",LINK_BETWEEN_ALL:"between all",CLIENT_SEX:"Sex",CLIENT_SEX_M:"m",CLIENT_SEX_F:"F",CLIENT_AGE:"Age",CLIENT_AGE_OLDER:"older",CLIENT_EDUCATION:"The main criterion of your choice",CLIENT_EDUC_MIDLE:"Good price",CLIENT_EDUC_SPEC:"image maker",CLIENT_EDUC_HIGH:"brand profile and hardware",CLIENT_EDUC_4:"Recommendations seller",CLIENT_OCCUPATION:"Occupation",CLIENT_OCCUP_WORKER:"Employee",CLIENT_OCCUP_HOUSE:"Householder",CLIENT_OCCUP_BOSS:"Employer",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensioner",CLIENT_INFO_SOURCE:"Information source",CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"From friends",CLIENT_INFO_ADV:"Visual advertising",SELECT_PLACEHOLD:"select your option",NO_DISASSEMBL:"without dismantle",STANDART_ASSEMBL:"the standard",VIP_ASSEMBL:"VIP-installation",DISCOUNT:"Discount",DISCOUNT_SELECT:"The choice of discounts",DISCOUNT_WITH:"In view of the discounts",DISCOUNT_WITHOUT:"Excluding discounts",DISCOUNT_WINDOW:"Discount on a product",DISCOUNT_ADDELEM:"Discount on additional elements",ORDER_COMMENT:"Order note",UNKNOWN:"Unknown"},settings:{AUTHORIZATION:"Authorization:",CHANGE_PASSWORD:"Change password",CHANGE_LANGUAGE:"Change language",PRIVATE_INFO:"Personal information:",USER_NAME:"Contact person",CITY:"City",ADD_PHONES:"Additional phones:",INSERT_PHONE:"Add a phone",CLIENT_SUPPORT:"Customer Support",LOGOUT:"Exit the application",SAVE:"Save",CURRENT_PASSWORD:"The Current",NEW_PASSWORD:"New",CONFIRM_PASSWORD:"Confirm",NO_CONFIRM_PASS:"Invalid password"}})}(),function(){angular.module("BauVoiceApp").constant("italianDictionary",{common_words:{CHANGE:"Cambiare",MONTHS:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTHS_SHOT:"Gen., Febb., Marzo, Apr., Mag., Giu., Luglio, Ago., Sett., Ott., Nov., Dic.",MONTHA:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTH_LABEL:"mese",MONTHA_LABEL:"del mese",MONTHS_LABEL:"mesi",ALL:"tutto",MIN:"Min",MAX:"Max",BUTTON_Y:"Sì",BUTTON_N:"No",DELETE_PRODUCT_TITLE:"Cancella!",DELETE_PRODUCT_TXT:"Volete cancellare il prodotto?",DELETE_ORDER_TITLE:"Cancellazione dell’ordine!",DELETE_ORDER_TXT:"Volete cancellare l’ordine?",COPY_ORDER_TITLE:"Copia!",COPY_ORDER_TXT:"Volete fare una copia dell’ordine?",SEND_ORDER_TITLE:"La produzione !",SEND_ORDER_TXT:" Volete inviare l’ordine in fabbrica?",NEW_TEMPLATE_TITLE:"Cambiamento di una sagoma",TEMPLATE_CHANGES_LOST:" I cambiamenti in una sagoma saranno persi! Continuare?",PAGE_REFRESH:"L'azzerramento della pagina porterà a perdita di dati!",SELECT:" Scegliere ",AND:" e ",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Entrare",PASS_CODE:"Comunicate il codice al manager.",YOUR_CODE:"Il vostro codice: ",EMPTY_FIELD:"Riempite questo campo.",WRONG_NUMBER:"Numero errato, formato +XX(XXX)XXX-XXXX.",SHORT_NAME:"Nome troppo piccolo.",SHORT_PASSWORD:"Password troppo breve.",SHORT_PHONE:"Numero del telefono troppo piccolo.",IMPORT_DB_START:"Aspetti, il carico di un database ha cominciato",IMPORT_DB_FINISH:" Grazie, caricandolo sono complete",MOBILE:"Il cellulare",PASSWORD:"Password",REGISTRATION:"Registrazione",SELECT_COUNTRY:"Il paese di Veberite",SELECT_REGION:"Scelga la regione",SELECT_CITY:"Scelga la città",USER_EXIST:"Un tal utente già esiste! Provi ancora una volta.",USER_NOT_EXIST:"Un tal utente non esiste. Esser registrato.",USER_NOT_ACTIVE:"Non ha attivato il Suo profilo. Controlli la Sua posta.",USER_CHECK_EMAIL:"La lettera di conferma La è stata mandata a posta.",SELECT_PRODUCER:"Scelga il produttore",SELECT_FACTORY:"Non ha scelto il produttore",USER_PASSWORD_ERROR:"Parola d'ordine scorretta!",OFFLINE:"Non c'è connessione con l'Internet!",IMPORT_DB:"Il carico di Database ha cominciato! Aspetti, per favore!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"Zona  climatica",THERMAL_RESISTANCE:"Resistenza alla trasmissione termica",AIR_CIRCULATION:"Coefficiente della circolazione d’aria",NAVMENU_GEOLOCATION:"Scegliere la disposizione",NAVMENU_CURRENT_GEOLOCATION:"La disposizione corrente",NAVMENU_CURRENT_CALCULATION:"Pagamento corrente",NAVMENU_CART:"Cestino per il pagamento",NAVMENU_ADD_ELEMENTS:"Elementi aggiuntivi",NAVMENU_ALL_CALCULATIONS:"Tutti i pagamenti",NAVMENU_SETTINGS:"Impostazioni",NAVMENU_MORE_INFO:"Maggiore informazione",NAVMENU_VOICE_HELPER:"Assistenza a voce",NAVMENU_CALCULATIONS:"Pagamenti",NAVMENU_APPENDIX:"Allegato",NAVMENU_NEW_CALC:"Il nuovo pagamento",CONFIGMENU_CONFIGURATION:"Configurazioni e dimensioni",CONFIGMENU_SIZING:"larghezza * altezza -",CONFIGMENU_PROFILE:"Profilo",CONFIGMENU_GLASS:"Parquet di vetro",CONFIGMENU_HARDWARE:"Fornitura",CONFIGMENU_LAMINATION:"Laminazione",CONFIGMENU_LAMINATION_TYPE:"in camera / facciata",WHITE_LAMINATION:"La bianca",CONFIGMENU_ADDITIONAL:"In aggiunta",CONFIGMENU_IN_CART:"Nel cestino",VOICE_SPEACH:"Parlate...",COMMENT:"Lasci la nota sull'ordine qui.",ROOM_SELECTION:"Scelta template",CONFIGMENU_NO_ADDELEMENTS:"Gli elementi supplementari non sono scelti",HEATCOEF_VAL:"Wt",TEMPLATE_TIP:"Poiché il cambiamento delle dimensioni preme qui",PROFILE_TIP:"Poiché una scelta di un profilo preme qui",GLASS_TIP:"Poiché una scelta di una finestra doppio invetriata preme qui",SELECT_ALL:"Selezionare tutto",SELECT_GLASS_WARN:"Clicca sul vetro, che si desidera modificare"},panels:{TEMPLATE_WINDOW:"Finestra",TEMPLATE_BALCONY:"Balcone",TEMPLATE_DOOR:"Porta",TEMPLATE_BALCONY_ENTER:"Uscita sul balcone",TEMPLATE_EDIT:"Redigere",TEMPLATE_DEFAULT:"Progetto per difetto",COUNTRY:"paese",BRAND:"marchio commerciale",HEAT_INSULATION:"isolamento termico",NOICE_INSULATION:"isolamento acustico",CORROSION_COEFF:"anticorrosione",BURGLAR_COEFF:"protezione contro rottura",LAMINAT_INSIDE:"in camera",LAMINAT_OUTSIDE:"la facciata",ONE_WINDOW_TYPE:"La porta sola",TWO_WINDOW_TYPE:"L'ala doppio",THREE_WINDOW_TYPE:"Il da tre foglie",CAMERa:"di camera",CAMER:" di camera ",CAMERs:"di camere",ENERGY_SAVE:"+risparmio di energia",DOOR_TYPE1:"su perimetro",DOOR_TYPE2:"senza soglia",DOOR_TYPE3:"la soglia di alluminio, battere a macchina",SASH_TYPE1:"l'intercamera",SASH_TYPE2:"la porta T-shaped",SASH_TYPE3:"la finestra",HANDLE_TYPE1:"prema la serie",HANDLE_TYPE2:"maniglia di ufficio standard",LOCK_TYPE1:"una chiusura con una serratura a scatto",LOCK_TYPE2:"la multichiusura con una serratura a scatto"},add_elements:{CHOOSE:"Scegliere",ADD:"Aggiungere",GRID:"zanzaniera",VISOR:"tettoia",SPILLWAY:"scolo d’acqua",OUTSIDE:"spallette esterne",LOUVERS:"le serrande",INSIDE:"spallette interne",CONNECTORS:"connettore",FAN:"microventilazione",WINDOWSILL:"davanzale",HANDLEL:"maniglia",OTHERS:"altro",GRIDS:"le zanzariere",VISORS:"le tettoie",SPILLWAYS:"gli scoli d’acqua",WINDOWSILLS:"i davanzali",HANDLELS:"le maniglie",NAME_LABEL:"denominazione",ARTICUL_LABEL:"riferimento",QTY_LABEL:"pz.",SIZE_LABEL:"dimensione, misura",WIDTH_LABEL:"larghezza",HEIGHT_LABEL:"altezza",OTHER_ELEMENTS1:"Ancora",OTHER_ELEMENTS2:"componenti...",SCHEME_VIEW:"Schematicamente",LIST_VIEW:"Lista",INPUT_ADD_ELEMENT:"Aggiungere un componente elemento",CANCEL:"Revoca",TOTAL_PRICE_TXT:"Totale componenti aggiuntivi:",ELEMENTS:"componenti",ELEMENT:"componente",ELEMENTA:"di componente"},add_elements_menu:{TIP:"Scegliete un componente dalal lista",EMPTY_ELEMENT:"Senza elemento",TAB_NAME_SIMPLE_FRAME:"Schema semplice",TAB_NAME_HARD_FRAME:"Schema complesso",TAB_EMPTY_EXPLAIN:"Scegliete il primo elemento dalla lista."},construction:{SASH_SHAPE:"battenti",ANGEL_SHAPE:"angoli",IMPOST_SHAPE:"imposte",ARCH_SHAPE:"archi",POSITION_SHAPE:"posizione",UNITS_DESCRIP:"come unità di musura sono usati millimetri",PROJECT_DEFAULT:"progetto per difetto",DOOR_CONFIG_LABEL:"configurazione delal porta",DOOR_CONFIG_DESCTIPT:"infisso porta",SASH_CONFIG_DESCTIPT:"battente della porta",HANDLE_CONFIG_DESCTIPT:"maniglia",LOCK_CONFIG_DESCTIPT:"la serratura",STEP:"passo",LABEL_DOOR_TYPE:"Scegliete il modello dell’infisso porta",LABEL_SASH_TYPE:"Scegliete un tipo dibattente portamaniglia",LABEL_HANDLE_TYPE:"Scegliete un tipo di maniglia",LABEL_LOCK_TYPE:"Scegliete un tipo di serratura",VOICE_SWITCH_ON:"il modo di voce è incluso",VOICE_NOT_UNDERSTAND:"Non è chiaro",VOICE_SMALLEST_SIZE:"dimensioni troppo piccole",VOICE_BIGGEST_SIZE:"dimensioni troppo grandi",VOICE_SMALL_GLASS_BLOCK:"apertura leggera troppo piccola",NOT_AVAILABLE:"È inaccessibile!"},history:{SEARCH_PLACEHOLDER:"Ricerca per parole chiave",DRAFT_VIEW:"Brutte copie dei conteggi",HISTORY_VIEW:"Storia deiconteggi",PHONE:"telefono",CLIENT:"cliente",ADDRESS:"indirizzo",FROM:"da ",UNTIL:"fino a ",PAYMENTS:"dei pagamenti",ALLPRODUCTS:"prodotti",ON:"per",DRAFT:"Brutta copia",DATE_RANGE:"Diapason delle date",ALL_TIME:"Per tutto il tempo",SORTING:"Cernita",NEWEST_FIRST:"Per cronologia: i nuovi all’inizio",NEWEST_LAST:"Per cronologia: i nuovi alal fine",SORT_BY_TYPE:"Per tipo",SORT_SHOW:"Mostrare",SORT_SHOW_ACTIVE:"Solo attivi",SORT_SHOW_WAIT:"Solo in attesa",SORT_SHOW_DONE:"Appena finito",BY_YOUR_REQUEST:"Su vostra richiesta",NOT_FIND:"Non è stato trovato niente",WAIT_MASTER:"Aspetta il misuratore ",INCLUDED:"sono inclusi"},cart:{ALL_ADD_ELEMENTS:"Tutti gli elementi supplementari dell’oedine",ADD_ORDER:"Aggiungere un prodotto",PRODUCT_QTY:"quantitativo di prodotti",LIGHT_VIEW:"Aspetto ridotto",FULL_VIEW:"Aspetto integrale ",DELIVERY:"Consegna",SELF_EXPORT:"Trasporto individuale",FLOOR:"piano",ASSEMBLING:"Montaggio",WITHOUT_ASSEMBLING:"senza montaggio",FREE:"gratuitamente",PAYMENT_BY_INSTALMENTS:"Rateazione",WITHOUT_INSTALMENTS:"senza rateazione",DELIVERY_DATE:"Data consegna",TOTAL_PRICE_LABEL:"Totale per la consegna",MONTHLY_PAYMENT_LABEL:"pagamenti mensili per",DATE_DELIVERY_LABEL:"con consegna per ",FIRST_PAYMENT_LABEL:"Nuovo pagamento",ORDER:"Ordinare",MEASURE:"Misurare",READY:"Pronto",CALL_MASTER:"Chiamata del misuratore per il conteggio",CALL_MASTER_DESCRIP:"Per la telefonata del measurer abbiamo bisogno di sapere qualcosa su Lei. Entrambi i campi sono obbligatori per riempitura.",CLIENT_LOCATION:"Località",CLIENT_ADDRESS:"Indirizzo",CALL_ORDER:"Stesura dell’ordine per il conteggio",CALL_ORDER_DESCRIP:"Per poter eseguire il vostro ordine dobbiamo sapere qualccosa di voi.",CALL_ORDER_CLIENT_INFO:"Informazioni sul cliente (campo obbligatorio):",CLIENT_NAME:"Cognome Nome Patronimico",CALL_ORDER_DELIVERY:"Consegnare l’ordine per",CALL_ORDER_TOTAL_PRICE:"In totale",CALL_ORDER_ADD_INFO:"In aggiunta (campo facoltativo):",CLIENT_EMAIL:"posta elettronica",ADD_PHONE:"Telefono supplementare",CALL_CREDIT:"Concessione rateazione e Accettazione dell’ordine per il conteggio",CALL_CREDIT_DESCRIP:"Per emettere il pagamento di rate ed eseguire l'ordine, dobbiamo sapere qualcosa su Lei.",CALL_CREDIT_CLIENT_INFO:"Rateazione:",CREDIT_TARGET:"Finalità della concessione di rateazione",CLIENT_ITN:"Codice  fiscale ",CALL_START_TIME:"Telefonare da:",CALL_END_TIME:"fino a:",CALL_CREDIT_PARTIAL_PRICE:"per",ADDELEMENTS_EDIT_LIST:"Redigere la lista ...",ADDELEMENTS_PRODUCT_COST:"in un prodotto",HEAT_TRANSFER:"tarsmissione di calore",WRONG_EMAIL:"Posta elettronica errata",LINK_BETWEEN_COUPLE:"tra coppia",LINK_BETWEEN_ALL:"tra tutti",CLIENT_SEX:"di sesso",CLIENT_SEX_M:"U",CLIENT_SEX_F:"D",CLIENT_AGE:"Età",CLIENT_AGE_OLDER:"è più più anziano",CLIENTE_ISTRUZIONE:"Il criterio principale della vostra scelta",CLIENT_EDUC_MIDLE:"Il buon prezzo",CLIENTE_EDUC_SPEC:"creatore di immagine",CLIENT_EDUC_HIGH:"il profilo del marchio e hardware",CLIENT_EDUC_4:"Raccomandazioni venditore",CLIENT_OCCUPATION:"Occupazione",CLIENT_OCCUP_WORKER:"Dipendente",CLIENT_OCCUP_HOUSE:"Casalinga",CLIENT_OCCUP_BOSS:"Uomo d'affari",CLIENT_OCCUP_STUD:"Studente",CLIENT_OCCUP_PENSION:"Pensionato",CLIENT_INFO_SOURCE:"Fonte di informazioni",CLIENT_INFO_PRESS:"Premere",CLIENT_INFO_FRIEND:"Da conoscenti",CLIENT_INFO_ADV:"Fare annunci visivo",SELECT_PLACEHOLD:"selezionare l'opzione",NO_DISASSEMBL:"senza smontano",STANDART_ASSEMBL:"lo standard",VIP_ASSEMBL:"INSTALLAZIONE DEL VIP",DISCOUNT:"Sconto",DISCOUNT_SELECT:"Scelta di sconto",DISCOUNT_WITH:"Prendere in considerazione uno sconto",DISCOUNT_WITHOUT:"Senza uno sconto",DISCOUNT_WINDOW:"Sconto a un prodotto",DISCOUNT_ADDELEM:"Sconto a elementi supplementari",ORDER_COMMENT:"Nota Order",UNKNOWN:"Sconosciuto"},settings:{AUTHORIZATION:"Autorizzazione:",CHANGE_PASSWORD:"Cambiare la parola d'ordine",CHANGE_LANGUAGE:"Cambiare la lingua",PRIVATE_INFO:"Dati personalio:",USER_NAME:"Persona di contatto",CITY:"Città",ADD_PHONES:"Telefoni supplementari:",INSERT_PHONE:"Aggiungere un telefono",CLIENT_SUPPORT:"Assistenza agli utentui",LOGOUT:"Uscire dall’allegato",SAVE:"Salvare",CURRENT_PASSWORD:"Corrente",NEW_PASSWORD:"Nuovo",CONFIRM_PASSWORD:"Confermare",NO_CONFIRM_PASS:"Password errata"}})}(),function(){angular.module("BauVoiceApp").constant("romanianDictionary",{common_words:{CHANGE:"modifică",MONTHS:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Novembie, Decembrie",MONTHS_SHOT:"Ian, Feb, Mart, Apr, Mai, Iun, Iul, Aug, Sept, Oct, Nov, Dec",MONTHA:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Novembie, Decembrie",MONTH_LABEL:"lună",MONTHA_LABEL:"lunii",MONTHS_LABEL:"luni",ALL:"toate",MIN:"minimum",MAX:"maximum",BUTTON_Y:"Da",BUTTON_N:"Nu",DELETE_PRODUCT_TITLE:"STERGE!",DELETE_PRODUCT_TXT:"Doriți să eliminați produsul?",DELETE_ORDER_TITLE:"Sterge comanda!",DELETE_ORDER_TXT:"Doriți să anulați comanda?",COPY_ORDER_TITLE:"Copierea!",COPY_ORDER_TXT:"Doriți să facă o copie la comandă?",SEND_ORDER_TITLE:"în producție!",SEND_ORDER_TXT:"Doriți să trimiteți comanda la uzină?",NEW_TEMPLATE_TITLE:"Template changing",TEMPLATE_CHANGES_LOST:"The template changes will lost! Continue?",PAGE_REFRESH:"Reîncărcarea paginii va duce la pierderi de date!",SELECT:"Select",AND:"și",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"autentificare",PASS_CODE:"Spune-i managerului acest cod.",YOUR_CODE:"codul dvs: ",EMPTY_FIELD:"Completați acest câmp.",WRONG_NUMBER:"numar incorrect.",SHORT_NAME:"Too short name",SHORT_PASSWORD:"parola e prea mica.",SHORT_PHONE:"Too little phone number.",IMPORT_DB_START:"Stai, a început încărcarea de date",IMPORT_DB_FINISH:"Vă mulțumim pentru descărcarea este completă",MOBILE:"telefon mobil",PASSWORD:"Parola",REGISTRATION:"înregistrare",SELECT_COUNTRY:"Select country",SELECT_REGION:"Select region",SELECT_CITY:"Select city",USER_EXIST:"Sorry, but this user already exists! Please, try again.",USER_NOT_EXIST:"Sorry, but this user not exists! Registrate please.",USER_NOT_ACTIVE:"Sorry, but your profile is not active. Please check your email.",USER_CHECK_EMAIL:"The confirmed email was send to you. Please check your email.",SELECT_PRODUCER:"Choose the producer",SELECT_FACTORY:"Please select the producer",USER_PASSWORD_ERROR:"Sorry, but your password is wrong!",OFFLINE:"Nu există conexiune la Internet!",IMPORT_DB:"Baze de date începe descărcarea! Va rugam asteptati! "},mainpage:{MM:" mm ",CLIMATE_ZONE:"zona climatica ",THERMAL_RESISTANCE:"transfer de căldură",AIR_CIRCULATION:"coeficientul circulatiei aerului",NAVMENU_GEOLOCATION:"Selectați locația",NAVMENU_CURRENT_GEOLOCATION:"Locul de amplasare actual",NAVMENU_CURRENT_CALCULATION:"calcul actual",NAVMENU_CART:"cosul de cumparaturi",NAVMENU_ADD_ELEMENTS:"elemente suplimentare",NAVMENU_ALL_CALCULATIONS:"Istoric comenzi",NAVMENU_SETTINGS:"Setări",NAVMENU_MORE_INFO:"Mai multe informații",NAVMENU_VOICE_HELPER:"Сontrolul voce-activat",NAVMENU_CALCULATIONS:"calcule",NAVMENU_APPENDIX:"Propunere",NAVMENU_NEW_CALC:"+Calcul Nou",CONFIGMENU_CONFIGURATION:"Configurația și dimensiunile",CONFIGMENU_SIZING:"Lățime * Înălțime",CONFIGMENU_PROFILE:"profil",CONFIGMENU_GLASS:"geam termopan",CONFIGMENU_HARDWARE:"furnitura ",CONFIGMENU_LAMINATION:"laminare",CONFIGMENU_LAMINATION_TYPE:"camera / fațadă",WHITE_LAMINATION:"alb",CONFIGMENU_ADDITIONAL:"Suplimentar",CONFIGMENU_IN_CART:"Adaugă in coș",VOICE_SPEACH:"Vorbiți...",COMMENT:"Lasă un bilet pe ordinea de aici.",ROOM_SELECTION:"Template selection",CONFIGMENU_NO_ADDELEMENTS:"Suplimentare sunt selectate",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Pentru a schimba dimensiunea, faceți clic aici",PROFILE_TIP:"Pentru a selecta un profil, faceți clic aici",GLASS_TIP:"Pentru a selecta o fereastră termopan, click aici",SELECT_ALL:"Selectați toate",SELECT_GLASS_WARN:"Faceți clic pe geam, doriți să modificați"},panels:{TEMPLATE_WINDOW:"Fereastră",TEMPLATE_BALCONY:"Balcon",TEMPLATE_DOOR:"Ușă",TEMPLATE_BALCONY_ENTER:"Ieșire la balcon",TEMPLATE_EDIT:"Editare",TEMPLATE_DEFAULT:"Proiect Standard",COUNTRY:"țara",BRAND:"marcă comercială",HEAT_INSULATION:"izolație termică",NOICE_INSULATION:"izolare fonica",CORROSION_COEFF:"anticoroziune",BURGLAR_COEFF:"hoț",LAMINAT_INSIDE:"in camera",LAMINAT_OUTSIDE:"față",ONE_WINDOW_TYPE:"One-casement",TWO_WINDOW_TYPE:"Two-casement",THREE_WINDOW_TYPE:"Three-leaf",CAMERa:"cameras",CAMER:"cameras",CAMERs:"cameras",ENERGY_SAVE:"+energy saving",DOOR_TYPE1:"on perimeter",DOOR_TYPE2:"without threshold",DOOR_TYPE3:"aluminum threshold, type",SASH_TYPE1:"the interroom",SASH_TYPE2:"the door T-shaped",SASH_TYPE3:"the window",HANDLE_TYPE1:"press set",HANDLE_TYPE2:"standard office handle",LOCK_TYPE1:"one-locking with a latch",LOCK_TYPE2:"multilocking with a latch"},add_elements:{CHOOSE:"Alege",ADD:"Adauga",GRID:"plasă contra țânțarilor",VISOR:"parasolară",SPILLWAY:"scurgere",OUTSIDE:"pante exterioare",LOUVERS:"jaluzele",INSIDE:"pante interne",CONNECTORS:"conector",FAN:"micro ventilare",WINDOWSILL:"pervaz",HANDLEL:"mâner",OTHERS:"altele",GRIDS:"plase de țânțari",VISORS:"viziere",SPILLWAYS:"scurgeri",WINDOWSILLS:"Pervaze",HANDLELS:"manere",NAME_LABEL:"nume",ARTICUL_LABEL:"referință",QTY_LABEL:"Bucăți",SIZE_LABEL:"dimensiune",WIDTH_LABEL:"lățime",HEIGHT_LABEL:"înălțime",OTHER_ELEMENTS1:"încă",OTHER_ELEMENTS2:"componenta...",SCHEME_VIEW:"schematic",LIST_VIEW:"Lista",INPUT_ADD_ELEMENT:"Adaugă Componenta",CANCEL:"anulare",TOTAL_PRICE_TXT:"Total componente suplimentare în valoare de",ELEMENTS:"componente",ELEMENT:"component",ELEMENTA:"componenta"},add_elements_menu:{TIP:"Selectați un element din listă",EMPTY_ELEMENT:"fără elementul",TAB_NAME_SIMPLE_FRAME:"construcție simplă",TAB_NAME_HARD_FRAME:"construcție component",TAB_EMPTY_EXPLAIN:"Vă rugăm să selectați primul element,pentru a porni construcția."},construction:{SASH_SHAPE:"cercevea",ANGEL_SHAPE:"unghiuri",IMPOST_SHAPE:"impost",ARCH_SHAPE:"arcuri",POSITION_SHAPE:"poziția",UNITS_DESCRIP:"Unitățile de măsură sunt în mm",PROJECT_DEFAULT:"Proiect Standard",DOOR_CONFIG_LABEL:"configurația uși",DOOR_CONFIG_DESCTIPT:"cadru de ușă",SASH_CONFIG_DESCTIPT:"ori usi",HANDLE_CONFIG_DESCTIPT:"mâner",LOCK_CONFIG_DESCTIPT:"blocare a ușii",STEP:"pas",LABEL_DOOR_TYPE:"Selectaţi un toc de proiectare a ușii",LABEL_SASH_TYPE:"Selectați tipul de cercevea la ușă",LABEL_HANDLE_TYPE:"Selectați tipul de mâner",LABEL_LOCK_TYPE:"Selectați tipul de blocare",VOICE_SWITCH_ON:"Modul Voce este activat",VOICE_NOT_UNDERSTAND:"nu este clar",VOICE_SMALLEST_SIZE:"prea mic",VOICE_BIGGEST_SIZE:"prea mare",VOICE_SMALL_GLASS_BLOCK:"luminatoare prea mici",NOT_AVAILABLE:"nu Este Disponibil!"},history:{SEARCH_PLACEHOLDER:"Căutare după cuvinte cheie",DRAFT_VIEW:"calcule Ciorne",HISTORY_VIEW:"istoria calculelor",PHONE:"telefon",CLIENT:"client",ADDRESS:"adresa",FROM:"de la ",UNTIL:"pînă la ",PAYMENTS:"achitare prin",ALLPRODUCTS:"Construcți",ON:"pe",DRAFT:"ciornă",DATE_RANGE:"intervalul de date",ALL_TIME:"Pentru tot timpul",SORTING:"Sortarea",NEWEST_FIRST:"după timp:cele noi primele",NEWEST_LAST:"după timp:cele noi la urmă",SORT_BY_TYPE:"După tipul",SORT_SHOW:"Arată",SORT_SHOW_ACTIVE:"Doar activi",SORT_SHOW_WAIT:"Numai în așteptarea",SORT_SHOW_DONE:"Numai finalizat",BY_YOUR_REQUEST:"Potrivit cererea dvs.",NOT_FIND:"nimic nu a fost găsit",WAIT_MASTER:"aşteaptă inginerul",INCLUDED:"inclus"},cart:{ALL_ADD_ELEMENTS:"toate elemente suplimentare a comenzii",ADD_ORDER:"adaugă produsul",PRODUCT_QTY:"numărul de produse",LIGHT_VIEW:"Vizualizare scurtă",FULL_VIEW:"Vizualizare completă",DELIVERY:"livrare",SELF_EXPORT:"Fara livrare",FLOOR:"etajul",ASSEMBLING:"instalare",WITHOUT_ASSEMBLING:"fără montare",FREE:"gratuit",PAYMENT_BY_INSTALMENTS:"Plata în rate",WITHOUT_INSTALMENTS:"fără rate",DELIVERY_DATE:"data de livrare",TOTAL_PRICE_LABEL:"în total la livrare ",MONTHLY_PAYMENT_LABEL:"plata lunara cîte",DATE_DELIVERY_LABEL:"La livrare",FIRST_PAYMENT_LABEL:"prima achitare",ORDER:"a comanda",MEASURE:"Măsura",READY:"Gata",CALL_MASTER:"chemarea inginerului pentru calcul",CALL_MASTER_DESCRIP:"Pentru a solicita inginerul, avem nevoie de ceva informatie despre dvs. Ambele campurile sunt obligatorii.",CLIENT_LOCATION:"locație",CLIENT_ADDRESS:"adresa",CALL_ORDER:"Pentru a calcula",CALL_ORDER_DESCRIP:"Pentru a îndeplini comanda,este necesar informatie despre dvs.",CALL_ORDER_CLIENT_INFO:"Informații client (câmpuri obligatorii):",CLIENT_NAME:"numele prenumele patronimicul",CALL_ORDER_DELIVERY:"livrarea comenzi pe",CALL_ORDER_TOTAL_PRICE:"Total",CALL_ORDER_ADD_INFO:"suplimentar (completarea la dorinţă):",CLIENT_EMAIL:"poșta electronică",ADD_PHONE:"telefon suplimentar",CALL_CREDIT:"Efectuarea rate și calculul comenzi",CALL_CREDIT_DESCRIP:"Pentru a aranja rate și îndeplini comanda, avem ceva pentru tine să știu.",CALL_CREDIT_CLIENT_INFO:"Plata în rate:",CREDIT_TARGET:"Scopul clearance de rate",CLIENT_ITN:"Cod fiscal individual",CALL_START_TIME:"sunați de la:",CALL_END_TIME:"pînă la :",CALL_CREDIT_PARTIAL_PRICE:"pe ",ADDELEMENTS_EDIT_LIST:"redactarea listei ...",ADDELEMENTS_PRODUCT_COST:"într-o construcţie",HEAT_TRANSFER:"transferul de căldură",WRONG_EMAIL:"poșta electronica este incorectă",LINK_BETWEEN_COUPLE:"între o pereche de",LINK_BETWEEN_ALL:"printre toate",CLIENT_SEX:"Sex",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Age",CLIENT_AGE_OLDER:"mai vechi","CLIENT_EDUCAȚIE":"Principalul criteriu de alegere",CLIENT_EDUC_MIDLE:"preț bun",CLIENT_EDUC_SPEC:"filtru de imagine",CLIENT_EDUC_HIGH:"profilul de brand și hardware ",CLIENT_EDUC_4:" vânzător Recomandări",CLIENT_OCCUPATION:"Ocuparea forței de muncă",CLIENT_OCCUP_WORKER:"angajat",CLIENT_OCCUP_HOUSE:"Casnică",CLIENT_OCCUP_BOSS:"Antreprenor",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensionar",CLIENT_INFO_SOURCE:"sursa",CLIENT_INFO_PRESS:"Presă",CLIENT_INFO_FRIEND:"De la prieteni",CLIENT_INFO_ADV:"publicitate vizuala",SELECT_PLACEHOLD:"selectați opțiunea dumneavoastră",NO_DISASSEMBL:"fără demontare",STANDART_ASSEMBL:"standard",
VIP_ASSEMBL:"montaj VIP",DISCOUNT:"Discount",DISCOUNT_SELECT:"Alegerea de reduceri",DISCOUNT_WITH:"Având în vedere reduceri",DISCOUNT_WITHOUT:"Discount Excluderea",DISCOUNT_WINDOW:"Discount pe un produs",DISCOUNT_ADDELEM:"Discount pe elemente suplimentare",ORDER_COMMENT:"Nota Ordine",UNKNOWN:"Necunoscut"},settings:{AUTHORIZATION:"Autentificare:",CHANGE_PASSWORD:"schimbați parola",CHANGE_LANGUAGE:"Change language",PRIVATE_INFO:"Informații personale:",USER_NAME:"persoana de contact",CITY:"oraș",ADD_PHONES:"telefon suplimentar:",INSERT_PHONE:"adaugați  nr de telefon",CLIENT_SUPPORT:"suport clienți",LOGOUT:"Ieșirea din aplicația",SAVE:"Salvați",CURRENT_PASSWORD:"Current",NEW_PASSWORD:"nou",CONFIRM_PASSWORD:"Confirmare",NO_CONFIRM_PASS:"parolă incorectă"}})}(),function(){angular.module("BauVoiceApp").constant("russianDictionary",{common_words:{CHANGE:"Изменить",MONTHS:"Январь, Февраль, Март, Апрель, Май, Июнь, Июль, Август, Сентябрь, Октябрь, Ноябрь, Декабрь",MONTHS_SHOT:"Янв, Февр, Март, Апр, Май, Июнь, Июль, Авг, Сент, Окт, Ноя, Дек",MONTHA:"Января, Февраля, Марта, Апреля, Мая, Июня, Июля, Августа, Сентября, Октября, Ноября, Декабря",MONTH_LABEL:"месяц",MONTHA_LABEL:"месяца",MONTHS_LABEL:"месяцeв",ALL:"Все",MIN:"мин.",MAX:"макс.",BUTTON_Y:"ДА",BUTTON_N:"НЕТ",DELETE_PRODUCT_TITLE:"Удаление!",DELETE_PRODUCT_TXT:"Хотите удалить продукт?",DELETE_ORDER_TITLE:"Удаление заказа!",DELETE_ORDER_TXT:"Хотите удалить заказ?",COPY_ORDER_TITLE:"Копирование!",COPY_ORDER_TXT:"Хотите сделать копию заказа?",SEND_ORDER_TITLE:"В производство!",SEND_ORDER_TXT:"Хотите отправить заказ на завод?",NEW_TEMPLATE_TITLE:"Изменение шаблона",TEMPLATE_CHANGES_LOST:"Изменения в шаблоне будут потеряны! Продолжить?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"и",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Войти",PASS_CODE:"Сообщите этот код менеджеру.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заполните это поле.",WRONG_NUMBER:"Неверный номер.",SHORT_NAME:"Слишком маленькое имя.",SHORT_PASSWORD:"Слишком маленький пароль.",SHORT_PHONE:"Слишком маленький номер телефона.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",MOBILE:"Мобильный телефон",PASSWORD:"Пароль",REGISTRATION:"Регистрация",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нет соединения с интернетом!",IMPORT_DB:"Началась загрузка Баз данных! Подождите пожалуйста!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"климатическая зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коэффициент воздухообмена",NAVMENU_GEOLOCATION:"Выбрать расположение",NAVMENU_CURRENT_GEOLOCATION:"Текущее расположение",NAVMENU_CURRENT_CALCULATION:"Текущий расчет",NAVMENU_CART:"Корзина расчета",NAVMENU_ADD_ELEMENTS:"Доп. элементы",NAVMENU_ALL_CALCULATIONS:"История заказов",NAVMENU_SETTINGS:"Настройки",NAVMENU_MORE_INFO:"Больше информации",NAVMENU_VOICE_HELPER:"Голосовое управление",NAVMENU_CALCULATIONS:"Расчеты",NAVMENU_APPENDIX:"Приложение",NAVMENU_NEW_CALC:"+Новый расчет",CONFIGMENU_CONFIGURATION:"Конфигурация и размеры",CONFIGMENU_SIZING:"ширина * высота",CONFIGMENU_PROFILE:"Профиль",CONFIGMENU_GLASS:"Стеклопакет",CONFIGMENU_HARDWARE:"Фурнитура",CONFIGMENU_LAMINATION:"Ламинация",CONFIGMENU_LAMINATION_TYPE:"в комнате / фасад",WHITE_LAMINATION:"Белая",CONFIGMENU_ADDITIONAL:"Дополнительно",CONFIGMENU_IN_CART:"В корзину",VOICE_SPEACH:"Говорите...",COMMENT:"Оставьте свою заметку о заказе здесь.",ROOM_SELECTION:"Выбор шаблона",CONFIGMENU_NO_ADDELEMENTS:"Доп.элементы не выбраны",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для изменения размеров нажмите сюда",PROFILE_TIP:"Для выбора профиля нажмите сюда",GLASS_TIP:"Для выбора стеклопакета нажмите сюда",SELECT_ALL:"Выбрать все",SELECT_GLASS_WARN:"Кликните на стеклопакет, который хотите изменить"},panels:{TEMPLATE_WINDOW:"Oкно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Дверь",TEMPLATE_BALCONY_ENTER:"Выход на балкон",TEMPLATE_EDIT:"Редактировать",TEMPLATE_DEFAULT:"Проект по умолчанию",COUNTRY:"страна",BRAND:"торговая марка",HEAT_INSULATION:"теплоизоляция",NOICE_INSULATION:"шумоизоляция",CORROSION_COEFF:"aнтикоррозийность",BURGLAR_COEFF:"противовзломность",LAMINAT_INSIDE:"в комнате",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминиевый порог, тип",SASH_TYPE1:"межкомнатная",SASH_TYPE2:"дверная т-образная",SASH_TYPE3:"оконная",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой"},add_elements:{CHOOSE:"Выбрать",ADD:"Добавить",GRID:"москитная сетка",VISOR:"козырек",SPILLWAY:"водоотлив",OUTSIDE:"наружные откосы",LOUVERS:"жалюзи",INSIDE:"внутренние откосы",CONNECTORS:"соединитель",FAN:"микропроветривание",WINDOWSILL:"подоконник",HANDLEL:"ручка",OTHERS:"прочее",GRIDS:"москитные сетки",VISORS:"козырьки",SPILLWAYS:"водоотливы",WINDOWSILLS:"подоконники",HANDLELS:"ручки",NAME_LABEL:"наименование",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"размер",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"высота",OTHER_ELEMENTS1:"Еще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематически",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Добавить компонент",CANCEL:"Отмена",TOTAL_PRICE_TXT:"Итого дополнительных компонентов на сумму:",ELEMENTS:"компонентов",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Выберите элемент из списка",EMPTY_ELEMENT:"Без элемента",TAB_NAME_SIMPLE_FRAME:"Простая конструкция",TAB_NAME_HARD_FRAME:"Составная конструкция",TAB_EMPTY_EXPLAIN:"Выберите из списка первый элемент, чтобы начать составлять конструкцию."},construction:{SASH_SHAPE:"створки",ANGEL_SHAPE:"углы",IMPOST_SHAPE:"импосты",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиция",UNITS_DESCRIP:"В качестве единиц измерения используются миллиметры",PROJECT_DEFAULT:"Проект по умолчанию",DOOR_CONFIG_LABEL:"конфигурация двери",DOOR_CONFIG_DESCTIPT:"рама двери",SASH_CONFIG_DESCTIPT:"створка двери",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"шаг",LABEL_DOOR_TYPE:"Выберите конструкцию рамы двери",LABEL_SASH_TYPE:"Выберите тип створки двери",LABEL_HANDLE_TYPE:"Выберите тип ручки",LABEL_LOCK_TYPE:"Выберите тип замка",VOICE_SWITCH_ON:"голосовой режим включен",VOICE_NOT_UNDERSTAND:"Не понятно",VOICE_SMALLEST_SIZE:"слишком маленький размер",VOICE_BIGGEST_SIZE:"слишком большой размер",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",NOT_AVAILABLE:"Недоступно!"},history:{SEARCH_PLACEHOLDER:"Поиск по ключевым словам",DRAFT_VIEW:"Черновики расчетов",HISTORY_VIEW:"История расчетов",PHONE:"телефон",CLIENT:"клиент",ADDRESS:"адрес",FROM:"от ",UNTIL:"до ",PAYMENTS:"платежей по",ALLPRODUCTS:"изделий",ON:"на",DRAFT:"Черновик",DATE_RANGE:"Диапазон дат",ALL_TIME:"За все время",SORTING:"Сортировка",NEWEST_FIRST:"По времени: новые в начале",NEWEST_LAST:"По времени: новые в конце",SORT_BY_TYPE:"По типам",SORT_SHOW:"Показать",SORT_SHOW_ACTIVE:"Только активные",SORT_SHOW_WAIT:"Только в ожидании",SORT_SHOW_DONE:"Только завершенные",BY_YOUR_REQUEST:"По вашему запросу",NOT_FIND:"ничего не найдено",WAIT_MASTER:"ожидает замерщика",INCLUDED:"включены"},cart:{ALL_ADD_ELEMENTS:"Все доп.элементы заказа",ADD_ORDER:"Добавить изделие",PRODUCT_QTY:"количество изделий",LIGHT_VIEW:"Сокращенный вид",FULL_VIEW:"Полный вид",DELIVERY:"Доставка",SELF_EXPORT:"самовывоз",FLOOR:"этаж",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажа",FREE:"бесплатно",PAYMENT_BY_INSTALMENTS:"Рассрочка",WITHOUT_INSTALMENTS:"без рассрочки",DELIVERY_DATE:"Дата поставки",TOTAL_PRICE_LABEL:"Итого при поставке на",MONTHLY_PAYMENT_LABEL:"ежемесячных платежа по",DATE_DELIVERY_LABEL:"при поставке на",FIRST_PAYMENT_LABEL:"Первый платеж",ORDER:"Заказать",MEASURE:"Замерить",READY:"Готово",CALL_MASTER:"Вызов замерщика для рассчета",CALL_MASTER_DESCRIP:"Для вызова замерщика нам нужно кое-что о вас знать. Оба поля являются обязательными для заполнения.",CLIENT_LOCATION:"Местоположение",CLIENT_ADDRESS:"Адрес",CALL_ORDER:"Оформление заказа для рассчета",CALL_ORDER_DESCRIP:"Для того, чтобы выполнить заказ, мы должны кое-что о вас знать.",CALL_ORDER_CLIENT_INFO:"Информация о клиенте (заполняйте обязательно):",CLIENT_NAME:"Фамилия Имя Отчество",CALL_ORDER_DELIVERY:"Доставить заказ на",CALL_ORDER_TOTAL_PRICE:"Всего",CALL_ORDER_ADD_INFO:"Дополнительно (заполняйте по желанию):",CLIENT_EMAIL:"Электронная почта",ADD_PHONE:"Дополнительный телефон",CALL_CREDIT:"Оформление рассрочки и заказа для рассчета",CALL_CREDIT_DESCRIP:"Для того, чтобы оформить рассрочку и выполнить заказ, мы должны кое-что о вас знать.",CALL_CREDIT_CLIENT_INFO:"Рассрочка:",CREDIT_TARGET:"Цель оформления рассрочки",CLIENT_ITN:"Индивидуальный налоговый номер",CALL_START_TIME:"Звонить от:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редактировать список ...",ADDELEMENTS_PRODUCT_COST:"в одном изделии",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Неверная электронная почта",LINK_BETWEEN_COUPLE:"между парой",LINK_BETWEEN_ALL:"между всеми",CLIENT_SEX:"Пол",CLIENT_SEX_M:"M",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Возраст",CLIENT_AGE_OLDER:"старше",CLIENT_EDUCATION:"Главный критерий вашего выбора",CLIENT_EDUC_MIDLE:"Выгодная цена",CLIENT_EDUC_SPEC:"Имидж производителя",CLIENT_EDUC_HIGH:"Бренд профиля или фурнитуры",CLIENT_EDUC_4:"Рекомендации продавца",CLIENT_OCCUPATION:"Занятость",CLIENT_OCCUP_WORKER:"Служащий",CLIENT_OCCUP_HOUSE:"Домохозяйка",CLIENT_OCCUP_BOSS:"Предприниматель",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсионер",CLIENT_INFO_SOURCE:"Источник информации",CLIENT_INFO_PRESS:"Пресса",CLIENT_INFO_FRIEND:"От знакомых",CLIENT_INFO_ADV:"Визуальная реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Cкидка",DISCOUNT_SELECT:"Выбор скидки",DISCOUNT_WITH:"С учетом скидки",DISCOUNT_WITHOUT:"Без учета скидки",DISCOUNT_WINDOW:"Скидка на изделие",DISCOUNT_ADDELEM:"Скидка на дополнительные элементы",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизация:",CHANGE_PASSWORD:"Изменить пароль",CHANGE_LANGUAGE:"Изменить язык",PRIVATE_INFO:"Личная информация:",USER_NAME:"Контактное лицо",CITY:"Город",ADD_PHONES:"Дополнительные телефоны:",INSERT_PHONE:"Добавить телефон",CLIENT_SUPPORT:"Подержка пользователей",LOGOUT:"Выйти из приложения",SAVE:"Сохранить",CURRENT_PASSWORD:"Текущий",NEW_PASSWORD:"Новый",CONFIRM_PASSWORD:"Подтвердить",NO_CONFIRM_PASS:"Неверный пароль"}})}(),function(){angular.module("BauVoiceApp").constant("ukrainianDictionary",{common_words:{CHANGE:"Змінити",MONTHS:"Січень, Лютий, Березень, Квітень, Травень, Червень, Липень, Серпень, Вересень, Жовтень, Листопад, Грудень",MONTHS_SHOT:"Січ, Лют, Бер, Квіт, Трав, Черв, Лип, Серп, Вер, Жовт, Лист, Груд",MONTHA:"Січня, Лютого, Березня, Квітня, Травня, Червня, Липня, Серпня, Вересня, Жовтня, Листопада, Грудня",MONTH_LABEL:"місяць",MONTHA_LABEL:"місяця",MONTHS_LABEL:"місяців",ALL:"Все",MIN:"мін.",MAX:"макс.",BUTTON_Y:"ТАК",BUTTON_N:"НІ",DELETE_PRODUCT_TITLE:"Видалення!",DELETE_PRODUCT_TXT:"Хочете видалити продукт?",DELETE_ORDER_TITLE:"Видалення замовлення!",DELETE_ORDER_TXT:"Хочете видалити замовлення?",COPY_ORDER_TITLE:"Копіювання!",COPY_ORDER_TXT:"Хочете зробити копію замовлення?",SEND_ORDER_TITLE:"На виробництво!",SEND_ORDER_TXT:"Хочете відправити замовлення на завод?",NEW_TEMPLATE_TITLE:"Зміна шаблона",TEMPLATE_CHANGES_LOST:"Зміни у шаблоні будуть загублені. Продовжити?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"та",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Увійти",PASS_CODE:"Повідомте цей код менеджерові.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заповніть це поле.",WRONG_NUMBER:"Невірний номер.",SHORT_NAME:"Слишком маленькое имя.",SHORT_PASSWORD:"Занадто маленький пароль.",SHORT_PHONE:"Занадто маленький номер телефона.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",MOBILE:"Мобільный телефон",PASSWORD:"Пароль",REGISTRATION:"Регістрація",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нема зв`язку з iнтернетом!",IMPORT_DB:"Почалась загрузка Баз данних! Почекайте будь ласка!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"кліматична зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коефіцієнт повітрообміну",NAVMENU_GEOLOCATION:"Вибрати розташування",NAVMENU_CURRENT_GEOLOCATION:"Поточне розташування",NAVMENU_CURRENT_CALCULATION:"Поточний розрахунок",NAVMENU_CART:"Кошик розрахунку",NAVMENU_ADD_ELEMENTS:"Дод. елементи",NAVMENU_ALL_CALCULATIONS:"Історія замовлень",NAVMENU_SETTINGS:"Налаштування",NAVMENU_MORE_INFO:"Більше інформації",NAVMENU_VOICE_HELPER:"Голосове управління",NAVMENU_CALCULATIONS:"Розрахунки",NAVMENU_APPENDIX:"Додаток",NAVMENU_NEW_CALC:"+Новий розрахунок",CONFIGMENU_CONFIGURATION:"Конфігурація і розміри",CONFIGMENU_SIZING:"ширина * висота -",CONFIGMENU_PROFILE:"Профіль",CONFIGMENU_GLASS:"Склопакет",CONFIGMENU_HARDWARE:"Фурнітура",CONFIGMENU_LAMINATION:"Ламінація",CONFIGMENU_LAMINATION_TYPE:"в кімнаті / фасад",WHITE_LAMINATION:"Біла",CONFIGMENU_ADDITIONAL:"Додатково",CONFIGMENU_IN_CART:"В кошик",VOICE_SPEACH:"Говоріть...",COMMENT:"Залиште свою замітку про заказ тут.",ROOM_SELECTION:"Вибір шаблону",CONFIGMENU_NO_ADDELEMENTS:"Дод.елементи не вибранi",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для зміни розмірів натисніть сюди",PROFILE_TIP:"Для вибору профілю натисніть сюди",GLASS_TIP:"Для вибору склопакета натисніть сюди",SELECT_ALL:"Вибрати все",SELECT_GLASS_WARN:"Натисніть на склопакет, який хочете змінити"},panels:{TEMPLATE_WINDOW:"Вікно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Двері",TEMPLATE_BALCONY_ENTER:"Вихід на балкон",TEMPLATE_EDIT:"Редагувати",TEMPLATE_DEFAULT:"Проект за умовчанням",COUNTRY:"країна",BRAND:"торгова марка",HEAT_INSULATION:"теплоізоляція",NOICE_INSULATION:"шумоізоляція",CORROSION_COEFF:"aнтикорозійність",BURGLAR_COEFF:"протизламність",LAMINAT_INSIDE:"в кімнаті",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминевый порог, тип",SASH_TYPE1:"межкомнатная",SASH_TYPE2:"дверная т-образная",SASH_TYPE3:"оконная",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой"},add_elements:{CHOOSE:"Вибрати",ADD:"Додати",GRID:"москітна сітка",VISOR:"Козирок",SPILLWAY:"водовідлив",OUTSIDE:"зовнішні укоси",LOUVERS:"жалюзі",INSIDE:"внутрішні укоси",CONNECTORS:"з`єднувач",FAN:"мікропровітрювання",WINDOWSILL:"підвіконня",HANDLEL:"ручка",OTHERS:"інше",GRIDS:"москітні сітки",VISORS:"козирки",SPILLWAYS:"водовідливи",WINDOWSILLS:"підвіконня",HANDLELS:"ручки",NAME_LABEL:"найменування",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"розмір",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"висота",OTHER_ELEMENTS1:"Ще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематично",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Додати компонент",CANCEL:"Відміна",TOTAL_PRICE_TXT:"Разом додаткових компонентів на суму:",ELEMENTS:"компонентів",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Виберіть елемент зі списку",EMPTY_ELEMENT:"Без элементу",TAB_NAME_SIMPLE_FRAME:"Проста конструкція",TAB_NAME_HARD_FRAME:"Складена конструкція",TAB_EMPTY_EXPLAIN:"Виберіть зі списку перший елемент, щоб почати складати конструкцію."},construction:{SASH_SHAPE:"стулки",ANGEL_SHAPE:"кути",IMPOST_SHAPE:"імпости",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиція",UNITS_DESCRIP:"Як одиниці виміру використовуються міліметри",PROJECT_DEFAULT:"Проект за умовчанням",DOOR_CONFIG_LABEL:"конфігурація дверей",DOOR_CONFIG_DESCTIPT:"рама дверей",SASH_CONFIG_DESCTIPT:"стулка дверей",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"крок",LABEL_DOOR_TYPE:"Виберіть конструкцію рами дверей",LABEL_SASH_TYPE:"Виберіть тип стулки дверей",LABEL_HANDLE_TYPE:"Виберіть тип ручки",LABEL_LOCK_TYPE:"Виберіть тип замка",VOICE_SWITCH_ON:"голосовий режим включен",VOICE_NOT_UNDERSTAND:"Не зрозуміло",VOICE_SMALLEST_SIZE:"замалий розмір",VOICE_BIGGEST_SIZE:"завеликий розмір",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",NOT_AVAILABLE:"Недоступно!"},history:{SEARCH_PLACEHOLDER:"Пошук за ключовими словами",DRAFT_VIEW:"Чернетки розрахунків",HISTORY_VIEW:"Історія розрахунків",PHONE:"телефон",CLIENT:"клієнт",ADDRESS:"адреса",FROM:"від ",UNTIL:"до ",PAYMENTS:"платежів по",ALLPRODUCTS:"виробів",ON:"на",DRAFT:"Чернетка",DATE_RANGE:"Діапазон дат",ALL_TIME:"За весь час",SORTING:"Сортування",NEWEST_FIRST:"За часом: нові на початку",NEWEST_LAST:"За часом: нові у кінці",SORT_BY_TYPE:"По типах",SORT_SHOW:"Показати",SORT_SHOW_ACTIVE:"Тільки активні",SORT_SHOW_WAIT:"Тільки в очікуванні",SORT_SHOW_DONE:"Тільки завершені",BY_YOUR_REQUEST:"По вашому запиту",NOT_FIND:"нічого не знайдено",WAIT_MASTER:"очікує замірювача",INCLUDED:"включені"},cart:{ALL_ADD_ELEMENTS:"Всі дод.елементи замовлення",ADD_ORDER:"Додати виріб",PRODUCT_QTY:"кількість виробів",LIGHT_VIEW:"Скорочений вид",FULL_VIEW:"Повний вид",DELIVERY:"Доставка",SELF_EXPORT:"самовивезення",FLOOR:"поверх",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажу",FREE:"безкоштовно",PAYMENT_BY_INSTALMENTS:"Розстрочка",WITHOUT_INSTALMENTS:"без розстрочки",DELIVERY_DATE:"Дата постачання",TOTAL_PRICE_LABEL:"Разом при постачанні на",MONTHLY_PAYMENT_LABEL:"щомісячних платежів по",DATE_DELIVERY_LABEL:"при постачанні на",FIRST_PAYMENT_LABEL:"Перший платіж",ORDER:"Замовити",MEASURE:"Заміряти",READY:"Готово",CALL_MASTER:"Виклик замірювача для розрахунку",CALL_MASTER_DESCRIP:"Для виклику замірювача нам потрібно дещо про вас знати. Обидва поля є обов`язковими для заповнення.",CLIENT_LOCATION:"Місце розташування",CLIENT_ADDRESS:"Адреса",CALL_ORDER:"Оформлення замовлення для розрахунку",CALL_ORDER_DESCRIP:"Для того, щоб виконати замовлення, ми повинні дещо про вас знати.",CALL_ORDER_CLIENT_INFO:"Інформація про клієнта (заповнюйте обов`язково):",CLIENT_NAME:"Прізвище Ім`я По батькові",CALL_ORDER_DELIVERY:"Доставити замовлення на",CALL_ORDER_TOTAL_PRICE:"Загалом",CALL_ORDER_ADD_INFO:"Додатково (заповнюйте за бажанням):",CLIENT_EMAIL:"Електронна пошта",ADD_PHONE:"Додатковий телефон",CALL_CREDIT:"Оформлення розстрочки і замовлення для розрахунку",CALL_CREDIT_DESCRIP:"Для того, щоб оформити розстрочку і виконати замовлення, ми повинні дещо про вас знати.",CALL_CREDIT_CLIENT_INFO:"Розстрочка:",CREDIT_TARGET:"Мета оформлення розстрочки",CLIENT_ITN:"Індивідуальний податковий номер",CALL_START_TIME:"Дзвонити від:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редагувати список ...",ADDELEMENTS_PRODUCT_COST:"в одному виробі",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Невірна електронна пошта",LINK_BETWEEN_COUPLE:"між парою",LINK_BETWEEN_ALL:"між усіма",CLIENT_SEX:"Стать",CLIENT_SEX_M:"Ч",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Вік",CLIENT_AGE_OLDER:"старше",CLIENT_EDUCATION:"Головний критерій вашого вибору",CLIENT_EDUC_MIDLE:"Вигідна ціна",CLIENT_EDUC_SPEC:"Імідж виробника",CLIENT_EDUC_HIGH:"Бренд профілю або фурнітури",CLIENT_EDUC_4:"Рекомендації продавця",CLIENT_OCCUPATION:"Зайнятість",CLIENT_OCCUP_WORKER:"Службовець",CLIENT_OCCUP_HOUSE:"Домогосподарка",CLIENT_OCCUP_BOSS:"Підприэмиць",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсіонер",CLIENT_INFO_SOURCE:"Джерело информаціі",CLIENT_INFO_PRESS:"Преса",CLIENT_INFO_FRIEND:"Від знайомих",CLIENT_INFO_ADV:"Візуальна реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Знижка",DISCOUNT_SELECT:"Вибір знижки",DISCOUNT_WITH:"Зі знижкою",DISCOUNT_WITHOUT:"Без знижки",DISCOUNT_WINDOW:"Знижка на виріб",DISCOUNT_ADDELEM:"Знижка на додаткові елементи",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизація:",CHANGE_PASSWORD:"Змінити пароль",CHANGE_LANGUAGE:"Змінити мову",PRIVATE_INFO:"Особиста інформація:",USER_NAME:"Контактна особа",CITY:"Місто",ADD_PHONES:"Додаткові телефони:",INSERT_PHONE:"Додати телефон",CLIENT_SUPPORT:"Підтримка користувачів",LOGOUT:"Вийти з додатка",SAVE:"Зберегти",CURRENT_PASSWORD:"Поточний",NEW_PASSWORD:"Новий",CONFIRM_PASSWORD:"Підтвердити",NO_CONFIRM_PASS:"Невірний пароль"}})}();var speechKit=new NuanceSpeechKitPlugin;