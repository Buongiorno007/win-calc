"use strict";function parseStringToDimension(e){e=e.toLowerCase();var t=e.split(" ");return t=updateDigits(t),t=updateFirstTwoToM(t),t=updateCM(t),t=updateMs(t),t=updateM(t),t=updateMM(t),e=summAll(t)}function updateDigits(e){for(var t=0;t<e.length;t++)"ноль"===e[t]&&(e[t]="0"),"раз"===e[t]&&(e[t]="1"),"один"===e[t]&&(e[t]="1"),"два"===e[t]&&(e[t]="2"),"три"===e[t]&&(e[t]="3"),"четыре"===e[t]&&(e[t]="4"),"пять"===e[t]&&(e[t]="5"),"шесть"===e[t]&&(e[t]="6"),"семь"===e[t]&&(e[t]="7"),"восемь"===e[t]&&(e[t]="8"),"девять"===e[t]&&(e[t]="9");return e}function updateCM(e){for(var t=0;t<e.length;t++)"и"===e[t]&&(e[t]="см"),t>0&&"см"===e[t]&&isNumber(e[t-1])&&(e[t-1]=10*parseInt(e[t-1],10),e.splice(t,1));return e}function updateMM(e){for(var t=0;t<e.length;t++)t>0&&"мм"===e[t]&&isNumber(e[t-1])&&e.splice(t,1);return e}function updateMs(e){for(var t=0;t<e.length;t++)("метр"===e[t]||"1м"===e[0]||"тыща"===e[t]||"тысяча"===e[t])&&(e[t]="м");return e}function updateM(e){for(var t=1;t<e.length;t++)"м"===e[t]&&isNumber(e[t-1])&&(e[t-1]=""+1e3*parseInt(e[t-1],10),e=upadtePostM(e,t),e.splice(t,1));return"м"===e[0]&&(e[0]="1000",e=upadtePostM(e,0)),e}function updateFirstTwoToM(e){return 2==e.length&&isNumber(e[0])&&isNumber(e[1])&&(e[2]=e[1],e[1]="м",parseInt(e[2],10)<100?e[3]="см":e[3]="мм"),e}function upadtePostM(e,t){return t===e.length-2?isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&(e[t+1]=""+10*parseInt(e[t+1],10)):t<e.length-1&&isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&isNumber(e[t+2])&&(e[t+1]=""+10*parseInt(e[t+1],10)),e}function summAll(e){for(var t=0,i=0;i<e.length;i++)t+=parseInt(e[i],10);return""+t}function isNumber(e){return""+parseInt(e,10)===e}function OkResult(e){this.status=!0,this.data=e}function ErrorResult(e,t){this.status=!1,this.code=e,this.message=t,console.error(this.code,this.message)}function doInit(){var e="cvq.nmdp.nuancemobility.net";speechKit.initialize("Credentials",e,443,!1,function(e){printResult(e)},function(e){printResult(e)})}function doCleanup(){speechKit.cleanup(function(e){printResult(e)},function(e){printResult(e)})}function startRecognition(e,t,i){function r(){console.log("FORCE STOP"+s),s===!0&&(console.log("FORCE STOP"),o())}function o(){speechKit.stopRecognition(function(e){n(e)},function(e){console.log(e)})}function n(e){"RecoVolumeUpdate"==e.event?(console.log("RecoVolumeUpdate"),t&&t(e.volumeLevel)):a(e)}function a(t){return console.log("parseAndCallback"+t.event),void 0!=t.results&&t.results.length>0?(e(t.results[0].value),void(s=!1)):"RecoStarted"!=t.event?(e("0"),void(s=!1)):void 0}var s=!0,l=i;console.log("Before startRecognition"),speechKit.startRecognition("dictation",l,function(e){n(e)},function(e){n(e)}),console.log("After startRecognition");setTimeout(r,5e3)}function stopRecognition(){speechKit.stopRecognition(function(e){printRecoResult(e)},function(e){console.log(e)})}function getResult(){speechKit.getResults(function(e){printResult(e)},function(e){console.log("getResult"+e)})}function printResult(e){console.log("printResult "+e.event)}function playTTS(e,t){function i(e){console.log("printTTSResult "+JSON.stringify(e))}if(e.length>0){console.log("Playing TTS");var r=(document.getElementById("tts-language"),t);speechKit.playTTS(e,r,null,function(e){i(e)},function(e){i(e)})}}var isDevice=/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(window.navigator.userAgent)?1:0;!function(){function e(e,t,i,r,o,n,a,s,l){e.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl as loginPage",title:"Login"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl as mainPage",title:"Main"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl as settingsPage",title:"Settings"}).when("/change-pass",{templateUrl:"views/change-pass.html",controller:"ChangePassCtrl as passwordPage",title:"Change Pass"}).when("/change-lang",{templateUrl:"views/change-lang.html",controller:"ChangeLangCtrl as languagePage",title:"Change Language"}).when("/location",{templateUrl:"views/location.html",controller:"LocationCtrl as locationPage",title:"Location"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl as historyPage",title:"History"}).when("/cart",{templateUrl:"views/cart.html",controller:"CartCtrl as cartPage",title:"Cart"}).when("/design",{templateUrl:"views/design.html",controller:"DesignCtrl as designPage",title:"Design"}).otherwise({redirectTo:"/"}),i.translations("ru",o),i.translations("uk",r),i.translations("en",n),i.translations("de",a),i.translations("ro",s),i.translations("it",l),i.preferredLanguage("en").fallbackLanguage("en")}e.$inject=["$routeProvider","$locationProvider","$translateProvider","ukrainianDictionary","russianDictionary","englishDictionary","germanDictionary","romanianDictionary","italianDictionary"],/(chrome|Chromium|safari|firefox|Opera|Yandex|internet explorer|Seamonkey)/i.test(window.navigator.userAgent)&&(isDevice=0),isDevice&&(window.PhonegapApp={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){doInit(),angular.element(document).ready(function(){angular.bootstrap(document,["BauVoiceApp","LoginModule"])})}},PhonegapApp.initialize()),angular.module("BauVoiceApp",["ngRoute","pascalprecht.translate","ngTouch","ngCordova","swipe","LoginModule","MainModule","DesignModule","CartModule","HistoryModule","SettingsModule"]).config(e),angular.module("LoginModule",[]),angular.module("MainModule",[]),angular.module("DesignModule",[]),angular.module("CartModule",[]),angular.module("HistoryModule",[]),angular.module("SettingsModule",[])}(),function(){angular.module("CartModule").controller("CartCtrl",["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor","CartStor","CartServ","CartMenuServ",function(e,t,i,r,o,n,a,s,l){function d(e){a.cart.allAddElements[e].length>0&&(m.config.detailProductIndex=e,m.config.isAddElementDetail=!0)}function c(){m.config.isAddElementDetail=!1}function u(){m.config.isCartLightView=!m.config.isCartLightView}function p(e){var t=e+1;m.config.isProductComment=m.config.isProductComment===t?0:t}function _(e){e?(m.config.isShowDiscInput=0,m.config.isShowDiscInputAdd=1):(m.config.isShowDiscInput=1,m.config.isShowDiscInputAdd=0)}function E(e){13===e.which&&l.closeDiscountBlock()}var m=this;m.constants=t,m.G=i,m.O=r,m.U=n,m.C=a,m.config={currDisConstr:0,isAddElementDetail:0,isCartLightView:0,detailProductIndex:0,isShowDiscInput:0,isShowDiscInputAdd:0,isProductComment:0,element:e("translate")("add_elements.ELEMENT"),elementa:e("translate")("add_elements.ELEMENTA"),elements:e("translate")("add_elements.ELEMENTS"),DELAY_START:t.STEP,typing:"on"},m.ALL_ADD_ELEMENTS=e("translate")("cart.ALL_ADD_ELEMENTS"),m.ADD_ORDER=e("translate")("cart.ADD_ORDER"),m.LETTER_M=e("translate")("common_words.LETTER_M"),m.HEATCOEF_VAL=e("translate")("mainpage.HEATCOEF_VAL"),m.MM=e("translate")("mainpage.MM"),m.CONFIGMENU_SIZING=e("translate")("mainpage.CONFIGMENU_SIZING"),m.CONFIGMENU_PROFILE=e("translate")("mainpage.CONFIGMENU_PROFILE"),m.CONFIGMENU_GLASS=e("translate")("mainpage.CONFIGMENU_GLASS"),m.CONFIGMENU_HARDWARE=e("translate")("mainpage.CONFIGMENU_HARDWARE"),m.CONFIGMENU_LAMINATION_TYPE=e("translate")("mainpage.CONFIGMENU_LAMINATION_TYPE"),m.CONFIGMENU_LAMINATION=e("translate")("mainpage.CONFIGMENU_LAMINATION"),m.CONFIGMENU_ADDITIONAL=e("translate")("mainpage.CONFIGMENU_ADDITIONAL"),m.PRODUCT_QTY=e("translate")("cart.PRODUCT_QTY"),m.ORDER_COMMENT=e("translate")("cart.ORDER_COMMENT"),m.LIGHT_VIEW=e("translate")("cart.LIGHT_VIEW"),m.DISCOUNT_SELECT=e("translate")("cart.DISCOUNT_SELECT"),m.MAX=e("translate")("common_words.MAX"),m.DISCOUNT_WINDOW=e("translate")("cart.DISCOUNT_WINDOW"),m.DISCOUNT_ADDELEM=e("translate")("cart.DISCOUNT_ADDELEM"),m.DISCOUNT=e("translate")("cart.DISCOUNT"),m.DISCOUNT_WITHOUT=e("translate")("cart.DISCOUNT_WITHOUT"),m.DISCOUNT_WITH=e("translate")("cart.DISCOUNT_WITH"),m.FULL_VIEW=e("translate")("cart.FULL_VIEW"),m.ADDELEMENTS_EDIT_LIST=e("translate")("cart.ADDELEMENTS_EDIT_LIST"),m.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),m.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),m.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),m.ADDELEMENTS_PRODUCT_COST=e("translate")("cart.ADDELEMENTS_PRODUCT_COST"),m.GRID=e("translate")("add_elements.GRID"),m.VISOR=e("translate")("add_elements.VISOR"),m.SPILLWAY=e("translate")("add_elements.SPILLWAY"),m.OUTSIDE=e("translate")("add_elements.OUTSIDE"),m.LOUVERS=e("translate")("add_elements.LOUVERS"),m.INSIDE=e("translate")("add_elements.INSIDE"),m.CONNECTORS=e("translate")("add_elements.CONNECTORS"),m.FAN=e("translate")("add_elements.FAN"),m.WINDOWSILL=e("translate")("add_elements.WINDOWSILL"),m.HANDLEL=e("translate")("add_elements.HANDLEL"),m.OTHERS=e("translate")("add_elements.OTHERS"),m.NAME_LABEL=e("translate")("add_elements.NAME_LABEL"),m.TOTAL_PRICE_TXT=e("translate")("add_elements.TOTAL_PRICE_TXT"),m.LINK_BETWEEN_COUPLE=e("translate")("cart.LINK_BETWEEN_COUPLE"),m.LINK_BETWEEN_ALL=e("translate")("cart.LINK_BETWEEN_ALL"),i.global.currOpenPage="cart",i.global.productEditNumber=0,l.joinAllAddElements(),l.calculateOrderPrice(),"main"===i.global.prevOpenPage&&(o.product=o.setDefaultProduct()),i.global.orderEditNumber||(a.cart.customer.customer_location=r.order.customer_location),m.decreaseProductQty=s.decreaseProductQty,m.increaseProductQty=s.increaseProductQty,m.addNewProductInOrder=s.addNewProductInOrder,m.clickDeleteProduct=s.clickDeleteProduct,m.editProduct=s.editProduct,m.showAddElementDetail=d,m.closeAddElementDetail=c,m.viewSwitching=u,m.switchProductComment=p,m.showAllAddElements=s.showAllAddElements,m.openDiscountBlock=l.openDiscountBlock,m.closeDiscountBlock=l.closeDiscountBlock,m.approveNewDisc=l.approveNewDisc,m.openDiscInput=_,m.pressEnterInDisc=E}])}(),function(){angular.module("SettingsModule").controller("ChangeLangCtrl",["$location","$translate","$timeout","globalConstants","GlobalStor","UserStor","NavMenuServ",function(e,t,i,r,o,n,a){function s(s){t.use(r.languages[s].label),n.userInfo.langLabel=r.languages[s].label,n.userInfo.langName=r.languages[s].name,o.global.isVoiceHelper&&(o.global.voiceHelperLanguage=a.setLanguageVoiceHelper()),i(function(){e.path("/main")},200)}function l(){e.path("/settings")}var d=this;d.constants=r,d.U=n,d.config={DELAY_START:r.STEP,typing:"on"},d.switchLang=s,d.gotoSettingsPage=l}])}(),function(){angular.module("SettingsModule").controller("ChangePassCtrl",["$filter","globalConstants","SettingServ","UserStor","localDB",function(e,t,i,r,o){function n(){l.config.oldPassword&&r.userInfo.password==o.md5(l.config.oldPassword)&&l.config.newPassword&&l.config.confirmPassword&&l.config.newPassword===l.config.confirmPassword?(l.config.isErrorPassword=0,r.userInfo.password=o.md5(l.config.newPassword),o.updateLocalServerDBs(o.tablesLocalDB.users.tableName,r.userInfo.id,{password:r.userInfo.password}).then(function(){l.config.newPassword=l.config.confirmPassword="",i.gotoSettingsPage()})):l.config.oldPassword&&r.userInfo.password==o.md5(l.config.oldPassword)?l.config.isErrorPassword=1:l.config.isErrorOldPassword=1}function a(){l.config.isErrorPassword=0}function s(){l.config.isErrorOldPassword=0}var l=this;l.U=r,l.consts=t,l.config={DELAY_START:t.STEP,oldPassword:0,newPassword:0,confirmPassword:0,isErrorPassword:0,isErrorOldPassword:0,typing:"on"},l.WRONG_LOGIN=e("translate")("login.WRONG_LOGIN"),l.NO_CONFIRM_PASS=e("translate")("settings.NO_CONFIRM_PASS"),l.CHANGE_PASSWORD=e("translate")("settings.CHANGE_PASSWORD"),l.SAVE=e("translate")("settings.SAVE"),l.CURRENT_PASSWORD=e("translate")("settings.CURRENT_PASSWORD"),l.NEW_PASSWORD=e("translate")("settings.NEW_PASSWORD"),l.CONFIRM_PASSWORD=e("translate")("settings.CONFIRM_PASSWORD"),l.saveNewPassword=n,l.gotoSettingsPage=i.gotoSettingsPage,l.checkError=a,l.checkErrorOld=s}])}(),function(){angular.module("DesignModule").controller("DesignCtrl",["$filter","$timeout","globalConstants","DesignServ","GlobalStor","ProductStor","DesignStor",function(e,t,i,r,o,n,a){function s(){a.design.activeMenuItem=0,a.design.activeSubMenuItem=0,a.design.isDropSubMenu=0}function l(){D.config.isDesignError=1,a.design.activeMenuItem=0,a.design.activeSubMenuItem=0,t(function(){D.config.isDesignError=0},800)}function d(e){if(a.design.activeSubMenuItem=e,!a.design.selectedGlass.length){var t=d3.selectAll("#tamlateSVG .glass");a.design.selectedGlass=t[0],t.classed("glass-active",!0)}}function c(e,t){t.preventDefault();var i,o=1,n=a.design.selectedGlass.length;if(1===e)for(s(),i=0;n>i;i+=1)r.deleteSash(a.design.selectedGlass[i]);else if((2===e||6===e||8===e)&&(a.design.isDropSubMenu===e?a.design.isDropSubMenu=0:(a.design.isDropSubMenu=e,o=0)),o)for(s(),i=0;n>i;i+=1)r.createSash(e,a.design.selectedGlass[i])}function u(e){var t=d3.selectAll("#tamlateSVG .corner_mark");t[0].length?(a.design.activeSubMenuItem=e,t.transition().duration(300).ease("linear").attr("r",50),a.design.selectedCorner=t[0],t.on("click",function(){r.hideCornerMarks();var e=d3.select(this).transition().duration(300).ease("linear").attr("r",50);a.design.selectedCorner.push(e[0][0])})):l()}function p(e,t){t.preventDefault(),s(),D.config.isTest=1,r.hideCornerMarks()}function _(e){var t=d3.selectAll("#tamlateSVG .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});if(t.length){if(a.design.activeSubMenuItem=e,!a.design.selectedArc.length){var i=d3.selectAll(t);a.design.selectedArc=i[0],i.classed("active_svg",!0)}}else l()}function E(e,t){t.preventDefault(),s(),D.config.isTest=1,r.deselectAllArc()}function m(e,i){i.preventDefault();var o,n=1,l=a.design.selectedImpost.length;if(1===e){if(s(),l){for(o=0;l>o;o+=1)r.deleteImpost(a.design.selectedImpost[o]);t(function(){a.design.isImpostDelete=0},300)}}else if(2===e||3===e){if((4===e||8===e||12===e)&&(a.design.isDropSubMenu===e?a.design.isDropSubMenu=0:(a.design.isDropSubMenu=e,n=0)),n)if(s(),l)r.deselectAllImpost();else{var d=a.design.selectedGlass.length;if(d)for(o=0;d>o;o+=1)r.createImpost(e,a.design.selectedGlass[o])}}else s(),D.config.isTest=1,r.deselectAllGlass(),r.deselectAllImpost()}function g(e){e.preventDefault(),s(),r.initMirror()}function f(e){e.preventDefault(),s(),r.positionAxises()}function T(e){e.preventDefault(),s(),r.positionGlasses()}function h(){D.config.isDoorConfig=1,r.closeSizeCaclulator()}function I(e){if(!D.config.selectedStep2)if(a.design.doorConfig.doorShapeIndex===e)a.design.doorConfig.doorShapeIndex="",D.config.selectedStep1=0;else{switch(a.design.sashShapeList.length=0,e){case 0:case 1:o.global.doorKitsT1.length?a.design.sashShapeList=angular.copy(o.global.doorKitsT1):o.global.doorKitsT2.length&&(a.design.sashShapeList=angular.copy(o.global.doorKitsT2));break;case 2:o.global.doorKitsT1.length&&(a.design.sashShapeList=angular.copy(o.global.doorKitsT1));break;case 3:o.global.doorKitsT2.length&&(a.design.sashShapeList=angular.copy(o.global.doorKitsT2))}a.design.doorConfig.doorShapeIndex=e,D.config.selectedStep1=1}}function A(e){var t;D.config.selectedStep3||(a.design.doorConfig.sashShapeIndex===e?(a.design.doorConfig.sashShapeIndex="",D.config.selectedStep2=0):(a.design.doorConfig.sashShapeIndex=e,D.config.selectedStep2=1),t=o.global.doorHandlers.filter(function(t){return t.profIds.indexOf(a.design.sashShapeList[e].profileId)+1}),a.design.handleShapeList=t)}function S(e){D.config.selectedStep4||(a.design.doorConfig.handleShapeIndex===e?(a.design.doorConfig.handleShapeIndex="",D.config.selectedStep3=0):(a.design.doorConfig.handleShapeIndex=e,D.config.selectedStep3=1),a.design.lockShapeList=o.global.doorLocks[e])}function N(e){a.design.doorConfig.lockShapeIndex===e?(a.design.doorConfig.lockShapeIndex="",D.config.selectedStep4=0):(a.design.doorConfig.lockShapeIndex=e,D.config.selectedStep4=1)}function L(){D.config.selectedStep3?(D.config.selectedStep3=0,D.config.selectedStep4=0,a.design.doorConfig.lockShapeIndex="",a.design.doorConfig.handleShapeIndex=""):D.config.selectedStep2?(D.config.selectedStep2=0,a.design.doorConfig.sashShapeIndex=""):D.config.selectedStep1?(D.config.selectedStep1=0,a.design.doorConfig.doorShapeIndex=""):(D.config.isDoorConfig=0,a.design.doorConfig=a.setDefaultDoor())}function O(){r.setNewDoorParamValue(a.design),r.rebuildSVGTemplate(),D.config.isDoorConfig=0}function y(e){if(a.design.tempSize.length)r.closeSizeCaclulator();else if(a.design.activeMenuItem=a.design.activeMenuItem===e?0:e,a.design.isDropSubMenu=0,r.hideCornerMarks(),r.deselectAllImpost(),4!==e&&r.deselectAllArc(),r.hideSizeTools(),a.design.activeMenuItem)switch(a.design.activeMenuItem){case 1:d(e),t(function(){a.design.isDropSubMenu=2},b),t(function(){a.design.isDropSubMenu=6},v),t(function(){a.design.isDropSubMenu=8},P),t(function(){a.design.isDropSubMenu=0},M);break;case 2:r.deselectAllGlass(),u(e);break;case 3:d(e),t(function(){a.design.isDropSubMenu=4},b),t(function(){a.design.isDropSubMenu=8},v),t(function(){a.design.isDropSubMenu=12},P),t(function(){a.design.isDropSubMenu=0},M);break;case 4:r.deselectAllGlass(),_(e);break;case 5:a.design.activeSubMenuItem=e}else a.design.activeSubMenuItem=0,r.deselectAllGlass(),r.deselectAllArc(),t(function(){a.design.isImpostDelete=0},300)}function C(){o.global.activePanel?(o.global.activePanel=0,r.initAllImposts(),r.initAllGlass(),r.initAllArcs(),r.initAllDimension()):o.global.activePanel=1}function R(){D.config.isTest=0,a.design.isDimExtra=0,a.design.isSquareExtra=0}var D=this,b=300,v=600,P=900,M=1200;D.constants=i,D.G=o,D.P=n,D.D=a,o.global.currOpenPage="design",D.config={isDesignError:0,isTest:0,isDoorConfig:0,selectedStep1:0,selectedStep2:0,selectedStep3:0,selectedStep4:0,DELAY_SHOW_FIGURE_ITEM:1e3,typing:"on"},D.IMPOST_SHAPE=e("translate")("design.IMPOST_SHAPE"),D.SASH_SHAPE=e("translate")("design.SASH_SHAPE"),D.ANGEL_SHAPE=e("translate")("design.ANGEL_SHAPE"),D.ARCH_SHAPE=e("translate")("design.ARCH_SHAPE"),D.POSITION_SHAPE=e("translate")("design.POSITION_SHAPE"),D.UNITS_DESCRIP=e("translate")("design.UNITS_DESCRIP"),D.PROJECT_DEFAULT=e("translate")("design.PROJECT_DEFAULT"),D.BACK=e("translate")("common_words.BACK"),D.SAVE=e("translate")("settings.SAVE"),D.CANCEL=e("translate")("add_elements.CANCEL"),D.DOOR_CONFIG_LABEL=e("translate")("design.DOOR_CONFIG_LABEL"),D.DOOR_CONFIG_DESCTIPT=e("translate")("design.DOOR_CONFIG_DESCTIPT"),D.SASH_CONFIG_DESCTIPT=e("translate")("design.SASH_CONFIG_DESCTIPT"),D.HANDLE_CONFIG_DESCTIPT=e("translate")("design.HANDLE_CONFIG_DESCTIPT"),D.LOCK_CONFIG_DESCTIPT=e("translate")("design.LOCK_CONFIG_DESCTIPT"),D.STEP=e("translate")("design.STEP"),D.LABEL_DOOR_TYPE=e("translate")("design.LABEL_DOOR_TYPE"),D.LABEL_SASH_TYPE=e("translate")("design.LABEL_SASH_TYPE"),D.LABEL_HANDLE_TYPE=e("translate")("design.LABEL_HANDLE_TYPE"),D.LABEL_LOCK_TYPE=e("translate")("design.LABEL_LOCK_TYPE"),D.NOT_AVAILABLE=e("translate")("design.NOT_AVAILABLE"),D.DIM_EXTRA=e("translate")("design.DIM_EXTRA"),D.SQUARE_EXTRA=e("translate")("design.SQUARE_EXTRA"),D.ROOM_SELECTION=e("translate")("mainpage.ROOM_SELECTION"),D.TEST_STAGE=e("translate")("design.TEST_STAGE"),D.VOICE_SPEACH=e("translate")("design.VOICE_SPEACH"),r.setDoorConfigDefault(n.product),a.design=a.setDefaultDesign(),r.setDefaultTemplate(),t(function(){r.initAllImposts(),r.initAllGlass(),r.initAllArcs(),r.initAllDimension()},50),D.designSaved=r.designSaved,D.designCancel=r.designCancel,D.selectMenuItem=y,D.setDefaultConstruction=r.setDefaultConstruction,D.showTemplates=C,D.toggleDoorConfig=h,D.selectDoor=I,D.selectSash=A,D.selectHandle=S,D.selectLock=N,D.closeDoorConfig=L,D.saveDoorConfig=O,D.insertSash=c,D.insertCorner=p,D.insertImpost=m,D.insertArc=E,D.initMirror=g,D.positionAxis=f,D.positionGlass=T,D.stepBack=r.stepBack,D.closeAttantion=R}])}(),function(){angular.module("HistoryModule").controller("HistoryCtrl",["$filter","GlobalStor","UserStor","HistoryStor","HistoryServ",function(e,t,i,r,o){var n=this;n.G=t,n.H=r,n.U=i,n.FROM=e("translate")("history.FROM"),n.UNTIL=e("translate")("history.UNTIL"),n.DATE_RANGE=e("translate")("history.DATE_RANGE"),n.ALL_TIME=e("translate")("history.ALL_TIME"),n.SORTING=e("translate")("history.SORTING"),n.NEWEST_FIRST=e("translate")("history.NEWEST_FIRST"),n.NEWEST_LAST=e("translate")("history.NEWEST_LAST"),n.SORT_BY_TYPE=e("translate")("history.SORT_BY_TYPE"),n.SORT_SHOW=e("translate")("history.SORT_SHOW"),n.ALL=e("translate")("common_words.ALL"),n.SORT_SHOW_ACTIVE=e("translate")("history.SORT_SHOW_ACTIVE"),n.SORT_SHOW_WAIT=e("translate")("history.SORT_SHOW_WAIT"),n.SORT_SHOW_DONE=e("translate")("history.SORT_SHOW_DONE"),n.INCLUDED=e("translate")("history.INCLUDED"),n.DELIVERY=e("translate")("cart.DELIVERY"),n.AND=e("translate")("common_words.AND"),n.ASSEMBLING=e("translate")("cart.ASSEMBLING"),n.CLIENT=e("translate")("history.CLIENT"),n.PHONE=e("translate")("history.PHONE"),n.ADDRESS=e("translate")("history.ADDRESS"),n.PAYMENTS=e("translate")("history.PAYMENTS"),n.WAIT_MASTER=e("translate")("history.WAIT_MASTER"),n.ALLPRODUCTS=e("translate")("history.ALLPRODUCTS"),n.ON=e("translate")("history.ON"),n.CHANGE=e("translate")("common_words.CHANGE"),n.BY_YOUR_REQUEST=e("translate")("history.BY_YOUR_REQUEST"),n.NOT_FIND=e("translate")("history.NOT_FIND"),n.DRAFT_VIEW=e("translate")("history.DRAFT_VIEW"),n.DRAFT=e("translate")("history.DRAFT"),n.HISTORY_VIEW=e("translate")("history.HISTORY_VIEW"),t.global.currOpenPage="history",n.createdDate="created",o.downloadOrders(),n.toCurrentCalculation=o.toCurrentCalculation,n.sendOrderToFactory=o.sendOrderToFactory,n.makeOrderCopy=o.makeOrderCopy,n.clickDeleteOrder=o.clickDeleteOrder,n.editOrder=o.editOrder,n.orderPrint=o.orderPrint,n.viewSwitching=o.viewSwitching,n.orderSearching=o.orderSearching,n.orderDateSelecting=o.orderDateSelecting,n.openCalendarScroll=o.openCalendarScroll,n.orderSorting=o.orderSorting,n.sortingInit=o.sortingInit}])}(),function(){angular.module("SettingsModule").controller("LocationCtrl",["localDB","GeneralServ","loginServ","SettingServ","GlobalStor","OrderStor","UserStor",function(e,t,i,r,o,n,a){function s(n){l.userNewLocation=n.fullLocation,a.userInfo.therm_coeff_id?a.userInfo.heatTransfer=t.roundingValue(1/n.heatTransfer):a.userInfo.heatTransfer=n.heatTransfer,"settings"===o.global.currOpenPage?(a.userInfo.city_id=n.cityId,a.userInfo.cityName=n.cityName,a.userInfo.countryId=n.countryId,a.userInfo.fullLocation=n.fullLocation,a.userInfo.climaticZone=n.climaticZone,e.updateLocalServerDBs(e.tablesLocalDB.users.tableName,a.userInfo.id,{city_id:n.cityId})):"main"===o.global.currOpenPage&&i.setUserGeoLocation(n.cityId,n.cityName,n.climaticZone,a.userInfo.heatTransfer,n.fullLocation),o.global.startProgramm=!1,r.closeLocationPage()}var l=this;l.userNewLocation=angular.copy(n.order.customer_location),l.locations=o.global.locations.cities.filter(function(e){return e.countryId===a.userInfo.countryId}),l.closeLocationPage=r.closeLocationPage,l.selectCity=s}])}(),function(){angular.module("LoginModule").controller("LoginCtrl",["$location","$cordovaNetwork","$filter","globalConstants","localDB","loginServ","MainServ","GlobalStor","ProductStor","UserStor",function(e,t,i,r,o,n,a,s,l,d){function c(e){c.list||(c.list=[]);var t,i,r=c.list;for(t=0;t<e.length;t+=1)i=new Image,i.onload=function(){var e=r.indexOf(this);-1!==e&&r.splice(e,1)},r.push(i),i.src=e[t]}function u(){a.saveUserEntry(),a.createOrderData(),a.setCurrDiscounts(),a.setCurrTemplate(),a.prepareTemplates(l.product.construction_type).then(function(){a.prepareMainPage(),a.laminatFiltering(),1===s.global.locations.cities.length&&(n.downloadAllCities(1),s.global.isLoader=0,e.path("/main"))})}function p(){y.isStartImport=1,o.importAllDB(d.userInfo.phone,d.userInfo.device_code).then(function(e){e?(n.downloadAllData().then(function(){u()}),y.isStartImport=0):console.log("Error!")})}function _(e){for(var t,i=e.length;--i>-1;)for(t=s.global.locations.cities.length;--t>-1;)e[i].city_id===s.global.locations.cities[t].cityId&&(e[i].location=s.global.locations.cities[t].fullLocation);return e}function E(){n.setUserLocation(),+d.userInfo.factory_id>0?n.isLocalDBExist().then(function(e){y.isLocalDB=e,y.isLocalDB?n.downloadAllData().then(function(){u()}):p(d.userInfo.factory_id)}):n.collectCityIdsAsCountry().then(function(e){o.importFactories(d.userInfo.phone,d.userInfo.device_code,e).then(function(e){s.global.isLoader=0,e.status?(y.factories=_(e.factories),y.isFactoryId=1):console.log("can not get factories!")})})}function m(e){e.locked?o.cleanLocalDB(o.tablesLocalDB).then(function(t){t&&o.createTablesLocalDB(o.tablesLocalDB).then(function(t){t&&(o.insertRowLocalDB(e,o.tablesLocalDB.users.tableName),angular.extend(d.userInfo,e),o.importLocation(d.userInfo.phone,d.userInfo.device_code).then(function(e){e&&n.prepareLocationToUse().then(function(){E()})}))})}):(s.global.isLoader=0,y.isUserNotActive=1)}function g(){o.importUser(y.user.phone).then(function(e){if(e.status){var t=angular.copy(e.user);console.log("USER!!!!!!!!!!!!",y.user.phone,e);var i=o.md5(y.user.password);i===t.password?m(t):(s.global.isLoader=0,y.isUserPasswordError=1)}else s.global.isLoader=0,y.isUserNotExist=1})}function f(){var t=e.search(),i=["7d537b6746f925b1703aefa9b8a9a4bc","3f5f0c7d46d318e026f9ba60dceffc65","799e078b084c6d57cea0b0d53a7e3008","9aefeef9c7e53f9de9bb36f32649dc3f","a2da6d85764368b24392740020efbc92","ceb60bfed037baaa484bd7b88d274c98","632b3213660804acb71fe045c6e321ed","d11758b674ac02f0fcf128dcc906dbef","04fc711301f3c784d66955d98d399afb","768c1c687efe184ae6dd2420710b8799","f7a5c99c58103f6b65c451efd0f81826","27701bd8dd141b953b94a5c9a44697c0","7f7d5f9f3a660f2b09e3aae62a15e29b","23ff17389acbfd020043268fb49e7048","cd714cc33cfd23e74f414cbb8b9787fe","2959f1aea8db0f7fbba61f0f8474d0ef","a28a19e19b283845c851b4876b97cef4","661e67f8ce5eaf9d63c1b5be6fce1afb","0653e359db756493450c3fb1fc6790b2","ec5fefce8d1d81849b47923d6d1b52c0","d4ccb0f347163d9ee1cd5a106e1ec48b","c500ea6c5baf3deb447be25b90cf5f1c","59a6670111970ede6a77e9b43a5c4787","266021e24dd0bfaaa96f2b5e21d7c800","b8c4b7f74db12fadbe2d979ed93f392b","2482b711a07d1da3efa733aa7014f947","573b8926f015aa477cb6604901b92aea","b54d11c86eb7c8955a50d20f6b3be2f2","3a55b7218a5ca395ac71b3ec9904b6ed","3615d9213b1b3d5fe760901f43a8405f","e50137601a90943ce98b03e90d73272e","d4651afb4e1c749f0bacc7ff5d101982","988a8fa4855bf7ea54057717655d3fc9"],r=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","89324310961","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],n=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","89324310961","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],a=i.length,l=0;if(t.access){for(;a>-1;)a-=1,i[a]===t.access&&(y.user.phone=r[a],y.user.password=n[a],l=1);l?y.user.phone&&y.user.password&&(s.global.isLoader=1,g()):o.importUser(t.access,1).then(function(e){var t=angular.copy(e.user);s.global.isLoader=1,m(t)})}}function T(){y.isOffline=!1}function h(e){y.submitted=1,e.$valid&&(s.global.isLoader=1,y.isOnline?(console.log("IMPORT"),g()):y.isLocalDB?(console.log("OFFLINE"),o.selectLocalDB(o.tablesLocalDB.users.tableName,{phone:y.user.phone}).then(function(e){if(e.length){var t=o.md5(y.user.password);t===e[0].password?e[0].locked?e[0].factory_id>0?(angular.extend(d.userInfo,e[0]),n.prepareLocationToUse().then(function(){n.setUserLocation(),n.downloadAllData().then(function(){u()})})):(s.global.isLoader=0,y.isOffline=1):(s.global.isLoader=0,y.isUserNotActive=1):(s.global.isLoader=0,y.isUserPasswordError=1)}else s.global.isLoader=0,y.isUserNotExist=1})):(s.global.isLoader=0,y.isOffline=1))}function I(){y.user.factoryId>0?y.isOnline?(s.global.isLoader=1,d.userInfo.factory_id=angular.copy(y.user.factoryId),o.updateLocalServerDBs(o.tablesLocalDB.users.tableName,d.userInfo.id,{factory_id:d.userInfo.factory_id}).then(function(){y.isFactoryId=0,p()})):y.isOffline=1:y.isFactoryNotSelect=1}function A(){y.isFactoryNotSelect=0,y.isFactoryId=0,delete y.user.factoryId}function S(){y.isOnline?n.isLocalDBExist().then(function(e){y.isLocalDB=e,y.isLocalDB?(s.global.isLoader=1,n.prepareLocationToUse(1).then(function(){s.global.isLoader=0,y.isRegistration=1})):(s.global.isLoader=1,o.cleanLocalDB(o.tablesLocalDB).then(function(e){e&&o.createTablesLocalDB(o.tablesLocationLocalDB).then(function(e){e&&o.importLocation().then(function(e){e&&n.prepareLocationToUse(1).then(function(){s.global.isLoader=0,y.isRegistration=1})})})})),y.user={}}):y.isOffline=1}function N(){y.user={},y.isRegistration=0}function L(e){y.submitted=!0,e.$valid&&(y.isOnline?(s.global.isLoader=1,o.importUser(y.user.phone).then(function(e){if(e.status)s.global.isLoader=0,y.isUserExist=1;else{var t={name:y.user.name,phone:y.user.phone,email:y.user.mail,cityId:y.user.city.cityId,password:o.md5(y.user.phone)};console.log("CREATE USER!!!!!!!!!!!!",t),o.createUserServer(t),s.global.isLoader=0,y.isSendEmail=1,N()}})):y.isOffline=1)}function O(){y.user.country?y.user.region||delete y.user.city:(delete y.user.region,delete y.user.city)}var y=this;y.G=s,y.consts=r,y.isOnline=1,y.isOffline=0,y.isLocalDB=0,y.isRegistration=0,y.submitted=0,y.isUserExist=0,y.isUserNotExist=0,y.isUserPasswordError=0,y.isSendEmail=0,y.isUserNotActive=0,y.isFactoryId=0,y.isFactoryNotSelect=0,y.isStartImport=0,y.user={},y.factories=0,y.OFFLINE=i("translate")("login.OFFLINE"),y.OK=i("translate")("common_words.OK"),y.USER_CHECK_EMAIL=i("translate")("login.USER_CHECK_EMAIL"),y.USER_NOT_EXIST=i("translate")("login.USER_NOT_EXIST"),y.USER_NOT_ACTIVE=i("translate")("login.USER_NOT_ACTIVE"),y.USER_PASSWORD_ERROR=i("translate")("login.USER_PASSWORD_ERROR"),y.IMPORT_DB=i("translate")("login.IMPORT_DB"),y.LOGIN=i("translate")("login.LOGIN"),y.PASSWORD=i("translate")("login.PASSWORD"),y.EMPTY_FIELD=i("translate")("login.EMPTY_FIELD"),y.WRONG_LOGIN=i("translate")("login.WRONG_LOGIN"),y.ENTER=i("translate")("login.ENTER"),y.REGISTRATION=i("translate")("login.REGISTRATION"),y.SELECT_FACTORY=i("translate")("login.SELECT_FACTORY"),y.SELECT_PRODUCER=i("translate")("login.SELECT_PRODUCER"),y.SELECT=i("translate")("common_words.SELECT"),y.USER_EXIST=i("translate")("login.USER_EXIST"),y.CLIENT_NAME=i("translate")("cart.CLIENT_NAME"),y.WRONG_NAME=i("translate")("login.WRONG_NAME"),y.SHORT_NAME=i("translate")("login.SHORT_NAME"),y.SELECT_COUNTRY=i("translate")("login.SELECT_COUNTRY"),y.SELECT_REGION=i("translate")("login.SELECT_REGION"),y.SELECT_CITY=i("translate")("login.SELECT_CITY"),y.CLIENT_EMAIL=i("translate")("cart.CLIENT_EMAIL"),y.WRONG_EMAIL=i("translate")("cart.WRONG_EMAIL"),c(["img/room/1.png","img/room/4.png","img/room/6.png","img/room/7.png","img/room/8.png","img/room/9.png","img/room/10.png","img/room/11.png","img/room/12.png","img/room/26.png","img/room/121.png","img/room/122.png","img/room/123.png","img/room/fon.gif","img/room/33.gif","img/room/333.gif"]),y.switchRegistration=S,y.closeRegistration=N,y.enterForm=h,y.registrForm=L,y.selectLocation=O,y.selectFactory=I,y.closeFactoryDialog=A,y.closeOfflineAlert=T,n.getDeviceLanguage(),y.isOnline&&(n.initExport(),f())}])}(),function(){angular.module("MainModule").controller("MainCtrl",["$location","$timeout","globalConstants","GeneralServ","loginServ","MainServ","SVGServ","DesignServ","AddElementMenuServ","GlobalStor","ProductStor","DesignStor","UserStor","AuxStor",function(e,t,i,r,o,n,a,s,l,d,c,u,p,_){function E(){c.product.is_addelem_only||((d.global.isQtyCalculator||d.global.isSizeCalculator)&&l.finishCalculators(),d.global.showRoomSelectorDialog=0,d.global.configMenuTips=0,d.global.isShowCommentBlock=0,d.global.isTemplateTypeMenu=0,r.stopStartProg(),n.setDefaultAuxParam(),d.global.showGlassSelectorDialog&&s.closeGlassSelectorDialog(1),
d.global.activePanel=0,u.design.isGlassExtra=0,e.path("/design"))}var m=this;m.G=d,m.P=c,m.U=p,m.A=_,m.constants=i,m.D=u,d.global.currOpenPage="main",d.global.isReport=0,m.config={isDesignError:0,DELAY_SHOW_FIGURE_ITEM:1e3,typing:"on"},d.global.startProgramm&&s.setDefaultTemplate(),d.global.productEditNumber&&(console.log("EDIT!!!!"),console.log("product = ",c.product),a.createSVGTemplate(c.product.template_source,c.product.profileDepths).then(function(e){c.product.template=e})),m.goToEditTemplate=E,m.setDefaultConstruction=s.setDefaultConstruction}])}(),function(){angular.module("MainModule").controller("addElementMenuCtrl",["$timeout","$filter","globalConstants","GlobalStor","ProductStor","UserStor","AuxStor","MainServ","AddElementMenuServ","AddElementsServ","DesignServ",function(e,t,i,r,o,n,a,s,l,d,c){function u(){a.aux.isTabFrame=!a.aux.isTabFrame}function p(t,i,r){var o;a.aux.isAddElement===t+"-"+i?a.aux.isAddElement=!1:a.aux.isAddElement===!1?(o=$(r.target).offset(),E.coordinats={top:o.top-17},e(function(){l.getAddElementPrice(t,i)},500)):(a.aux.isAddElement=!1,e(function(){o=$(r.target).offset(),E.coordinats={top:o.top-17}},500),e(function(){l.getAddElementPrice(t,i)},1e3))}function _(e,t,i){(r.global.isQtyCalculator||r.global.isSizeCalculator)&&l.finishCalculators(),"main"===r.global.currOpenPage&&1===a.aux.isFocusedAddElement?o.product.is_addelem_only?l.chooseAddElement(e,t):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,a.aux.isAddElement=e+"-"+t,c.initAllGlassXGrid()):a.aux.isAddElementListView?p(e,t,i):l.chooseAddElement(e,t)}var E=this;E.constants=i,E.G=r,E.P=o,E.U=n,E.A=a,E.config={DELAY_START:i.STEP,DELAY_SHOW_ELEMENTS_MENU:10*i.STEP,typing:"on"},E.TIP=t("translate")("add_elements_menu.TIP"),E.EMPTY_ELEMENT=t("translate")("add_elements_menu.EMPTY_ELEMENT"),E.NAME_LABEL=t("translate")("add_elements.NAME_LABEL"),E.QTY_LABEL=t("translate")("add_elements.QTY_LABEL"),E.WIDTH_LABEL=t("translate")("add_elements.WIDTH_LABEL"),E.HEIGHT_LABEL=t("translate")("add_elements.HEIGHT_LABEL"),E.ADD=t("translate")("add_elements.ADD"),E.TAB_NAME_SIMPLE_FRAME=t("translate")("add_elements_menu.TAB_NAME_SIMPLE_FRAME"),E.TAB_NAME_HARD_FRAME=t("translate")("add_elements_menu.TAB_NAME_HARD_FRAME"),E.TAB_EMPTY_EXPLAIN=t("translate")("add_elements_menu.TAB_EMPTY_EXPLAIN"),E.closeAddElementsMenu=l.closeAddElementsMenu,E.selectAddElement=_,E.chooseAddElement=l.chooseAddElement,E.chooseAddElementList=l.chooseAddElementList,E.deleteAddElement=l.deleteAddElement,E.showFrameTabs=u,E.initAddElementTools=d.initAddElementTools,E.showInfoBox=s.showInfoBox,E.closeQtyCaclulator=l.closeQtyCaclulator,E.setValueQty=l.setValueQty,E.pressCulculator=l.pressCulculator}])}(),function(){angular.module("CartModule").controller("CartMenuCtrl",["$filter","globalConstants","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ",function(e,t,i,r,o,n,a){function s(e){u.config.activeMenuItem=u.config.activeMenuItem===e?0:e}function l(){r.order.is_instalment=0,r.order.instalment_id=0,r.order.selectedInstalmentPeriod=0,r.order.selectedInstalmentPercent=0,u.config.activeMenuItem=0}function d(){r.order.products.length&&(n.cart.isMasterDialog=1)}function c(){r.order.products.length&&(r.order.is_instalment?n.cart.isCreditDialog=1:n.cart.isOrderDialog=1)}var u=this;u.G=i,u.U=o,u.O=r,u.C=n,u.config={activeMenuItem:!1,month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL"),DELAY_START:t.STEP,typing:"on"},u.DELIVERY=e("translate")("cart.DELIVERY"),u.SELF_EXPORT=e("translate")("cart.SELF_EXPORT"),u.FLOOR=e("translate")("cart.FLOOR"),u.ASSEMBLING=e("translate")("cart.ASSEMBLING"),u.WITHOUT_ASSEMBLING=e("translate")("cart.WITHOUT_ASSEMBLING"),u.FREE=e("translate")("cart.FREE"),u.PAYMENT_BY_INSTALMENTS=e("translate")("cart.PAYMENT_BY_INSTALMENTS"),u.WITHOUT_INSTALMENTS=e("translate")("cart.WITHOUT_INSTALMENTS"),u.DELIVERY_DATE=e("translate")("cart.DELIVERY_DATE"),u.FIRST_PAYMENT_LABEL=e("translate")("cart.FIRST_PAYMENT_LABEL"),u.DATE_DELIVERY_LABEL=e("translate")("cart.DATE_DELIVERY_LABEL"),u.MONTHLY_PAYMENT_LABEL=e("translate")("cart.MONTHLY_PAYMENT_LABEL"),u.TOTAL_PRICE_LABEL=e("translate")("cart.TOTAL_PRICE_LABEL"),u.ORDER=e("translate")("cart.ORDER"),u.MEASURE=e("translate")("cart.MEASURE"),u.selectMenuItem=s,u.closeInstalment=l,u.selectFloorPrice=a.selectFloorPrice,u.selectAssembling=a.selectAssembling,u.selectInstalment=a.selectInstalment,u.openMasterDialog=d,u.openOrderDialog=c,u.swipeDiscountBlock=a.swipeDiscountBlock}])}(),function(){angular.module("MainModule").controller("ConfigMenuCtrl",["$location","$filter","globalConstants","GeneralServ","MainServ","AddElementMenuServ","DesignServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,o,n,a,s,l,d,c,u){function p(t){(s.global.isQtyCalculator||s.global.isSizeCalculator)&&n.finishCalculators(),s.global.showRoomSelectorDialog=0,s.global.configMenuTips=0,s.global.isShowCommentBlock=0,s.global.isTemplateTypeMenu=0,r.stopStartProg(),o.setDefaultAuxParam(),s.global.showGlassSelectorDialog&&a.closeGlassSelectorDialog(1),1===t?(s.global.activePanel=0,c.design.isGlassExtra=0,e.path("/design")):4===d.product.construction_type?(3===t||6===t)&&(s.global.activePanel=s.global.activePanel===t?0:t):s.global.activePanel=s.global.activePanel===t?0:t}function _(){o.inputProductInOrder()&&o.goToCart()}function E(){var e=m.config.TOOLTIP.length;s.global.configMenuTips+=1,s.global.configMenuTips===e&&(s.global.configMenuTips=0)}var m=this;m.constants=i,m.G=s,m.O=l,m.P=d,m.U=u,m.config={TOOLTIP:["",t("translate")("mainpage.TEMPLATE_TIP"),t("translate")("mainpage.PROFILE_TIP"),t("translate")("mainpage.GLASS_TIP")],DELAY_START:i.STEP,DELAY_SHOW_CONFIG_LIST:5*i.STEP,DELAY_SHOW_FOOTER:5*i.STEP,DELAY_TYPE_ITEM_TITLE:10*i.STEP,DELAY_SHOW_U_COEFF:20*i.STEP,DELAY_GO_TO_CART:2*i.STEP,typing:"on"},m.CONFIGMENU_CONFIGURATION=t("translate")("mainpage.CONFIGMENU_CONFIGURATION"),m.CONFIGMENU_SIZING=t("translate")("mainpage.CONFIGMENU_SIZING"),m.MM=t("translate")("mainpage.MM"),m.CONFIGMENU_PROFILE=t("translate")("mainpage.CONFIGMENU_PROFILE"),m.CONFIGMENU_GLASS=t("translate")("mainpage.CONFIGMENU_GLASS"),m.CONFIGMENU_HARDWARE=t("translate")("mainpage.CONFIGMENU_HARDWARE"),m.CONFIGMENU_LAMINATION=t("translate")("mainpage.CONFIGMENU_LAMINATION"),m.CONFIGMENU_LAMINATION_TYPE=t("translate")("mainpage.CONFIGMENU_LAMINATION_TYPE"),m.CONFIGMENU_ADDITIONAL=t("translate")("mainpage.CONFIGMENU_ADDITIONAL"),m.CONFIGMENU_NO_ADDELEMENTS=t("translate")("mainpage.CONFIGMENU_NO_ADDELEMENTS"),m.CONFIGMENU_IN_CART=t("translate")("mainpage.CONFIGMENU_IN_CART"),m.SAVE=t("translate")("settings.SAVE"),m.LETTER_M=t("translate")("common_words.LETTER_M"),m.HEATCOEF_VAL=t("translate")("mainpage.HEATCOEF_VAL"),m.selectConfigPanel=p,m.inputProductInOrder=_,m.showNextTip=E}])}(),function(){angular.module("MainModule").controller("NavMenuCtrl",["$location","$window","$filter","globalConstants","GeneralServ","NavMenuServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,o,n,a,s,l,d){function c(t){switch(p.activeMenuItem=p.activeMenuItem===t?0:t,t){case 1:o.stopStartProg(),e.path("/location");break;case 2:n.getCurrentGeolocation(),p.activeMenuItem=0;break;case 3:o.setPreviosPage(),e.path("/main");break;case 4:e.path("/cart");break;case 5:n.createAddElementsProduct();break;case 6:o.stopStartProg(),n.gotoHistoryPage();break;case 7:o.setPreviosPage(),e.path("/settings");break;case 8:p.activeMenuItem=0,d.userInfo.factoryLink&&d.userInfo.factoryLink.length&&o.goToLink(d.userInfo.factoryLink);break;case 9:n.switchVoiceHelper()}}function u(){p.activeMenuItem=0,n.clickNewProject()}var p=this;p.G=a,p.O=s,p.P=l,p.activeMenuItem=0,p.NAVMENU_GEOLOCATION=i("translate")("mainpage.NAVMENU_GEOLOCATION"),p.NAVMENU_CURRENT_GEOLOCATION=i("translate")("mainpage.NAVMENU_CURRENT_GEOLOCATION"),p.NAVMENU_CALCULATIONS=i("translate")("mainpage.NAVMENU_CALCULATIONS"),p.NAVMENU_CURRENT_CALCULATION=i("translate")("mainpage.NAVMENU_CURRENT_CALCULATION"),p.NAVMENU_CART=i("translate")("mainpage.NAVMENU_CART"),p.NAVMENU_ADD_ELEMENTS=i("translate")("mainpage.NAVMENU_ADD_ELEMENTS"),p.NAVMENU_ALL_CALCULATIONS=i("translate")("mainpage.NAVMENU_ALL_CALCULATIONS"),p.NAVMENU_APPENDIX=i("translate")("mainpage.NAVMENU_APPENDIX"),p.NAVMENU_SETTINGS=i("translate")("mainpage.NAVMENU_SETTINGS"),p.NAVMENU_MORE_INFO=i("translate")("mainpage.NAVMENU_MORE_INFO"),p.NAVMENU_VOICE_HELPER=i("translate")("mainpage.NAVMENU_VOICE_HELPER"),p.NAVMENU_NEW_CALC=i("translate")("mainpage.NAVMENU_NEW_CALC"),p.selectMenuItem=c,p.clickNewProject=u}])}(),function(){angular.module("CartModule").controller("AddElemCartCtrl",["globalConstants","GeneralServ","CartServ","CartMenuServ","OrderStor","CartStor","AuxStor",function(e,t,i,r,o,n,a){function s(){n.cart.isAllAddElems=0,n.cart.allAddElemsOrder.length=0,n.cart.addElemsOrderPriceTOTAL=0,n.cart.isSelectedProduct=0,a.aux.showAddElementsMenu=0,a.aux.addElementGroups.length=0,a.aux.searchingWord=""}function l(e){for(var t,i,r,n=o.order.products,a=n.length;--a>-1;)for(r=n[a].chosenAddElements,t=r.length;--t>-1;)if(i=r[t].length)if(e)for(;--i>-1;)r[t][i].id===e.id&&r[t][i].element_width===e.element_width&&r[t][i].element_height===e.element_height&&r[t].splice(i,1);else r[t].length=0}function d(e){l(e),r.joinAllAddElements(),n.cart.isExistAddElems?i.showAllAddElements():s(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function c(){l(),i.calculateAddElemsProductsPrice(),r.calculateOrderPrice(),r.joinAllAddElements(),s()}function u(){var e,t,i,r,a,s,l,d=n.cart.allAddElements.length;for(S.config.addElemUnitProducts.length=0,i=0;d>i;i+=1)for(l=n.cart.allAddElements[i],e=l.length,r=0;e>r;r+=1)if(l[r].id===S.config.selectedAddElemUnit.id&&l[r].element_width===S.config.selectedAddElemUnit.element_width&&l[r].element_height===S.config.selectedAddElemUnit.element_height)if(o.order.products[i].is_addelem_only)t={productIndex:i,is_addelem_only:o.order.products[i].is_addelem_only,name:l[r].name,element_width:l[r].element_width,element_height:l[r].element_height,element_qty:l[r].element_qty,elementPriceDis:l[r].elementPriceDis},S.config.addElemUnitProducts.push(t);else if(t={productIndex:i,is_addelem_only:o.order.products[i].is_addelem_only,element_qty:l[r].element_qty/o.order.products[i].product_qty},o.order.products[i].product_qty>1){for(a=[],s=+o.order.products[i].product_qty;--s>-1;)a.push(t);S.config.addElemUnitProducts.push(a)}else S.config.addElemUnitProducts.push(t)}function p(e){S.config.selectedAddElemUnit=e,u(),S.config.isAddElemUnitDetail=1}function _(){S.config.isAddElemUnitDetail=0,S.config.selectedAddElemUnit={id:0},S.config.isLinkExplodeMenu=0}function E(e){for(var t,i=o.order.products[e].chosenAddElements,r=i.length,n=S.config.selectedAddElemUnit;--r>-1;)if(t=i[r].length)for(;--t>-1;)i[r][t].id===n.id&&i[r][t].element_width===n.element_width&&i[r][t].element_height===n.element_height&&i[r].splice(t,1)}function m(){for(var e=n.cart.allAddElemsOrder,t=S.config.selectedAddElemUnit,i=e.length,r=1;--i>-1;)e[i].id===t.id&&(t.element_qty=angular.copy(e[i].element_qty),r-=1);r&&_()}function g(e,t){t?i.decreaseProductQty(e[0].productIndex):(E(e),r.joinAllAddElements()),n.cart.isExistAddElems?(i.showAllAddElements(),u(),m()):(_(),s()),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function f(e,t){S.config.isLinkExplodeMenu=!S.config.isLinkExplodeMenu,S.config.explodeMenuTop=t.center.y-50,S.config.explodeMenuLeft=t.center.x-30}function T(e,t){var n=d3.max(o.order.products.map(function(e){return e.product_id})),a=angular.copy(o.order.products[e[0].productIndex]),s=a.product_qty-1;if(a.product_qty=1,t)for(o.order.products[e[0].productIndex].product_qty=1;--s>-1;)i.addCloneProductInOrder(a,n);else o.order.products[e[0].productIndex].product_qty-=1,i.addCloneProductInOrder(a,n);S.config.isLinkExplodeMenu=0,r.joinAllAddElements(),i.showAllAddElements(),u(),m(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function h(){S.config.isSwipeProdSelector=!S.config.isSwipeProdSelector}function I(){for(var e=0,t=n.cart.selectedProducts.length;--t>-1;)n.cart.selectedProducts[t].length&&(e+=1);n.cart.isSelectedProduct=e?1:0}function A(e){var t=n.cart.selectedProducts[e].length;t?(n.cart.selectedProducts[e].length=0,I()):(n.cart.selectedProducts[e].push(1),n.cart.isSelectedProduct=1)}var S=this;S.constants=e,S.config={addElementDATA:t.addElementDATA,selectedAddElemUnit:{id:0},isAddElemUnitDetail:0,addElemUnitProducts:[],isLinkExplodeMenu:0,explodeMenuTop:0,explodeMenuLeft:0,isSwipeProdSelector:0},S.closeAllAddElemsPanel=s,S.deleteAllAddElems=c,S.deleteAddElemsItem=d,S.showAddElemUnitDetail=p,S.closeAddElemUnitDetail=_,S.deleteAddElemUnit=g,S.toggleExplodeLinkMenu=f,S.explodeUnitToProduct=T,S.swipeProductSelector=h,S.selectProductToAddElem=A}])}(),function(){angular.module("MainModule").controller("AddElementsListCtrl",["$filter","globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","GlobalStor","ProductStor","UserStor","AuxStor",function(e,t,i,r,o,n,a,s,l){var d=this;d.G=n,d.P=a,d.U=s,d.A=l,d.config={addElementDATA:i.addElementDATA,DELAY_START:t.STEP,DELAY_SHOW_ELEMENTS_MENU:6*t.STEP,filteredGroups:[],typing:"on"},d.NAME_LABEL=e("translate")("add_elements.NAME_LABEL"),d.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),d.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),d.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),d.TOTAL_PRICE_TXT=e("translate")("add_elements.TOTAL_PRICE_TXT"),d.SCHEME_VIEW=e("translate")("add_elements.SCHEME_VIEW"),d.selectAddElement=r.selectAddElement,d.initAddElementTools=r.initAddElementTools,d.deleteAddElement=o.deleteAddElement,d.deleteAllAddElements=o.deleteAllAddElements,d.closeAddElementListView=r.closeAddElementListView,d.pressCulculator=o.pressCulculator}])}(),function(){angular.module("MainModule").controller("AddElementsCtrl",["$filter","globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","DesignServ","GlobalStor","AuxStor","ProductStor",function(e,t,i,r,o,n,a,s,l){function d(){s.aux.isWindowSchemeDialog=!0,n.showAllDimension(t.SVG_ID_ICON)}function c(){s.aux.isWindowSchemeDialog=!1}var u=this;u.constants=t,u.G=a,u.P=l,u.A=s,u.config={DELAY_START:t.STEP,addElementDATA:i.addElementDATA,DELAY_SHOW_INSIDESLOPETOP:20*t.STEP,DELAY_SHOW_INSIDESLOPERIGHT:22*t.STEP,DELAY_SHOW_INSIDESLOPELEFT:21*t.STEP,DELAY_SHOW_FORCECONNECT:30*t.STEP,DELAY_SHOW_BALCONCONNECT:35*t.STEP,DELAY_SHOW_BUTTON:40*t.STEP,DELAY_SHOW_ELEMENTS_MENU:12*t.STEP,typing:"on"},u.CHOOSE=e("translate")("add_elements.CHOOSE"),u.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),u.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),u.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),u.OTHER_ELEMENTS1=e("translate")("add_elements.OTHER_ELEMENTS1"),u.OTHER_ELEMENTS2=e("translate")("add_elements.OTHER_ELEMENTS2"),u.LIST_VIEW=e("translate")("add_elements.LIST_VIEW"),u.selectAddElement=r.selectAddElement,u.initAddElementTools=r.initAddElementTools,u.pressCulculator=o.pressCulculator,u.openAddElementListView=r.openAddElementListView,u.showWindowScheme=d,u.closeWindowScheme=c}])}(),function(){angular.module("MainModule").controller("GlassesCtrl",["$filter","globalConstants","MainServ","AnalyticsServ","DesignServ","SVGServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,o,n,a,s,l,d,c){function u(e,t){a.global.prevGlassId=angular.copy(a.global.selectGlassId),a.global.prevGlassName=angular.copy(a.global.selectGlassName),a.global.selectGlassId=e,a.global.selectGlassName=t,a.global.showGlassSelectorDialog=1,o.initAllGlassXGlass()}function p(){var e;d.design.selectedGlass.length=0,n.createSVGTemplate(l.product.template_source,l.product.profileDepths).then(function(t){l.product.template=angular.copy(t),e=l.product.hardware.id||0,i.preparePrice(l.product.template,l.product.profile.id,l.product.glass,e,l.product.lamination.lamination_in_id)})}function _(){i.setGlassToTemplateBlocks(l.product.template_source,a.global.selectGlassId,a.global.selectGlassName),p(),o.closeGlassSelectorDialog()}function E(){var e,t=d.design.selectedGlass.length,r=angular.copy(l.product.glass);if(t||i.setGlassToTemplateBlocks(l.product.template,a.global.selectGlassId,a.global.selectGlassName),i.setCurrentGlass(l.product,a.global.selectGlassId),i.checkGlassSizes(l.product.template),d.design.extraGlass.length)d.design.isGlassExtra=1,l.product.glass=angular.copy(r),i.setGlassToTemplateBlocks(l.product.template,a.global.prevGlassId,a.global.prevGlassName);else if(t){for(;--t>-1;)e=d.design.selectedGlass[t].attributes.block_id.nodeValue,i.setGlassToTemplateBlocks(l.product.template_source,a.global.selectGlassId,a.global.selectGlassName,e);p(),o.closeGlassSelectorDialog()}else _()}var m=this;m.constants=t,m.G=a,m.P=l,m.config={prevGlassId:0,prevGlassName:"",camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},m.ENERGY_SAVE=e("translate")("panels.ENERGY_SAVE"),m.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),m.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),m.selectGlass=u,m.confirmGlass=E,m.setGlassToAll=_,m.closeGlassSelectorDialog=o.closeGlassSelectorDialog,m.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("HardwaresCtrl",["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor","MainServ","AnalyticsServ",function(e,t,i,r,o,n,a,s,l){function d(e){o.product.hardware.id!==e&&(s.checkHardwareSizes(o.product.template,e),n.design.extraHardware.length?n.design.isHardwareExtra=1:(s.setCurrentHardware(o.product,e),s.preparePrice(o.product.template,o.product.profile.id,o.product.glass,o.product.hardware.id,o.product.lamination.lamination_in_id),l.sendAnalyticsData(a.userInfo.id,r.order.id,o.product.template_id,e,3)))}var c=this;c.G=i,c.P=o,c.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},c.BRAND=e("translate")("panels.BRAND"),c.COUNTRY=e("translate")("panels.COUNTRY"),c.CORROSION_COEFF=e("translate")("panels.CORROSION_COEFF"),c.BURGLAR_COEFF=e("translate")("panels.BURGLAR_COEFF"),c.selectHardware=d,c.showInfoBox=s.showInfoBox}])}(),function(){angular.module("MainModule").controller("LaminationsCtrl",["$filter","globalConstants","MainServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,o,n,a){function s(e){for(var t=r.global.laminats.length;--t>-1;)r.global.laminats[t].type_id===e&&(r.global.laminats[t].isActive=!r.global.laminats[t].isActive,i.laminatFiltering())}function l(e){i.setCurrLamination(n.product,e),i.setProfileByLaminat(e).then(function(){})}var d=this;d.G=r,d.P=n,d.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.LAMINAT_INSIDE=e("translate")("panels.LAMINAT_INSIDE"),d.LAMINAT_OUTSIDE=e("translate")("panels.LAMINAT_OUTSIDE"),d.selectLaminat=l,d.initLaminatFilter=s,d.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("ProfilesCtrl",["$filter","globalConstants","MainServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,o,n,a,s,l){function d(e){var t;a.product.profile.id!==e&&(t=angular.copy(a.product),i.setCurrentProfile(a.product,e).then(function(){i.saveTemplateInProduct(a.product.template_id).then(function(){i.checkGlassSizes(a.product.template),o.global.isSashesInTemplate&&i.checkHardwareSizes(a.product.template),a.product=angular.copy(t),s.design.extraGlass.length?s.design.isGlassExtra=1:s.design.extraHardware.length?s.design.isHardwareExtra=1:(i.setCurrLamination(a.product),i.setCurrentProfile(a.product,e).then(function(){i.parseTemplate().then(function(){i.laminatFiltering(),r.sendAnalyticsData(l.userInfo.id,n.order.id,a.product.template_id,e,1)})}))})}))}var c=this;c.G=o,c.P=a,c.config={camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},c.COUNTRY=e("translate")("panels.COUNTRY"),c.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),c.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),c.selectProfile=d,c.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("TemplatesCtrl",["$location","$filter","globalConstants","MainServ","GeneralServ","TemplatesServ","optionsServ","GlobalStor","DesignStor","OrderStor","ProductStor",function(e,t,i,r,o,n,a,s,l,d,c){function u(){s.global.isTemplateTypeMenu=!s.global.isTemplateTypeMenu}function p(e){function i(){4===e&&r.setDefaultDoorConfig(),s.global.isChangedTemplate=0,n.initNewTemplateType(e)}s.global.isTemplateTypeMenu=0,4===e&&s.global.noDoorExist?l.design.isNoDoors=1:("design"===s.global.currOpenPage&&(s.global.isChangedTemplate=l.design.designSteps.length?1:0),s.global.isChangedTemplate?o.confirmAlert(t("translate")("common_words.NEW_TEMPLATE_TITLE"),t("translate")("common_words.TEMPLATE_CHANGES_LOST"),i):n.initNewTemplateType(e))}var _=this;_.constants=i,_.G=s,_.O=d,_.P=c,_.config={DELAY_TEMPLATE_ELEMENT:5*i.STEP,typing:"on"},_.TEMPLATE_WINDOW=t("translate")("panels.TEMPLATE_WINDOW"),_.TEMPLATE_DOOR=t("translate")("panels.TEMPLATE_DOOR"),_.TEMPLATE_BALCONY_ENTER=t("translate")("panels.TEMPLATE_BALCONY_ENTER"),_.TEMPLATE_BALCONY=t("translate")("panels.TEMPLATE_BALCONY"),a.getTemplateImgIcons(function(e){e.status?_.templatesImgs=e.data.templateImgs:console.log(e)}),_.selectNewTemplate=n.selectNewTemplate,_.toggleTemplateType=u,_.selectNewTemplateType=p}])}(),function(){angular.module("MainModule").controller("AddElemGroupMenuCtrl",["AddElementsServ","AddElementMenuServ","DesignServ","GlobalStor","ProductStor","AuxStor",function(e,t,i,r,o,n){function a(t){n.aux.isAddElement=0,e.selectAddElement(t)}var s=this;s.A=n,s.takeAddElemMenu=a,s.takeAddElemFilt=t.takeAddElemFilt}])}(),function(){angular.module("MainModule").controller("AlertCtrl",["$filter","GlobalStor",function(e,t){function i(){t.global.isAlert=0,t.global.confirmAction()}var r=this;r.G=t,r.BUTTON_N=e("translate")("common_words.BUTTON_N"),r.BUTTON_Y=e("translate")("common_words.BUTTON_Y"),r.clickYes=i}])}(),function(){angular.module("MainModule").controller("AttantCtrl",["$filter","DesignStor","HistoryStor",function(e,t,i){function r(){t.design.isGlassExtra=0,t.design.isHardwareExtra=0,i.history.isNoPrint=0,t.design.isNoDoors=0}var o=this;o.D=t,o.H=i,o.NO_PRINT=e("translate")("history.NO_PRINT"),o.EXTRA_SASH=e("translate")("design.EXTRA_SASH"),o.CHANGE_SIZE=e("translate")("design.CHANGE_SIZE"),o.DOOR_ERROR=e("translate")("design.DOOR_ERROR"),o.closeAttantion=r}])}(),function(){angular.module("MainModule").controller("GridSelectorCtrl",["$filter","AddElementMenuServ","globalConstants","ProductStor","AuxStor",function(e,t,i,r,o){var n=this;n.constants=i,n.P=r,n.A=o,n.SELECT_ALL=e("translate")("mainpage.SELECT_ALL"),n.SELECT_GLASS_WARN=e("translate")("mainpage.SELECT_GLASS_WARN"),n.confirmGrid=t.confirmGrid,n.setGridToAll=t.setGridToAll,n.closeGridSelectorDialog=t.closeGridSelectorDialog}])}(),function(){angular.module("MainModule").controller("infoBoxCtrl",["GlobalStor",function(e){function t(){e.global.isInfoBox=0,e.global.infoTitle="",e.global.infoImg="",e.global.infoLink="",e.global.infoDescrip=""}var i=this;i.G=e,i.closeInfoBox=t}])}(),function(){angular.module("MainModule").controller("LoaderCtrl",["GlobalStor",function(e){var t=this;t.G=e}])}(),function(){angular.module("CartModule").controller("OrderFormCtrl",["$filter","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ",function(e,t,i,r,o,n){function a(e){o.cart.submitted=!0,e.$valid&&n.sendOrder()}var s=this;s.O=i,s.C=o,s.U=r,s.config={month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL")},s.CALL_ORDER=e("translate")("cart.CALL_ORDER"),s.CALL_ORDER_DESCRIP=e("translate")("cart.CALL_ORDER_DESCRIP"),s.CALL_ORDER_CLIENT_INFO=e("translate")("cart.CALL_ORDER_CLIENT_INFO"),s.CLIENT_NAME=e("translate")("cart.CLIENT_NAME"),s.EMPTY_FIELD=e("translate")("login.EMPTY_FIELD"),s.MOBILE=e("translate")("login.MOBILE"),s.WRONG_NUMBER=e("translate")("login.WRONG_NUMBER"),s.CALL_ORDER_DELIVERY=e("translate")("cart.CALL_ORDER_DELIVERY"),s.CLIENT_LOCATION=e("translate")("cart.CLIENT_LOCATION"),s.CLIENT_ADDRESS=e("translate")("cart.CLIENT_ADDRESS"),s.CLIENT_HOUSE=e("translate")("cart.CLIENT_HOUSE"),s.CLIENT_FLAT=e("translate")("cart.CLIENT_FLAT"),s.CLIENT_FLOOR=e("translate")("cart.CLIENT_FLOOR"),s.CALL_ORDER_TOTAL_PRICE=e("translate")("cart.CALL_ORDER_TOTAL_PRICE"),s.CALL_ORDER_ADD_INFO=e("translate")("cart.CALL_ORDER_ADD_INFO"),s.CLIENT_EMAIL=e("translate")("cart.CLIENT_EMAIL"),s.WRONG_EMAIL=e("translate")("cart.WRONG_EMAIL"),s.ADD_PHONE=e("translate")("cart.ADD_PHONE"),s.CLIENT_SEX=e("translate")("cart.CLIENT_SEX"),s.CLIENT_SEX_M=e("translate")("cart.CLIENT_SEX_M"),s.CLIENT_SEX_F=e("translate")("cart.CLIENT_SEX_F"),s.CLIENT_AGE=e("translate")("cart.CLIENT_AGE"),s.SELECT_PLACEHOLD=e("translate")("cart.SELECT_PLACEHOLD"),s.CLIENT_EDUCATION=e("translate")("cart.CLIENT_EDUCATION"),s.CLIENT_OCCUPATION=e("translate")("cart.CLIENT_OCCUPATION"),s.CLIENT_INFO_SOURCE=e("translate")("cart.CLIENT_INFO_SOURCE"),s.READY=e("translate")("cart.READY"),s.CALL_MASTER=e("translate")("cart.CALL_MASTER"),s.CALL_MASTER_DESCRIP=e("translate")("cart.CALL_MASTER_DESCRIP"),s.CALL_CREDIT=e("translate")("cart.CALL_CREDIT"),s.CALL_CREDIT_DESCRIP=e("translate")("cart.CALL_CREDIT_DESCRIP"),s.CALL_CREDIT_CLIENT_INFO=e("translate")("cart.CALL_CREDIT_CLIENT_INFO"),s.CREDIT_TARGET=e("translate")("cart.CREDIT_TARGET"),s.CLIENT_ITN=e("translate")("cart.CLIENT_ITN"),s.CALL_START_TIME=e("translate")("cart.CALL_START_TIME"),s.CALL_END_TIME=e("translate")("cart.CALL_END_TIME"),s.CALL_CREDIT_PARTIAL_PRICE=e("translate")("cart.CALL_CREDIT_PARTIAL_PRICE"),s.locations=t.global.locations.cities.filter(function(e){return e.countryId===r.userInfo.countryId}),s.submitForm=a,s.changeLocation=n.changeLocation,s.selectCity=n.selectCity,s.closeOrderDialog=n.closeOrderDialog}])}(),function(){angular.module("MainModule").controller("qtyCalculatorCtrl",["$filter","AddElementMenuServ",function(e,t){var i=this;i.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),i.setValueQty=t.setValueQty,i.closeQtyCaclulator=t.closeQtyCaclulator,i.pressCulculator=t.pressCulculator}])}(),function(){angular.module("MainModule").controller("ReportCtrl",["$rootScope","$filter","localDB","GeneralServ","GlobalStor","ProductStor","UserStor",function(e,t,i,r,o,n,a){function s(e){var t;t=e?n.product.report.filter(function(t){return t.element_group_id===e}):angular.copy(n.product.report),t.length?(c.config.reportPriceTotal=r.roundingValue(t.reduce(function(e,t){return{priceReal:e.priceReal+t.priceReal}}).priceReal,2),c.config.reportPriceBase=r.roundingValue(t.reduce(function(e,t){return{price:e.price+t.price}}).price,2)):(c.config.reportPriceTotal=0,c.config.reportPriceBase=0)}function l(e){s(e),e?c.config.reportFilterId=e:c.config.reportFilterId=void 0}function d(){o.global.isReport=!o.global.isReport,s(),o.global.isReport&&i.selectLocalDB(i.tablesLocalDB.elements_groups.tableName).then(function(e){c.config.reportMenu=e.filter(function(e){return e.position>0}),c.config.reportMenu.push({id:0,name:t("translate")("common_words.ALL")})}),e.$apply()}var c=this;c.G=o,c.P=n,c.U=a,c.config={reportMenu:[],reportFilterId:void 0,reportPriceTotal:0,reportPriceBase:0},c.NAME_LABEL=t("translate")("add_elements.NAME_LABEL"),c.ARTICUL_LABEL=t("translate")("add_elements.ARTICUL_LABEL"),c.QTY_LABEL=t("translate")("add_elements.QTY_LABEL"),c.SIZE_LABEL=t("translate")("add_elements.SIZE_LABEL"),c.LETTER_M=t("translate")("common_words.LETTER_M"),c.CALL_ORDER_TOTAL_PRICE=t("translate")("cart.CALL_ORDER_TOTAL_PRICE"),$(".main-content").off("keypress").keypress(function(e){(5===a.userInfo.user_type||7===a.userInfo.user_type)&&(82===e.keyCode||114===e.keyCode)&&d()}),c.sortReport=l}])}(),function(){angular.module("MainModule").controller("RoomInfoCtrl",["$filter","globalConstants","TemplatesServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,o,n,a){function s(){r.global.isShowCommentBlock||(r.global.showRoomSelectorDialog=1)}function l(){r.global.isShowCommentBlock=!r.global.isShowCommentBlock}var d=this;d.G=r,d.O=o,d.P=n,d.U=a,d.config={DELAY_SHOW_COEFF:20*t.STEP,DELAY_SHOW_ALLROOMS_BTN:15*t.STEP,typing:"on"},d.CLIMATE_ZONE=e("translate")("mainpage.CLIMATE_ZONE"),d.THERMAL_RESISTANCE=e("translate")("mainpage.THERMAL_RESISTANCE"),d.ROOM_SELECTION=e("translate")("mainpage.ROOM_SELECTION"),d.COMMENT=e("translate")("mainpage.COMMENT"),d.showRoomSelectorDialog=s,d.switchComment=l}])}(),function(){angular.module("MainModule").controller("RoomSelectorCtrl",["globalConstants","MainServ","TemplatesServ","GlobalStor","ProductStor","UserStor",function(e,t,i,r,o,n){function a(e){i.selectNewTemplate(r.global.rooms[e].template_id-1,e+1)}var s=this;s.G=r,s.P=o,s.U=n,s.config={DELAY_SHOW_ROOM:2*e.STEP},s.selectRoom=a,s.closeRoomSelectorDialog=t.closeRoomSelectorDialog}])}(),function(){angular.module("MainModule").controller("searchCtrl",["$filter","GlobalStor","AuxStor","HistoryStor","AddElementsServ","AddElementMenuServ",function(e,t,i,r,o,n){function a(){p.searchingWord="",i.aux.addElementGroups.length=0,i.aux.searchingWord=p.searchingWord,n.closeAddElementsMenu()}function s(){""!==p.searchingWord?(i.aux.searchingWord=p.searchingWord,i.aux.searchingWord.length>3&&o.createAddElementGroups()):a()}function l(){p.searchingWord=p.searchingWord.slice(0,-1),""===p.searchingWord?a():i.aux.searchingWord=p.searchingWord}function d(){""!==p.searchingWord&&(r.history.searchingWord=p.searchingWord)}function c(){p.searchingWord="",r.history.searchingWord="",r.history.isOrderSearch=0}function u(){p.searchingWord=p.searchingWord.slice(0,-1),r.history.searchingWord=p.searchingWord}var p=this;p.G=t,p.CANCEL=e("translate")("add_elements.CANCEL"),"main"===t.global.currOpenPage||"cart"===t.global.currOpenPage?(p.placeholder=e("translate")("add_elements.INPUT_ADD_ELEMENT"),p.checkChanges=s,p.cancelSearching=a,p.deleteSearchChart=l):"history"===t.global.currOpenPage&&(p.placeholder=e("translate")("history.SEARCH_PLACEHOLDER"),p.checkChanges=d,p.cancelSearching=c,p.deleteSearchChart=u)}])}(),function(){angular.module("MainModule").controller("sizeCalculatorCtrl",["$filter","GlobalStor","DesignStor","AddElementMenuServ","DesignServ",function(e,t,i,r,o){var n=this;n.isDesignPage=!1,n.D=i,n.MIN=e("translate")("common_words.MIN"),n.MAX=e("translate")("common_words.MAX"),"main"===t.global.currOpenPage?(n.isDesignPage=!1,n.setValueSize=r.setValueSize,n.deleteLastNumber=r.deleteLastNumber,n.closeSizeCaclulator=r.closeSizeCaclulator):(n.isDesignPage=!0,n.setValueSize=o.setValueSize,n.deleteLastNumber=o.deleteLastNumber,n.closeSizeCaclulator=o.closeSizeCaclulator),n.pressCulculator=r.pressCulculator}])}(),function(){angular.module("MainModule").controller("UserInfoCtrl",["globalConstants","GlobalStor","UserStor",function(e,t,i){function r(){t.global.isNavMenu=!t.global.isNavMenu,t.global.isConfigMenu=!t.global.isConfigMenu}function o(){t.global.isNavMenu&&(t.global.isNavMenu=0,t.global.isConfigMenu=1)}function n(){t.global.isNavMenu||(t.global.isNavMenu=1,t.global.isConfigMenu=0)}var a=this;a.G=t,a.U=i,a.config={DELAY_SHOW_USER_INFO:40*e.STEP,typing:"on",checked:!1},a.swipeMainPage=r,a.swipeLeft=o,a.swipeRight=n}])}(),function(){angular.module("SettingsModule").controller("SettingsCtrl",["$location","$timeout","$filter","globalConstants","localDB","SettingServ","GlobalStor","OrderStor","ProductStor","AuxStor","UserStor",function(e,t,i,r,o,n,a,s,l,d,c){function u(e,t){var i={};switch(e){case"user-name":i.name=t;break;case"user-address":i.address=t;break;case"user-email":
var r=y.config.mailReg.test(t);r?(y.config.isEmailError=0,i.email=t):y.config.isEmailError=1}$.isEmptyObject(i)||o.updateLocalServerDBs(o.tablesLocalDB.users.tableName,c.userInfo.id,i)}function p(e){t(function(){$("#"+e).find("input").focus()},100)}function _(){t(function(){$(".set-input-phone").focus()},100)}function E(e,t){y.config.selectedSetting=e,p(t.target.id)}function m(e,t){13===event.which&&u(e,t)}function g(e,t){u(e,t)}function f(){y.config.isEmailError=0}function T(e){var t=e.join(",");c.userInfo.city_phone=t,o.updateLocalServerDBs(o.tablesLocalDB.users.tableName,c.userInfo.id,{city_phone:t}),y.config.tempAddPhone=""}function h(){var e=y.config.regex.test(y.config.tempAddPhone);e?(y.config.isInsertPhone=0,y.config.isErrorPhone=0,y.config.addPhones.push(y.config.tempAddPhone),T(y.config.addPhones)):y.config.isErrorPhone=1}function I(){y.config.isInsertPhone=!y.config.isInsertPhone,y.config.tempAddPhone="",y.config.isErrorPhone=0,_()}function A(){y.config.tempAddPhone&&""!==y.config.tempAddPhone?h():I()}function S(){y.config.isInsertPhone=0,y.config.isErrorPhone=0}function N(){13===event.which&&h()}function L(e){y.config.addPhones.splice(e,1),T(y.config.addPhones)}function O(){c.userInfo=c.setDefaultUser(),a.global=a.setDefaultGlobal(),s.order=s.setDefaultOrder(),l.product=l.setDefaultProduct(),d.aux=d.setDefaultAuxiliary(),e.path("/login")}var y=this;y.U=c,y.config={DELAY_START:r.STEP,DELAY_SHOW_ICONS:10*r.STEP,isInsertPhone:!1,isEmailError:!1,addPhones:[],tempAddPhone:"",regex:r.REG_PHONE,mailReg:r.REG_MAIL,typing:"on"},y.NAVMENU_SETTINGS=i("translate")("mainpage.NAVMENU_SETTINGS"),y.CHANGE=i("translate")("common_words.CHANGE"),y.AUTHORIZATION=i("translate")("settings.AUTHORIZATION"),y.CHANGE_PASSWORD=i("translate")("settings.CHANGE_PASSWORD"),y.CHANGE_LANGUAGE=i("translate")("settings.CHANGE_LANGUAGE"),y.PRIVATE_INFO=i("translate")("settings.PRIVATE_INFO"),y.USER_NAME=i("translate")("settings.USER_NAME"),y.CITY=i("translate")("settings.CITY"),y.CLIENT_ADDRESS=i("translate")("cart.CLIENT_ADDRESS"),y.CLIENT_EMAIL=i("translate")("cart.CLIENT_EMAIL"),y.WRONG_EMAIL=i("translate")("cart.WRONG_EMAIL"),y.ADD_PHONES=i("translate")("settings.ADD_PHONES"),y.INSERT_PHONE=i("translate")("settings.INSERT_PHONE"),y.WRONG_NUMBER=i("translate")("login.WRONG_NUMBER"),y.CLIENT_SUPPORT=i("translate")("settings.CLIENT_SUPPORT"),y.LOGOUT=i("translate")("settings.LOGOUT"),a.global.currOpenPage="settings",c.userInfo.city_phone&&(y.config.addPhones=c.userInfo.city_phone.split(",")),y.changeSettingData=E,y.appendInputPhone=I,y.cancelAddPhone=S,y.saveChanges=m,y.saveChangesBlur=g,y.changeEmail=f,y.addNewPhone=A,y.saveChangesPhone=N,y.deletePhone=L,y.gotoPasswordPage=n.gotoPasswordPage,y.gotoLanguagePage=n.gotoLanguagePage,y.gotoLocationPage=n.gotoLocationPage,y.closeSettingsPage=n.closeSettingsPage,y.logOut=O}])}(),function(){angular.module("HistoryModule").directive("calendarScroll",["$filter","HistoryStor",function($filter,HistoryStor){return{restrict:"E",transclude:!0,replace:!0,scope:{calendarType:"=",orderType:"="},template:function(e,t){var i=+t.calendarType,r="",o="",n="",a="",s="",l="",d="",c="",u="",p=$filter("translate")("common_words.MONTHS"),_=p.split(", "),E=_.length,m=1,g=0,f=2010,T=(new Date).getFullYear()+1;for(i?(o="date_range_from",n="date_from",a="from_date",s="from_date_"+t.orderType,l="from_month",d="from_month_"+t.orderType,c="from_fullYear",u="from_fullYear_"+t.orderType):(o="date_range_to",n="date_to",a="to_date",s="to_date_"+t.orderType,l="to_month",d="to_month_"+t.orderType,c="to_fullYear",u="to_fullYear_"+t.orderType),r='<div class="date_range outside"><div class="date_range_container"><div class="'+o+'"><form name="'+n+'"><div class="lines"><div></div></div><select class="date" id="'+a+'" name="'+s+'">';32>m;)r+='<option value="'+m+'">'+m+"</option>",m+=1;for(r+='</select><select class="date" id="'+l+'" name="'+d+'">';E>g;)r+='<option value="'+g+'">'+_[g]+"</option>",g+=1;for(r+='</select><select class="date" id="'+c+'" name="'+u+'">';T>=f;)r+='<option value="'+f+'">'+f+"</option>",f+=1;return r+="</select></form></div></div></div>"},link:function(scope){function getIndexForValue(e,t){for(var i=e.options.length;--i>-1;)if(e.options[i].value===t)return i}function update(e,t,i){$("."+e).find("#"+t+"_date").drum("setIndex",i.getDate()-1),$("."+e).find("#"+t+"_month").drum("setIndex",i.getMonth()),$("."+e).find("#"+t+"_fullYear").drum("setIndex",getIndexForValue($("#"+t+"_fullYear")[0],i.getFullYear()))}$(function(){$("select.date").drum({onChange:function(elem){var elemNameArr=elem.name.split("_"),section=elemNameArr[0],isOrder=+elemNameArr[2],arr={date:"setDate",month:"setMonth",fullYear:"setFullYear"},date=new Date,s,i;for(s in arr)i=$("form[name='date_"+section+"'] select[id='"+section+"_"+s+"']")[0].value,eval("date."+arr[s]+"("+i+")");isOrder?(update("history-view",section,date),"from"===section?HistoryStor.history.startDate=date:HistoryStor.history.finishDate=date):(update("draft-view",section,date),"from"===section?HistoryStor.history.startDateDraft=date:HistoryStor.history.finishDateDraft=date),scope.$apply()}});var now=new Date;update("history-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("history-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate()))})}}}])}(),function(){angular.module("CartModule").directive("calendar",["$filter","CartMenuServ","GlobalStor","OrderStor",function(e,t,i,r){return{restrict:"E",transclude:!0,link:function(o,n){var a=new Date(r.order.order_date).getDate(),s=(new Date).setDate(a+i.global.deliveryCoeff.min_time-1),l=e("date")(r.order.new_delivery_date,"dd.MM.yyyy"),d=e("date")(r.order.delivery_date,"dd.MM.yyyy");$(function(){var i={flat:!0,format:"d.m.Y",locale:{days:[],daysShort:[],daysMin:[],monthsShort:[],months:[]},date:l,min:s,change:function(e){t.checkDifferentDate(d,e),o.$apply()}};i.locale.monthsShort=e("translate")("common_words.MONTHS_SHOT").split(", "),i.locale.months=e("translate")("common_words.MONTHS").split(", "),n.pickmeup(i)})}}}])}(),function(){angular.module("BauVoiceApp").directive("fileread",["SettingServ","UserStor",function(e,t){return{scope:{fileread:"="},link:function(i,r){r.bind("change",function(r){var o=new FormData,n=new FileReader;o.append("user",t.userInfo.id),o.append("file",r.target.files[0]),n.onload=function(t){i.$apply(function(){i.fileread=t.target.result,e.changeAvatar(i.fileread,o)})},n.readAsDataURL(r.target.files[0])})}}}])}(),function(){angular.module("BauVoiceApp").filter("locationFilter",["$filter",function(e){return function(t,i){var r,o=t.length,n=[];if(i&&i.length>2)for(r=i.toLowerCase();--o>-1;)0===t[o].fullLocation.toLowerCase().indexOf(r)&&n.push(t[o]);return n=e("orderBy")(n,"cityName",!1)}}])}(),function(){angular.module("HistoryModule").directive("orderDate",["$filter",function(e){return{restrict:"A",scope:{orderDate:"@",typeDate:"="},link:function(t,i,r){function o(t,r){var o,n,a,s,l;a=e("translate")("common_words.MONTHA").split(", "),""!==t?"order"===r?(o=t.split(" "),n=o[0].split("-"),l=parseInt(n[1],10)-1,s=n[2]+" "+a[l]+", "+n[0]):(n=t.split("/"),l=parseInt(n[0],10)-1,s=n[1]+" "+a[l]+", "+n[2]):(o=new Date,s=o.getDate()+" "+a[o.getMonth()]+", "+o.getFullYear()),r||""!==t?i.text(s):i.text("")}o(t.orderDate,t.typeDate),r.$observe("orderDate",function(){o(t.orderDate,t.typeDate)})}}}])}(),function(){angular.module("HistoryModule").filter("orderSorting",function(){return function(e,t){function i(e,t){angular.forEach(e,function(e){angular.equals(e.order_style,t)&&r.push(e)})}var r=[];return"type"===t?(i(e,"order"),i(e,"master"),i(e,"done")):"first"===t?(angular.forEach(e,function(e){r.push(e)}),r.reverse()):angular.forEach(e,function(e){r.push(e)}),r}})}(),function(){angular.module("BauVoiceApp").directive("priceFixed",function(){return{restrict:"A",scope:{priceFixed:"@",qtyElement:"@",currencyElement:"@"},link:function(e,t,i){function r(e,i,r){var o=parseFloat((Math.round(100*parseFloat(e))/100*i).toFixed(2))+" "+r;t.text(o)}r(e.priceFixed,e.qtyElement,e.currencyElement),i.$observe("qtyElement",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)}),i.$observe("priceFixed",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)})}}})}(),function(){angular.module("BauVoiceApp").directive("price",["globalConstants","SoundPlayServ",function(e,t){function i(r,o){var n,a,s,l,d,c=2*e.STEP,u=64,p=o.find("#price").children(),_=p.length,E=$(p[0]).children().length,m=0;for(void 0!==r&&(t.playSound(),n="string"==typeof r?r.split(""):r.toFixed(2).split("")),i.revertDigitState=function(){a.animate({top:0},"fast")},i.initDigit=function(){s=n.shift()},i.animateDigit=function(){l="."===s?(E-1)*u:(parseInt(s,10)+1)*u,a.delay(m*c).animate({top:-l/16+"rem"},"fast")},d=_;d>0;d-=1)a=$(p[m]),d>n.length?i.revertDigitState():(i.initDigit(),i.animateDigit()),m+=1}return{restrict:"E",replace:!0,transclude:!0,scope:{priceValue:"=",priceCurrency:"="},template:'<div class="price clearfix" data-output="priceValue"><div id="price" class="price-value"><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div></div><div id="currency" class="price-currency">{{ priceCurrency }}</div></div>',link:function(e,t,r){e.$watch(r.output,function(e){i(e,t)})}}}])}(),function(){angular.module("BauVoiceApp").directive("showDelay",function(){return{scope:{showDelay:"@"},link:function(e,t,i){function r(){var i="unvisible";setTimeout(function(){t.removeClass(i)},+e.showDelay)}i.$observe("showDelay",function(){r()})}}})}(),function(){angular.module("BauVoiceApp").directive("svgTemplate",["globalConstants","GeneralServ","ProductStor","SVGServ","DesignServ","PointsServ",function(e,t,i,r,o,n){return{restrict:"E",replace:!0,transclude:!0,scope:{typeConstruction:"=",template:"=",templateWidth:"=",templateHeight:"="},link:function(a,s){function l(){d3.select("#main_group").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function d(e,t,i,r,o,n,a,s,l,d){e.append("marker").classed(d,!0).attr({id:t,viewBox:i,refX:r,refY:o,markerWidth:a,markerHeight:s,orient:n}).append("path").attr("d",l)}function c(e,t,i){var r,o=i.sashOpenDir.length;return i.handlePos?(1===o?2===i.handlePos?r=e?"url(#handleR)":"url(#hingeL)":1===i.handlePos?r=e?"url(#handleU)":"url(#hingeD)":4===i.handlePos?r=e?"url(#handleL)":"url(#hingeR)":3===i.handlePos&&(r=e?"url(#handleD)":"url(#hingeU)"):2===o&&(t.points[1].fi<45||t.points[1].fi>315?r=e?"url(#handleR)":"url(#hingeL)":t.points[1].fi>135&&t.points[1].fi<225&&(r=e?"url(#handleL)":"url(#hingeR)")),r):void 0}function u(t,i,r,o){if(a.typeConstruction!==e.SVG_ID_MAIN){var n,s,l=-150,d=50,c=-20,u=160,p=70,_=20,E=[],m=[],g=[],f={x:t?c:i.from,y:t?i.from:c},T={x:t?l:i.from,y:t?i.from:l},h={x:t?c:i.to,y:t?i.to:c},I={x:t?l:i.to,y:t?i.to:l},A={x:t?l+d:i.from,y:t?i.from:l+d},S={x:t?l+d:i.to,y:t?i.to:l+d};E.push(f,T),m.push(h,I),g.push(A,S),n=r.append("g").attr({"class":function(){var r;return r=a.typeConstruction===e.SVG_ID_ICON?t?i.level?"dim_blockY dim_shiftY":"dim_block":i.level?"dim_blockX dim_shiftX":"dim_block":t?i.level?"dim_blockY":"dim_block dim_hidden":i.level?"dim_blockX":"dim_block dim_hidden"},block_id:i.blockId,axis:i.axis}),n.append("path").classed("size-line",!0).attr("d",o(m)),n.append("path").classed("size-line",!0).attr("d",o(E)),n.append("path").classed("size-line",!0).attr({d:o(g),"marker-start":function(){return t?"url(#dimVertR)":"url(#dimHorL)"},"marker-end":function(){return t?"url(#dimVertL)":"url(#dimHorR)"}}),s=n.append("g").classed("size-box",!0),"tamlateSVG"===a.typeConstruction&&s.append("rect").classed("size-rect",!0).attr({x:function(){return t?l-.8*u:(i.from+i.to-u)/2},y:function(){return t?(i.from+i.to-p)/2:l-.8*p},rx:_,ry:_}),s.append("text").text(i.text).attr({"class":function(){return a.typeConstruction===e.SVG_ID_EDIT?"size-txt-edit":"size-txt"},x:function(){return t?l-.8*u:(i.from+i.to-u)/2},y:function(){return t?(i.from+i.to-p)/2:l-.8*p},dx:80,dy:40,type:"line",block_id:i.blockId,size_val:i.text,min_val:i.minLimit,max_val:i.maxLimit,dim_id:i.dimId,from_point:i.from,to_point:i.to,axis:i.axis,level:i.level})}}function p(t,i,r){var o,n,s=[],l=20,d={x:t.startX,y:t.startY},c={x:t.midleX,y:t.midleY};s.push(c,d),o=i.append("g").attr({"class":"dim_block_radius",block_id:t.blockId}),o.append("path").classed("size-line",!0).attr({d:r(s),style:"stroke: #000;","marker-end":"url(#dimArrow)"}),n=o.append("g").classed("size-box",!0),a.typeConstruction===e.SVG_ID_EDIT&&n.append("rect").classed("size-rect",!0).attr({x:t.midleX,y:t.midleY,rx:l,ry:l}),n.append("text").text(t.radius).attr({"class":"size-txt-edit",x:t.midleX,y:t.midleY,dx:80,dy:40,type:"curve",block_id:t.blockId,size_val:t.radius,min_val:t.radiusMax,max_val:t.radiusMin,dim_id:t.id,chord:t.lengthChord})}function _(_,E,m){if(_&&!$.isEmptyObject(_)){var g,f,T,h,I,A,S,N,L,O,y=document.createElement("div"),C=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear"),R=.7,D={x:0,y:0},b=n.templatePoints(_);a.typeConstruction===e.SVG_CLASS_ICON?R=1:a.typeConstruction===e.SVG_ID_EDIT?R=.6:a.typeConstruction===e.SVG_ID_MAIN&&(R=.6),g=d3.select(y).append("svg").attr({width:E,height:m}),a.typeConstruction===e.SVG_CLASS_ICON?g.attr("class",a.typeConstruction):g.attr("id",a.typeConstruction),I=r.collectAllPointsOut(_.details),A=t.getMaxMinCoord(I),S=a.typeConstruction===e.SVG_ID_MAIN?r.setTemplateScaleMAIN(R):r.setTemplateScale(A,E,m,R),a.typeConstruction!==e.SVG_CLASS_ICON&&(D=a.typeConstruction===e.SVG_ID_MAIN?r.setTemplatePositionMAIN(A,m,S):r.setTemplatePosition(A,E,m,S)),f=g.append("g").attr({id:"main_group",transform:"translate("+D.x+", "+D.y+") scale("+S+","+S+")"}),a.typeConstruction===e.SVG_ID_EDIT&&g.call(d3.behavior.zoom().translate([D.x,D.y]).scale(S).scaleExtent([0,8]).on("zoom",l));var v=b.noVvPath,P=b.widthT,M=b.heightT;if(a.typeConstruction!==e.SVG_CLASS_ICON){var x=f.append("defs"),G="M4.5,0C2.015,0,0,2.015,0,4.5v6c0,1.56,0.795,2.933,2,3.74V7.5C2,6.119,3.119,5,4.5,5S7,6.119,7,7.5v6.74c1.205-0.807,2-2.18,2-3.74v-6C9,2.015,6.985,0,4.5,0zM7,26.5C7,27.881,5.881,29,4.5,29l0,0C3.119,29,2,27.881,2,26.5v-19C2,6.119,3.119,5,4.5,5l0,0C5.881,5,7,6.119,7,7.5V26.5z",w="M0,0L5,0L5,15L0,15z";if(d(x,"dimHorL","-5, -5, 1, 8",-5,-2,0,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),d(x,"dimHorR","-5, -5, 1, 8",-5,-2,180,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),d(x,"dimVertL","4.2, -1, 8, 9",5,2,90,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),d(x,"dimVertR","4.2, -1, 8, 9",5,2,270,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),d(x,"dimArrow","4.2, -1, 8, 9",5,2,"auto",100,60,"M 0,0 L 4,2 L0,4 z","size-line"),d(x,"handleR","0 -1 9 32",-5,5,0,29,80,G,"handle-mark"),d(x,"handleL","0 -1 9 32",14,5,0,29,80,G,"handle-mark"),d(x,"handleU","0 -1 9 32",-5.3,5,270,29,80,G,"handle-mark"),d(x,"handleD","0 -1 9 32",14.3,5,270,29,80,G,"handle-mark"),d(x,"hingeR","-1 0 9 4",-17.5,5,0,20,80,w,"hinge-mark"),d(x,"hingeL","-1 0 9 4",22.5,5,0,20,80,w,"hinge-mark"),d(x,"hingeU","-1 0 9 4",-17.3,5,270,20,80,w,"hinge-mark"),d(x,"hingeD","-1 0 9 4",22.2,5,270,20,80,w,"hinge-mark"),i.product.lamination.img_in_id>1&&(x.append("pattern").attr("id","laminat").attr("patternUnits","userSpaceOnUse").attr("width",600).attr("height",400).append("image").attr("xlink:href","img/lamination/"+i.product.lamination.img_in_id+".jpg").attr("width",600).attr("height",400),x.append("pattern").attr("id","laminat1").attr("patternUnits","userSpaceOnUse").attr("width",150).attr("height",100).append("image").attr("xlink:href","img/lamination/"+i.product.lamination.img_in_id+".jpg").attr("width",150).attr("height",100)),a.typeConstruction===e.SVG_ID_MAIN){var U="",k="",H=M;(1===i.product.construction_type||3===i.product.construction_type)&&(k="fon.gif",2049>=H&&(U=1.2),H>=2050&&(U=1.26),H>=2101&&(U=1.28),H>=2171&&(U=1.32),H>=2191&&(U=1.35),H>=2211&&(U=1.38),H>=2231&&(U=1.4),H>=2251&&(U=1.42),H>=2271&&(U=1.44),H>=2291&&(U=1.46),H>=2311&&(U=1.48),H>=2331&&(U=1.5),H>=2351&&(U=1.52),H>=2371&&(U=1.54),H>=2391&&(U=1.56)),4===i.product.construction_type&&(k="333.gif",H>100&&(U=1.03),H>=1800&&(U=1.05),H>=1850&&(U=1.07),H>=1900&&(U=1.11),H>=1950&&(U=1.14),H>=2e3&&(U=1.17),H>=2050&&(U=1.2),H>=2101&&(U=1.23),H>=2171&&(U=1.24),H>=2191&&(U=1.25),H>=2211&&(U=1.27),H>=2231&&(U=1.29),H>=2251&&(U=1.31),H>=2271&&(U=1.33),H>=2291&&(U=1.35),H>=2311&&(U=1.37),H>=2331&&(U=1.38),H>=2351&&(U=1.4),H>=2371&&(U=1.41),H>=2391&&(U=1.43)),x.append("pattern").attr("id","background").attr("patternUnits","userSpaceOnUse").attr("width",2520*U).attr("height",1680*U).append("image").attr("xlink:href","img/room/"+k).attr("width",2520*U).attr("height",1680*U)}}if(a.typeConstruction===e.SVG_ID_MAIN){if(1===i.product.construction_type){var V=.18*M-252+520,B=.18*P-234+520,F=755,W="",Y="",z="",K="";1648>M&&(W="456",Y="90",z=100,K="720"),M>1648&&(W="526",Y="90",z=60,K="720"),M>1848&&(W="576",Y="90",z=0,K="720"),M>2148&&(W="637",Y="90",z=-30,K="720"),P>900&&1648>M?$(".coeff-room-block5").css("left",109+.48*(P/2-224)/2+"px"):$(".coeff-room-block5").css("left",1e4+"px"),$(".coeff-room-block15").css({width:.48*(P/2)+30+"px",height:Y+"px",top:K+"px"}),$(".coeff-room-block11").css("left",1e4+"px"),$(".coeff-room-block16").css("left","9px"),$(".coeff-room-block8").css("left",1e4+"px"),$(".coeff-room-block7").css("opacity",0),$(".coeff-room-block9").css("opacity",1),$(".coeff-room-block23").css("left",1e4+"px"),$(".coeff-room-block10").css("opacity",0),$(".coeff-room-block17").css({width:.4*(P/2*2+350)+"px",height:"41px",left:"215px",top:W+"px"}),$(".coeff-room-block18").css({width:B+"px",height:V+"px",left:"3px",top:F-V-z+"px"}),$(".coeff-room-block19").css({width:B+"px",height:V+"px",left:"3px",top:F-V-z+"px"}),$(".coeff-room-block20").css({width:B+"px",height:V+"px",left:"3px",top:F-V-z+"px"}),$(".coeff-room-block21").css({width:B+"px",height:V+"px",left:"3px",top:F-V-z+"px"})}if(4===i.product.construction_type){var V=.18*M-252+520,B=.18*P-234+420,F=755;$(".coeff-room-block23").css({width:500+.7*(P-700)+"px",top:"665px",left:100-2.5*(.1*P-70)+"px"}),$(".coeff-room-block15").css({top:1e4+"px"}),$(".coeff-room-block17").css({width:"0px",height:"0px",left:"0px"}),$(".coeff-room-block18").css({width:B+"px",height:V+"px",left:"130px",top:F-V+30+"px"}),$(".coeff-room-block19").css({width:B+"px",height:V+"px",left:"130px",top:F-V+30+"px"}),$(".coeff-room-block20").css({width:B+"px",height:V+"px",left:"130px",top:F-V+30+"px"}),$(".coeff-room-block21").css({width:B+"px",height:V+"px",left:"130px",top:F-V+50+"px"}),$(".coeff-room-block11").css("left",.23*(.991*P)+280+"px"),$(".coeff-room-block8").css("left",.23*P+275+"px"),$(".coeff-room-block5").css("left","5000px"),$(".coeff-room-block10").css("opacity",1),$(".coeff-room-block7").css("opacity",1),$(".coeff-room-block16").css("left","5000px"),$(".coeff-room-block9").css("opacity",0)}}if(a.typeConstruction===e.SVG_ID_MAIN){var X=4.4*S;if(1===i.product.construction_type||3===i.product.construction_type){var q=D.x-160,Q=18,j=D.x-340,Z=-100;f.append("g").append("polygon").attr({id:"clipPolygonWindow1",fill:"#FFFAFA",points:v,transform:"translate("+q+", "+Q+") scale("+X+","+X+")"}),f.append("g").append("polygon").attr({id:"clipPolygonWindow2",fill:"#FFFAFA",points:v,transform:"translate("+j+", "+Q+") scale("+X+","+X+")"}),f.append("g").append("polygon").attr({id:"clipPolygonWindow3",fill:"#FFFAFA",points:v,transform:"translate("+q+", "+Z+") scale("+X+","+X+")"}),f.append("g").append("polygon").attr({id:"clipPolygonWindow4",fill:"#FFFAFA",points:v,transform:"translate("+j+", "+Z+") scale("+X+","+X+")"})}4==i.product.construction_type&&(f.append("g").append("polygon").attr({id:"clipPolygonDoor3",fill:"#FFFAFA",points:v,transform:"translate("+(D.x-215)+", -80) scale("+X+","+X+")"}),f.append("g").append("polygon").attr({id:"clipPolygonDoor4",fill:"#FFFAFA",points:v,transform:"translate("+(D.x-336)+", -80) scale("+X+","+X+")"}))}for(T=f.append("g").attr({id:"elem_group"}),h=f.append("g").attr({id:"dim_group"}),N=_.details.length,L=1;N>L;L+=1)T.selectAll("path."+_.details[L].id).data(_.details[L].parts).enter().append("path").attr({block_id:_.details[L].id,parent_id:_.details[L].parent,"class":function(t){var i;return i=a.typeConstruction===e.SVG_CLASS_ICON?"glass"===t.type?"glass-icon":"frame-icon":t.doorstep?"doorstep":"glass"===t.type?"glass":"frame"},item_type:function(e){return e.type},item_dir:function(e){return e.dir},item_id:function(e){return e.points[0].id},d:function(e){return e.path},fill:function(t){var r;return r="glass"===t.type?a.typeConstruction===e.SVG_ID_MAIN?"url(#background)":"rgba(155, 204, 255, 0.20)":i.product.lamination.img_in_id>1?"frame"===t.type||"impost"===t.type?"glass"!==t.type?"url(#laminat)":"":"glass"!==t.type?"url(#laminat1)":"":a.typeConstruction===e.SVG_ID_MAIN?"#DCDCDC":"#f9f9f9"}}),a.typeConstruction!==e.SVG_CLASS_ICON&&(_.details[L].sashOpenDir&&T.selectAll("path.sash_mark."+_.details[L].id).data(_.details[L].sashOpenDir).enter().append("path").classed("sash_mark",!0).attr({d:function(e){return C(e.points)},"marker-mid":function(e){return c(1,e,_.details[L])},"marker-start":function(e){return c(0,e,_.details[L])},"marker-end":function(e){return c(0,e,_.details[L])}}),a.typeConstruction===e.SVG_ID_EDIT&&1===_.details[L].level&&(O=_.details[L].pointsOut.filter(function(e){return e.corner>0}),T.selectAll("circle.corner_mark."+_.details[L].id).data(O).enter().append("circle").attr({block_id:_.details[L].id,"class":"corner_mark",parent_id:function(e){return e.id},cx:function(e){return e.x},cy:function(e){return e.y},r:0})),"tamlateGlassSVG"===a.typeConstruction&&(_.details[L].children.length||T.append("text").text(_.details[L].glassTxt).attr({block_id:_.details[L].id,"class":"glass-txt",x:_.details[L].center.x,y:_.details[L].center.y})),"tamlateGridSVG"===a.typeConstruction&&!_.details[L].children.length&&_.details[L].gridId&&T.append("text").text(_.details[L].gridTxt).attr({"class":"glass-txt",x:_.details[L].center.x,y:_.details[L].center.y}));if(a.typeConstruction!==e.SVG_CLASS_ICON){var J,ee,te,ie=_.dimension.dimX.length,re=_.dimension.dimY.length,oe=_.dimension.dimQ.length;for(J=0;ie>J;J+=1)u(0,_.dimension.dimX[J],h,C);for(ee=0;re>ee;ee+=1)u(1,_.dimension.dimY[ee],h,C);for(te=0;oe>te;te+=1)p(_.dimension.dimQ[te],h,C)}s.html(y),o.removeAllEventsInSVG(),a.typeConstruction===e.SVG_ID_EDIT&&(o.initAllImposts(),o.initAllGlass(),o.initAllArcs(),o.initAllDimension())}}a.$watch("template",function(){_(a.template,a.templateWidth,a.templateHeight)})}}}])}(),function(){angular.module("BauVoiceApp").directive("typing",function(){return{scope:{output:"@",typingDelay:"@"},link:function(e,t,i){function r(){t.text(e.output)}i.$observe("typing",function(e){"on"===e.toString()&&r()}),i.$observe("output",function(){r()})}}})}();var NuanceSpeechKitPlugin=function(){};NuanceSpeechKitPlugin.prototype.initialize=function(e,t,i,r,o,n){return Cordova.exec(o,n,"PhoneGapSpeechPlugin","initSpeechKit",[e,t,i,r])},NuanceSpeechKitPlugin.prototype.cleanup=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","cleanupSpeechKit",[])},NuanceSpeechKitPlugin.prototype.startRecognition=function(e,t,i,r){return Cordova.exec(i,r,"PhoneGapSpeechPlugin","startRecognition",[e,t])},NuanceSpeechKitPlugin.prototype.stopRecognition=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopRecognition",[])},NuanceSpeechKitPlugin.prototype.getResults=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","getRecoResult",[])},NuanceSpeechKitPlugin.prototype.playTTS=function(e,t,i,r,o){return Cordova.exec(r,o,"PhoneGapSpeechPlugin","startTTS",[e,t,i])},NuanceSpeechKitPlugin.prototype.stopTTS=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopTTS",[])},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},function(){angular.module("MainModule").factory("AddElementMenuServ",["$q","$timeout","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor","DesignStor","UserStor","localDB","GeneralServ","loginServ","MainServ","SVGServ","DesignServ","AnalyticsServ","CartServ","CartMenuServ",function(e,t,i,r,o,n,a,s,l,d,c,u,p,_,E,m,g,f){function T(){a.aux.auxParameter=0,i.global.isQtyCalculator=0,i.global.isSizeCalculator=0,i.global.isWidthCalculator=0}function h(e){var i,o=e.chosenAddElements.length;for(e.addelem_price=0,e.addelemPriceDis=0;--o>-1;)if(i=e.chosenAddElements[o].length,i>0)for(;--i>-1;)e.addelem_price+=e.chosenAddElements[o][i].element_qty*e.chosenAddElements[o][i].element_price;e.addelem_price=c.roundingValue(e.addelem_price),e.addelemPriceDis=c.setPriceDis(e.addelem_price,r.order.discount_addelem),t(function(){p.setProductPriceTOTAL(e)},50)}function I(e){var t=a.aux.currentAddElementId,i=a.aux.auxParameter.split("-")[0]-1;return o.product.chosenAddElements[i][t].element_qty<2&&0>e?!1:o.product.chosenAddElements[i][t].element_qty<6&&-5==e?!1:void(a.aux.tempSize.length?(o.product.chosenAddElements[i][t].element_qty=parseInt(a.aux.tempSize.join(""),10)+e,a.aux.tempSize.length=0):o.product.chosenAddElements[i][t].element_qty+=e)}function A(){T(),a.aux.tempSize.length=0,h(o.product)}function S(e,t,o){var n,s=o[e][t];return 20===s.list_group_id?(n={currencyId:l.userInfo.currencyId,element:s},d.calculationGridPrice(n).then(function(e){return e&&(s.element_price=angular.copy(c.roundingValue(c.addMarginToPrice(e.priceTotal,i.global.margins.margin))),s.elementPriceDis=angular.copy(c.roundingValue(c.setPriceDis(s.element_price,r.order.discount_addelem))),a.aux.currAddElementPrice=angular.copy(s.elementPriceDis)),e})):(n={currencyId:l.userInfo.currencyId,elementId:s.id,elementWidth:s.element_width/1e3,elementHeight:s.element_height/1e3},d.getAdditionalPrice(n).then(function(e){return e&&(s.element_price=c.roundingValue(c.addMarginToPrice(e.priceTotal,i.global.margins.margin)),s.elementPriceDis=c.roundingValue(c.setPriceDis(s.element_price,r.order.discount_addelem)),a.aux.currAddElementPrice=angular.copy(s.elementPriceDis)),e}))}function N(){var e=a.aux.currentAddElementId,t=a.aux.auxParameter.split("-")[0]-1;a.aux.tempSize.length=0,T(),S(t,e,o.product.chosenAddElements).then(function(){h(o.product)})}function L(){var e="",t=a.aux.currentAddElementId,r=a.aux.auxParameter.split("-")[0]-1;e=parseInt(a.aux.tempSize.join(""),10),i.global.isQtyCalculator?o.product.chosenAddElements[r][t].element_qty=e:i.global.isSizeCalculator&&(i.global.isWidthCalculator?o.product.chosenAddElements[r][t].element_width=e:o.product.chosenAddElements[r][t].element_height=e)}function O(e){var t=a.aux.tempSize.length;(4===t||1===t&&!a.aux.tempSize[0])&&(a.aux.tempSize.length=0),"0"===e?t&&a.aux.tempSize[0]&&(a.aux.tempSize.push(e),L()):"00"===e?t&&a.aux.tempSize[0]&&(3>t?a.aux.tempSize.push(0,0):3===t&&a.aux.tempSize.push(0),L()):(a.aux.tempSize.push(e),L())}function y(){a.aux.tempSize.pop(),a.aux.tempSize.length<1&&a.aux.tempSize.push(0),L()}function C(e){var t;if(13===e.which)i.global.isQtyCalculator?A():i.global.isSizeCalculator&&N();else if(8===e.which)y();else{switch(e.which){case 48:case 96:t=0;break;case 49:case 97:t=1;break;case 50:case 98:t=2;break;case 51:case 99:t=3;break;case 52:case 100:t=4;break;case 53:case 101:t=5;break;case 54:case 102:t=6;break;case 55:case 103:t=7;break;case 56:case 104:t=8;break;case 57:case 105:t=9}void 0!==t&&O(t)}}function R(){i.global.isSizeCalculator?N():i.global.isQtyCalculator&&A(),a.aux.currentAddElementId=0}function D(){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&R(),a.aux.isFocusedAddElement=0,a.aux.isTabFrame=0,a.aux.isGridSelectorDialog=0,a.aux.selectedGrid=0,a.aux.showAddElementsMenu=0,a.aux.isAddElement=0}function b(e){var t;if(o.product.template_source.details[e].gridId)for(t=o.product.chosenAddElements[0].length;--t>-1;)o.product.chosenAddElements[0][t].block_id===o.product.template_source.details[e].id&&(1===o.product.chosenAddElements[0][t].element_qty?o.product.chosenAddElements[0].splice(t,1):o.product.chosenAddElements[0][t].element_qty>1&&(o.product.chosenAddElements[0][t].element_qty-=1))}function v(e,t,i){var r,n=o.product.template.details[t].pointsLight.map(function(e){return e.x;
}),s=o.product.template.details[t].pointsLight.map(function(e){return e.y});return o.product.template_source.details[t].gridId=a.aux.addElementsList[i[0]][i[1]].id,o.product.template_source.details[t].gridTxt=a.aux.addElementsList[i[0]][i[1]].name,r=angular.copy(a.aux.addElementsList[i[0]][i[1]]),r.element_width=Math.round(d3.max(n)-d3.min(n)),r.element_height=Math.round(d3.max(s)-d3.min(s)),r.block_id=e,r}function P(e,t){for(var i=o.product.template_source.details.length,r=[];--i>0;)if(e){if(o.product.template_source.details[i].id===e){b(i),r.push(v(e,i,t));break}}else"sash"===o.product.template_source.details[i].blockType&&(b(i),r.push(v(o.product.template_source.details[i].id,i,t)));return r}function M(){_.createSVGTemplate(o.product.template_source,o.product.profileDepths).then(function(e){o.product.template=angular.copy(e)})}function x(){E.removeGlassEventsInSVG(),s.design.selectedGlass.length=0,a.aux.selectedGrid=0,a.aux.isGridSelectorDialog=!a.aux.isGridSelectorDialog}function G(e,t){for(var i=e.length,r=0;--i>-1;)if(e[i].id===t.id&&(t.element_width&&t.element_height&&e[i].element_width===t.element_width&&e[i].element_height===t.element_height&&(r+=1),t.element_width&&!t.element_height&&e[i].element_width===t.element_width&&(r+=1),t.element_width||t.element_height||(r+=1),r)){e[i].element_qty+=1;break}return r}function w(e,t){var i,r=a.aux.isFocusedAddElement-1;if(i=G(e.chosenAddElements[r],t),!i){var o={element_type:r,element_width:0,element_height:0,block_id:0},n=angular.extend(o,t);e.chosenAddElements[r].push(n),2===e.chosenAddElements[r].length&&(a.aux.isTabFrame=1)}}function U(e){u.getGridPrice(e).then(function(e){var t=e.length;if(a.aux.currAddElementPrice=0,t){for(;--t>-1;)w(o.product,e[t]),a.aux.currAddElementPrice+=e[t].elementPriceDis;a.aux.currAddElementPrice=c.roundingValue(a.aux.currAddElementPrice),a.aux.isAddElement=a.aux.selectedGrid[0]+"-"+a.aux.selectedGrid[1],h(o.product),M(),x()}})}function k(){if(s.design.selectedGlass.length){var e=s.design.selectedGlass.map(function(e){var t=e.attributes.block_id.nodeValue;return P(t,a.aux.selectedGrid)[0]});U(e)}}function H(){var e=P(0,a.aux.selectedGrid);U(e)}function V(e){for(var t=o.product.template_source.details.length;--t>0;)if(e){if(o.product.template_source.details[t].id===e&&o.product.template_source.details[t].gridId){delete o.product.template_source.details[t].gridId,delete o.product.template_source.details[t].gridTxt;break}}else o.product.template_source.details[t].gridId&&(delete o.product.template_source.details[t].gridId,delete o.product.template_source.details[t].gridTxt);M()}function B(t,i){var r=e.defer();return a.aux.isAddElement=t+"-"+i,S(t,i,a.aux.addElementsList).then(function(){r.resolve(angular.copy(a.aux.addElementsList[t][i]))}),r.promise}function F(e,t){if((i.global.isQtyCalculator||i.global.isSizeCalculator)&&R(),a.aux.currAddElementPrice=0,void 0===e&&void 0===t){1===a.aux.isFocusedAddElement&&V();var r=a.aux.isFocusedAddElement-1;a.aux.isAddElement=0,o.product.chosenAddElements[r].length=0,h(o.product)}else B(e,t).then(function(e){w(o.product,e),h(o.product)})}function W(e,t){var s,l;if("main"===i.global.currOpenPage)1===a.aux.isFocusedAddElement?o.product.is_addelem_only?(w(o.product,a.aux.addElementsList[e][t]),h(o.product)):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,E.initAllGlassXGrid()):(w(o.product,a.aux.addElementsList[e][t]),h(o.product));else if("cart"===i.global.currOpenPage)for(s=n.cart.selectedProducts.length,l=0;s>l;l+=1)n.cart.selectedProducts[l].length&&(w(r.order.products[l],a.aux.addElementsList[e][t]),g.calculateAddElemsProductsPrice(1),f.joinAllAddElements(),g.collectAllAddElems(),g.getAddElemsPriceTotal(),f.calculateOrderPrice());a.aux.currAddElementPrice=0,a.aux.isAddElement=0}function Y(e,t,i){S(t,i,a.aux.addElementsList).then(function(){var r,n=e-1,s=angular.copy(a.aux.addElementsList[t][i]);if(r=G(o.product.chosenAddElements[n],s),!r){var l={element_type:n,element_width:0,element_height:0,block_id:0},d=angular.extend(l,s);o.product.chosenAddElements[n].push(d)}h(o.product)})}function z(e,t,r,n){n.stopPropagation(),D(),a.aux.addElementsList=angular.copy(i.global.addElementsAll[e-1].elementsList),1===e?o.product.is_addelem_only?Y(e,t,r):(a.aux.isFocusedAddElement=e,a.aux.selectedGrid=[t,r],a.aux.isGridSelectorDialog=1,E.initAllGlassXGrid()):Y(e,t,r)}function K(e,t){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&R(),1===a.aux.isFocusedAddElement&&V(o.product.chosenAddElements[e][t].block_id),o.product.chosenAddElements[e].splice(t,1),h(o.product)}function X(){var e,t=o.product.chosenAddElements.length;for(e=0;t>e;e+=1)e||o.product.chosenAddElements[e].length&&V(),o.product.chosenAddElements[e].length=0;o.product.addelem_price=0,o.product.addelemPriceDis=0,h(o.product),D()}var q=this;return q.publicObj={closeAddElementsMenu:D,chooseAddElement:F,chooseAddElementList:W,getAddElementPrice:B,deleteAddElement:K,deleteAllAddElements:X,finishCalculators:R,takeAddElemFilt:z,confirmGrid:k,setGridToAll:H,closeGridSelectorDialog:x,pressCulculator:C,setValueQty:I,closeQtyCaclulator:A,setValueSize:O,deleteLastNumber:y,changeElementSize:L,closeSizeCaclulator:N},q.publicObj}])}(),function(){angular.module("MainModule").factory("AddElementsServ",["$filter","$timeout","globalConstants","GeneralServ","AddElementMenuServ","GlobalStor","ProductStor","AuxStor",function(e,t,i,r,o,n,a,s){function l(e){var t,i=e-1;s.aux.addElementsMenuStyle=r.addElementDATA[i].typeClass+"-theme",s.aux.addElementsType=angular.copy(n.global.addElementsAll[i].elementType),1===s.aux.isFocusedAddElement?a.product.is_addelem_only?s.aux.addElementsList=angular.copy(n.global.addElementsAll[i].elementsList):(t=angular.copy(n.global.addElementsAll[i].elementsList)[0].filter(function(e){return e.profile_id===a.product.profile.id}),s.aux.addElementsList=[t]):s.aux.addElementsList=angular.copy(n.global.addElementsAll[i].elementsList)}function d(e){s.aux.isFocusedAddElement=e,s.aux.currAddElementPrice=0,l(e),s.aux.addElementsList.length&&s.aux.addElementsList[0].length&&(s.aux.showAddElementsMenu=i.activeClass)}function c(e){(n.global.isQtyCalculator||n.global.isSizeCalculator)&&o.finishCalculators(),s.aux.showAddElementsMenu?s.aux.isFocusedAddElement===e?o.closeAddElementsMenu():(o.closeAddElementsMenu(),t(function(){d(e)},f)):d(e)}function u(e,t,i){var l;if(s.aux.auxParameter===e+"-"+t+"-"+i)o.finishCalculators();else switch((n.global.isQtyCalculator||n.global.isSizeCalculator)&&o.finishCalculators(),l=a.product.chosenAddElements[e-1][i],s.aux.auxParameter=e+"-"+t+"-"+i,s.aux.currentAddElementId=i,s.aux.calculatorStyle=r.addElementDATA[e-1].typeClass+"-theme",t){case 1:n.global.isQtyCalculator=1;break;case 2:n.global.isSizeCalculator=1,n.global.isWidthCalculator=1;break;case 3:n.global.isSizeCalculator=1,n.global.isWidthCalculator=0}}function p(){s.aux.isFocusedAddElement=0,s.aux.isTabFrame=0,s.aux.showAddElementsMenu=0,s.aux.isAddElement=0,s.aux.isGridSelectorDialog=0,(n.global.isQtyCalculator||n.global.isSizeCalculator)&&o.finishCalculators()}function _(){s.aux.isAddElementListView=1,p()}function E(){s.aux.isAddElementListView=0,p()}function m(){var t,i,o,l,d,c,u,p=r.addElementDATA.length,_=n.global.addElementsAll,E=s.aux.searchingWord.toLowerCase(),m=[];for(s.aux.addElementGroups.length=0,o=0;p>o;o+=1)if(_[o].elementsList){for(t={type:{},elems:[]},t.type.groupId=o+1,t.type.groupName=e("translate")(r.addElementDATA[o].name),t.type.groupClass=r.addElementDATA[o].typeClass+"-theme",u=o?_[o].elementsList:a.product.is_addelem_only?_[o].elementsList:[angular.copy(_[o].elementsList)[0].filter(function(e){return e.profile_id===a.product.profile.id})],l=u.length;--l>-1;)for(d=u[l].length;--d>-1;)c=u[l][d].name.toLowerCase(),c.indexOf(E)+1&&(i={typeInd:l,index:d,name:u[l][d].name},t.elems.push(i));m.push(t)}s.aux.addElementGroups=m.filter(function(e){return e.elems.length>0})}var g=this,f=12*i.STEP;return g.publicObj={selectAddElement:c,initAddElementTools:u,openAddElementListView:_,closeAddElementListView:E,createAddElementGroups:m},g.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("AnalyticsServ",["localDB","UserStor",function(e,t){function i(i,r,o,n,a){var s={user_id:i,order_id:r,calculation_id:o,element_id:n,date:new Date},l="";switch(a){case 1:l="profile_analytics";break;case 2:break;case 3:l="hardware_analytics";break;case 4:}e.insertServer(t.userInfo.phone,t.userInfo.device_code,l,s)}var r=this;return r.analyticsObjSource={user_id:0,order_id:0,element_id:0,element_type:0},r.publicObj={sendAnalyticsData:i},r.publicObj}])}(),function(){angular.module("CartModule").factory("CartMenuServ",["$location","GeneralServ","MainServ","GlobalStor","OrderStor","CartStor","UserStor",function(e,t,i,r,o,n,a){function s(){var e,t,i,r,a,s,l,d,c=o.order.products.length,u=0;for(n.cart.allAddElements.length=0,n.cart.isExistAddElems=0,s=0;c>s;s+=1){for(i=[],e=o.order.products[s].chosenAddElements.length,l=0;e>l;l+=1)if(t=o.order.products[s].chosenAddElements[l].length,t>0)for(d=0;t>d;d+=1)r=angular.copy(o.order.products[s].chosenAddElements[l][d]),a={id:r.id,list_group_id:r.list_group_id,name:r.name,elementPriceDis:r.elementPriceDis,element_price:r.element_price,element_qty:r.element_qty*o.order.products[s].product_qty,element_type:r.element_type,element_width:r.element_width,element_height:r.element_height},i.push(a);i.length&&(u+=1),n.cart.allAddElements.push(i)}u&&(n.cart.isExistAddElems=1)}function l(){var e=new Date(o.order.new_delivery_date).getDay(),i=0;switch(e){case 0:i=a.userInfo.mount_sun||0;break;case 1:i=a.userInfo.mount_mon||0;break;case 2:i=a.userInfo.mount_tue||0;break;case 3:i=a.userInfo.mount_wed||0;break;case 4:i=a.userInfo.mount_thu||0;break;case 5:i=a.userInfo.mount_fri||0;break;case 6:i=a.userInfo.mount_sat||0}o.order.mounting_price=t.roundingValue(o.order.mounting_price*(1+i/100))}function d(e,i,r,n){o.order.is_instalment&&(o.order.payment_first=t.roundingValue(e*o.order.selectedInstalmentPercent/100),o.order.payment_monthly=t.roundingValue((e-o.order.payment_first)/o.order.selectedInstalmentPeriod),o.order.paymentFirstDis=t.roundingValue(r*o.order.selectedInstalmentPercent/100),o.order.paymentMonthlyDis=t.roundingValue((r-o.order.paymentFirstDis)/o.order.selectedInstalmentPeriod),i&&(o.order.payment_first_primary=t.roundingValue(i*o.order.selectedInstalmentPercent/100),o.order.payment_monthly_primary=t.roundingValue((i-o.order.payment_first_primary)/o.order.selectedInstalmentPeriod),o.order.paymentFirstPrimaryDis=t.roundingValue(n*o.order.selectedInstalmentPercent/100),o.order.paymentMonthlyPrimaryDis=t.roundingValue((n-o.order.paymentFirstPrimaryDis)/o.order.selectedInstalmentPeriod)))}function c(){if(o.order.order_price=0,o.order.order_price_dis=0,l(),o.order.order_price=o.order.products_price,o.order.order_price_dis=t.roundingValue(o.order.productsPriceDis+o.order.floor_price+o.order.mounting_price),o.order.order_price_primary=angular.copy(o.order.order_price),o.order.orderPricePrimaryDis=angular.copy(o.order.order_price_dis),o.order.delivery_price)if(o.order.is_date_price_more)n.cart.marginDeliveyPlant&&(o.order.order_price+=o.order.products_price*n.cart.marginDeliveyPlant/100),o.order.order_price_dis+=o.order.delivery_price;else if(o.order.is_date_price_less)n.cart.discountDeliveyPlant&&(o.order.order_price-=o.order.products_price*n.cart.discountDeliveyPlant/100),o.order.order_price_dis-=o.order.delivery_price;else{var e=r.global.deliveryCoeff.percents[r.global.deliveryCoeff.standart_time];e&&(o.order.order_price-=o.order.products_price*e/100)}o.order.order_price=t.roundingValue(o.order.order_price),o.order.order_price_dis=t.roundingValue(o.order.order_price_dis),n.cart.discountPriceDiff=t.roundingValue(o.order.order_price-o.order.productsPriceDis),d(o.order.order_price,o.order.order_price_primary,o.order.order_price_dis,o.order.orderPricePrimaryDis)}function u(e){o.order.floor_id!==e.id&&(o.order.floor_id=e.id,e.id?(o.order.floorName=e.name,o.order.floor_price=e.priceReal,o.order.delivery_user_id=e.user_id):(o.order.floorName="",o.order.floor_price=0,o.order.delivery_user_id=0),c())}function p(e){o.order.mounting_id!==e.id&&(o.order.mounting_id=e.id,e.id?(o.order.mountingName=e.name,o.order.mounting_price=e.priceReal,o.order.mounting_user_id=e.user_id):(o.order.mountingName="",o.order.mounting_price=0,o.order.mounting_user_id=0),c())}function _(e,t,i){o.order.instalment_id!==e&&(o.order.is_instalment=1,o.order.instalment_id=e,o.order.selectedInstalmentPeriod=t,o.order.selectedInstalmentPercent=i,d(o.order.order_price,o.order.order_price_primary,o.order.order_price_dis,o.order.orderPricePrimaryDis))}function E(e){for(var i,r=o.order.products.length;--r>-1;)i=t.setPriceDis(o.order.products[r].template_price,e)+o.order.products[r].addelemPriceDis,o.order.products[r].productPriceDis=angular.copy(t.roundingValue(i))}function m(){var e=o.order.products.length;for(o.order.templates_price=0,o.order.addelems_price=0,o.order.products_price=0,o.order.productsPriceDis=0,n.cart.squareTotal=0,n.cart.perimeterTotal=0,n.cart.qtyTotal=0;--e>-1;)o.order.addelems_price+=o.order.products[e].addelem_price*o.order.products[e].product_qty,o.order.templates_price+=o.order.products[e].template_price*o.order.products[e].product_qty,o.order.products_price+=o.order.products[e].product_price*o.order.products[e].product_qty,o.order.productsPriceDis+=o.order.products[e].productPriceDis*o.order.products[e].product_qty,n.cart.squareTotal+=o.order.products[e].template_square*o.order.products[e].product_qty,n.cart.perimeterTotal+=.002*(o.order.products[e].template_width+o.order.products[e].template_height)*o.order.products[e].product_qty,n.cart.qtyTotal+=o.order.products[e].product_qty;o.order.addelems_price=t.roundingValue(o.order.addelems_price),o.order.templates_price=t.roundingValue(o.order.templates_price),o.order.products_price=t.roundingValue(o.order.products_price),n.cart.squareTotal=t.roundingValue(n.cart.squareTotal),n.cart.perimeterTotal=t.roundingValue(n.cart.perimeterTotal),n.cart.qtyTotal=t.roundingValue(n.cart.qtyTotal),o.order.productsPriceDis?o.order.productsPriceDis=t.roundingValue(o.order.productsPriceDis):o.order.productsPriceDis=angular.copy(o.order.products_price)}function g(e){var i,r,n,a,l,d,c=o.order.products.length;for(a=0;c>a;a++)for(i=o.order.products[a].productPriceDis-o.order.products[a].addelemPriceDis,o.order.products[a].addelemPriceDis=t.setPriceDis(o.order.products[a].addelem_price,e),o.order.products[a].productPriceDis=t.roundingValue(i+o.order.products[a].addelemPriceDis),r=o.order.products[a].chosenAddElements.length,l=0;r>l;l++)if(n=o.order.products[a].chosenAddElements[l].length,n>0)for(d=0;n>d;d++)o.order.products[a].chosenAddElements[l][d].elementPriceDis=t.setPriceDis(o.order.products[a].chosenAddElements[l][d].element_price,e);s()}function f(){o.order.delivery_price=t.roundingValue(o.order.productsPriceDis*n.cart.discountDeliveyPlant/100)}function T(){o.order.delivery_price=t.roundingValue(o.order.productsPriceDis*n.cart.marginDeliveyPlant/100)}function h(){o.order.is_date_price_less=0,o.order.is_date_price_more=0,o.order.is_old_price=0}function I(e,t){var s=e.split("."),l=t.split("."),d=new Date(s[2],s[1]-1,s[0]),u=new Date(l[2],l[1]-1,l[0]),p=Math.floor((u-d)/864e5);if(o.order.delivery_price=0,p&&p>0){var _=p/7,I=0,A=0,S=0;1>=_?(I=r.global.deliveryCoeff.week_1,A=a.userInfo.discConstrByWeek[0],S=a.userInfo.discAddElemByWeek[0]):_>1&&2>=_?(I=r.global.deliveryCoeff.week_2,A=a.userInfo.discConstrByWeek[1],S=a.userInfo.discAddElemByWeek[1]):_>2&&3>=_?(I=r.global.deliveryCoeff.week_3,A=a.userInfo.discConstrByWeek[2],S=a.userInfo.discAddElemByWeek[2]):_>3&&4>=_?(I=r.global.deliveryCoeff.week_4,A=a.userInfo.discConstrByWeek[3],S=a.userInfo.discAddElemByWeek[3]):_>4&&5>=_?(I=r.global.deliveryCoeff.week_5,A=a.userInfo.discConstrByWeek[4],S=a.userInfo.discAddElemByWeek[4]):_>5&&6>=_?(I=r.global.deliveryCoeff.week_6,A=a.userInfo.discConstrByWeek[5],S=a.userInfo.discAddElemByWeek[5]):_>6&&7>=_?(I=r.global.deliveryCoeff.week_7,A=a.userInfo.discConstrByWeek[6],S=a.userInfo.discAddElemByWeek[6]):_>7&&(I=r.global.deliveryCoeff.week_8,A=a.userInfo.discConstrByWeek[7],S=a.userInfo.discAddElemByWeek[7]),A?(o.order.discount_construct=A,E(A),m()):(o.order.discount_construct=angular.copy(a.userInfo.discountConstr),E(o.order.discount_construct),m()),S?(o.order.discount_addelem=S,g(S),m()):(o.order.discount_addelem=angular.copy(a.userInfo.discountAddElem),g(o.order.discount_addelem),m()),I?(n.cart.discountDeliveyPlant=I,f(),o.order.is_date_price_less=1,o.order.is_date_price_more=0,o.order.is_old_price=1):(m(),h())}else if(p&&0>p){i.setCurrDiscounts(),g(o.order.discount_addelem),E(o.order.discount_construct),m();var N=Math.abs(r.global.deliveryCoeff.standart_time+p);n.cart.marginDeliveyPlant=+r.global.deliveryCoeff.percents[N],n.cart.marginDeliveyPlant?(T(),o.order.is_date_price_more=1,o.order.is_date_price_less=0,o.order.is_old_price=1):h()}else i.setCurrDiscounts(),g(o.order.discount_addelem),E(o.order.discount_construct),m(),h();o.order.new_delivery_date=u.getTime(),c()}function A(e){if(e)for(var t=e.length;--t>-1;)if(e[t].type)switch(e[t].type){case 1:e[t].priceReal=Math.round(e[t].price*n.cart.qtyTotal);break;case 2:e[t].priceReal=Math.round(e[t].price*n.cart.squareTotal);break;case 3:e[t].priceReal=Math.round(e[t].price*n.cart.perimeterTotal);break;case 4:e[t].priceReal=Math.round(o.order.productsPriceDis*e[t].price/100);break;default:e[t].priceReal=Math.round(e[t].price)}}function S(){m(),n.cart.discountDeliveyPlant&&f(),n.cart.marginDeliveyPlant&&T(),c(),A(r.global.supplyData),A(r.global.assemblingData)}function N(){n.cart.tempConstructDisc=+o.order.discount_construct,n.cart.tempAddelemDisc=+o.order.discount_addelem,n.cart.isShowDiscount=1}function L(){n.cart.isShowDiscount=0}function O(){n.cart.isShowDiscount||(n.cart.tempConstructDisc=+o.order.discount_construct,n.cart.tempAddelemDisc=+o.order.discount_addelem),n.cart.isShowDiscount=!n.cart.isShowDiscount}function y(e){return null==e?e=0:e%1&&(e=parseFloat(e.toFixed(1))),e}function C(e){e?(n.cart.tempAddelemDisc=y(n.cart.tempAddelemDisc),n.cart.tempAddelemDisc>a.userInfo.discountAddElemMax&&(n.cart.tempAddelemDisc=+a.userInfo.discountAddElemMax),o.order.discount_addelem=+n.cart.tempAddelemDisc,g(o.order.discount_addelem)):(n.cart.tempConstructDisc=y(n.cart.tempConstructDisc),n.cart.tempConstructDisc>a.userInfo.discountConstrMax&&(n.cart.tempConstructDisc=+a.userInfo.discountConstrMax),o.order.discount_construct=+n.cart.tempConstructDisc,E(o.order.discount_construct)),S()}function R(){n.cart.customer.customer_city_id=arguments[0],n.cart.customer.customer_city=arguments[1],n.cart.customer.customer_location=arguments[2]}function D(){n.cart.submitted=0,n.cart.isCityBox=0,r.global.orderEditNumber>0?n.fillOrderForm():(R(o.order.customer_city_id,o.order.customer_city,o.order.customer_location),n.cart.customer.customer_sex=0),n.cart.isMasterDialog=0,n.cart.isOrderDialog=0,n.cart.isCreditDialog=0}function b(){var o;r.global.isLoader=1,o=n.cart.isMasterDialog?"master":"order",i.saveOrderInDB(n.cart.customer,1,o).then(function(){D(),t.setPreviosPage(),r.global.isLoader=0,e.path("/history")})}function v(){n.cart.customer.customer_location?n.cart.isCityBox=1:n.cart.isCityBox=0}function P(e){R(e.cityId,e.cityName,e.fullLocation),n.cart.isCityBox=0}var M=this;return M.publicObj={joinAllAddElements:s,selectFloorPrice:u,selectAssembling:p,selectInstalment:_,checkDifferentDate:I,calculateOrderPrice:S,calculateAllProductsPrice:m,calculateTotalOrderPrice:c,changeProductPriceAsDiscount:E,changeAddElemPriceAsDiscount:g,openDiscountBlock:N,closeDiscountBlock:L,swipeDiscountBlock:O,approveNewDisc:C,closeOrderDialog:D,changeLocation:v,selectCity:P,sendOrder:b},M.publicObj}])}(),function(){angular.module("CartModule").factory("CartServ",["$location","$filter","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor",function(e,t,i,r,o,n,a,s,l,d){function c(){i.setPreviosPage(),r.createNewProduct()}function u(e){a.order.products[e].product_qty+=1,o.joinAllAddElements(),o.calculateOrderPrice()}function p(e){function r(){a.order.products.splice(e,1),l.cart.allAddElements.splice(e,1),o.calculateOrderPrice(),a.order.products.length>0}i.confirmAlert(t("translate")("common_words.DELETE_PRODUCT_TITLE"),t("translate")("common_words.DELETE_PRODUCT_TXT"),r)}function _(e){1===a.order.products[e].product_qty?p(e):(a.order.products[e].product_qty-=1,o.calculateOrderPrice()),o.joinAllAddElements()}function E(t,o){s.product=angular.copy(a.order.products[t]),n.global.productEditNumber=s.product.product_id,n.global.isCreatedNewProduct=1,n.global.isChangedTemplate=1,r.prepareMainPage(),"auxiliary"===o&&(n.global.activePanel=6),i.setPreviosPage(),e.path("/main")}function m(){var e,t,r,o=angular.copy(l.cart.allAddElements),n=o.length;for(l.cart.allAddElemsOrder.length=0;--n>-1;)if(e=o[n].length)for(;--e>-1;)if(t=l.cart.allAddElemsOrder.length){for(r=1;--t>-1;)l.cart.allAddElemsOrder[t].id===o[n][e].id&&l.cart.allAddElemsOrder[t].element_width===o[n][e].element_width&&l.cart.allAddElemsOrder[t].element_height===o[n][e].element_height&&(l.cart.allAddElemsOrder[t].element_qty=i.roundingValue(l.cart.allAddElemsOrder[t].element_qty+o[n][e].element_qty),r-=1);r&&l.cart.allAddElemsOrder.push(o[n][e])}else l.cart.allAddElemsOrder.push(o[n][e]);console.warn(l.cart.allAddElemsOrder)}function g(){var e=a.order.products.length;for(l.cart.addElemsOrderPriceTOTAL=0;--e>-1;)l.cart.addElemsOrderPriceTOTAL+=a.order.products[e].addelemPriceDis*a.order.products[e].product_qty;l.cart.addElemsOrderPriceTOTAL=i.roundingValue(l.cart.addElemsOrderPriceTOTAL)}function f(){l.cart.selectedProducts.length=0,l.cart.selectedProducts=a.order.products.map(function(){return[]})}function T(){m(),g(),f(),l.cart.isAllAddElems=1,d.aux.isAddElementListView=1}function h(e){for(var t,o,n=a.order.products.length;--n>-1;){if(a.order.products[n].addelem_price=0,a.order.products[n].addelemPriceDis=0,e)for(t=a.order.products[n].chosenAddElements.length;--t>-1;)if(o=a.order.products[n].chosenAddElements[t].length){for(;--o>-1;)a.order.products[n].addelem_price+=a.order.products[n].chosenAddElements[t][o].element_qty*a.order.products[n].chosenAddElements[t][o].element_price;a.order.products[n].addelem_price=i.roundingValue(a.order.products[n].addelem_price),a.order.products[n].addelemPriceDis=i.setPriceDis(a.order.products[n].addelem_price,a.order.discount_addelem)}r.setProductPriceTOTAL(a.order.products[n])}}function I(e,t){t+=1,e.product_id=t,a.order.products.push(e)}function A(e){var t=d3.max(a.order.products.map(function(e){return e.product_id})),i=angular.copy(a.order.products[e]);I(i,t),o.joinAllAddElements(),o.calculateOrderPrice()}var S=this;return S.publicObj={increaseProductQty:u,decreaseProductQty:_,addNewProductInOrder:c,clickDeleteProduct:p,editProduct:E,showAllAddElements:T,collectAllAddElems:m,getAddElemsPriceTotal:g,calculateAddElemsProductsPrice:h,createProductCopy:A,addCloneProductInOrder:I},S.publicObj}])}(),function(){angular.module("BauVoiceApp").constant("globalConstants",{serverIP:"http://api.windowscalculator.net",printIP:"http://windowscalculator.net:3002/orders/get-order-pdf/",STEP:50,REG_LOGIN:/^[a-zA-Z?0-9?_?.?@?\-?]+$/,REG_PHONE:/^\d+$/,REG_NAME:/^[a-zA-Z]+$/,REG_MAIL:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,SVG_CLASS_ICON:"tamlateIconSVG",SVG_ID_EDIT:"tamlateSVG",SVG_ID_MAIN:"tamlateMainSVG",SVG_ID_ICON:"tamlateIconBigSVG",SVG_ID_GLASS:"tamlateGlassSVG",SVG_ID_GRID:"tamlateGridSVG",svgTemplateIconWidth:70,svgTemplateIconHeight:70,svgTemplateIconBigWidth:500,svgTemplateIconBigHeight:450,svgTemplateWidth:1022,svgTemplateHeight:767,squareLimit:.15,minSizeLimit:100,minSizeLimitStulp:300,minRadiusHeight:10,activeClass:"active",languages:[{label:"uk",name:"Українська"},{label:"ru",name:"Русский"},{label:"en",name:"English"},{label:"de",name:"Deutsch"},{label:"ro",name:"Român"},{label:"it",name:"Italiano"}]})}(),function(){angular.module("DesignModule").factory("DesignServ",["$rootScope","$location","$timeout","$filter","$q","globalConstants","GeneralServ","localDB","loginServ","MainServ","AnalyticsServ","SVGServ","GlobalStor","DesignStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,o,n,a,s,l,d,c,u,p,_,E,m,g){function f(){d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockX").classed("dim_shiftX",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_blockY").classed("dim_shiftY",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block").classed("dim_hidden",!0)}function T(){_.design.selectedCorner.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .corner_mark").transition().duration(300).ease("linear").attr("r",0)}function h(){_.design.selectedImpost.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").classed("frame-active",!1)}function I(){_.design.selectedArc.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .frame").classed("active_svg",!1)}function A(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").classed("glass-active",!1)}function S(){d3.selectAll("#"+n.SVG_ID_EDIT+" .size-rect").classed("active",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .size-txt-edit").classed("active",!1)}function N(){S(),p.global.isSizeCalculator=0,_.design.openVoiceHelper=0}function L(){u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e)})}function O(e,t){var i=t||n.SVG_ID_EDIT,r=d3.select("#"+i+" .glass[block_id="+e+"]"),o=1;r.classed("error_glass",!0);var a=setInterval(function(){11===o&&clearInterval(a),o%2?r.classed("error_glass",!1):r.classed("error_glass",!0),o+=1},50)}function y(){d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").each(function(){d3.select(this).on(Ze,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").each(function(){d3.select(this).on(Ze,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .frame").each(function(){d3.select(this).on(Ze,null)}),d3.selectAll("#"+n.SVG_ID_EDIT+" .size-box").each(function(){d3.select(this).on(Ze,null)}),d3.select(window).on("keydown",null)}function C(){d3.selectAll("#"+n.SVG_ID_GLASS+" .glass").each(function(){d3.select(this).on(Ze,null).classed("glass-active",!1)}),d3.selectAll("#"+n.SVG_ID_GRID+" .glass").each(function(){d3.select(this).on(Ze,null).classed("glass-active",!1)}),d3.select(window).on("keydown",null)}function R(){_.design.tempSize.length=0,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0,_.design.isDimExtra=0,_.design.isSquareExtra=0}function D(e,t){return a.roundingValue(t-Math.sqrt(Math.pow(t,2)-Math.pow(e,2)/4),1)}function b(e){var t,i,r,o,n,s,l=_.design.templateSourceTEMP.details,d=_.design.oldSize.attributes[5].nodeValue,c=_.design.oldSize.attributes[6].nodeValue,u=_.design.oldSize.attributes[10].nodeValue,p=+_.design.oldSize.attributes[11].nodeValue,E=+_.design.oldSize.attributes[12].nodeValue,m=_.design.oldSize.attributes[13].nodeValue,g=+_.design.oldSize.attributes[14].nodeValue,f=p+e,T=E-e,h=l.length,I=0,A=[];if(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),"curve"===d){i=D(p,e);e:for(r=1;h>r;r+=1)if(l[r].id===c){if(l[r].pointsQ)for(n=l[r].pointsQ.length;--n>-1;)if(l[r].pointsQ[n].id===u){l[r].pointsQ[n].heightQ=i;break e}if(l[r].impost&&l[r].impost.impostAxis[2].id===u){l[r].impost.impostAxis[2].heightQ=i;break e}}}else if(u.indexOf("qa")+1){for(r=1;h>r;r+=1)if(1===l[r].level&&(n=l[r].pointsQ.length))for(;--n>-1;)l[r].pointsQ[n].id===u&&(l[r].pointsQ[n].heightQ=e)}else{if(!g){for(r=1;h>r;r+=1)1===l[r].level&&A.push(a.getMaxMinCoord(l[r].pointsOut));for(t=A.length;--t>-1;)"x"===m?A[t].maxX===E&&(I=1):"y"===m&&A[t].maxY===E&&(I=1)}for(r=1;h>r;r+=1){if(s=l[r].pointsOut.length)for(;--s>-1;)I||("x"===m?l[r].pointsOut[s].x===E&&(l[r].pointsOut[s].x=f):"y"===m&&l[r].pointsOut[s].y===E&&(l[r].pointsOut[s].y=f));if(l[r].impost)for(o=0;2>o;o+=1)I?"x"===m?l[r].impost.impostAxis[o].x===p&&(l[r].impost.impostAxis[o].x=T):"y"===m&&l[r].impost.impostAxis[o].y===p&&(l[r].impost.impostAxis[o].y=T):"x"===m?l[r].impost.impostAxis[o].x===E&&(l[r].impost.impostAxis[o].x=f):"y"===m&&l[r].impost.impostAxis[o].y===E&&(l[r].impost.impostAxis[o].y=f)}}}function v(e){var t,i,r,o,n=_.design.templateTEMP.details,a=n.length,s=+_.design.oldSize.attributes[11].nodeValue,l=+_.design.oldSize.attributes[12].nodeValue,d=_.design.oldSize.attributes[13].nodeValue;for(i=1;a>i;i+=1)if(1===n[i].level&&(r=n[i].pointsOut.length,r&&(o=0,o=n[i].pointsOut.some(function(e){return"x"===d?e.x===l:"y"===d?e.y===l:void 0}))))for(t=angular.copy(n[i].pointsOut);--r>-1;)"x"===d?n[i].pointsOut[r].x===l&&(t[r].x=s+e):"y"===d&&n[i].pointsOut[r].y===l&&(t[r].y=s+e);return t}function P(e){var t=o.defer();if(_.design.tempSize.length){var i=parseInt(_.design.tempSize.join(""),10),n=v(i),a=n?u.calcSquare(n):0;a<p.global.maxSquareLimit?i>=_.design.minSizeLimit&&i<=_.design.maxSizeLimit?(b(i),N(),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),R(),t.resolve(1)})):(i<_.design.minSizeLimit?p.global.isVoiceHelper?playTTS(r("translate")("construction.VOICE_SMALLEST_SIZE"),p.global.voiceHelperLanguage):(_.design.isMinSizeRestriction=1,_.design.isMaxSizeRestriction=0):i>_.design.maxSizeLimit&&(p.global.isVoiceHelper?playTTS(r("translate")("construction.VOICE_BIGGEST_SIZE"),p.global.voiceHelperLanguage):(_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=1),i>p.global.maxSizeLimit&&(_.design.isDimExtra=1)),d3.select(_.design.oldSize).text(_.design.prevSize),_.design.tempSize.length=0,t.resolve(1)):(_.design.isSquareExtra=1,d3.select(_.design.oldSize).text(_.design.prevSize),_.design.tempSize.length=0,t.resolve(1))}else N(),t.resolve(1);return _.design.openVoiceHelper=0,_.design.loudVoice=0,_.design.quietVoice=0,e?t.promise:void 0}function M(){var e=_.design.tempSize.join("");d3.select(_.design.oldSize).text(e),p.global.isVoiceHelper&&P()}function x(e){var t=_.design.tempSize.length;if(p.global.isVoiceHelper){var i=parseInt(e,10);_.design.voiceTxt="",_.design.openVoiceHelper=!1,i>0&&1e4>i&&(_.design.tempSize=(""+i).split(""),M()),S()}else(4===t||1===t&&!_.design.tempSize[0])&&(_.design.tempSize.length=0),"0"===e?t&&_.design.tempSize[0]&&(_.design.tempSize.push(e),M()):"00"===e?t&&_.design.tempSize[0]&&(3>t?_.design.tempSize.push(0,0):3===t&&_.design.tempSize.push(0),M()):(_.design.tempSize.push(e),M())}function G(){_.design.tempSize.pop(),_.design.tempSize.length<1&&_.design.tempSize.push(0),M()}function w(t){var i;if(13===t.which)P(),e.$apply();else if(8===t.which)G();else{switch(t.which){case 48:case 96:i=0;break;case 49:case 97:i=1;break;case 50:case 98:i=2;break;case 51:case 99:i=3;break;case 52:case 100:i=4;break;case 53:case 101:i=5;break;case 54:case 102:i=6;break;case 55:case 103:i=7;break;case 56:case 104:i=8;break;case 57:case 105:i=9}void 0!==i&&x(i)}}function U(t){_.design.voiceTxt=t,e.$apply(),i(function(){var i=parseStringToDimension(t);"NaN"===i&&(i=r("translate")("construction.VOICE_NOT_UNDERSTAND")),playTTS(i),x(i),e.$apply()},1e3)}function k(t){t>100?(_.design.loudVoice=!0,_.design.quietVoice=!1):(_.design.loudVoice=!1,_.design.quietVoice=!0),e.$apply()}function H(){d3.selectAll("#"+n.SVG_ID_EDIT+" .size-box").each(function(){var t=d3.select(this);t.on(Ze,function(){var i=t.select(".size-rect"),r=i[0][0].attributes[0].nodeValue.indexOf("active")+1;if(_.design.tempSize.length)P(),R();else{if(r)N();else{S(),i.classed("active",!0);var o=t.select(".size-txt-edit");o.classed("active",!0),_.design.oldSize=o[0][0],_.design.prevSize=o[0][0].textContent,_.design.minSizeLimit=+o[0][0].attributes[8].nodeValue,_.design.maxSizeLimit=+o[0][0].attributes[9].nodeValue,p.global.isVoiceHelper?(_.design.openVoiceHelper=1,startRecognition(U,k,p.global.voiceHelperLanguage)):(p.global.isSizeCalculator=1,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0,_.design.isDimExtra=0,_.design.isSquareExtra=0)}e.$apply()}})}),d3.select(window).on("keydown",function(){
p.global.isSizeCalculator&&w(d3.event)})}function V(){var e,t,i,r,o,n=angular.copy(m.product.chosenAddElements[0]),a=n.length,s=m.product.template.details,l=s.length,d=0,c=[];if(a){for(;--l>0;)if(s[l].gridId)for(o=0;a>o;o+=1)s[l].id===n[o].block_id&&(r=n[o],i={},e=s[l].pointsLight.map(function(e){return e.x}),t=s[l].pointsLight.map(function(e){return e.y}),i.width=Math.round(d3.max(e)-d3.min(e)),i.height=Math.round(d3.max(t)-d3.min(t)),(r.element_width!==i.width||r.element_height!==i.height)&&(r.element_width=i.width,r.element_height=i.height,d=1),c.push(r));m.product.chosenAddElements[0]=angular.copy(c)}return d}function B(){_.designSource.templateSourceTEMP=angular.copy(m.product.template_source),_.designSource.templateTEMP=angular.copy(m.product.template),_.design.templateSourceTEMP=angular.copy(m.product.template_source),_.design.templateTEMP=angular.copy(m.product.template)}function F(){_.design=_.setDefaultDesign(),p.global.activePanel=0,p.global.isNavMenu=0,p.global.isConfigMenu=1,t.path("/main")}function W(e){e.doorConfig.doorShapeName=e.doorShapeList[e.doorConfig.doorShapeIndex].name,e.doorConfig.sashShapeName=e.sashShapeList[e.doorConfig.sashShapeIndex].frame.name+"/"+e.sashShapeList[e.doorConfig.sashShapeIndex].sash.name,e.doorConfig.handleShape=e.handleShapeList[e.doorConfig.handleShapeIndex],e.doorConfig.lockShape=e.lockShapeList[e.doorConfig.lockShapeIndex]}function Y(e,t){t.doorConfig.doorShapeIndex=e.door_shape_id,t.doorConfig.sashShapeIndex=e.door_sash_shape_id,t.doorConfig.handleShapeIndex=e.door_handle_shape_id,t.doorConfig.lockShapeIndex=e.door_lock_shape_id,W(t)}function z(e,t){e.doorName=t.doorShapeName,e.doorSashName=t.sashShapeName,e.doorHandle=t.handleShape,e.doorLock=t.lockShape}function K(e){var t,i,r=_.designSource.doorShapeData.length;for(_.designSource.doorShapeList.length=0,t=0;r>t;t+=1)i=0,2===t&&p.global.doorKitsT1.length?i=1:3===t&&p.global.doorKitsT2.length?i=1:t&&1!==t||(i=1),i&&_.designSource.doorShapeList.push(_.designSource.doorShapeData[t]);if(!p.global.noDoorExist){switch(e.door_shape_id){case 0:case 1:p.global.doorKitsT1.length?_.designSource.sashShapeList=p.global.doorKitsT1:p.global.doorKitsT2.length&&(_.designSource.sashShapeList=p.global.doorKitsT2);break;case 2:p.global.doorKitsT1.length&&(_.designSource.sashShapeList=p.global.doorKitsT1);break;case 3:p.global.doorKitsT2.length&&(_.designSource.sashShapeList=p.global.doorKitsT2)}_.designSource.handleShapeList=p.global.doorHandlers,_.designSource.lockShapeList=p.global.doorLocks[e.door_handle_shape_id],Y(e,_.designSource),z(e,_.designSource.doorConfig)}}function X(){N(),_.design=_.setDefaultDesign(),B()}function q(e,t){for(var i=1,r=e.attributes.block_id.nodeValue,o=t.length;--o>-1;)if(t[o].attributes.block_id.nodeValue===r){t.splice(o,1),i=0;break}return i&&t.push(e),i}function Q(){_.design.selectedImpost.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" [item_type=impost]").each(function(){var t=d3.select(this);t.on(Ze,function(){if(_.design.tempSize.length)P(),R();else{var i=q(t[0][0],_.design.selectedImpost);i?(t.classed("frame-active",!0),_.design.activeMenuItem=3,_.design.isImpostDelete=1,_.design.activeSubMenuItem=3,T(),I(),N(),e.$apply()):(t.classed("frame-active",!1),_.design.selectedImpost.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply(),_.design.isImpostDelete=0))}})})}function j(e,t){var i,r=e[0].length,o=0,n=0;if(r){for(;--r>-1;)i=e[0][r].attributes.axis,i&&("x"===i.nodeValue?o=1:"y"===i.nodeValue&&(n=1));o&&d3.selectAll("#"+t+" .dim_blockX").classed("dim_shiftX",1),n&&d3.selectAll("#"+t+" .dim_blockY").classed("dim_shiftY",1),e.classed("dim_hidden",0)}}function Z(e){var t=d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block[block_id="+e+"]");j(t,n.SVG_ID_EDIT)}function J(e){var t=d3.selectAll("#"+e+" .dim_block");j(t,e)}function ee(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_EDIT+" .glass").each(function(){var t=d3.select(this);t.on(Ze,function(){if(_.design.tempSize.length)P(),R();else{var i=q(t[0][0],_.design.selectedGlass),r=t[0][0].attributes.block_id.nodeValue;i?(t.classed("glass-active",!0),T(),h(),I(),N(),Z(r),e.$apply()):(t.classed("glass-active",!1),d3.selectAll("#"+n.SVG_ID_EDIT+" .dim_block[block_id="+r+"]").classed("dim_hidden",!0),_.design.selectedGlass.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,f(),e.$apply()))}})})}function te(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_GLASS+" .glass").each(function(){var e=d3.select(this);e.on(Ze,function(){var t=q(e[0][0],_.design.selectedGlass),i=e[0][0].attributes.block_id.nodeValue;t?(e.classed("glass-active",!0),d3.select(".glass-txt[block_id="+i+"]").text(p.global.selectGlassName),d.setGlassToTemplateBlocks(m.product.template,p.global.selectGlassId,p.global.selectGlassName,i)):(e.classed("glass-active",!1),d3.select(".glass-txt[block_id="+i+"]").text(p.global.prevGlassName),d.setGlassToTemplateBlocks(m.product.template,p.global.prevGlassId,p.global.prevGlassName,i))})}),J(n.SVG_ID_GLASS)}function ie(e){e&&(p.global.selectGlassId=p.global.prevGlassId,p.global.selectGlassName=p.global.prevGlassName,u.createSVGTemplate(m.product.template_source,m.product.profileDepths).then(function(e){m.product.template=angular.copy(e)})),C(),p.global.showGlassSelectorDialog=0}function re(){_.design.selectedGlass.length=0,d3.selectAll("#"+n.SVG_ID_GRID+" .glass").each(function(){var e=d3.select(this);e.on(Ze,function(){for(var t,i=m.product.template.details,r=i.length,o=e[0][0].attributes.block_id.nodeValue;--r>0;)i[r].id===o&&("sash"===i[r].blockType?(t=q(e[0][0],_.design.selectedGlass),t?e.classed("glass-active",!0):e.classed("glass-active",!1)):O(o,n.SVG_ID_GRID))})}),J(n.SVG_ID_GRID)}function oe(e,t){for(var i=1,r=e.attributes.item_id.nodeValue,o=t.length;--o>-1;)if(t[o].attributes.item_id.nodeValue===r){t.splice(o,1),i=0;break}return i&&t.push(e),i}function ne(){var t=d3.selectAll("#"+n.SVG_ID_EDIT+" .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});t.length&&d3.selectAll(t).each(function(){var t=d3.select(this);t.on(Ze,function(){if(_.design.tempSize.length)P(),R();else{var i=oe(t[0][0],_.design.selectedArc);i?(t.classed("active_svg",!0),A(),T(),h(),N(),e.$apply()):(t.classed("active_svg",!1),_.design.selectedArc.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply()))}})})}function ae(e,t){var i=1,r=40,o=t.x-e.x,n=t.y-e.y;return o>0&&r>o&&n>0&&r>n&&(i=0),i}function se(e,t,i,r,o,n){var a={type:"impost",id:"ip"+t,x:Math.round(e.x),y:Math.round(e.y),dir:"line",dimType:o};n&&(a.type="shtulp",a.id="sht"+t),r[i].impost||(r[i].impost={impostAxis:[],impostOut:[],impostIn:[],impostLight:[]}),r[i].impost.impostAxis.push(a)}function le(e,t,i,r,o){var n={type:"skylight",id:"block_"+e,level:i[t].level+1,blockType:"frame",parent:i[t].id,children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:i[t].glassId,glassTxt:i[t].glassTxt};r&&(n.blockType="sash",angular.extend(n,o)),i[t].children.push(n.id),i.push(n)}function de(e){for(var t=5,i=e.length;--i>-1;)for(var r=e.length;--r>-1;){var o=Math.abs(e[i].x-e[r].x),n=Math.abs(e[i].y-e[r].y);if(o>0&&t>o&&n>0&&t>n){e.splice(i,1);break}}}function ce(e){for(var t,i=e.length,r=0;--i>0;)t=Number(e[i].id.replace(/\D+/g,"")),t>r&&(r=t);return r}function ue(e,t){var i,r,o,n,a,s,l,d=[],c=t.length;for(i=0;c>i;i+=1)r=u.getCoordCrossPoint(e,t[i]),r.x>=0&&r.y>=0&&(o=u.checkLineOwnPoint(r,t[i].to,t[i].from),n=u.isInsidePointInLine(o),n&&(a=u.checkEqualPoints(r,d),a&&(s=ae(t[i].from,r),s&&(l=ae(t[i].to,r),l&&d.push(r)))));return d}function pe(e,t,i,r){var o=ue(t,i);if(2===o.length){var n,s,l,d,c={from:o[0],to:o[1]},p=a.roundingValue(Math.hypot(c.from.x-c.to.x,c.from.y-c.to.y)/2,1),_=angular.copy(r),E=_.length,m=[];for(u.setLineCoef(c),l=u.setQPointCoord(e,c,p),c.coefA||1!==e?c.coefB||4!==e||(l.x-=2*p):l.y-=2*p,d=u.setPointLocationToLine(c.from,c.to,l);--E>-1;){var g=u.setPointLocationToLine(c.from,c.to,_[E]);g>0&&d>0?m.push(_[E]):0>g&&0>d&&m.push(_[E])}return m.push(c.from,c.to),n=u.centerBlock(m),s=a.roundingValue(Math.abs((c.coefA*n.x+c.coefB*n.y+c.coefC)/Math.hypot(c.coefA,c.coefB)),1),s>p?p/2:s/2}}function _e(e,t,i,r,o){var n={blockId:o[r].id,dir:"curv",id:"qi"+i,heightQ:e,positionQ:t};o[r].impost.impostAxis.push(n)}function Ee(e,t){var i,r,o,n,a,s=_.design.templateTEMP.details,l=s.length,d=_.design.templateSourceTEMP.details,c=90,p=0;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--l>0;)s[l].id===e&&(i=+l,r=Number(s[l].id.replace(/\D+/g,"")));o=ce(d),n=u.cteateLineByAngel(s[i].center,c),a=ue(n,s[i].linesOut),a.length>2&&de(a);var E=a.length;if(2===E){for(;--E>-1;)se(a[E],r,i,d,p,1),le(o+=1,i,d,1,t[E]);L()}else O(e)}function me(e,t){var i,r,o=t.__data__,a=t.attributes.block_id.nodeValue,s=_.design.templateSourceTEMP.details,l=s.length,d=d3.min(o.sizes);if(8===e||9===e)d>=n.minSizeLimitStulp?(8===e?i=[{openDir:[4],handlePos:0,sashType:4},{openDir:[1,2],handlePos:2,sashType:17}]:9===e&&(i=[{openDir:[1,4],handlePos:4,sashType:17},{openDir:[2],handlePos:0,sashType:4}]),Ee(a,i)):O(a);else if(d>=n.minSizeLimit||o.square>=n.squareLimit){for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),r=1;l>r;r+=1)if(s[r].id===a){switch(s[r].blockType="sash",s[r].gridId=0,s[r].gridTxt="",e){case 2:s[r].openDir=[4],s[r].handlePos=4,s[r].sashType=2;break;case 3:s[r].openDir=[2],s[r].handlePos=2,s[r].sashType=2;break;case 4:s[r].openDir=[1],s[r].handlePos=1,s[r].sashType=7;break;case 5:s[r].openDir=[3],s[r].handlePos=3,s[r].sashType=2;break;case 6:s[r].openDir=[1,2],s[r].handlePos=2,s[r].sashType=6;break;case 7:s[r].openDir=[1,4],s[r].handlePos=4,s[r].sashType=6}L()}}else O(a)}function ge(e,t,i){for(var r=0;--i>0;)t[i].id===e&&t[i].impost&&"shtulp"===t[i].impost.impostAxis[0].type&&(r=i);return r}function fe(e){e.blockType="frame",delete e.openDir,delete e.handlePos,delete e.sashType,delete e.gridId,delete e.gridTxt}function Te(e,t){for(var i,r=t.length;--r>0;)if(t[r].id===e){i=t[r].children.length,i?(Te(t[r].children[0],t),Te(t[r].children[1],t),t.splice(r,1)):t.splice(r,1);break}}function he(e){var t,i=e.attributes.block_id.nodeValue,r=_.design.templateSourceTEMP.details,o=r.length,n=0;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),t=1;o>t;t+=1)if(r[t].id===i){n=ge(r[t].parent,r,o),n?(Te(r[n].children[0],r),Te(r[n].children[1],r),r[n].children.length=0,delete r[n].impost):fe(r[t]);break}L()}function Ie(e){for(var t,i,r=_.design.templateSourceTEMP.details,o=e.details.length,a=0;--o>0;)if(e.details[o].level&&"sash"===e.details[o].blockType)for(t=e.details[o].parts.length;--t>-1;)"glass"===e.details[o].parts[t].type&&(i=d3.min(e.details[o].parts[t].sizes),i<=n.minSizeLimit&&i<=n.minSizeLimit&&(fe(r[o]),a=1));return a}function Ae(e,t,i,r,o){var n=200,a={type:"corner",id:"c"+t+"-"+e,dir:"line"};1===e?(a.x=(i.from.x*(i.size-n)+i.to.x*n)/i.size,a.y=(i.from.y*(i.size-n)+i.to.y*n)/i.size):2===e&&(a.x=(i.from.x*n+i.to.x*(i.size-n))/i.size,a.y=(i.from.y*n+i.to.y*(i.size-n))/i.size),o[r].pointsOut.push(a)}function Se(e,t,i,r,o){var n,a=i.length;for(n=0;a>n;n+=1)i[n].from.id===e?Ae(1,t,i[n],r,o):i[n].to.id===e&&Ae(2,t,i[n],r,o);for(var s=o[r].pointsOut.length;--s>-1;)o[r].pointsOut[s].id===e&&(o[r].pointsOut[s].view=0)}function Ne(e,t,i){for(var r,o,n=i.length;--n>0;)if(i[n].id===t)for(r=i[n].pointsOut.length;--r>-1;)for(o=e.length;--o>-1;)if(i[n].pointsOut[r].id===e[o]){i[n].pointsOut.splice(r,1);break}}function Le(e,t,i,r,o,n){var a={type:e,blockId:n[o].id,id:t,heightQ:i.size/4,fromPId:i.from.id,toPId:i.to.id,positionQ:r};n[o].pointsQ||(n[o].pointsQ=[]),n[o].pointsQ.push(a)}function Oe(e,t,i){for(var r=i[t].pointsOut.length,o={};--r>-1;)"corner"===i[t].pointsOut[r].type&&(i[t].pointsOut[r].id==="c"+e+"-2"&&(o.from=i[t].pointsOut[r]),i[t].pointsOut[r].id==="c"+e+"-1"&&(o.to=i[t].pointsOut[r]));u.setLineCoef(o),o.size=a.roundingValue(Math.hypot(o.to.x-o.from.x,o.to.y-o.from.y),1),Le("corner","qc"+e,o,e,t,i)}function ye(e,t,i){for(var r,o=i.length;--o>0;)if(i[o].id===t&&i[o].pointsQ)for(r=i[o].pointsQ.length;--r>-1;)if(i[o].pointsQ[r].id===e){i[o].pointsQ.splice(r,1);break}}function Ce(e){var t=e.__data__.id,i=Number(t.replace(/\D+/g,"")),r=e.attributes.block_id.nodeValue,o=_.design.templateSourceTEMP.details,n=_.design.templateTEMP.details,a=n.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--a>0;)n[a].id===r&&(e.__data__.view?Se(t,i,n[a].linesOut,a,o):ye("qc"+i,r,o));L()}function Re(e){var t,i,r=e.__data__.id,o=Number(r.replace(/\D+/g,"")),n=e.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details,s=_.design.templateTEMP.details,l=s.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--l>0;)if(s[l].id===n)if(e.__data__.view)Se(r,o,s[l].linesOut,l,a),Oe(o,l,a);else for(t=s[l].linesOut.length,i=0;t>i;i+=1)s[l].linesOut[i].from.id==="c"+o+"-2"&&s[l].linesOut[i].to.id==="c"+o+"-1"&&Le("corner","qc"+o,s[l].linesOut[i],o,l,a);L()}function De(e){var t,i=e.__data__.id,r=Number(i.replace(/\D+/g,"")),o=e.attributes.block_id.nodeValue,n=_.design.templateSourceTEMP.details,a=n.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),Ne(["c"+r+"-1","c"+r+"-2"],o,n),ye("qc"+r,o,n);--a>0;)if(n[a].id===o)for(t=n[a].pointsOut.length;--t>-1;)n[a].pointsOut[t].id===i&&(n[a].pointsOut[t].view=1);L()}function be(e,t,i,r,o){for(;--r>-1;)t?e?i[r].x+=o:i[r].x-=o:e?i[r].y+=o:i[r].y-=o}function ve(e,t,i,r){for(var o,n=r.length;--n>0;)r[n].level&&(r[n].pointsOut.length&&be(e,t,r[n].pointsOut,r[n].pointsOut.length,i),r[n].pointsIn.length&&be(e,t,r[n].pointsIn,r[n].pointsIn.length,i),r[n].impost&&(o=r[n].impost.impostAxis.length,o&&be(e,t,r[n].impost.impostAxis,o,i)))}function Pe(e,t,i){for(var r,o=u.centerBlock(i[t].pointsOut),n=u.sortingPoints(i[t].pointsOut,o),a=u.setLines(n),s=a.length;--s>-1;)a[s].from.id===e[0].id&&a[s].to.id===e[1].id&&(r=a[s]);return r}function Me(e){var t=o.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("frame"===i.type){var r,n,a,s,l,d=Number(i.points[0].id.replace(/\D+/g,"")),c=e.attributes.block_id.nodeValue,p=angular.copy(_.design.templateTEMP.details),E=p.length,g=_.design.templateSourceTEMP.details;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),s=1;E>s;s+=1)if(p[s].id===c)for(l=p[s].linesOut.length;--l>-1;)p[s].linesOut[l].from.id===i.points[0].id&&p[s].linesOut[l].to.id===i.points[1].id&&(r=s,n=p[s].linesOut[l]);i.points[0].fi<180&&i.points[1].fi<180?a=1:i.points[0].fi<90&&i.points[1].fi>270?a=2:i.points[0].fi>180&&i.points[1].fi>180?a=3:i.points[0].fi<270&&i.points[1].fi>90&&(a=4);var f=u.setQPointCoord(a,n,n.size/2);1===a?(ve(1,0,f.y,p),ve(1,0,f.y,g),f.y=0):4===a&&(ve(1,1,f.x,p),ve(1,1,f.x,g),f.x=0),f.y&&f.x||(n=Pe(i.points,r,g)),Le("arc","qa"+d,n,a,r,g),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=Ie(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function xe(e){var t=o.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("arc"===i.type){var r=i.points[1].id,n=e.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details;_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),ye(r,n,a),i.points[1].x?i.points[1].y||ve(0,0,i.points[0].y,a):ve(0,1,i.points[0].x,a),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=Ie(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function Ge(e){var t=_.design.selectedArc.shift(),r=t.attributes.item_id.nodeValue,o=d3.select("#"+n.SVG_ID_EDIT+" [item_id="+r+"]");o[0].length&&(e?Me(o[0][0]).then(function(){_.design.selectedArc.length&&i(function(){Ge(e)},1)}):xe(o[0][0]).then(function(){_.design.selectedArc.length&&i(function(){Ge(e)},1)}))}function we(e,t){var i,r,o,a,s,l,d,c,p=t.__data__,E=t.attributes.block_id.nodeValue,m=d3.min(p.sizes),g=_.design.templateTEMP.details,f=g.length,T=_.design.templateSourceTEMP.details,h=0,I=0;if(m>=n.minSizeLimit&&p.square>=n.squareLimit){switch(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),e){case 2:i=90;break;case 3:i=180,h=1;break;case 4:i=170,h=1;break;case 5:i=190,h=1;break;case 6:i=80;break;case 7:i=100;break;case 8:i=90,I=1,r=2;break;case 9:i=90,I=1,r=4;break;case 10:i=180,h=1,I=1,r=1;break;case 11:i=180,h=1,I=1,r=3;break;case 12:i=100,I=1,r=1;break;case 13:i=100,I=1,r=3;break;case 14:i=10,h=1,I=1,r=4;break;case 15:i=10,h=1,I=1,r=2}for(c=1;f>c;c+=1)g[c].id===E&&(o=c,a=Number(g[c].id.replace(/\D+/g,"")));s=ce(T),l=u.cteateLineByAngel(g[o].center,i),d=ue(l,g[o].linesOut),d.length>2&&de(d);var A=d.length;if(2===A){for(;--A>-1;)se(d[A],a,o,T,h),le(++s,o,T);if(I){var S=pe(r,l,g[o].linesIn,g[o].pointsIn);_e(S,r,a,o,T)}L()}else O(E)}else O(E)}function Ue(e){var t=e.attributes.block_id.nodeValue,i=_.design.templateSourceTEMP.details,r=i.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--r>0;)if(i[r].id===t){Te(i[r].children[0],i),Te(i[r].children[1],i),i[r].children.length=0,delete i[r].impost;break}L()}function ke(e,t){for(var i=t.length;--i>-1;)0===t[i].x?t[i].x=e:t[i].x===e?t[i].x=0:t[i].x=e-t[i].x}function He(e){4===e.positionQ?e.positionQ=2:2===e.positionQ&&(e.positionQ=4)}function Ve(e){4===e.positionQ?e.positionQ=3:2===e.positionQ?e.positionQ=1:1===e.positionQ?e.positionQ=2:3===e.positionQ&&(e.positionQ=4)}function Be(e,t,i){var r,o,n=i[e].children.length;if(n)for(r=i[e].children.pop(),i[e].children.unshift(r),o=1;t>o;o+=1)(i[o].id===i[e].children[0]||i[o].id===i[e].children[1])&&Be(o,t,i)}function Fe(e,t,i){var r,o;for(o=1;i>o;o+=1){if(t[o].level&&t[o].pointsQ&&(r=t[o].pointsQ.length))for(;--r>-1;)t[o].pointsQ[r].id.indexOf("qa")+1?He(t[o].pointsQ[r]):t[o].pointsQ[r].id.indexOf("qc")+1&&Ve(t[o].pointsQ[r]);if(t[o].impost&&(ke(e,t[o].impost.impostAxis),t[o].impost.impostAxis[2])){var n={from:t[o].impost.impostAxis[0],to:t[o].impost.impostAxis[1]};u.setLineCoef(n),n.coefA&&n.coefB?Ve(t[o].impost.impostAxis[2]):He(t[o].impost.impostAxis[2])}t[o].pointsOut.length&&ke(e,t[o].pointsOut),t[o].pointsIn.length&&ke(e,t[o].pointsIn)}}function We(){var e,t=_.design.templateSourceTEMP.details,r=t.length,o=u.collectAllPointsOut(_.design.templateTEMP.details),n=d3.max(o,function(e){return e.x});for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),Fe(n,t,r),e=1;r>e;e+=1)1===t[e].level&&Be(e,r,t);L(),i(function(){_.design.activeMenuItem=0},500)}function Ye(e,t,i){var r,o={x:t,y:i},n=0,a=0,s=e.length;for(r=0;s>r;r+=1)if(a=e[r+1]?u.setPointLocationToLine(e[r],e[r+1],o):u.setPointLocationToLine(e[r],e[0],o),a>0){n=a;break}return n}function ze(){var e,t,i,r,o,n,a,s,l,d,c,p,E,m=_.design.templateSourceTEMP.details,g=m.length,f=_.design.templateTEMP.details,T=[],h=[];for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),c=1;g>c;c+=1)1===m[c].level&&T.push(m[c].pointsOut.map(function(e){return e.x}));for(e=T.length,p=0;e>p;p+=1){for(h=[],t=d3.min(T[p]),i=d3.max(T[p]),c=1;g>c;c+=1)m[c].impost&&m[c].impost.impostAxis&&m[c].impost.impostAxis[0].x===m[c].impost.impostAxis[1].x&&m[c].impost.impostAxis[0].x>t&&m[c].impost.impostAxis[0].x<i&&(r={ind:c,x:m[c].impost.impostAxis[0].x},h.push(r));for(o=Math.round(i/(h.length+1)),n=h.sort(u.sortByX),a=n.length,E=0;a>E;E+=1)s=E?n[E-1].x+o:t+o,l=Ye(f[n[E].ind].pointsOut,s,m[n[E].ind].impost.impostAxis[0].y),d=Ye(f[n[E].ind].pointsOut,s,m[n[E].ind].impost.impostAxis[1].y),l||d||(n[E].x=s,m[n[E].ind].impost.impostAxis[0].x=s,m[n[E].ind].impost.impostAxis[1].x=s)}L()}function Ke(e,t){var i,r,o,n,a,s,l,d={imps:[]},c=e.pointsOut.filter(function(e){return"impost"===e.type||"shtulp"===e.type}),u=c.length;for(s=0;u>s;s+=1){for(i=0,r=0,l=0;u>l;l+=1)s!==l&&c[l].id===c[s].id&&(r=1,c[l].x===c[s].x&&(i=1));if(!r)break;if(i){for(o=1,n=d.imps.length;--n>-1;)d.imps[n].id===c[s].id&&(o=0);o&&d.imps.push(c[s])}}d.imps.length&&(a=e.glassPoints.map(function(e){return e.x}),d.minX=d3.min(a),d.maxX=d3.max(a),d.width=d.maxX-d.minX,t.push(d))}function Xe(){var e,t,i,r,o,n,s,l,d,c,u,p,E,m,g,f,T,h,I,A,S,N=_.design.templateTEMP.details,O=N.length,y=_.design.templateSourceTEMP.details,C=_.design.selectedGlass.length,R=[];if(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),C)for(E=0;C>E;E+=1)for(e=_.design.selectedGlass[E].attributes.block_id.nodeValue,m=1;O>m;m+=1)N[m].id===e&&Ke(N[m],R);else for(m=1;O>m;m+=1)!N[m].children.length&&N[m].glassPoints&&Ke(N[m],R);if(t=R.length,i=a.roundingValue(R.reduce(function(e,t){return{width:e.width+t.width}}).width/t),2===t){r=R[0].imps.length,o=R[1].imps.length,n=0;e:for(g=0;r>g;g+=1)for(f=0;o>f;f+=1)if(R[1].imps[f].id===R[0].imps[g].id){n=R[1].imps[f].id;break e}}for(T=0;t>T;T+=1)for(s=R[T].imps.length,d=Math.round(i-R[T].width),h=0;s>h;h+=1)if(!R[T].imps[h].isChanged&&(c=0,2===t?R[T].imps[h].id===n&&(c=1):c=1,c))for(R[T].imps[h].x<R[T].maxX&&(d*=-1),R[T].imps[h].x+=d,I=0;t>I;I+=1)if(h!==I)for(l=R[I].imps.length,A=0;l>A;A+=1)T!==I&&R[I].imps[A].id===R[T].imps[h].id&&(R[I].imps[A].isChanged=1,R[I].width-=d);for(T=0;t>T;T+=1)for(s=R[T].imps.length,h=0;s>h;h+=1)if(!R[T].imps[h].isChanged)for(u=Number(R[T].imps[h].id.replace(/\D+/g,"")),S=1;O>S;S+=1)p=Number(y[S].id.replace(/\D+/g,"")),p===u&&y[S].impost&&(y[S].impost.impostAxis[0].x=+R[T].imps[h].x,y[S].impost.impostAxis[1].x=+R[T].imps[h].x);L()}function qe(){var e=_.design.designSteps.length-1;_.design.templateSourceTEMP=angular.copy(_.design.designSteps[e]),L(),_.design.designSteps.pop(),R(),N()}function Qe(){var e,t=_.design.doorConfig;P(1).then(function(){if(d.checkGlassSizes(_.design.templateTEMP),_.design.extraGlass.length)_.design.isGlassExtra=1;else if(e=d.checkSashInTemplate(_.design.templateSourceTEMP),e?(p.global.isSashesInTemplate||(p.global.isSashesInTemplate=1,m.product.hardware=p.global.hardwares[0][0]),d.checkHardwareSizes(_.design.templateTEMP)):(m.product.hardware={},m.product.hardware.id=0,p.global.isSashesInTemplate=0,_.design.extraHardware.length=0),_.design.extraHardware.length)_.design.isHardwareExtra=1;else{m.product.template_source=angular.copy(_.design.templateSourceTEMP),m.product.template=angular.copy(_.design.templateTEMP),d.setCurrentGlass(m.product,1),u.createSVGTemplateIcon(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){m.product.templateIcon=angular.copy(e)}),4===m.product.construction_type&&(m.product.door_shape_id=t.doorShapeIndex,m.product.door_sash_shape_id=t.sashShapeIndex,m.product.door_handle_shape_id=t.handleShapeIndex,m.product.door_lock_shape_id=t.lockShapeIndex,z(m.product,t),m.product.profile=angular.copy(d.fineItemById(_.design.sashShapeList[t.sashShapeIndex].profileId,p.global.profiles))),p.global.templatesSource[m.product.templateIndex]=angular.copy(m.product.template_source);var i=V();i&&l.getGridPrice(m.product.chosenAddElements[0]),d.preparePrice(m.product.template,m.product.profile.id,m.product.glass,m.product.hardware.id,m.product.lamination.lamination_in_id).then(function(){p.global.isChangedTemplate=1,F()})}})}function $e(){N(),F()}var je=this,Ze=p.global.isDevice?"touchstart":"click";return je.publicObj={setDefaultTemplate:B,designSaved:Qe,designCancel:$e,setDefaultConstruction:X,initAllImposts:Q,initAllGlass:ee,initAllGlassXGlass:te,initAllGlassXGrid:re,initAllArcs:ne,initAllDimension:H,showAllDimension:J,hideCornerMarks:T,deselectAllImpost:h,deselectAllArc:I,deselectAllGlass:A,rebuildSVGTemplate:L,createSash:me,deleteSash:he,setCornerPoints:Ce,setCurvCornerPoints:Re,deleteCornerPoints:De,createArc:Me,deleteArc:xe,workingWithAllArcs:Ge,createImpost:we,deleteImpost:Ue,initMirror:We,positionAxises:ze,positionGlasses:Xe,removeAllEventsInSVG:y,removeGlassEventsInSVG:C,closeGlassSelectorDialog:ie,setValueSize:x,deleteLastNumber:G,closeSizeCaclulator:P,hideSizeTools:N,stepBack:qe,setNewDoorParamValue:W,setDoorConfigDefault:K},je.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("GeneralServ",["$filter","$window","$document","globalConstants","GlobalStor",function(e,t,i,r,o){function n(){o.global.startProgramm&&"main"===o.global.currOpenPage&&(o.global.startProgramm=0)}function a(){o.global.prevOpenPage=o.global.currOpenPage}function s(e,t){var i,r,o=t||2,n=typeof e,a="1";for(i=0;o>i;i+=1)a+="0";return a*=1,"string"===n?r=parseFloat((Math.round(parseFloat(e)*a)/a).toFixed(o)):"number"===n&&(r=parseFloat((Math.round(e*a)/a).toFixed(o))),r}function l(e,t){return e*t}function d(e,t){return s(e*(1-t/100))}function c(e,t){return e-t}function u(e){return e.filter(function(e,t,i){return t===i.indexOf(e)})}function p(e){var t={minX:d3.min(e,function(e){return e.x}),maxX:d3.max(e,function(e){return e.x}),minY:d3.min(e,function(e){return e.y}),maxY:d3.max(e,function(e){return e.y})};return t}function _(e,t,i){o.global.isAlert=1,o.global.alertTitle=e||"",o.global.alertDescr=t||"",o.global.confirmAction=i}function E(e){if(o.global.isDevice){var i=window.open(e);i.close()}else t.open(e)}var m=this,g=[{id:20,name:"add_elements.GRIDS",typeClass:"aux-grid",delay:5*r.STEP},{id:21,name:"add_elements.VISORS",typeClass:"aux-visor",delay:6*r.STEP},{id:9,name:"add_elements.SPILLWAYS",typeClass:"aux-spillway",delay:6*r.STEP},{id:19,name:"add_elements.OUTSIDE",typeClass:"aux-outside",delay:10*r.STEP},{id:26,name:"add_elements.LOUVERS",typeClass:"aux-louver",delay:15*r.STEP},{id:19,name:"add_elements.INSIDE",typeClass:"aux-inside",delay:20*r.STEP},{id:12,name:"add_elements.CONNECTORS",typeClass:"aux-connectors",delay:30*r.STEP},{id:27,name:"add_elements.FAN",typeClass:"aux-fan",delay:31*r.STEP},{id:8,name:"add_elements.WINDOWSILLS",typeClass:"aux-windowsill",delay:13*r.STEP},{id:24,name:"add_elements.HANDLELS",typeClass:"aux-handle",delay:28*r.STEP},{id:18,name:"add_elements.OTHERS",typeClass:"aux-others",delay:31*r.STEP}];return t.onbeforeunload=function(){return e("translate")("common_words.PAGE_REFRESH")},t.addEventListener("keydown",function(e){8!==e.keyCode||$(e.target).is("input, textarea")||e.preventDefault()}),m.publicObj={addElementDATA:g,stopStartProg:n,setPreviosPage:a,roundingValue:s,addMarginToPrice:l,setPriceDis:d,sorting:c,removeDuplicates:u,getMaxMinCoord:p,confirmAlert:_,goToLink:E},m.publicObj}])}(),function(){angular.module("HistoryModule").factory("HistoryServ",["$location","$filter","$q","globalConstants","localDB","GeneralServ","MainServ","SVGServ","DesignServ","GlobalStor","OrderStor","ProductStor","UserStor","HistoryStor","CartStor","DesignStor",function(e,t,i,r,o,n,a,s,l,d,c,u,p,_,E,m){function g(){n.setPreviosPage(),d.global.isCreatedNewProduct&&d.global.isCreatedNewProject?e.path("/main"):a.createNewProject()}function f(){o.selectLocalDB(o.tablesLocalDB.orders.tableName,{order_type:1}).then(function(e){var t=angular.copy(e),i=t.length;if(_.history.isEmptyResult=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);_.history.ordersSource=angular.copy(t),_.history.orders=angular.copy(t)}else _.history.isEmptyResult=1})}function T(e,i){function r(){var e,t=_.history.orders.length;for(e=0;t>e;e+=1)_.history.orders[e].id===i&&(_.history.orders[e].order_style=U,_.history.ordersSource[e].order_style=U,o.updateLocalServerDBs(o.tablesLocalDB.orders.tableName,i,{order_style:U,sended:new Date}))}e!==w&&n.confirmAlert(t("translate")("common_words.SEND_ORDER_TITLE"),t("translate")("common_words.SEND_ORDER_TXT"),r)}function h(e,i){function r(e,t,i){o.selectLocalDB(i,{order_id:e}).then(function(e){if(e.length){var r,n=angular.copy(e),a=n.length;if(a>0)for(r=0;a>r;r+=1)delete n[r].id,n[r].modified=new Date,n[r].order_id=t,o.insertRowLocalDB(n[r],i),o.insertServer(p.userInfo.phone,p.userInfo.device_code,i,n[r])}else console.log("Empty result = ",e)})}function s(){var e,t,n=_.history.orders.length;for(t=0;n>t;t+=1)_.history.orders[t].id===i&&(e=angular.copy(_.history.orders[t]));e.id=a.createOrderID(),e.order_number=0,e.order_hz="---",e.created=new Date,e.modified=new Date,o.insertServer(p.userInfo.phone,p.userInfo.device_code,o.tablesLocalDB.orders.tableName,e).then(function(t){t.status&&(e.order_number=t.order_number),_.history.orders.push(e),_.history.ordersSource.push(e),o.insertRowLocalDB(e,o.tablesLocalDB.orders.tableName)}),r(i,e.id,o.tablesLocalDB.order_products.tableName),r(i,e.id,o.tablesLocalDB.order_addelements.tableName)}e!==w&&n.confirmAlert(t("translate")("common_words.COPY_ORDER_TITLE"),t("translate")("common_words.COPY_ORDER_TXT"),s)}function I(e,i,r){function s(){var t,r;e?(t=_.history.orders,r=_.history.ordersSource):(t=_.history.drafts,r=_.history.draftsSource);for(var n=t.length;--n>-1;)if(t[n].id===i){t.splice(n,1),r.splice(n,1);break}t.length||(_.history.isEmptyResult=1),a.deleteOrderInDB(i),e&&o.deleteOrderServer(p.userInfo.phone,p.userInfo.device_code,i)}r.preventDefault(),r.stopPropagation(),n.confirmAlert(t("translate")("common_words.DELETE_ORDER_TITLE"),t("translate")("common_words.DELETE_ORDER_TXT"),s)}function A(e,t,i){if(t)for(var r=i.length;--r>-1;)if(i[r].id===t)switch(e){case 1:c.order.floorName=angular.copy(i[r].name);break;case 2:c.order.mountingName=angular.copy(i[r].name);break;case 3:c.order.selectedInstalmentPeriod=angular.copy(i[r].name),c.order.selectedInstalmentPercent=angular.copy(i[r].value)}}function S(e,t){var i=d.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});i.length&&e.glass.unshift(a.fineItemById(t,i[0].glasses))}function N(){var e=i.defer();return o.selectLocalDB(o.tablesLocalDB.order_products.tableName,{order_id:d.global.orderEditNumber}).then(function(t){var r=angular.copy(t);if(r.length){var o=r.map(function(e){var t,r=i.defer(),o=u.setDefaultProduct();return angular.extend(o,e),delete o.id,delete o.modified,o.is_addelem_only?r.resolve(o):(o.template_source=JSON.parse(o.template_source),4===o.construction_type?d.global.noDoorExist?(m.design.isNoDoors=1,r.reject(1)):(l.setDoorConfigDefault(o),m.design=m.setDefaultDesign(),t=m.design.sashShapeList[o.door_sash_shape_id].profileId):t=o.profile_id,a.setCurrentProfile(o,t).then(function(){if(o.glass_id){var e=o.glass_id.split(", "),t=e.length;if(t)for(;--t>-1;)S(o,+e[t])}d.global.isSashesInTemplate=a.checkSashInTemplate(o.template_source),a.setCurrentHardware(o,o.hardware_id),a.setCurrLamination(o,o.lamination_id),delete o.lamination_id,delete o.lamination_in_id,delete o.lamination_out_id,r.resolve(o)})),r.promise});i.all(o).then(function(t){var r=t.map(function(e){var t=i.defer();return e.is_addelem_only?(e.addelemPriceDis=n.setPriceDis(e.addelem_price,c.order.discount_addelem),e.productPriceDis=n.setPriceDis(e.template_price,c.order.discount_construct)+e.addelemPriceDis,c.order.products.push(e),t.resolve(1)):s.createSVGTemplateIcon(e.template_source,e.profileDepths).then(function(i){e.templateIcon=i,delete e.profile_id,delete e.glass_id,delete e.hardware_id,e.addelemPriceDis=n.setPriceDis(e.addelem_price,c.order.discount_addelem),e.productPriceDis=n.setPriceDis(e.template_price,c.order.discount_construct)+e.addelemPriceDis,c.order.products.push(e),t.resolve(1)}),t.promise});e.resolve(i.all(r))})}else e.reject(r)}),e.promise}function L(){var e=i.defer();return o.selectLocalDB(o.tablesLocalDB.order_addelements.tableName,{order_id:d.global.orderEditNumber}).then(function(t){var i,r,o=angular.copy(t),a=o.length,s=c.order.products.length;if(a)for(;--a>-1;)for(i=0;s>i;i+=1)o[a].product_id===c.order.products[i].product_id&&(r=o[a].element_type,o[a].id=angular.copy(o[a].element_id),delete o[a].element_id,delete o[a].modified,o[a].elementPriceDis=n.setPriceDis(o[a].element_price,c.order.discount_addelem),
o[a].list_group_id=n.addElementDATA[r].id,c.order.products[i].chosenAddElements[r].push(o[a]),a||e.resolve(1));else e.resolve(1)}),e.promise}function O(t,i){d.global.isLoader=1,d.global.orderEditNumber=i,c.order=c.setDefaultOrder();for(var r=t?_.history.orders.length:_.history.drafts.length;--r>-1;)t?_.history.orders[r].id===i&&(angular.extend(c.order,_.history.orders[r]),E.fillOrderForm()):_.history.drafts[r].id===i&&(angular.extend(c.order,_.history.drafts[r]),E.fillOrderForm());c.order.order_date=new Date(c.order.order_date).getTime(),c.order.delivery_date=new Date(c.order.delivery_date).getTime(),c.order.new_delivery_date=new Date(c.order.new_delivery_date).getTime(),A(1,c.order.floor_id,d.global.supplyData),A(2,c.order.mounting_id,d.global.assemblingData),A(3,c.order.instalment_id,d.global.instalmentsData),delete c.order.additional_payment,delete c.order.created,delete c.order.sended,delete c.order.state_to,delete c.order.state_buch,delete c.order.batch,delete c.order.base_price,delete c.order.factory_margin,delete c.order.purchase_price,delete c.order.sale_price,delete c.order.modified,N().then(function(){L().then(function(){d.global.isConfigMenu=1,d.global.isNavMenu=0,n.setPreviosPage(),d.global.isLoader=0,e.path("/cart")})})}function y(){o.selectLocalDB(o.tablesLocalDB.orders.tableName,{order_type:0}).then(function(e){var t=angular.copy(e),i=t.length;if(_.history.isEmptyResultDraft=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);_.history.draftsSource=angular.copy(t),_.history.drafts=angular.copy(t)}else _.history.isEmptyResultDraft=1})}function C(){_.history.isOrderDate=0,_.history.isOrderDateDraft=0,_.history.isDraftView=!_.history.isDraftView,_.history.drafts.length||y()}function R(e){var t=r.printIP+e+"?userId="+p.userInfo.id;navigator.onLine?n.goToLink(t):_.history.isNoPrint=1}function D(){_.history.isOrderSearch=1,_.history.isOrderDate=0,_.history.isOrderSort=0}function b(e,t,i){var r,o,n,a,s;if(""!==t||""!==i){if(r=angular.copy(e),o=new Date(t).valueOf(),n=new Date(i).valueOf(),""!==t&&""!==i&&o>n)return!1;for(a=r.length-1;a>=0;a-=1)s=new Date(r[a].created).valueOf(),(o>s||s>n)&&r.splice(a,1);return r}return!1}function v(){var e;_.history.isDraftView?(_.history.isOrderDateDraft&&(e=b(_.history.draftsSource,_.history.startDateDraft,_.history.finishDateDraft),e&&(_.history.drafts=e)),_.history.isOrderDateDraft=!_.history.isOrderDateDraft,_.history.isOrderSortDraft=0):(_.history.isOrderDate&&(e=b(_.history.ordersSource,_.history.startDate,_.history.finishDate),e&&(_.history.orders=e)),_.history.isOrderDate=!_.history.isOrderDate,_.history.isOrderSearch=0,_.history.isOrderSort=0)}function P(e){_.history.isDraftView?"start-date"!==e||_.history.isStartDateDraft?"finish-date"!==e||_.history.isFinishDateDraft?"full-date"!==e||_.history.isAllPeriodDraft?(_.history.isStartDateDraft=0,_.history.isFinishDateDraft=0,_.history.isAllPeriodDraft=0):(_.history.isStartDateDraft=0,_.history.isFinishDateDraft=0,_.history.isAllPeriodDraft=1,_.history.startDateDraft="",_.history.finishDateDraft="",_.history.drafts=angular.copy(_.history.draftsSource)):(_.history.isStartDateDraft=0,_.history.isFinishDateDraft=1,_.history.isAllPeriodDraft=0):(_.history.isStartDateDraft=1,_.history.isFinishDateDraft=0,_.history.isAllPeriodDraft=0):"start-date"!==e||_.history.isStartDate?"finish-date"!==e||_.history.isFinishDate?"full-date"!==e||_.history.isAllPeriod?(_.history.isStartDate=0,_.history.isFinishDate=0,_.history.isAllPeriod=0):(_.history.isStartDate=0,_.history.isFinishDate=0,_.history.isAllPeriod=1,_.history.startDate="",_.history.finishDate="",_.history.orders=angular.copy(_.history.ordersSource)):(_.history.isStartDate=0,_.history.isFinishDate=1,_.history.isAllPeriod=0):(_.history.isStartDate=1,_.history.isFinishDate=0,_.history.isAllPeriod=0)}function M(){_.history.isDraftView?(_.history.isOrderSortDraft=!_.history.isOrderSortDraft,_.history.isOrderDateDraft=0):(_.history.isOrderSort=!_.history.isOrderSort,_.history.isOrderSearch=0,_.history.isOrderDate=0)}function x(e,t){_.history.isDraftView?_.history.isSortTypeDraft===t?(_.history.isSortTypeDraft=0,_.history.reverseDraft=1):(_.history.isSortTypeDraft=t,"first"===_.history.isSortTypeDraft&&(_.history.reverseDraft=1),"last"===_.history.isSortTypeDraft&&(_.history.reverseDraft=0)):e?_.history.isFilterType===t?_.history.isFilterType=void 0:_.history.isFilterType=t:_.history.isSortType===t?(_.history.orders=angular.copy(_.history.ordersSource),_.history.isSortType="last"):_.history.isSortType=t}var G=this,w="master",U="done";return G.publicObj={toCurrentCalculation:g,downloadOrders:f,sendOrderToFactory:T,makeOrderCopy:h,clickDeleteOrder:I,editOrder:O,orderPrint:R,viewSwitching:C,orderSearching:D,orderDateSelecting:v,openCalendarScroll:P,orderSorting:M,sortingInit:x},G.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("localDB",["$http","$q","$filter","globalConstants","GeneralServ","UserStor","GlobalStor",function(e,t,i,r,o,n,a){function s(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return j.transaction(function(t){t.executeSql("DROP TABLE IF EXISTS "+e,[],function(){i.resolve(1)},function(){console.log("not find deleting table"),i.resolve(0)})}),i.promise});return t.all(r)}function l(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return j.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+Z[e].tableName+" (id INTEGER PRIMARY KEY AUTOINCREMENT, "+Z[e].prop+", modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP"+Z[e].foreignKey+")",[],function(){i.resolve(1)},function(){console.log("Something went wrong with creating table "+Z[e].tableName),i.resolve(0)})}),i.promise});return t.all(r)}function d(e){return angular.isString(e)&&e.indexOf("'")+1?e.replace(/'/g,"''"):e}function c(e,t){var i=Object.keys(e),r=i.join(", "),o=i.map(function(t){return e[t]=d(e[t]),"'"+e[t]+"'"}).join(", ");j.transaction(function(e){e.executeSql("INSERT INTO "+t+" ("+r+") VALUES ("+o+")",[],null,function(){console.log("Something went wrong with insert into "+t)})})}function u(e){var i=[],r=Object.keys(e.tables),o=r.length;return j.transaction(function(n){var a;for(a=0;o>a;a+=1){var s,l=e.tables[r[a]].fields.join(", "),c=e.tables[r[a]].rows.length;if(c)for(s=0;c>s;s+=1){var u=t.defer(),p=e.tables[r[a]].rows[s].map(function(e){return e=d(e),"'"+e+"'"}).join(", ");n.executeSql("INSERT INTO "+r[a]+" ("+l+") VALUES ("+p+")",[],function(){u.resolve(1)},function(e){console.log("Error!!! ",e,r[a],l),u.resolve(0)}),i.push(u.promise)}}}),t.all(i)}function p(e,i,r){var o=t.defer(),n=r||"*",a="";if(i){a=" WHERE ";var s=Object.keys(i);a+=s[0]+" = '"+i[s[0]]+"'";var l,d=s.length;if(d>1)for(l=1;d>l;l+=1)a+=" AND "+s[l]+" = '"+i[s[l]]+"'"}return j.transaction(function(t){t.executeSql("SELECT "+n+" FROM "+e+a,[],function(e,t){var i=t.rows.length;if(i){var r,n=[];for(r=0;i>r;r+=1)n.push(t.rows.item(r));o.resolve(n)}else o.resolve(0)},function(e,t){0===Object.keys(e).length&&5===t.code&&o.resolve(0)})}),o.promise}function _(e,t,i){var r,o,n="",a=Object.keys(t),s=a.length,l=Object.keys(i),d=l.length,c="";if(s)for(r=0;s>r;r+=1)c+=r?", "+a[r]+" = '"+t[a[r]]+"'":a[r]+" = '"+t[a[r]]+"'";if(d&&(n=" WHERE ",n+=l[0]+" = '"+i[l[0]]+"'",d>1))for(o=1;d>o;o+=1)n+=" AND "+l[o]+" = '"+i[l[o]]+"'";j.transaction(function(t){t.executeSql("UPDATE "+e+" SET "+c+n,[],function(){},function(){console.log("Something went wrong with updating "+e+" record")})})}function E(e,t){var i="";if(t){var r,o=Object.keys(t),n=o.length;if(i=" WHERE "+o[0]+" = '"+t[o[0]]+"'",n>1)for(r=1;n>r;r+=1)i+=" AND "+o[r]+" = '"+t[o[r]]+"'"}j.transaction(function(t){t.executeSql("DELETE FROM "+e+i,[],null,function(){console.log("Something went wrong with insert into "+e)})})}function m(i,o){var n=t.defer(),a=o?"/api/login?type=1":"/api/login";return e.post(r.serverIP+a,{login:i}).then(function(e){n.resolve(e.data)},function(){console.log("Something went wrong with User recive!"),n.resolve({status:0})}),n.promise}function g(i,o){var n=t.defer();return e.get(r.serverIP+"/api/get/locations?login="+i+"&access_token="+o).then(function(e){e.data.status?u(e.data).then(function(){n.resolve(1)}):(console.log("Error!"),n.resolve(0))},function(){console.log("Something went wrong with Location!"),n.resolve(0)}),n.promise}function f(i,o,n){var a=t.defer();return e.get(r.serverIP+"/api/get/factories-by-country?login="+i+"&access_token="+o+"&cities_ids="+n).then(function(e){a.resolve(e.data)},function(){console.log("Something went wrong with get factories!"),a.resolve({status:0})}),a.promise}function T(i,o){var n=t.defer();return console.log("Import database begin!"),e.get(r.serverIP+"/api/sync?login="+i+"&access_token="+o).then(function(e){console.log("importAllDB+++",e),e.data.status?u(e.data).then(function(){n.resolve(1)}):(console.log("Error!"),n.resolve(0))},function(){console.log("Something went wrong with importing Database!"),n.resolve(0)}),n.promise}function h(i,o,n,a){var s=t.defer(),l={model:n,row:JSON.stringify(a)};return e.post(r.serverIP+"/api/insert?login="+i+"&access_token="+o,l).then(function(e){console.log("send changes to server success:",e),s.resolve(e.data)},function(e){console.log("send changes to server failed"),s.resolve(e.data)}),s.promise}function I(i,o,n){var a=n.map(function(n){var a=t.defer();return e.post(r.serverIP+"/api/update?login="+i+"&access_token="+o,n).then(function(e){console.log("send changes to server success:",e),a.resolve(1)},function(){console.log("send changes to server failed"),a.resolve(0)}),a.promise});return t.all(a)}function A(t){e.post(r.serverIP+"/api/register",t).then(function(e){console.log(e)},function(){console.log("Something went wrong when user creating!")})}function S(t,i){var o=new Date;e.get(r.serverIP+"/api/signed?login="+t+"&access_token="+i+"&date="+o).then(function(){console.log("Sucsess!")},function(){console.log("Something went wrong!")})}function N(t,i,o){var n={orderId:+o};e.post(r.serverIP+"/api/remove-order?login="+t+"&access_token="+i,n).then(function(e){console.log(e.data)},function(){console.log("Something went wrong with order delete!")})}function L(e,i,r){var o=t.defer(),a=[{model:e,rowId:i,field:JSON.stringify(r)}];return _(e,r,{id:i}),I(n.userInfo.phone,n.userInfo.device_code,a).then(function(e){e||c(a,Z["export"].tableName),o.resolve(1)}),o.promise}function O(i){var o=t.defer();e.post(r.serverIP+"/api/load-avatar",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){console.log("send changes to server success:",e),o.resolve(1)},function(){console.log("send changes to server failed"),o.resolve(0)})}function y(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,r,o,n,a;return o=2147483648&e,n=2147483648&t,i=1073741824&e,r=1073741824&t,a=(1073741823&e)+(1073741823&t),i&r?2147483648^a^o^n:i|r?1073741824&a?3221225472^a^o^n:1073741824^a^o^n:a^o^n}function r(e,t,i){return e&t|~e&i}function o(e,t,i){return e&i|t&~i}function n(e,t,i){return e^t^i}function a(e,t,i){return t^(e|~i)}function s(e,o,n,a,s,l,d){return e=i(e,i(i(r(o,n,a),s),d)),i(t(e,l),o)}function l(e,r,n,a,s,l,d){return e=i(e,i(i(o(r,n,a),s),d)),i(t(e,l),r)}function d(e,r,o,a,s,l,d){return e=i(e,i(i(n(r,o,a),s),d)),i(t(e,l),r)}function c(e,r,o,n,s,l,d){return e=i(e,i(i(a(r,o,n),s),d)),i(t(e,l),r)}function u(e){for(var t,i=e.length,r=i+8,o=(r-r%64)/64,n=16*(o+1),a=Array(n-1),s=0,l=0;i>l;)t=(l-l%4)/4,s=l%4*8,a[t]=a[t]|e.charCodeAt(l)<<s,l+=1;return t=(l-l%4)/4,s=l%4*8,a[t]=a[t]|128<<s,a[n-2]=i<<3,a[n-1]=i>>>29,a}function p(e){var t,i,r="",o="";for(i=0;3>=i;i+=1)t=e>>>8*i&255,o="0"+t.toString(16),r+=o.substr(o.length-2,2);return r}function _(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i+=1){var r=e.charCodeAt(i);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var E,m,g,f,T,h,I,A,S,N=Array(),L=7,O=12,y=17,C=22,R=5,D=9,b=14,v=20,P=4,M=11,x=16,G=23,w=6,U=10,k=15,H=21;for(e=_(e),N=u(e),h=1732584193,I=4023233417,A=2562383102,S=271733878,E=0;E<N.length;E+=16)m=h,g=I,f=A,T=S,h=s(h,I,A,S,N[E+0],L,3614090360),S=s(S,h,I,A,N[E+1],O,3905402710),A=s(A,S,h,I,N[E+2],y,606105819),I=s(I,A,S,h,N[E+3],C,3250441966),h=s(h,I,A,S,N[E+4],L,4118548399),S=s(S,h,I,A,N[E+5],O,1200080426),A=s(A,S,h,I,N[E+6],y,2821735955),I=s(I,A,S,h,N[E+7],C,4249261313),h=s(h,I,A,S,N[E+8],L,1770035416),S=s(S,h,I,A,N[E+9],O,2336552879),A=s(A,S,h,I,N[E+10],y,4294925233),I=s(I,A,S,h,N[E+11],C,2304563134),h=s(h,I,A,S,N[E+12],L,1804603682),S=s(S,h,I,A,N[E+13],O,4254626195),A=s(A,S,h,I,N[E+14],y,2792965006),I=s(I,A,S,h,N[E+15],C,1236535329),h=l(h,I,A,S,N[E+1],R,4129170786),S=l(S,h,I,A,N[E+6],D,3225465664),A=l(A,S,h,I,N[E+11],b,643717713),I=l(I,A,S,h,N[E+0],v,3921069994),h=l(h,I,A,S,N[E+5],R,3593408605),S=l(S,h,I,A,N[E+10],D,38016083),A=l(A,S,h,I,N[E+15],b,3634488961),I=l(I,A,S,h,N[E+4],v,3889429448),h=l(h,I,A,S,N[E+9],R,568446438),S=l(S,h,I,A,N[E+14],D,3275163606),A=l(A,S,h,I,N[E+3],b,4107603335),I=l(I,A,S,h,N[E+8],v,1163531501),h=l(h,I,A,S,N[E+13],R,2850285829),S=l(S,h,I,A,N[E+2],D,4243563512),A=l(A,S,h,I,N[E+7],b,1735328473),I=l(I,A,S,h,N[E+12],v,2368359562),h=d(h,I,A,S,N[E+5],P,4294588738),S=d(S,h,I,A,N[E+8],M,2272392833),A=d(A,S,h,I,N[E+11],x,1839030562),I=d(I,A,S,h,N[E+14],G,4259657740),h=d(h,I,A,S,N[E+1],P,2763975236),S=d(S,h,I,A,N[E+4],M,1272893353),A=d(A,S,h,I,N[E+7],x,4139469664),I=d(I,A,S,h,N[E+10],G,3200236656),h=d(h,I,A,S,N[E+13],P,681279174),S=d(S,h,I,A,N[E+0],M,3936430074),A=d(A,S,h,I,N[E+3],x,3572445317),I=d(I,A,S,h,N[E+6],G,76029189),h=d(h,I,A,S,N[E+9],P,3654602809),S=d(S,h,I,A,N[E+12],M,3873151461),A=d(A,S,h,I,N[E+15],x,530742520),I=d(I,A,S,h,N[E+2],G,3299628645),h=c(h,I,A,S,N[E+0],w,4096336452),S=c(S,h,I,A,N[E+7],U,1126891415),A=c(A,S,h,I,N[E+14],k,2878612391),I=c(I,A,S,h,N[E+5],H,4237533241),h=c(h,I,A,S,N[E+12],w,1700485571),S=c(S,h,I,A,N[E+3],U,2399980690),A=c(A,S,h,I,N[E+10],k,4293915773),I=c(I,A,S,h,N[E+1],H,2240044497),h=c(h,I,A,S,N[E+8],w,1873313359),S=c(S,h,I,A,N[E+15],U,4264355552),A=c(A,S,h,I,N[E+6],k,2734768916),I=c(I,A,S,h,N[E+13],H,1309151649),h=c(h,I,A,S,N[E+4],w,4149444226),S=c(S,h,I,A,N[E+11],U,3174756917),A=c(A,S,h,I,N[E+2],k,718787259),I=c(I,A,S,h,N[E+9],H,3951481745),h=i(h,m),I=i(I,g),A=i(A,f),S=i(S,T);var V=p(h)+p(I)+p(A)+p(S);return V.toLowerCase()}function C(e,i,r){var o=t.defer();return p(Z.window_hardwares.tableName,{window_hardware_group_id:e}).then(function(e){var t,n,a,s,l,d,c=e.length,u=[],p=i.length;if(c){for(l=0;p>l;l+=1){for(t=angular.copy(e),n=[],a=[],s=i[l].openDir.length,d=0;s>d;d+=1)4===i[l].openDir[d]?i[l].openDir[d]=2:2===i[l].openDir[d]?i[l].openDir[d]=3:i[l].openDir[d]=1;n=t.filter(function(e){if(e.window_hardware_type_id==i[l].type&&(e.window_hardware_color_id==r||!e.window_hardware_color_id)){if(1==s)return e.direction_id==i[l].openDir[0]||1==e.direction_id;if(2==s)return e.direction_id==i[l].openDir[0]||e.direction_id==i[l].openDir[1]||1==e.direction_id}}),a=n.filter(function(e){if(e.min_width&&e.max_width&&!e.min_height&&!e.max_height){if(i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!e.min_width&&!e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height)return e}else if(e.min_width&&e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height&&i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!(e.min_width||e.max_width||e.min_height||e.max_height))return e}),u.push(a)}u.length?o.resolve(u):o.resolve(0)}else o.resolve(0)}),o.promise}function R(e){var i=t.defer(),r=e.sizes.map(function(i,r,o){var n=t.defer();if(i.length&&e.ids[r])if(r===o.length-1)C(e.ids[r],i,e.laminationId).then(function(e){e.length?n.resolve(e):n.resolve(0)});else if(angular.isArray(e.ids[r])){var a=e.ids[r].map(function(e){var i=t.defer();return p(Z.lists.tableName,{id:e},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});t.all(a).then(function(e){var t,i=angular.copy(e),r=i.length,o=[];for(t=0;r>t;t+=1)i[t]&&(i[t][0].amendment_pruning&&(i[t][0].amendment_pruning/=1e3),o.push(i[t][0]));o.length>1?n.resolve(o):1===o.length?n.resolve(o[0]):n.resolve(0)})}else p(Z.lists.tableName,{id:e.ids[r]},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){var t=angular.copy(e);t&&t.length?(t[0].amendment_pruning&&(t[0].amendment_pruning/=1e3),n.resolve(t[0])):n.resolve(0)});else n.resolve(0);return n.promise});return i.resolve(t.all(r)),i.promise}function D(e){var i=t.defer();return p(Z.lists.tableName,{id:e},"parent_element_id, name, waste, amendment_pruning").then(function(e){var t=angular.copy(e);t&&t.length?(t[0].amendment_pruning&&(t[0].amendment_pruning/=1e3),i.resolve(t[0])):i.resolve(0)}),i.promise}function b(e){var i=t.defer(),r=[],o=[];return angular.isArray(e)?r=e:r.push(e),function n(){if(r.length){var e=r.shift(0),t=0;t="object"==typeof e?e.childId:e,p(Z.list_contents.tableName,{parent_list_id:t}).then(function(t){var i,a=t.length;if(a)for(i=0;a>i;i+=1)if("object"==typeof e&&(t[i].parentId=e.parentId),o.push(t[i]),"list"===t[i].child_type){var s={childId:t[i].child_id,parentId:t[i].id};r.push(s)}n()})}else o.length?i.resolve(o):i.resolve(0)}(),i.promise}function v(e){var i=t.defer(),r=e.map(function(e,i,r){var o=t.defer();if(e)if(angular.isArray(e)){var n=e.map(function(e){var o=t.defer();if(i===r.length-1){if(angular.isArray(e)){var n=e.map(function(e){var i=t.defer();return b(e.child_id).then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});o.resolve(t.all(n))}}else b(e.id).then(function(e){e.length?o.resolve(e):o.resolve(0)});return o.promise});t.all(n).then(function(e){var t,i=e.length,r=[];if(i)for(t=0;i>t;t+=1)angular.isArray(e[t])?r.push(e[t]):e[t][0]?r.push(e[t][0]):r.push(e[t]);r.length?o.resolve(r):o.resolve(0)})}else{var a=0;a=i===r.length-1?e.child_id:e.id,a?b(a).then(function(e){e.length?o.resolve(e):o.resolve(0)}):o.resolve(0)}else o.resolve(0);return o.promise});return i.resolve(t.all(r)),i.promise}function P(e,i){var r=t.defer();return p(Z.elements.tableName,{id:i},"id, sku, currency_id, price, name, element_group_id").then(function(t){t.length?e?r.resolve(t):r.resolve(t[0]):r.resolve(0)}),r.promise}function M(e){var i=t.defer(),r=e.map(function(e,i,r){var o=t.defer();if(e)if(angular.isArray(e)){var n=e.map(function(e){var o=t.defer();if(i===r.length-1){if(angular.isArray(e)){var n=e.map(function(e){var i=t.defer();return"element"===e.child_type?i.resolve(P(1,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(1,t.parent_element_id))}),i.promise});o.resolve(t.all(n))}}else o.resolve(P(0,e.parent_element_id));return o.promise});t.all(n).then(function(e){var t,r=e.length,n=[];if(r)if(5===i||6===i)n=e;else for(t=0;r>t;t+=1)if(e[t])if(angular.isArray(e[t])){var a,s=[],l=e[t].length;for(a=0;l>a;a+=1)e[t][a]&&s.push(e[t][a][0]);n.push(s)}else n.push(e[t][0]);n.length?o.resolve(n):o.resolve(0)})}else i===r.length-1?"element"===e.child_type?o.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),o.resolve(P(0,t.parent_element_id))}):o.resolve(P(0,e.parent_element_id));else o.resolve(0);return o.promise});return i.resolve(t.all(r)),i.promise}function x(e){var i=t.defer();if(e.length){var r=e.map(function(e){var i=t.defer();if(e&&e.length){var r=e.map(function(e){var i=t.defer();if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();if(e)if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();return e?"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))}):i.resolve(0),i.promise});i.resolve(t.all(r))}else"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))});else i.resolve(0);return i.promise});i.resolve(t.all(r))}else e?"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))}):i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise}function G(e,t){var i,r,o,s=a.global.currencies.length;if(s)for(i=0;s>i;i+=1)a.global.currencies[i].id===n.userInfo.currencyId&&(r=i),a.global.currencies[i].id===t&&(o=i);return a.global.currencies[r]&&a.global.currencies[o]&&(e*=a.global.currencies[o].value),e}function w(e,t,r,a,s,l,d){var c,u=0,p=0,_=0,E=1,m={},g=t.waste?1+t.waste/100:1;if(6===e){for(c=0;s>c;c+=1)if(a[c].elemId===t.id)for(var f=a[c].sizes.length;--f>-1;)m=angular.copy(r),p=a[c].sizes[f]+t.amendment_pruning,u=p*m.price*g,n.userInfo.currencyId!=m.currency_id&&(u=G(u,m.currency_id)),m.qty=angular.copy(E),m.size=o.roundingValue(p,3),m.priceReal=o.roundingValue(u,3),l.priceTotal+=u,d.push(m)}else for(var T=0;s>T;T+=1){if(m=angular.copy(r),5===e){var h=0;a[T].elemId===t.id&&(p=a[T].square,_=o.roundingValue(a[T].square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+a[T].sizes[0]+" x "+a[T].sizes[1]+")",u=p*m.price*g,h+=1)}else 7===e?(E=t.count,u=E*m.price*g):(p=a[T]+t.amendment_pruning,u=p*m.price*g);(5===e&&h||5!==e)&&(n.userInfo.currencyId!=m.currency_id&&(u=G(u,m.currency_id)),m.qty=angular.copy(E),m.size=o.roundingValue(p,3),m.sizeLabel=_,m.priceReal=o.roundingValue(u,3),l.priceTotal+=u,d.push(m))}}function U(e,t){var i,r=e.kitsElem.length,o=0,n=[];for(e.priceTotal=0,i=0;r>i;i+=1)if(e.kitsElem[i])if(o=t[i].length,angular.isArray(e.kitsElem[i])){var a,s=e.kitsElem[i].length;for(a=0;s>a;a+=1)if(angular.isArray(e.kitsElem[i][a])){var l,d=e.kitsElem[i][a].length;for(l=0;d>l;l+=1)w(i,e.kits[i][a][l],e.kitsElem[i][a][l],t[i][a],1,e,n)}else w(i,e.kits[i][a],e.kitsElem[i][a],t[i],o,e,n)}else w(i,e.kits[i],e.kitsElem[i],t[i],o,e,n);return n}function k(e,t,i){if(1==e.direction_id)return 1;var r,o=0;for(r=0;i>r;r+=1)t[r]===e.direction_id&&(o+=1);return o}function H(e,t,i){var r=0;switch(i){case 1:case 21:case 22:r=o.roundingValue(e-t,3);break;case 2:case 5:var n=1>e?1:parseInt(e);r=n*t;break;case 3:case 12:case 14:r=o.roundingValue(Math.round(e)*t,3);break;case 6:case 7:case 8:case 9:case 13:case 23:r=o.roundingValue(e*t,3);break;default:r=t}return r}function V(e,t,i){var r=0;switch(i){case 1:r=o.roundingValue(e-t,3);break;case 2:case 5:var n=1>e?1:parseInt(e);r=n*t;break;case 3:r=e;break;default:r=t}return r}function B(e,t,i,r,a,s,l,d){if(r){var c=angular.copy(r),u=0,p=0,_=1;switch(9===c.element_group_id&&(p=t),i.rules_type_id){case 1:case 21:case 22:p=o.roundingValue(t+a-i.value,3);break;case 3:_=(t+a)*i.value;break;case 5:_=i.value;break;case 6:case 23:_=(t+a)*i.value;break;case 2:case 4:case 15:_=e*i.value;break;default:p=o.roundingValue(t+a,3)}u=p?p*_*r.price*s:_*r.price*s,n.userInfo.currencyId!=r.currency_id&&(u=G(u,r.currency_id)),c.priceReal=u,c.size=o.roundingValue(p,3),c.sizeLabel=d,c.qty=_,l.constrElements.push(c),l.priceTotal+=c.priceReal}}function F(e,t,r,n,a,s,l){if(n.parent_list_id===r.id){var d=1,c=1,u=0,p=r.waste?1+r.waste/100:1;5===e?5===n.rules_type_id?(d=t.square,c=t.square,u=o.roundingValue(t.square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+t.sizes[0]+" x "+t.sizes[1]+")"):21===n.rules_type_id?(d=t.sizes[0],c=t.sizes[0]):22===n.rules_type_id?(d=t.sizes[1],c=t.sizes[1]):c=t.square:(d=o.roundingValue(t+r.amendment_pruning,3),c=t),"list"===n.child_type&&(n.newValue=H(d,n.value,n.rules_type_id)),B(1,c,n,a,r.amendment_pruning,p,l,u)}else{var _,E=s.length;for(_=0;E>_;_+=1)if(n.parent_list_id===s[_].child_id&&n.parentId===s[_].id){var p=s[_].waste?1+s[_].waste/100:1,m=1;"list"===n.child_type&&(n.newValue=H(s[_].newValue,n.value,n.rules_type_id)),2===s[_].rules_type_id&&(2===n.rules_type_id||4===n.rules_type_id||15===n.rules_type_id)&&(m=s[_].newValue),B(m,s[_].newValue,n,a,s[_].amendment_pruning,p,l)}}}function W(e,t,i,r,a,s){if(e===s.consist.length-1){if(angular.isArray(i)){var l,d=i.length,c=r.openDir.length;for(l=0;d>l;l+=1)if(angular.isArray(i[l])){var u,p=i[l].length;e:for(u=0;p>u;u+=1)if(k(t[l][u],r.openDir,c)){var _=angular.copy(i[l][u]),E=0,m=1;if(t[l][u].parent_list_id===a[l].child_id)m=a[l].waste?1+a[l].waste/100:1,_.qty=H(a[l].count,t[l][u].value,t[l][u].rules_type_id),"list"===t[l][u].child_type&&(t[l][u].newValue=angular.copy(_.qty));else for(var g=0;p>g;g+=1)if(t[l][u].parent_list_id===t[l][g].child_id&&t[l][u].parentId===t[l][g].id){if(!k(t[l][g],r.openDir,c))continue e;m=t[l][g].waste?1+t[l][g].waste/100:1,_.qty=H(t[l][g].newValue,t[l][u].value,t[l][u].rules_type_id),"list"===t[l][u].child_type&&(t[l][u].newValue=angular.copy(_.qty))}E=_.qty*i[l][u].price*m,E&&(n.userInfo.currencyId!=i[l][u].currency_id&&(E=G(E,i[l][u].currency_id)),_.priceReal=o.roundingValue(E,3),_.size=0,s.constrElements.push(_),s.priceTotal+=_.priceReal)}}}}else if(angular.isArray(i)){var f,T=i.length;for(f=0;T>f;f+=1)if(6===e)for(var h=r.sizes.length;--h>-1;)F(e,r.sizes[h],a,t[f],i[f],t,s);else F(e,r,a,t[f],i[f],t,s)}else if(6===e)for(var h=r.sizes.length;--h>-1;)F(e,r.sizes[h],a,t,i,s.consist[e],s);else F(e,r,a,t,i,s.consist[e],s)}function Y(e,t){var i,r=e.consist.length;for(i=0;r>i;i+=1)if(e.consist[i]){var o=t.sizes[i].length,n=e.consist[i].length;if(n)if(angular.isArray(e.kits[i]))for(var a=0;n>a;a+=1)if(5===i||6===i)for(var s=t.sizes[i].length,l=0;s>l;l+=1)t.sizes[i][l].elemId===e.kits[i][a].id&&e.consistElem[i][a]&&W(i,e.consist[i][a],e.consistElem[i][a],t.sizes[i][l],e.kits[i][a],e);else e.consistElem[i][a]&&W(i,e.consist[i][a],e.consistElem[i][a],t.sizes[i][a],e.kits[i][a],e);else for(var l=0;o>l;l+=1)for(var a=0;n>a;a+=1)e.consistElem[i][a]&&W(i,e.consist[i][a],e.consistElem[i][a],t.sizes[i][l],e.kits[i],e)}}function z(e){var i=t.defer(),r={},n={};return R(e).then(function(t){r.kits=t,v(r.kits).then(function(t){r.consist=t,M(r.kits).then(function(t){r.kitsElem=t,x(r.consist).then(function(t){r.consistElem=t,r.constrElements=U(r,e.sizes),Y(r,e),r.priceTotal=o.roundingValue(r.priceTotal),n.constrElements=angular.copy(r.constrElements),n.priceTotal=isNaN(r.priceTotal)?0:angular.copy(r.priceTotal),i.resolve(n)})})})}),i.promise}function K(e,t,i){var r=angular.copy(t);n.userInfo.currencyId!=r.currency_id&&(r.price=o.roundingValue(G(r.price,r.currency_id),3)),r.qty=i?i.value:1,r.size=0,r.priceReal=o.roundingValue(r.price*r.qty,3),e.priceTot+=r.priceReal,e.elements.push(r)}function X(e,i){var r=t.defer(),n={priceTot:0,elements:[]};return P(0,e.parent_element_id).then(function(e){K(n,e),P(0,i.parent_element_id).then(function(e){K(n,e),b(i.id).then(function(e){n.consist=e,x([n.consist]).then(function(e){n.consistElem=e[0];for(var t=n.consist.length;--t>-1;)K(n,n.consistElem[t],n.consist[t]);n.priceTot=isNaN(n.priceTot)?0:o.roundingValue(n.priceTot),r.resolve(n)})})})}),r.promise}function q(e){var i=t.defer(),r={},a={constrElements:[],priceTotal:0};return b(angular.copy(e.elementId)).then(function(t){a.consist=angular.copy(t),D(e.elementId).then(function(t){t?(a.kits=angular.copy(t),P(0,a.kits.parent_element_id).then(function(t){a.kitsElem=angular.copy(t),x([a.consist]).then(function(t){if(a.consistElem=angular.copy(t[0]),e.elementWidth>0){var s=0,l=0;e.elementHeight?(s=o.roundingValue(e.elementWidth*e.elementHeight,3),l=o.roundingValue((e.elementWidth+a.kits.amendment_pruning)*(e.elementHeight+a.kits.amendment_pruning),3)):(s=e.elementWidth,l=e.elementWidth+a.kits.amendment_pruning);var d=a.kits.waste?1+a.kits.waste/100:1,c=angular.copy(a.kitsElem),u=o.roundingValue(l*c.price*d);if(n.userInfo.currencyId!=c.currency_id&&(u=G(u,c.currency_id)),c.qty=1,c.size=l,c.priceReal=u,a.priceTotal+=u,a.constrElements.push(c),a.consistElem){var p=a.consist.length;if(p)for(var _=0;p>_;_++)if(a.consist[_])if(a.consist[_].parent_list_id===e.elementId)"list"===a.consist[_].child_type&&(a.consist[_].newValue=H(l,a.consist[_].value,a.consist[_].rules_type_id)),B(1,s,a.consist[_],a.consistElem[_],a.kits.amendment_pruning,d,a);else for(var E=0;p>E;E++)a.consist[_].parent_list_id===a.consist[E].child_id&&a.consist[_].parentId===a.consist[E].id&&(d=a.consist[E].waste?1+a.consist[E].waste/100:1,"list"===a.consist[_].child_type&&(a.consist[_].newValue=H(a.consist[E].newValue,a.consist[_].value,a.consist[_].rules_type_id)),B(a.consist[_].newValue,a.consist[E].newValue,a.consist[_],a.consistElem[_],a.consist[E].amendment_pruning,d,a))}}a.priceTotal=o.roundingValue(a.priceTotal),r.constrElements=angular.copy(a.constrElements),r.priceTotal=angular.copy(a.priceTotal),i.resolve(r)})})):i.resolve(a)})}),i.promise}function Q(e){var i=t.defer(),r=angular.copy(e.element),a={},s={constrElements:[],priceTotal:0};return r.element_width/=1e3,r.element_height/=1e3,t.all([D(r.cloth_id),D(r.top_id)]).then(function(e){var l=angular.copy(e[1]);s.kits=angular.copy(e),s.kits.push(l,l,l),t.all([P(0,e[0].parent_element_id),P(0,e[1].parent_element_id)]).then(function(e){var t,i,a,l,d,c,u=[r.cloth_waste,r.top_waste,r.right_waste,r.bottom_waste,r.left_waste],p=u.length;for(s.kitsElem=angular.copy(e),s.kitsElem.push(angular.copy(e[1]),angular.copy(e[1]),angular.copy(e[1])),t=0;p>t;t+=1)d=s.kits[t].waste?1+s.kits[t].waste/100:1,s.kitsElem[t]&&(i=r.element_width+s.kits[t].amendment_pruning-u[t]/1e3,a=r.element_height+s.kits[t].amendment_pruning-u[t]/1e3,l=1===t||3===t?o.roundingValue(i,3):2===t||4===t?o.roundingValue(a,3):o.roundingValue(i*a,3),c=o.roundingValue(l*s.kitsElem[t].price*d),n.userInfo.currencyId!=s.kitsElem[t].currency_id&&(c=o.roundingValue(G(c,s.kitsElem[t].currency_id))),s.kitsElem[t].qty=1,s.kitsElem[t].size=l,s.kitsElem[t].priceReal=c,s.priceTotal+=c,s.constrElements.push(s.kitsElem[t]))}),t.all([b(r.top_id),b(r.right_id),b(r.bottom_id),b(r.left_id)]).then(function(e){s.consist=angular.copy(e),x(s.consist).then(function(e){var t,r,n,l,d,c;if(s.consistElem=angular.copy(e),s.consistElem&&(t=s.consist.length))for(n=0;t>n;n+=1)if(r=s.consist[n].length)for(d=1,c=s.kitsElem[n+1].size,l=0;r>l;l+=1)s.consist[n][l].newValue=V(c,s.consist[n][l].value,s.consist[n][l].rules_type_id),B(1,s.consist[n][l].newValue,s.consist[n][l],s.consistElem[n][l],0,d,s);s.priceTotal=o.roundingValue(s.priceTotal),a.constrElements=angular.copy(s.constrElements),a.priceTotal=angular.copy(s.priceTotal),i.resolve(a)})})}),i.promise}var $=this,j=openDatabase("bauvoice","1.0","bauvoice",5e6),Z={addition_folders:{tableName:"addition_folders",prop:"name VARCHAR(255), addition_type_id INTEGER, factory_id INTEGER, position INTEGER, img VARCHAR, description VARCHAR, link VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(addition_type_id) REFERENCES addition_types(id)"},cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},currencies:{tableName:"currencies",prop:"name VARCHAR(100), value NUMERIC(10, 2), factory_id INTEGER, is_base INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},directions:{tableName:"directions",prop:"name VARCHAR(255)",foreignKey:""},elements_groups:{tableName:"elements_groups",prop:"name VARCHAR(255), base_unit INTEGER, position INTEGER",foreignKey:""},beed_profile_systems:{tableName:"beed_profile_systems",prop:"profile_system_id INTEGER, list_id INTEGER, glass_width INTEGER",foreignKey:", FOREIGN KEY(list_id) REFERENCES lists(id)"},glass_folders:{tableName:"glass_folders",prop:"name VARCHAR(255), img VARCHAR, position INTEGER, factory_id INTEGER, description VARCHAR, link VARCHAR, is_base INTEGER",foreignKey:""},glass_prices:{tableName:"glass_prices",prop:"element_id INTEGER, col_1_range NUMERIC(10, 2), col_1_price NUMERIC(10, 2), col_2_range_1 NUMERIC(10, 2), col_2_range_2 NUMERIC(10, 2), col_2_price NUMERIC(10, 2), col_3_range_1 NUMERIC(10, 2), col_3_range_2 NUMERIC(10, 2), col_3_price NUMERIC(10, 2), col_4_range_1 NUMERIC(10, 2), col_4_range_2 NUMERIC(10, 2), col_4_price NUMERIC(10, 2), col_5_range NUMERIC(10, 2), col_5_price NUMERIC(10, 2), table_width INTEGER",
foreignKey:""},lamination_factory_colors:{tableName:"lamination_factory_colors",prop:"name VARCHAR(255), lamination_type_id INTEGER, factory_id INTEGER",foreignKey:", FOREIGN KEY(lamination_type_id) REFERENCES lamination_default_colors(id), FOREIGN KEY(factory_id) REFERENCES factories(id)"},lamination_types:{tableName:"lamination_types",prop:"name VARCHAR(255)",foreignKey:""},lists_groups:{tableName:"lists_groups",prop:"name VARCHAR(255)",foreignKey:""},lists_types:{tableName:"lists_types",prop:"name VARCHAR(255), image_add_param VARCHAR(100)",foreignKey:""},options_coefficients:{tableName:"options_coefficients",prop:"rentability_percent INTEGER, rentability_hrn_m INTEGER, rentability_hrn INTEGER, others_percent INTEGER, others_hrn_m INTEGER, others_hrn INTEGER, transport_cost_percent INTEGER, transport_cost_hrn_m INTEGER, transport_cost_hrn INTEGER, salary_manager_percent INTEGER, salary_manager_hrn_m INTEGER, salary_manager_hrn INTEGER, rent_offices_percent INTEGER, rent_offices_hrn_m INTEGER, rent_offices_hrn INTEGER, salary_itr_percent INTEGER, salary_itr_hrn_m INTEGER, salary_itr_hrn INTEGER, rent_production_percent INTEGER, rent_production_hrn_m INTEGER, rent_production_hrn INTEGER, salary_glass_percent INTEGER, salary_glass_hrn_m INTEGER, salary_glass_hrn INTEGER, salary_assembly_percent INTEGER, salary_assembly_hrn_m INTEGER, salary_assembly_hrn INTEGER, estimated_cost INTEGER, factory_id INTEGER, plan_production INTEGER, margin NUMERIC(10, 2), coeff NUMERIC(10, 2)",foreignKey:""},options_discounts:{tableName:"options_discounts",prop:"factory_id INTEGER, min_time INTEGER, standart_time INTEGER, base_time INTEGER, week_1 INTEGER, week_2 INTEGER, week_3 INTEGER, week_4 INTEGER, week_5 INTEGER, week_6 INTEGER, week_7 INTEGER, week_8 INTEGER, percents ARRAY",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},elements:{tableName:"elements",prop:"heat_coeff INTEGER, name VARCHAR(255), element_group_id INTEGER, currency_id INTEGER, supplier_id INTEGER, margin_id INTEGER, waste NUMERIC(10, 2), is_optimized INTEGER, is_virtual INTEGER, is_additional INTEGER, weight_accounting_unit NUMERIC(10, 3), glass_folder_id INTEGER, min_width NUMERIC, min_height NUMERIC, max_width NUMERIC, max_height NUMERIC, max_sq NUMERIC, transcalency NUMERIC(10, 2), glass_width INTEGER, factory_id INTEGER, price NUMERIC(10, 2), amendment_pruning NUMERIC(10, 2), noise_coeff NUMERIC, sku VARCHAR(100), lamination_in_id INTEGER, lamination_out_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(glass_folder_id) REFERENCES glass_folders(id), FOREIGN KEY(margin_id) REFERENCES margin_types(id), FOREIGN KEY(supplier_id) REFERENCES suppliers(id), FOREIGN KEY(currency_id) REFERENCES currencies(id), FOREIGN KEY(element_group_id) REFERENCES elements_groups(id)"},profile_system_folders:{tableName:"profile_system_folders",prop:"name VARCHAR(255), factory_id INTEGER, position INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},profile_systems:{tableName:"profile_systems",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, is_editable INTEGER, is_default INTEGER, position INTEGER, country VARCHAR(100), cameras INTEGER, heat_coeff INTEGER, noise_coeff INTEGER, heat_coeff_value NUMERIC(5,2), link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},profile_laminations:{tableName:"profile_laminations",prop:"profile_id INTEGER, lamination_in_id INTEGER, lamination_out_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, code_sync VARCHAR",foreignKey:""},rules_types:{tableName:"rules_types",prop:"name VARCHAR(255), parent_unit INTEGER, child_unit INTEGER, suffix VARCHAR(15)",foreignKey:""},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"},users:{tableName:"users",prop:" email VARCHAR(255), password VARCHAR(255), factory_id INTEGER, name VARCHAR(255), phone VARCHAR(100), locked INTEGER, user_type INTEGER, city_phone VARCHAR(100), city_id INTEGER, fax VARCHAR(100), avatar VARCHAR(255), birthday DATE, sex VARCHAR(100), mount_mon NUMERIC(5,2), mount_tue NUMERIC(5,2), mount_wed NUMERIC(5,2), mount_thu NUMERIC(5,2), mount_fri NUMERIC(5,2), mount_sat NUMERIC(5,2), mount_sun NUMERIC(5,2), device_code VARCHAR(250), last_sync TIMESTAMP, address VARCHAR, therm_coeff_id INTEGER, factoryLink VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(city_id) REFERENCES cities(id)"},users_discounts:{tableName:"users_discounts",prop:"user_id INTEGER, max_construct NUMERIC(5,1), max_add_elem NUMERIC(5,1), default_construct NUMERIC(5,1), default_add_elem NUMERIC(5,1), week_1_construct NUMERIC(5,1), week_1_add_elem NUMERIC(5,1), week_2_construct NUMERIC(5,1), week_2_add_elem NUMERIC(5,1), week_3_construct NUMERIC(5,1), week_3_add_elem NUMERIC(5,1), week_4_construct NUMERIC(5,1), week_4_add_elem NUMERIC(5,1), week_5_construct NUMERIC(5,1), week_5_add_elem NUMERIC(5,1), week_6_construct NUMERIC(5,1), week_6_add_elem NUMERIC(5,1), week_7_construct NUMERIC(5,1), week_7_add_elem NUMERIC(5,1), week_8_construct NUMERIC(5,1), week_8_add_elem NUMERIC(5,1)",foreignKey:""},users_deliveries:{tableName:"users_deliveries",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},users_mountings:{tableName:"users_mountings",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},lists:{tableName:"lists",prop:"name VARCHAR(255), list_group_id INTEGER, list_type_id INTEGER, a NUMERIC(10, 2), b NUMERIC(10, 2), c NUMERIC(10, 2), d NUMERIC(10, 2), parent_element_id INTEGER, position NUMERIC, add_color_id INTEGER, addition_folder_id INTEGER, amendment_pruning NUMERIC(10, 2), waste NUMERIC(10, 2), cameras INTEGER, link VARCHAR, description VARCHAR, img VARCHAR, beed_lamination_id INTEGER, in_door INTEGER, doorstep_type INTEGER",foreignKey:", FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(list_group_id) REFERENCES lists_groups(id), FOREIGN KEY(add_color_id) REFERENCES addition_colors(id)"},list_contents:{tableName:"list_contents",prop:"parent_list_id INTEGER, child_id INTEGER, child_type VARCHAR(255), value NUMERIC(10, 7), rules_type_id INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, lamination_type_id INTEGER",foreignKey:", FOREIGN KEY(parent_list_id) REFERENCES lists(id), FOREIGN KEY(rules_type_id) REFERENCES rules_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(lamination_type_id) REFERENCES lamination_types(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_types:{tableName:"window_hardware_types",prop:"name VARCHAR(255), short_name VARCHAR(100)",foreignKey:""},window_hardware_folders:{tableName:"window_hardware_folders",prop:"name VARCHAR, factory_id INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardware_groups:{tableName:"window_hardware_groups",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, is_editable INTEGER, is_group INTEGER, is_in_calculation INTEGER, is_default INTEGER, position INTEGER, producer VARCHAR(255), country VARCHAR(255), noise_coeff INTEGER, heat_coeff INTEGER, min_height INTEGER, max_height INTEGER, min_width INTEGER, max_width INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardwares:{tableName:"window_hardwares",prop:"window_hardware_type_id INTEGER, min_width INTEGER, max_width INTEGER, min_height INTEGER, max_height INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, length INTEGER, count INTEGER, child_id INTEGER, child_type VARCHAR(100), position INTEGER, factory_id INTEGER, window_hardware_group_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(window_hardware_type_id) REFERENCES window_hardware_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(window_hardware_group_id) REFERENCES window_hardware_groups(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_colors:{tableName:"window_hardware_colors",prop:"name VARCHAR(255)",foreignKey:""},window_hardware_handles:{tableName:"window_hardware_handles",prop:"element_id INTEGER, location VARCHAR(255), constant_value NUMERIC(10, 2)",foreignKey:""},elements_profile_systems:{tableName:"elements_profile_systems",prop:"profile_system_id INTEGER, element_id INTEGER",foreignKey:""},orders:{tableName:"orders",prop:"order_number VARCHAR, order_hz VARCHAR, order_date TIMESTAMP, order_type INTEGER, order_style VARCHAR, user_id INTEGER, created TIMESTAMP, additional_payment VARCHAR, sended TIMESTAMP, state_to TIMESTAMP, state_buch TIMESTAMP, batch VARCHAR, base_price NUMERIC(13, 2), factory_margin NUMERIC(11, 2), factory_id INTEGER, purchase_price NUMERIC(10, 2), sale_price NUMERIC(10, 2), climatic_zone INTEGER, heat_coef_min NUMERIC, products_qty INTEGER, templates_price NUMERIC, addelems_price NUMERIC, products_price NUMERIC, delivery_date TIMESTAMP, new_delivery_date TIMESTAMP, delivery_price NUMERIC, is_date_price_less INTEGER, is_date_price_more INTEGER, floor_id INTEGER, floor_price NUMERIC, mounting_id INTEGER, mounting_price NUMERIC, is_instalment INTEGER, instalment_id INTEGER, is_old_price INTEGER, payment_first NUMERIC, payment_monthly NUMERIC, payment_first_primary NUMERIC, payment_monthly_primary NUMERIC, order_price NUMERIC, order_price_dis NUMERIC, order_price_primary NUMERIC, discount_construct NUMERIC, discount_addelem NUMERIC, discount_construct_max NUMERIC, discount_addelem_max NUMERIC, delivery_user_id NUMERIC, mounting_user_id NUMERIC, default_term_plant NUMERIC, disc_term_plant NUMERIC, margin_plant NUMERIC, customer_name TEXT, customer_email TEXT, customer_phone VARCHAR(30), customer_phone_city VARCHAR(20), customer_city_id INTEGER, customer_city VARCHAR, customer_address TEXT, customer_house TEXT, customer_flat TEXT, customer_floor TEXT, customer_location VARCHAR, customer_itn INTEGER, customer_starttime VARCHAR, customer_endtime VARCHAR, customer_target VARCHAR, customer_sex INTEGER, customer_age INTEGER, customer_education INTEGER, customer_occupation INTEGER, customer_infoSource INTEGER",foreignKey:""},order_products:{tableName:"order_products",prop:"order_id NUMERIC, product_id INTEGER, is_addelem_only INTEGER, room_id INTEGER, construction_type INTEGER, template_id INTEGER, template_source TEXT, template_width NUMERIC, template_height NUMERIC, template_square NUMERIC, profile_id INTEGER, glass_id VARCHAR, hardware_id INTEGER, lamination_id INTEGER, lamination_out_id INTEGER, lamination_in_id INTEGER, door_shape_id INTEGER, door_sash_shape_id INTEGER, door_handle_shape_id INTEGER, door_lock_shape_id INTEGER, heat_coef_total NUMERIC, template_price NUMERIC, addelem_price NUMERIC, product_price NUMERIC, comment TEXT, product_qty INTEGER",foreignKey:""},order_addelements:{tableName:"order_addelements",prop:"order_id NUMERIC, product_id INTEGER, element_type INTEGER, element_id INTEGER, name VARCHAR, element_width NUMERIC, element_height NUMERIC, element_price NUMERIC, element_qty INTEGER, block_id INTEGER",foreignKey:""},template_groups:{tableName:"template_groups",prop:"name VARCHAR(255)",foreignKey:""},templates:{tableName:"templates",prop:"group_id INTEGER,name VARCHAR(255),icon TEXT,template_object TEXT",foreignKey:""},background_templates:{tableName:"background_templates",prop:"factory_id INTEGER,desc_1 VARCHAR(255),desc_2 VARCHAR(255),template_id INTEGER,group_id INTEGER,position INTEGER,img VARCHAR",foreignKey:""},factories:{tableName:"factories",prop:"name VARCHAR,app_token VARCHAR,link VARCHAR,therm_coeff_id INTEGER,max_construct_square INTEGER,max_construct_size INTEGER",foreignKey:""},mosquitos:{tableName:"mosquitos",prop:"profile_id INTEGER,name VARCHAR,bottom_id INTEGER,bottom_waste INTEGER,left_id INTEGER,left_waste INTEGER,top_id INTEGER,top_waste INTEGER,right_id INTEGER,right_waste INTEGER,cloth_id INTEGER,cloth_waste INTEGER",foreignKey:""},window_hardware_type_ranges:{tableName:"window_hardware_type_ranges",prop:"factory_id INTEGER,type_id INTEGER,max_width INTEGER,min_width INTEGER,max_height INTEGER,min_height INTEGER,group_id INTEGER",foreignKey:""},lock_lists:{tableName:"lock_lists",prop:"list_id INTEGER,accessory_id INTEGER",foreignKey:""},"export":{tableName:"export",prop:"model VARCHAR, rowId INTEGER, field TEXT",foreignKey:""}},J={cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"}};return $.publicObj={tablesLocalDB:Z,tablesLocationLocalDB:J,cleanLocalDB:s,createTablesLocalDB:l,insertRowLocalDB:c,insertTablesLocalDB:u,selectLocalDB:p,updateLocalDB:_,deleteRowLocalDB:E,importUser:m,importLocation:g,importFactories:f,importAllDB:T,insertServer:h,updateServer:I,createUserServer:A,exportUserEntrance:S,deleteOrderServer:N,updateLocalServerDBs:L,sendIMGServer:O,md5:y,calculationPrice:z,getAdditionalPrice:q,calculationGridPrice:Q,calcDoorElemPrice:X,currencyExgange:G},$.publicObj}])}(),function(){angular.module("LoginModule").factory("loginServ",["$q","$cordovaGlobalization","$cordovaFileTransfer","$translate","$filter","localDB","globalConstants","GeneralServ","optionsServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,o,n,a,s,l,d,c,u,p){function _(e){for(var t=a.languages.length;--t>-1;)if(a.languages[t].label.indexOf(e)+1){p.userInfo.langLabel=a.languages[t].label,p.userInfo.langName=a.languages[t].name;break}}function E(){if(d.global.isDevice=isDevice,d.global.isDevice)t.getPreferredLanguage().then(function(e){console.log("language++",e),_(e.value),r.use(p.userInfo.langLabel)},function(e){console.log("No language defined",e)});else{var e=navigator.language||navigator.userLanguage;_(e),r.use(p.userInfo.langLabel)}}function m(){var t=e.defer();return console.log("EXPORT"),n.selectLocalDB(n.tablesLocalDB["export"].tableName).then(function(e){e.length&&n.selectLocalDB(n.tablesLocalDB.users.tableName).then(function(i){i.length&&n.updateServer(i[0].phone,i[0].device_code,e).then(function(e){console.log("FINISH export",e),e&&(n.cleanLocalDB({"export":1}),t.resolve(1))})})}),t.promise}function g(){var t=e.defer();return n.selectLocalDB("sqlite_sequence").then(function(e){e&&e.length>5?t.resolve(1):t.resolve(0)}),t.promise}function f(t){var i,r,o,a=e.defer(),s=t?null:{id:p.userInfo.city_id};return n.selectLocalDB(n.tablesLocalDB.cities.tableName,s,"id as cityId, name as cityName, region_id as regionId").then(function(e){if(o=e.length){for(d.global.locations.cities=angular.copy(e);--o>-1;)for(r=d.global.locations.regions.length;--r>-1;)if(d.global.locations.cities[o].regionId===d.global.locations.regions[r].id)for(d.global.locations.cities[o].fullLocation=""+d.global.locations.cities[o].cityName+", "+d.global.locations.regions[r].name,d.global.locations.cities[o].climaticZone=d.global.locations.regions[r].climaticZone,d.global.locations.cities[o].heatTransfer=d.global.locations.regions[r].heatTransfer,i=d.global.locations.countries.length;--i>-1;)d.global.locations.regions[r].countryId===d.global.locations.countries[i].id&&(d.global.locations.cities[o].countryId=d.global.locations.countries[i].id,d.global.locations.cities[o].currencyId=d.global.locations.countries[i].currency);a.resolve(1)}else a.resolve(0)}),a.promise}function T(t){var i,r,o=e.defer();return n.selectLocalDB(n.tablesLocalDB.countries.tableName,null,"id, name, currency_id as currency").then(function(e){i=e.length,i?d.global.locations.countries=angular.copy(e):console.log("Error!!!",e)}).then(function(){n.selectLocalDB(n.tablesLocalDB.regions.tableName,null,"id, name, country_id as countryId, climatic_zone as climaticZone, heat_transfer as heatTransfer").then(function(e){r=e.length,r?d.global.locations.regions=angular.copy(e):console.log("Error!!!",e)}).then(function(){f(t).then(function(){o.resolve(1)})})}),o.promise}function h(){var t=e.defer(),i=d.global.locations.cities.map(function(e){return e.countryId===p.userInfo.countryId?e.cityId:void 0}).join(",");return t.resolve(i),t.promise}function I(e,t,i,r,o){c.order.customer_city_id=e,c.order.customer_city=t,c.order.climatic_zone=i,c.order.heat_coef_min=r,c.order.customer_location=o}function A(){n.selectLocalDB(n.tablesLocalDB.factories.tableName,null,"therm_coeff_id, link, max_construct_size, max_construct_square").then(function(e){var t,i=p.userInfo.heatTransfer;e&&(t=e.length,t&&(p.userInfo.therm_coeff_id=angular.copy(e[0].therm_coeff_id),p.userInfo.therm_coeff_id&&(p.userInfo.heatTransfer=s.roundingValue(1/i)),e[0].link.length&&"null"!==e[0].link&&(p.userInfo.factoryLink=angular.copy(e[0].link)),+e[0].max_construct_square>0&&(d.global.maxSquareLimit=angular.copy(+e[0].max_construct_square)),+e[0].max_construct_size>0&&(d.global.maxSizeLimit=angular.copy(+e[0].max_construct_size)))),I(p.userInfo.city_id,p.userInfo.cityName,p.userInfo.climaticZone,p.userInfo.heatTransfer,p.userInfo.fullLocation)})}function S(){for(var e=d.global.locations.cities.length;--e>-1;)d.global.locations.cities[e].cityId===p.userInfo.city_id&&(p.userInfo.cityName=d.global.locations.cities[e].cityName,p.userInfo.countryId=d.global.locations.cities[e].countryId,p.userInfo.climaticZone=d.global.locations.cities[e].climaticZone,p.userInfo.heatTransfer=d.global.locations.cities[e].heatTransfer,p.userInfo.fullLocation=d.global.locations.cities[e].fullLocation)}function N(){var t=e.defer();return n.selectLocalDB(n.tablesLocalDB.currencies.tableName,null,"id, is_base, name, value").then(function(e){var i=e.length;if(e&&i){for(d.global.currencies=e;--i>-1;)1===e[i].is_base&&(p.userInfo.currencyId=e[i].id,/uah/i.test(e[i].name)?p.userInfo.currency="₴":/rub/i.test(e[i].name)?p.userInfo.currency="":/(usd|\$)/i.test(e[i].name)?p.userInfo.currency="$":/eur/i.test(e[i].name)?p.userInfo.currency="€":p.userInfo.currency="¤");t.resolve(1)}else console.error("not find currencies!"),t.resolve(0)}),t.promise}function L(){var t=e.defer();return p.userInfo.avatar=a.serverIP+p.userInfo.avatar,n.selectLocalDB(n.tablesLocalDB.users_discounts.tableName).then(function(e){var i=angular.copy(e[0]);if(i){p.userInfo.discountConstr=+i.default_construct,p.userInfo.discountAddElem=+i.default_add_elem,p.userInfo.discountConstrMax=+i.max_construct,p.userInfo.discountAddElemMax=+i.max_add_elem;var r,o=Object.keys(i),n=o.length;for(r=0;n>r;r+=1)o[r].indexOf("week")+1&&(o[r].indexOf("construct")+1?p.userInfo.discConstrByWeek.push(+i[o[r]]):o[r].indexOf("add_elem")+1&&p.userInfo.discAddElemByWeek.push(+i[o[r]]));t.resolve(1)}else console.error("not find users_discounts!"),t.resolve(0)}),t.promise}function O(){return n.selectLocalDB(n.tablesLocalDB.options_coefficients.tableName,null,"margin, coeff").then(function(e){return e})}function y(){return n.selectLocalDB(n.tablesLocalDB.options_discounts.tableName).then(function(e){return e})}function C(e){if(e){if(/^.*\.(jpg|jpeg|png|gif|tiff)$/i.test(e)){var t=a.serverIP+""+e;if(d.global.isDevice){var r=e.split("/").pop(),o=cordova.file.documentsDirectory+""+r,n=!0,s={};return i.download(t,o,s,n).then(function(e){},function(e){},function(e){}),o}return t}return""}}function R(t,i,r,o){var a=e.defer();return n.selectLocalDB(t).then(function(t){var l=angular.copy(t).sort(function(e,t){return s.sorting(e.position,t.position)}),d=l.length;if(d){r.length=0,angular.extend(r,l);var c=l.map(function(t){var r=e.defer();return t.img=C(t.img),n.selectLocalDB(i,{folder_id:t.id}).then(function(e){if(e.length){var t=angular.copy(e).sort(function(e,t){return s.sorting(e.position,t.position)});r.resolve(t)}else r.resolve(0)}),r.promise});e.all(c).then(function(e){var t,i=e.length,n=[];for(t=0;i>t;t+=1){var s=e[t].length;if(e[t]&&s){for(;--s>-1;)e[t][s].img=C(e[t][s].img);o.push(e[t]),n.push(e[t][0].folder_id)}}var l=n.length,d=r.length;if(l)for(;--d>-1;){var c,u=0;for(c=0;l>c;c+=1)r[d].id===n[c]&&(u=1);u||r.splice(d,1)}a.resolve(1)})}else a.resolve(0)}),a.promise}function D(){for(var t=e.defer(),i=d.global.profiles.length,r=[];--i>-1;)for(var o=d.global.profiles[i].length;--o>-1;)r.push(d.global.profiles[i][o].id);var a=r.map(function(t){var i=e.defer(),r={profileId:t,glassTypes:[],glasses:[]};return n.selectLocalDB(n.tablesLocalDB.glass_folders.tableName).then(function(e){e.length?(r.glassTypes=angular.copy(e),d.global.glassesAll.push(r),i.resolve(1)):i.resolve(0)}),i.promise});return e.all(a).then(function(i){if(i){var r=d.global.glassesAll.map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.elements_profile_systems.tableName,{profile_system_id:t.profileId},"element_id").then(function(e){var t=e.length;t?i.resolve(e):i.resolve(0)}),i.promise});e.all(r).then(function(i){var r,o,a=i.length,s=[];for(o=0;a>o;o+=1){var l=e.defer(),c=i[o].map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.lists.tableName,{parent_element_id:t.element_id,list_group_id:6},"id, name, parent_element_id, cameras, list_group_id, list_type_id, position, description, img, link").then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});l.resolve(e.all(c)),s.push(l.promise)}e.all(s).then(function(i){var o=i.length,a=[];if(o){for(r=0;o>r;r+=1){var s=e.defer();d.global.glassesAll[r].glassLists=i[r].filter(function(e){return e});var l=d.global.glassesAll[r].glassLists.map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.elements.tableName,{id:t.parent_element_id},"id, name, sku, glass_folder_id, glass_width, heat_coeff, noise_coeff, transcalency, max_width, min_width, max_height, min_height, max_sq").then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});s.resolve(e.all(l)),a.push(s.promise)}e.all(a).then(function(e){var i=e.length;if(i)for(r=0;i>r;r+=1)d.global.glassesAll[r].glasses=e[r];t.resolve(1)})}})})}}),t.promise}function b(){var e,t=d.global.glassesAll.length;for(e=0;t>e;e+=1){var i,r=d.global.glassesAll[e].glassLists.length,o=d.global.glassesAll[e].glassTypes.length,n=[],a=[];for(i=0;r>i;i+=1)d.global.glassesAll[e].glassLists[i].parent_element_id===d.global.glassesAll[e].glasses[i].id&&(d.global.glassesAll[e].glasses[i].elem_id=angular.copy(d.global.glassesAll[e].glasses[i].id),d.global.glassesAll[e].glasses[i].id=angular.copy(d.global.glassesAll[e].glassLists[i].id),d.global.glassesAll[e].glasses[i].name=angular.copy(d.global.glassesAll[e].glassLists[i].name),d.global.glassesAll[e].glasses[i].cameras=angular.copy(d.global.glassesAll[e].glassLists[i].cameras),d.global.glassesAll[e].glasses[i].position=angular.copy(d.global.glassesAll[e].glassLists[i].position),d.global.glassesAll[e].glasses[i].img=angular.copy(d.global.glassesAll[e].glassLists[i].img),d.global.glassesAll[e].glasses[i].img=C(d.global.glassesAll[e].glasses[i].img),d.global.glassesAll[e].glasses[i].link=angular.copy(d.global.glassesAll[e].glassLists[i].link),d.global.glassesAll[e].glasses[i].description=angular.copy(d.global.glassesAll[e].glassLists[i].description));for(d.global.glassesAll[e].glassTypes.sort(function(e,t){return s.sorting(e.position,t.position)});--o>-1;){d.global.glassesAll[e].glassTypes[o].img=C(d.global.glassesAll[e].glassTypes[o].img);var l=d.global.glassesAll[e].glasses.filter(function(t){return t.glass_folder_id===d.global.glassesAll[e].glassTypes[o].id});l.length&&(n.unshift(d.global.glassesAll[e].glassTypes[o]),l.sort(function(e,t){return s.sorting(e.position,t.position)}),a.unshift(l))}d.global.glassesAll[e].glassTypes=angular.copy(n),d.global.glassesAll[e].glasses=angular.copy(a),delete d.global.glassesAll[e].glassLists}}function v(){n.selectLocalDB(n.tablesLocalDB.window_hardware_type_ranges.tableName,null,"type_id, min_width, max_width, min_height, max_height, group_id").then(function(e){e&&e.length&&(d.global.hardwareLimits=angular.copy(e))})}function P(){var t=e.defer();return n.selectLocalDB(n.tablesLocalDB.background_templates.tableName).then(function(e){var i=angular.copy(e),r=i.length;if(r){for(i=i.sort(function(e,t){return s.sorting(e.position,t.position)});--r>-1;)i[r].img=C(i[r].img),$("<img />").attr("src",i[r].img);d.global.rooms=i}t.resolve(1)}),t.promise}function M(){return n.selectLocalDB(n.tablesLocalDB.lamination_factory_colors.tableName,null,"id, name, lamination_type_id as type_id").then(function(e){return e})}function x(){var t=e.defer();return n.selectLocalDB(n.tablesLocalDB.profile_laminations.tableName).then(function(e){if(e){d.global.laminatCouples=angular.copy(e);for(var i,r=d.global.laminatCouples.length,o=d.global.laminats.length;--r>-1;)for(delete d.global.laminatCouples[r].code_sync,delete d.global.laminatCouples[r].modified,i=0;o>i;i+=1)d.global.laminats[i].id===d.global.laminatCouples[r].lamination_in_id&&(d.global.laminatCouples[r].laminat_in_name=d.global.laminats[i].name,d.global.laminatCouples[r].img_in_id=d.global.laminats[i].type_id),d.global.laminats[i].id===d.global.laminatCouples[r].lamination_out_id&&(d.global.laminatCouples[r].laminat_out_name=d.global.laminats[i].name,d.global.laminatCouples[r].img_out_id=d.global.laminats[i].type_id);t.resolve(1)}else t.resolve(1)}),t.promise}function G(){var t=e.defer(),i=s.addElementDATA.map(function(e,t){return t?n.selectLocalDB(n.tablesLocalDB.lists.tableName,{list_group_id:e.id}):n.selectLocalDB(n.tablesLocalDB.mosquitos.tableName)});return e.all(i).then(function(e){var i,r,o=angular.copy(e),n=o.length;for(i=0;n>i;i+=1)r=!i&&o[i].length?{elementType:[{addition_type_id:20,name:""}],elementsList:[o[i]]}:{elementType:[],elementsList:o[i]},d.global.addElementsAll.push(r);t.resolve(1)}),t.promise}function w(){var t=e.defer(),i=d.global.addElementsAll.map(function(t,i){var r=e.defer();if(i&&t.elementsList&&t.elementsList.length){var o=t.elementsList.map(function(t){var i=e.defer();return t.img=C(t.img),n.selectLocalDB(n.tablesLocalDB.elements.tableName,{id:t.parent_element_id}).then(function(e){e&&e.length?(d.global.tempAddElements.push(angular.copy(e[0])),i.resolve(1)):i.resolve(0)}),i.promise});r.resolve(e.all(o))}else r.resolve(0);return r.promise});return t.resolve(e.all(i)),t.promise}function U(t){var i=e.defer(),r=t.map(function(t){var i=e.defer(),r={currencyId:p.userInfo.currencyId,element:t};return n.calculationGridPrice(r).then(function(e){e?(t.element_price=angular.copy(s.roundingValue(s.addMarginToPrice(e.priceTotal,d.global.margins.margin))),t.elementPriceDis=angular.copy(s.roundingValue(s.setPriceDis(t.element_price,c.order.discount_addelem))),i.resolve(t)):i.reject(e)}),i.promise});return i.resolve(e.all(r)),i.promise}function k(){var t=e.defer();return n.selectLocalDB(n.tablesLocalDB.addition_folders.tableName).then(function(e){var i,r,a,l,c,u,p,_,E,m,g,f,T,h=d.global.addElementsAll,I=h.length,A={id:0,name:o("translate")("add_elements.OTHERS")};for(e&&e.length&&(i=e.sort(function(e,t){return s.sorting(e.position,t.position)}));--I>-1;)if(h[I].elementsList)if(I){for(i&&i.length&&(h[I].elementType=angular.copy(i)),h[I].elementType.push(A),r=[],a=[],l=h[I].elementType.length,c=h[I].elementsList.length,u=d.global.tempAddElements.length,p=0;l>p;p+=1){for(_=[],E=0;c>E;E+=1)if(h[I].elementType[p].id===h[I].elementsList[E].addition_folder_id){switch(m=0,g=0,h[I].elementsList[E].list_group_id){case 21:case 9:case 8:case 19:case 12:m=1e3;break;case 26:m=1e3,g=1e3}for(h[I].elementsList[E].element_width=m,h[I].elementsList[E].element_height=g,h[I].elementsList[E].element_qty=1,f=0;u>f;f+=1)d.global.tempAddElements[f].id===h[I].elementsList[E].parent_element_id&&(h[I].elementsList[E].element_price=s.roundingValue(n.currencyExgange(d.global.tempAddElements[f].price,d.global.tempAddElements[f].currency_id),2));_.push(angular.copy(h[I].elementsList[E]))}_.length?(_=o("orderBy")(_,"name"),r.push(_)):a.push(p)}if(r.length?h[I].elementsList=angular.copy(r):h[I].elementsList=0,T=a.length)for(;--T>-1;)h[I].elementType.splice(a[T],1)}else if(c=h[I].elementsList[0].length){for(E=0;c>E;E+=1)h[I].elementsList[0][E].element_width=1e3,h[I].elementsList[0][E].element_height=1e3,h[I].elementsList[0][E].element_qty=1,h[I].elementsList[0][E].list_group_id=20;U(h[I].elementsList[0])}t.resolve(1)}),t.promise}function H(){var t=e.defer();return G().then(function(){w().then(function(){k().then(function(){t.resolve(1)})})}),t.promise}function V(){n.selectLocalDB(n.tablesLocalDB.users_deliveries.tableName).then(function(e){e.length&&(d.global.supplyData=angular.copy(e))}),n.selectLocalDB(n.tablesLocalDB.users_mountings.tableName).then(function(e){e.length&&(d.global.assemblingData=angular.copy(e))}),l.getInstalment(function(e){e.status?d.global.instalmentsData=e.data.instalment:console.log(e)})}function B(e,t){var i,r,o,n,a,s,l,c,u,p,_=d.global.profiles.length;if(e.length)for(o=e.filter(function(e){return 2===e.list_group_id}),n=e.filter(function(e){return 3===e.list_group_id}),a=o.length,s=n.length;--_>-1;)for(i=d.global.profiles[_].length;--i>-1;){for(r={},u=0,p=0,l=0;a>l;l+=1)o[l].id===d.global.profiles[_][i].rama_list_id&&(u=o[l]);for(c=0;s>c;c+=1)n[c].id===d.global.profiles[_][i].stvorka_list_id&&(p=n[c]);u&&p&&(r.profileId=d.global.profiles[_][i].id,r.frame=u,r.sash=p,t.push(r))}}function F(){var t=d.global.doorHandlers.map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.lock_lists.tableName,{accessory_id:t.id},"list_id").then(function(t){if(t.length){var r=t.map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.lists.tableName,{id:t.list_id},"id, name, list_type_id, parent_element_id").then(function(e){i.resolve(e[0])}),i.promise});i.resolve(e.all(r))}else i.resolve(0)}),i.promise});e.all(t).then(function(e){d.global.doorLocks=angular.copy(e)})}function W(e){var t,i,r,o,n=[],a=e.length;for(o=0;a>o;o+=1){for(t=d.global.profiles.length,r=0;--t>-1;)for(i=d.global.profiles[t].length;--i>-1;)d.global.profiles[t][i].id===e[o].profile_system_id&&(r=1);r&&n.push(e[o].profile_system_id)}return n.join(", ")}function Y(){var t="id, name, list_type_id, parent_element_id";n.selectLocalDB(n.tablesLocalDB.lists.tableName,{list_type_id:35},t).then(function(i){d.global.doorHandlers=d.global.doorHandlers.concat(i),n.selectLocalDB(n.tablesLocalDB.lists.tableName,{list_type_id:36},t).then(function(t){d.global.doorHandlers=d.global.doorHandlers.concat(t),F();var i=d.global.doorHandlers.map(function(t){var i=e.defer();return n.selectLocalDB(n.tablesLocalDB.elements_profile_systems.tableName,{element_id:t.parent_element_id},"profile_system_id").then(function(e){i.resolve(e)}),i.promise});e.all(i).then(function(e){var t,i=d.global.doorHandlers.length;for(t=0;i>t;t+=1)d.global.doorHandlers[t].profIds=W(e[t])})})})}function z(){n.selectLocalDB(n.tablesLocalDB.lists.tableName,{in_door:1},"id, name, list_group_id, doorstep_type").then(function(e){var t,i,r=angular.copy(e),o=r.length;o?(t=r.filter(function(e){return 1===e.doorstep_type}),i=r.filter(function(e){return 2===e.doorstep_type}),B(t,d.global.doorKitsT1),B(i,d.global.doorKitsT2),Y()):d.global.noDoorExist=1})}function K(){var t=e.defer();return N().then(function(e){e&&L().then(function(e){e&&O().then(function(e){e&&e.length?(d.global.margins=angular.copy(e[0]),y().then(function(e){e&&e.length?(d.global.deliveryCoeff=angular.copy(e[0]),d.global.deliveryCoeff.percents=e[0].percents.split(",").map(function(e){
return+e}),A(),R(n.tablesLocalDB.profile_system_folders.tableName,n.tablesLocalDB.profile_systems.tableName,d.global.profilesType,d.global.profiles).then(function(e){e&&D().then(function(e){e&&(b(),R(n.tablesLocalDB.window_hardware_folders.tableName,n.tablesLocalDB.window_hardware_groups.tableName,d.global.hardwareTypes,d.global.hardwares).then(function(e){e&&(z(),v(),P().then(function(){H().then(function(){M().then(function(e){e&&e.length&&(d.global.laminats=angular.copy(e).map(function(e){return e.isActive=0,e}),d.global.laminats.push({id:1,type_id:1,isActive:0,name:o("translate")("mainpage.WHITE_LAMINATION")}),x().then(function(){d.global.laminatCouples.push(angular.copy(u.product.lamination))})),V(),t.resolve(1)})})}))}))})})):(console.error("not find options_discounts!"),t.resolve(0))})):(console.error("not find options_coefficients!"),t.resolve(0))})})}),t.promise}var X=this;return X.publicObj={getDeviceLanguage:E,initExport:m,isLocalDBExist:g,prepareLocationToUse:T,downloadAllCities:f,collectCityIdsAsCountry:h,setUserLocation:S,setUserGeoLocation:I,downloadAllData:K,getGridPrice:U},X.publicObj}])}(),function(){angular.module("MainModule").factory("MainServ",["$location","$q","$filter","$timeout","localDB","GeneralServ","SVGServ","loginServ","optionsServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","UserStor","AuxStor","CartStor","DesignStor",function(e,t,i,r,o,n,a,s,l,d,c,u,p,_,E,m,g){function f(){c.global.showRoomSelectorDialog=0,c.global.configMenuTips=c.global.startProgramm?1:0}function T(){p.product.door_shape_id=0,p.product.door_sash_shape_id=0,p.product.door_handle_shape_id=0,p.product.door_lock_shape_id=0}function h(){E.aux.isWindowSchemeDialog=0,E.aux.isAddElementListView=0,E.aux.isFocusedAddElement=0,E.aux.isTabFrame=0,E.aux.isAddElementListView=0,E.aux.showAddElementsMenu=0,E.aux.addElementGroups.length=0,E.aux.searchingWord="",E.aux.isGridSelectorDialog=0}function I(){c.global.isNavMenu=0,c.global.isConfigMenu=1,c.global.activePanel=0,h(),c.global.startProgramm&&(r(function(){c.global.showRoomSelectorDialog=1},2e3),r(f,5e3))}function A(){r(function(){o.exportUserEntrance(_.userInfo.phone,_.userInfo.device_code)},5e3)}function S(){var e=(new Date).getTime().toString();return 1*(_.userInfo.id+""+e.slice(4,e.length))}function N(){var e;u.order.id=S(),u.order.order_date=(new Date).getTime(),e=new Date(u.order.order_date).getDate()+c.global.deliveryCoeff.standart_time,u.order.delivery_date=(new Date).setDate(e),u.order.new_delivery_date=angular.copy(u.order.delivery_date)}function L(){u.order.discount_construct=angular.copy(_.userInfo.discountConstr),u.order.discount_addelem=angular.copy(_.userInfo.discountAddElem)}function O(){p.product.construction_type=c.global.rooms[0].group_id,p.product.template_id=c.global.rooms[0].template_id-1}function y(e){var r=t.defer();switch(e){case 1:l.getTemplatesWindow(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_WINDOW"),r.resolve(e.data.windows)):console.log(e)});break;case 2:l.getTemplatesWindowDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY_ENTER"),r.resolve(e.data.windowDoor)):console.log(e)});break;case 3:l.getTemplatesBalcony(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY"),r.resolve(e.data.balconies)):console.log(e)});break;case 4:l.getTemplatesDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_DOOR"),r.resolve(e.data.doors)):console.log(e)})}return r.promise}function C(e,t){for(var i,r=t.length;--r>-1;)for(i=t[r].length;--i>-1;)if(t[r][i].id===e)return t[r][i]}function R(e){var i=t.defer();return o.selectLocalDB(o.tablesLocalDB.lists.tableName,{id:e}).then(function(e){var t={};e.length&&(t.a=e[0].a,t.b=e[0].b,t.c=e[0].c,t.d=e[0].d),i.resolve(t)}),i.promise}function D(e,i){var r=t.defer();return i?e.profile=angular.copy(C(i,c.global.profiles)):e.profile=angular.copy(c.global.profiles[0][0]),t.all([R(e.profile.rama_list_id),R(e.profile.rama_still_list_id),R(e.profile.stvorka_list_id),R(e.profile.impost_list_id),R(e.profile.shtulp_list_id)]).then(function(t){e.profileDepths.frameDepth=t[0],e.profileDepths.frameStillDepth=t[1],e.profileDepths.sashDepth=t[2],e.profileDepths.impostDepth=t[3],e.profileDepths.shtulpDepth=t[4],r.resolve(1)}),r.promise}function b(e){for(var t=e.details.length,i=[];--t>0;)e.details[t].children.length||e.details[t].glassId&&i.push(angular.copy(e.details[t].glassId));return i}function v(e,t,i,r){for(var o=e.details.length;--o>0;)if(r){if(e.details[o].id===r){e.details[o].glassId=t,e.details[o].glassTxt=i;break}}else e.details[o].glassId=t,e.details[o].glassTxt=i}function P(e,t){if(e.glass.length=0,t)for(var i=n.removeDuplicates(b(p.product.template)),r=i.length;--r>-1;)e.glass.push(C(i[r],c.global.glasses));else{var o=c.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});o.length&&(c.global.glassTypes=angular.copy(o[0].glassTypes),c.global.glasses=angular.copy(o[0].glasses),e.glass.push(angular.copy(c.global.glasses[0][0])),c.global.selectGlassId=e.glass[0].id,c.global.selectGlassName=e.glass[0].sku,v(p.product.template_source,e.glass[0].id,e.glass[0].sku))}}function M(e){for(var t=e.details.length,i=0;--t>0;)"sash"===e.details[t].blockType&&(i+=1);return i}function x(e){var i=t.defer();return c.global.isChangedTemplate||(p.product.template_source=angular.copy(c.global.templatesSource[e])),P(p.product),a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e),c.global.isSashesInTemplate=M(p.product.template_source),c.global.isRoomElements=1,a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e),i.resolve(1)})}),i.promise}function G(e,t){t?e.hardware=C(t,c.global.hardwares):c.global.isSashesInTemplate?e.hardware=c.global.hardwares[0][0]:e.hardware={}}function w(e,i){var r=t.defer(),n=p.product.glass.map(function(r){var n=t.defer();return r.glass_width?o.selectLocalDB(o.tablesLocalDB.beed_profile_systems.tableName,{profile_system_id:e,glass_width:r.glass_width},"list_id").then(function(e){var a=e.length,s={glassId:r.id,beadId:0};if(a)if(a>1){var l=e.map(function(e){var r=t.defer();return o.selectLocalDB(o.tablesLocalDB.lists.tableName,{id:e.list_id},"beed_lamination_id as id").then(function(e){e&&e[0].id===i?r.resolve(1):r.resolve(0)}),r.promise});t.all(l).then(function(t){for(var i=t.length;--i>-1;)t[i]&&(s.beadId=e[i].list_id,n.resolve(s));s.beadId||(console.log("Error in bead!!"),n.resolve(0))})}else s.beadId=e[0].list_id,n.resolve(s);else console.log("Error in bead!!"),n.resolve(0)}):(console.log("item.glass_width === 0"),n.resolve(0)),n.promise});return r.resolve(t.all(n)),r.promise}function U(e){var t=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time],i=n.setPriceDis(e.template_price,u.order.discount_construct);e.product_price=n.roundingValue(e.template_price+e.addelem_price),e.productPriceDis=i+e.addelemPriceDis,t&&(e.productPriceDis=n.setPriceDis(e.productPriceDis,t)),c.global.isLoader=0}function k(e){var i=t.defer();return o.calculationPrice(e).then(function(e){var t,r=angular.copy(e);r.priceTotal?4===p.product.construction_type?o.calcDoorElemPrice(p.product.doorHandle,p.product.doorLock).then(function(e){r.priceTotal+=e.priceTot,angular.extend(r.constrElements,e.elements),t=n.addMarginToPrice(r.priceTotal,c.global.margins.coeff),p.product.template_price=n.roundingValue(t,2),U(p.product),i.resolve(r)}):(t=n.addMarginToPrice(r.priceTotal,c.global.margins.coeff),p.product.template_price=n.roundingValue(t,2),U(p.product),i.resolve(r)):(p.product.template_price=0,i.resolve(0))}),i.promise}function H(e){var t,i,r,o,a,s=[],l=e.length;if(l){for(t=0;l>t;t+=1)if(i=angular.copy(e[t]),i.element_id=angular.copy(i.id),i.amount=angular.copy(i.qty),delete i.id,delete i.amendment_pruninng,delete i.currency_id,delete i.qty,delete i.waste,t){if(r=s.length,o=0,r){for(;--r>-1;)s[r].element_id===i.element_id&&s[r].size===i.size&&(o++,s[r].amount+=i.amount,s[r].priceReal+=i.priceReal);o||s.push(i)}}else s.push(i);for(r=s.length;--r>-1;)s[r].amount=n.roundingValue(s[r].amount,3),a=n.addMarginToPrice(s[r].priceReal,c.global.margins.coeff),s[r].priceReal=n.roundingValue(a,2)}return s}function V(e){for(var t,i=0,r=e.sizes[5].length,o=p.product.glass.length,a=0,s=0,l=0;--r>-1;){for(t=0;o>t;t+=1)e.sizes[5][r].elemId==p.product.glass[t].id&&(angular.isNumber(p.product.glass[t].transcalency)||(p.product.glass[t].transcalency=1),a+=p.product.glass[t].transcalency*e.sizes[5][r].square);i+=e.sizes[5][r].square}a=n.roundingValue(a),i=n.roundingValue(i,3),angular.isNumber(p.product.profile.heat_coeff_value)||(p.product.profile.heat_coeff_value=1),s=p.product.profile.heat_coeff_value*(p.product.template_square-i),l=s+a,_.userInfo.therm_coeff_id?p.product.heat_coef_total=n.roundingValue(l/p.product.template_square):p.product.heat_coef_total=n.roundingValue(p.product.template_square/l)}function B(e,i,o,a,s){var l=t.defer();return c.global.isLoader=1,w(i,s).then(function(t){if(t.length&&t[0]){var i=n.removeDuplicates(angular.copy(t).map(function(t){for(var i=e.priceElements.beadsSize.length;--i>-1;)e.priceElements.beadsSize[i].glassId===t.glassId&&(e.priceElements.beadsSize[i].elemId=t.beadId);return t.beadId})),E={laminationId:s,ids:[p.product.profile.rama_list_id,p.product.profile.rama_still_list_id,p.product.profile.stvorka_list_id,p.product.profile.impost_list_id,p.product.profile.shtulp_list_id,o.length>1?o.map(function(e){return e.id}):o[0].id,i.length>1?i:i[0],4===p.product.construction_type?0:a],sizes:[]};p.product.beadsData=angular.copy(e.priceElements.beadsSize);for(var m in e.priceElements)E.sizes.push(angular.copy(e.priceElements[m]));p.product.template_width=0,p.product.template_height=0,p.product.template_square=0;for(var g=p.product.template.details[0].overallDim.length;--g>-1;)p.product.template_width+=p.product.template.details[0].overallDim[g].w,p.product.template_height+=p.product.template.details[0].overallDim[g].h,p.product.template_square+=p.product.template.details[0].overallDim[g].square;k(E).then(function(e){l.resolve(1),e&&(5===_.userInfo.user_type||7===_.userInfo.user_type)&&(p.product.report=H(e.constrElements))}),V(E),c.global.startProgramm&&r(function(){d.sendAnalyticsData(_.userInfo.id,u.order.id,p.product.template_id,p.product.profile.id,1)},5e3)}else l.resolve(1)}),l.promise}function F(){var e=t.defer();return x(p.product.template_id).then(function(){G(p.product);var t=p.product.hardware.id||0;B(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){e.resolve(1)})}),e.promise}function W(e){var i=t.defer();return y(e).then(function(e){e?(c.global.templatesSourceSTORE=angular.copy(e),c.global.templatesSource=angular.copy(e),D(p.product).then(function(){F().then(function(){i.resolve(1)})})):i.resolve(0)}),i.promise}function Y(e){for(var t=c.global.lamGroupFiltered.length,i=1;--t>-1;)c.global.lamGroupFiltered[t].id===e&&(i=0);return i}function z(){var e,t=c.global.laminats.length,i=c.global.laminatCouples.filter(function(e){return e.profile_id?e.profile_id===p.product.profile.id:!0}),r=0;for(c.global.lamGroupFiltered.length=0;--t>-1;)if(c.global.laminats[t].isActive)for(r=1,e=i.length;--e>-1;)i[e].img_in_id===c.global.laminats[t].type_id?Y(i[e].id)&&c.global.lamGroupFiltered.push(i[e]):i[e].img_out_id===c.global.laminats[t].type_id&&Y(i[e].id)&&c.global.lamGroupFiltered.push(i[e]);c.global.lamGroupFiltered.length||r||(c.global.lamGroupFiltered=i)}function K(){for(var e=c.global.laminats.length;--e>-1;)c.global.laminats[e].isActive=0}function X(e,t){var i=c.global.laminatCouples.length;for(K();--i>-1;)t?c.global.laminatCouples[i].id===t&&(e.lamination=c.global.laminatCouples[i]):c.global.laminatCouples[i].id||(e.lamination=c.global.laminatCouples[i])}function q(e){var i=t.defer();return e?(p.product.profile.rama_list_id=p.product.lamination.rama_list_id,p.product.profile.rama_still_list_id=p.product.lamination.rama_still_list_id,p.product.profile.stvorka_list_id=p.product.lamination.stvorka_list_id,p.product.profile.impost_list_id=p.product.lamination.impost_list_id,p.product.profile.shtulp_list_id=p.product.lamination.shtulp_list_id):p.product.profile=angular.copy(C(p.product.profile.id,c.global.profiles)),t.all([R(p.product.profile.rama_list_id),R(p.product.profile.rama_still_list_id),R(p.product.profile.stvorka_list_id),R(p.product.profile.impost_list_id),R(p.product.profile.shtulp_list_id)]).then(function(e){p.product.profileDepths.frameDepth=e[0],p.product.profileDepths.frameStillDepth=e[1],p.product.profileDepths.sashDepth=e[2],p.product.profileDepths.impostDepth=e[3],p.product.profileDepths.shtulpDepth=e[4],a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e);var t=p.product.hardware.id||0;B(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){i.resolve(1)}),a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e)})})}),i.promise}function Q(e){var t,r,o,a,s,l,d,c,u=e.details,_=u.length;g.design.extraGlass.length=0,p.product.glass.forEach(function(e){if(e.max_sq||e.max_width&&e.max_height&&e.min_width&&e.min_height)for(c=1;_>c;c+=1)l=0,d=0,u[c].glassId===e.id&&u[c].glassPoints&&u[c].glassPoints.length&&(r=n.getMaxMinCoord(u[c].glassPoints),o=Math.round(r.maxX-r.minX),a=Math.round(r.maxY-r.minY),s=n.roundingValue(o*a/1e6,3),s>e.max_sq&&(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SQUARE")+" "+s+" "+i("translate")("design.MAX_VALUE_HIGHER")+" "+e.max_sq+" "+i("translate")("common_words.LETTER_M")+"2.",g.design.extraGlass.push(t)),(o>e.max_width||o<e.min_width)&&(l=1),(a>e.max_height||a<e.min_height)&&(d=1),l&&d?(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SIZE")+" "+o+" x "+a+" "+i("translate")("design.NO_MATCH_RANGE")+" "+i("translate")("design.BY_WIDTH")+" "+e.min_width+" - "+e.max_width+", "+i("translate")("design.BY_HEIGHT")+" "+e.min_height+" - "+e.max_height+".",g.design.extraGlass.push(t)):l&&!d?(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SIZE")+" "+o+" x "+a+" "+i("translate")("design.NO_MATCH_RANGE")+" "+i("translate")("design.BY_WIDTH")+" "+e.min_width+" - "+e.max_width+".",g.design.extraGlass.push(t)):!l&&d&&(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SIZE")+" "+o+" x "+a+" "+i("translate")("design.NO_MATCH_RANGE")+" "+i("translate")("design.BY_HEIGHT")+" "+e.min_height+" - "+e.max_height+".",g.design.extraGlass.push(t)))})}function j(e,t){var r,o,a,s,l,d,u,_=e.details,E=_.length,m=t||p.product.hardware.id,f=c.global.hardwareLimits.filter(function(e){return e.group_id===m}),T=f.length,h=0;if(g.design.extraHardware.length=0,T)for(d=1;E>d;d+=1)if(l=0,"sash"===_[d].blockType){for(u=0;T>u;u+=1)if(f[u].type_id===_[d].sashType){f[u].max_width&&f[u].max_height&&f[u].min_width&&f[u].min_height&&(h=f[u]);break}h&&_[d].hardwarePoints.length&&(r=n.getMaxMinCoord(_[d].hardwarePoints),o=Math.round(r.maxX-r.minX),a=Math.round(r.maxY-r.minY),(o>h.max_width||o<h.min_width)&&(l=1),(a>h.max_height||a<h.min_height)&&(l=1),l&&(s=o+" x "+a+" "+i("translate")("design.NO_MATCH_RANGE")+" ("+h.min_width+" - "+h.max_width+") x ("+h.min_height+" - "+h.max_height+")",g.design.extraHardware.push(s)))}}function Z(e,t){if(c.global.isInfoBox!==e){for(var i=t.length,r={};--i>-1;)t[i].lamination_type_id?t[i].lamination_type_id===e&&(r=t[i]):t[i].id===e&&(r=t[i]);$.isEmptyObject(r)||(c.global.infoTitle=r.name,c.global.infoImg=r.img,c.global.infoLink=r.link,c.global.infoDescrip=r.description,c.global.isInfoBox=e)}}function J(){console.log("new project!!!!!!!!!!!!!!",u.order),p.product=p.setDefaultProduct(),N(),L(),c.global.isChangedTemplate=0,c.global.isShowCommentBlock=0,c.global.isCreatedNewProject=1,c.global.isCreatedNewProduct=1,O(),W(p.product.construction_type).then(function(){c.global.isLoader=0,I(),K(),z(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function ee(){console.log("new product!!!!!!!!!!!!!!!"),p.product=p.setDefaultProduct(),c.global.isCreatedNewProduct=1,c.global.isChangedTemplate=0,O(),W(p.product.construction_type).then(function(){I(),K(),z(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function te(){for(var e=p.product.chosenAddElements.length,t=0;--e>-1;)p.product.chosenAddElements[e].length&&t++;return t}function ie(){var e=1;if(p.product.is_addelem_only&&(e=te()),e){if(c.global.tempAddElements.length=0,c.global.configMenuTips=0,c.global.isShowCommentBlock=0,h(),c.global.productEditNumber)for(var t=u.order.products.length;--t>-1;)u.order.products[t].product_id===c.global.productEditNumber&&(u.order.products[t]=angular.copy(p.product));else p.product.product_id=u.order.products.length>0?u.order.products.length+1:1,delete p.product.template,u.order.products.push(p.product);c.global.isCreatedNewProduct=0,n.stopStartProg()}return e}function re(){r(function(){n.setPreviosPage(),e.path("/cart")},100)}function oe(e){o.deleteRowLocalDB(o.tablesLocalDB.orders.tableName,{id:e}),o.deleteRowLocalDB(o.tablesLocalDB.order_products.tableName,{order_id:e}),o.deleteRowLocalDB(o.tablesLocalDB.order_addelements.tableName,{order_id:e})}function ne(e,i,r){var a=t.defer();c.global.orderEditNumber&&(oe(c.global.orderEditNumber),o.deleteOrderServer(_.userInfo.phone,_.userInfo.device_code,c.global.orderEditNumber),c.global.orderEditNumber=0),angular.extend(u.order,e);var l,d=u.order.products.length;for(u.order.products_qty=0,l=0;d>l;l+=1){var p=angular.copy(u.order.products[l]);p.order_id=u.order.id,p.is_addelem_only||(p.template_source.beads=angular.copy(p.beadsData)),p.template_source=JSON.stringify(p.template_source),p.profile_id=u.order.products[l].profile.id,p.glass_id=u.order.products[l].glass.map(function(e){return e.id}).join(", "),p.hardware_id=u.order.products[l].hardware.id||0,p.lamination_id=u.order.products[l].lamination.id,p.lamination_in_id=u.order.products[l].lamination.lamination_in_id,p.lamination_out_id=u.order.products[l].lamination.lamination_out_id,p.modified=new Date,p.template&&delete p.template,delete p.templateIcon,delete p.profile,delete p.glass,delete p.hardware,delete p.lamination,delete p.chosenAddElements,delete p.profileDepths,delete p.addelemPriceDis,delete p.productPriceDis,delete p.report,delete p.beadsData,delete p.doorName,delete p.doorSashName,delete p.doorHandle,delete p.doorLock,u.order.products_qty+=u.order.products[l].product_qty,console.log("SEND PRODUCT------",p),o.insertRowLocalDB(p,o.tablesLocalDB.order_products.tableName),i&&o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.order_products.tableName,p);for(var E=angular.copy(u.order.products[l].report),g=E.length;--g>-1;)E[g].order_id=u.order.id,E[g].price=angular.copy(E[g].priceReal),delete E[g].priceReal;var f,T=u.order.products[l].chosenAddElements.length;for(f=0;T>f;f+=1){var h,I=u.order.products[l].chosenAddElements[f].length;if(I>0)for(h=0;I>h;h+=1){var A={order_id:u.order.id,product_id:u.order.products[l].product_id,element_type:u.order.products[l].chosenAddElements[f][h].element_type,element_id:u.order.products[l].chosenAddElements[f][h].id,name:u.order.products[l].chosenAddElements[f][h].name,element_width:u.order.products[l].chosenAddElements[f][h].element_width,element_height:u.order.products[l].chosenAddElements[f][h].element_height,element_price:u.order.products[l].chosenAddElements[f][h].element_price,element_qty:u.order.products[l].chosenAddElements[f][h].element_qty,block_id:u.order.products[l].chosenAddElements[f][h].block_id,modified:new Date};console.log("SEND ADD",A),o.insertRowLocalDB(A,o.tablesLocalDB.order_addelements.tableName),i&&o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.order_addelements.tableName,A)}}}var S=angular.copy(u.order);return S.order_date=new Date(u.order.order_date),S.order_type=i,S.order_style=r,S.factory_id=_.userInfo.factory_id,S.user_id=_.userInfo.id,S.delivery_date=new Date(u.order.delivery_date),S.new_delivery_date=new Date(u.order.new_delivery_date),S.customer_sex=+u.order.customer_sex||0,S.customer_age=u.order.customer_age?u.order.customer_age.id:0,S.customer_education=u.order.customer_education?u.order.customer_education.id:0,S.customer_occupation=u.order.customer_occupation?u.order.customer_occupation.id:0,S.customer_infoSource=u.order.customer_infoSource?u.order.customer_infoSource.id:0,S.products_qty=n.roundingValue(u.order.products_qty),S.discount_construct_max=_.userInfo.discountConstrMax,S.discount_addelem_max=_.userInfo.discountAddElemMax,S.default_term_plant=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time],S.disc_term_plant=m.cart.discountDeliveyPlant,S.margin_plant=m.cart.marginDeliveyPlant,i&&(S.additional_payment="",S.created=new Date,S.sended=new Date(0),S.state_to=new Date(0),S.state_buch=new Date(0),S.batch="---",S.base_price=0,S.factory_margin=0,S.purchase_price=0,S.sale_price=0,S.modified=new Date),delete S.products,delete S.floorName,delete S.mountingName,delete S.selectedInstalmentPeriod,delete S.selectedInstalmentPercent,delete S.productsPriceDis,delete S.orderPricePrimaryDis,delete S.paymentFirstDis,delete S.paymentMonthlyDis,delete S.paymentFirstPrimaryDis,delete S.paymentMonthlyPrimaryDis,console.log("!!!!orderData!!!!",S),i?o.insertServer(_.userInfo.phone,_.userInfo.device_code,o.tablesLocalDB.orders.tableName,S).then(function(e){e.status&&(S.order_number=e.order_number),o.insertRowLocalDB(S,o.tablesLocalDB.orders.tableName),a.resolve(1)}):(o.insertRowLocalDB(S,o.tablesLocalDB.orders.tableName),a.resolve(1)),u.order=u.setDefaultOrder(),s.setUserGeoLocation(_.userInfo.city_id,_.userInfo.cityName,_.userInfo.climaticZone,_.userInfo.heatTransfer,_.userInfo.fullLocation),c.global.isCreatedNewProject=0,a.promise}var ae=this;return ae.publicObj={saveUserEntry:A,createOrderData:N,createOrderID:S,setCurrDiscounts:L,setCurrTemplate:O,prepareTemplates:W,downloadAllTemplates:y,setCurrentProfile:D,setCurrentGlass:P,setGlassToTemplateBlocks:v,setCurrentHardware:G,fineItemById:C,parseTemplate:F,saveTemplateInProduct:x,checkSashInTemplate:M,preparePrice:B,setProductPriceTOTAL:U,showInfoBox:Z,closeRoomSelectorDialog:f,laminatFiltering:z,setCurrLamination:X,setProfileByLaminat:q,checkGlassSizes:Q,checkHardwareSizes:j,createNewProject:J,createNewProduct:ee,setDefaultDoorConfig:T,prepareMainPage:I,setDefaultAuxParam:h,inputProductInOrder:ie,goToCart:re,saveOrderInDB:ne,deleteOrderInDB:oe},ae.publicObj}])}(),function(){angular.module("MainModule").factory("NavMenuServ",["$location","$http","$filter","$cordovaGeolocation","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor",function(e,t,i,r,o,n,a,s,l,d){function c(){function e(e){var i=e.coords.latitude,r=e.coords.longitude;t.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+i+","+r+"&sensor=true&language=ru").then(function(e){var t=e.results[0].formatted_address.split(", ");l.order.customer_city_id=156,l.order.customer_city=t[t.length-3],l.order.climatic_zone=7,l.order.heat_coef_min=.99,l.order.customer_location=t[t.length-3]+", "+t[t.length-2]+", "+t[t.length-1]},function(e,t){console.log("Something went wrong with User recive!",e,t)})}function i(e){console.log(e.message)}r.getCurrentPosition().then(e,i)}function u(){var e="ru_RU";return e}function p(){s.global.isVoiceHelper=!s.global.isVoiceHelper,s.global.isVoiceHelper&&(s.global.voiceHelperLanguage=u(),playTTS(i("translate")("construction.VOICE_SWITCH_ON"),s.global.voiceHelperLanguage))}function _(){s.global.isNavMenu=!1,s.global.isConfigMenu=!0,o.setPreviosPage(),e.path("/history")}function E(){o.stopStartProg(),d.product.is_addelem_only?n.createNewProduct():(d.product=d.setDefaultProduct(),n.closeRoomSelectorDialog(),n.setDefaultAuxParam(),d.product.is_addelem_only=1,s.global.isNavMenu=0,s.global.isConfigMenu=1,s.global.activePanel=6)}function m(){s.global.startProgramm?(o.stopStartProg(),n.prepareMainPage()):(s.global.isLoader=1,s.global.isCreatedNewProject&&s.global.isCreatedNewProduct?n.inputProductInOrder()&&(a.calculateOrderPrice(),n.saveOrderInDB({},0,"")):s.global.isCreatedNewProject&&!s.global.isCreatedNewProduct&&n.saveOrderInDB({},0,""),o.setPreviosPage(),n.createNewProject())}var g=this;return g.publicObj={getCurrentGeolocation:c,setLanguageVoiceHelper:u,switchVoiceHelper:p,gotoHistoryPage:_,createAddElementsProduct:E,clickNewProject:m},g.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("optionsServ",["$filter",function(e){return{getTemplateImgIcons:function(t){t(new OkResult({templateImgs:[{id:1,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/1.png"},{id:2,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/3.png"},{id:3,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/4.png"},{id:4,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/5.png"},{id:5,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/6.png"},{id:6,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/7.png"},{id:7,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/8.png"},{id:8,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/9.png"},{id:9,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/10.png"},{id:10,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/11.png"},{id:11,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/12.png"}]}))},getTemplatesWindow:function(e){e(new OkResult({windows:[{name:"Глухое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,
blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Одностворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:530,y:0,dir:"line"},{type:"impost",id:"ip3",x:530,y:1320,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1050,y:0,dir:"line"},{type:"impost",id:"ip3",x:1050,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:0,dir:"line"},{type:"impost",id:"ip3",x:700,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:300,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_10","block_11"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_10",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_11",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesWindowDoor:function(e){e(new OkResult({windowDoor:[{name:"Выход на балкон",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1","block_2"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp5",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp6",x:2e3,y:0,dir:"line",view:1},{type:"frame",id:"fp7",x:2e3,y:2100,dir:"line",view:1},{type:"frame",id:"fp8",x:1300,y:2100,dir:"line",view:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:"",openDir:[1,4],handlePos:4,sashType:2}]}]}))},getTemplatesBalcony:function(e){e(new OkResult({balconies:[{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],pointsLight:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostLight:[],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesDoor:function(e){e(new OkResult({doors:[{name:"Одностворчатая",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:700,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:700,y:2100,dir:"line",view:1},{type:"frame",id:"fp4",x:0,y:2100,dir:"line",view:1}],pointsIn:[],pointsLight:[],parts:[],glassId:0,glassTxt:"",openDir:[4],handlePos:4,sashType:2}]}]}))},getInstalment:function(e){e(new OkResult({instalment:[{id:1,name:1,value:15},{id:2,name:2,value:20},{id:3,name:3,value:25},{id:4,name:4,value:30},{id:5,name:5,value:35}]}))}}}])}(),function(){angular.module("BauVoiceApp").factory("PointsServ",["DesignStor","ProductStor",function(e,t){function i(e){if(e&&!$.isEmptyObject(e)){for(var i=e.details.length,r="",o="",n="",a="",s="",l="";--i>0;)if(1===e.details[i].level)for(var d=e.details[i].pointsOut.length;--d>-1;)0!==e.details[i].pointsOut[d].view&&(o+=e.details[i].pointsOut[d].x,o+=d?" "+e.details[i].pointsOut[d].y+",":" "+e.details[i].pointsOut[d].y),("fp1"===e.details[i].pointsOut[d].id||"fp3"===e.details[i].pointsOut[d].id)&&(n+=e.details[i].pointsOut[d].x,n+=d?" "+e.details[i].pointsOut[d].y+",":" "+e.details[i].pointsOut[d].y),("fp2"===e.details[i].pointsOut[d].id||"fp4"===e.details[i].pointsOut[d].id)&&(a+=e.details[i].pointsOut[d].x,a+=d?" "+e.details[i].pointsOut[d].y+",":" "+e.details[i].pointsOut[d].y),e.details[i].pointsOut[d]&&(r+=e.details[i].pointsOut[d].x,r+=d?" "+e.details[i].pointsOut[d].y+",":" "+e.details[i].pointsOut[d].y),"fp3"===e.details[i].pointsOut[d].id&&(s+=d?" "+e.details[i].pointsOut[d].y+",":" "+e.details[i].pointsOut[d].y),"fp3"===e.details[i].pointsOut[d].id&&(l+=e.details[i].pointsOut[d].x);var c=l,u=s;1>c?(c=t.product.template_width,u=t.product.template_height):(c=l,u=s)}return{path:r,noVvPath:o,fpDgLR:n,fpDgRL:a,heightWmd:s,widthWmd:l,widthT:c,heightT:u}}var r=this;return r.publicObj={templatePoints:i},r.publicObj}])}(),function(){angular.module("SettingsModule").factory("SettingServ",["$rootScope","$location","localDB","GlobalStor","UserStor",function(e,t,i,r,o){function n(e,t){o.userInfo.avatar=e,i.sendIMGServer(t),i.updateLocalDB(i.tablesLocalDB.users.tableName,{avatar:e},{id:o.userInfo.id})}function a(){t.path("/"+r.global.currOpenPage)}function s(){t.path("/location")}function l(){t.path("/change-pass")}function d(){t.path("/change-lang")}function c(){t.path("/settings")}function u(){console.log("prevOpenPage +++",r.global.prevOpenPage),t.path(r.global.prevOpenPage)}var p=this;return p.publicObj={changeAvatar:n,closeLocationPage:a,gotoLocationPage:s,gotoPasswordPage:l,gotoLanguagePage:d,gotoSettingsPage:c,closeSettingsPage:u},p.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("SoundPlayServ",function(){function e(){var e=document.getElementById("sounds");e.play()}var t=this;return t.soundsIntervals={menu:{start:7.93,end:11.7},swip:{start:8,end:9},price:{from:21.5,to:23.2},fly:{start:.57,end:1.59},switching:{start:1.81,end:2.88}},t.publicObj={playSound:e},t.publicObj})}(),function(){angular.module("MainModule").factory("SVGServ",["$q","globalConstants","GeneralServ","GlobalStor","ProductStor","DesignStor","PointsServ",function(e,t,i,r,o,n,a){function s(e,t){var r=e.coefA*t.coefB-t.coefA*e.coefB,o=e.coefB*t.coefC-t.coefB*e.coefC,n=t.coefA*e.coefC-e.coefA*t.coefC,a={x:i.roundingValue(i.roundingValue(o/r,3)),y:i.roundingValue(i.roundingValue(n/r,3))};return a.x===-0?a.x=0:a.y===-0&&(a.y=0),a}function l(e,t,r){var o={x:i.roundingValue((e.x-t.x)/(r.x-t.x)),y:i.roundingValue((e.y-t.y)/(r.y-t.y))};return o.x===-(1/0)?o.x=1/0:o.y===-(1/0)&&(o.y=1/0),o.x===-0?o.x=0:o.y===-0&&(o.y=0),o}function d(e){var t=0;return e.x===1/0||e.y===1/0?t=0:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)&&(t=1),t}function c(e,t){var i={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return i}function u(e,t){for(var i,r,o,n=t.length;--n>-1;){for(i=t.length,r=0,o=0;i>o;o+=1)switch(e){case 1:t[o].x===t[n].x&&(r+=1);break;case 2:t[o].y===t[n].y&&(r+=1);break;case 3:t[o].x===t[n].x&&t[o].y===t[n].y&&(r+=1)}r>1&&t.splice(n,1)}}function p(e){for(var t,i=[],r=e.length;--r>0;)if(t=e[r].pointsOut.length)for(;--t>-1;)i.push(angular.copy(e[r].pointsOut[t]));return u(3,i),i}function _(e,t){for(var i,r=t.length;--r>-1;)for(i=t.length;--i>-1;)if(r!==i&&t[r]&&t[i])switch(e){case 1:t[r].x===t[i].x&&("impost"!==t[i].type&&"shtulp"!==t[i].type||"frame"!==t[r].type&&"corner"!==t[r].type?delete t[r]:delete t[i]);break;case 2:t[r].y===t[i].y&&("impost"!==t[i].type&&"shtulp"!==t[i].type||"frame"!==t[r].type&&"corner"!==t[r].type?delete t[r]:delete t[i])}return t.filter(function(e){return e?1:0})}function E(e,t){return e.x-t.x}function m(e,t){return e.y-t.y}function g(e,t,i){return(i.x-t.x)*(i.y-e.y)-(i.y-t.y)*(i.x-e.x)}function f(e,t){var i=1,r=t.length;if(r)for(;--r>-1;)t[r].x===e.x&&t[r].y===e.y&&(i=0);return i}function T(e,t){var i=0,r=t.length;if(r)for(;--r>-1;)t[r].id.slice(0,3)===e.slice(0,3)&&t[r].id.slice(0,3).indexOf("q")+1&&(i=1);return i}function h(e,t,r){var o={x:i.roundingValue((1-e)*t.x+e*r.x),y:i.roundingValue((1-e)*t.y+e*r.y)};return o}function I(e,t,r){var o=c(t.from,t.to),n={};if(t.coefA&&t.coefB)switch(e){case 1:n.y=o.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),n.x=o.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)));break;case 2:n.y=o.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),n.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)))+o.x;break;case 3:n.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.y,n.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)))+o.x;break;case 4:n.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.y,n.x=o.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)))}else n.x=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+o.x,n.y=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.x-o.x,2)))+o.y;return n.y=i.roundingValue(n.y,1),n.x=i.roundingValue(n.x,1),n}function A(e,t,r,o){return i.roundingValue(o*o*(e-2*t+r)-2*o*(e-t)+e)}function S(e){var t=e.length,i={x:e.reduce(function(e,t){return"curv"===t.dir?e+t.xQ:e+t.x},0)/t,y:e.reduce(function(e,t){return"curv"===t.dir?e+t.yQ:e+t.y},0)/t};return i}function N(e,t){var i;return i="curv"===t.dir?Math.atan2(e.y-t.yQ,t.xQ-e.x)*(180/Math.PI):Math.atan2(e.y-t.y,t.x-e.x)*(180/Math.PI),0>i&&(i+=360),i}function L(e,t){var i,r=e.length;for(i=0;r>i;i+=1)e[i].fi=N(t,e[i]);return e.sort(function(e,t){return t.fi-e.fi}),e}function O(e){e.coefA=e.from.y-e.to.y,e.coefB=e.to.x-e.from.x,e.coefC=e.from.x*e.to.y-e.to.x*e.from.y}function y(e,t){var i="";return i=e.indexOf("ip")+1&&t.indexOf("ip")+1?"impost":e.indexOf("sht")+1&&t.indexOf("sht")+1&&e===t?"shtulp":"frame"}function C(e){var t,r,o,n,a=[],s=e.length;for(o=0;s>o;o+=1)("frame"!==e[o].type||e[o].view)&&(t={},t.from=angular.copy(e[o]),t.dir=e[o].dir,o===s-1?(r=0,"frame"!==e[r].type||e[r].view||(r=1)):(r=o+1,"frame"!==e[r].type||e[r].view||(r=r===s-1?0:o+2)),t.to=angular.copy(e[r]),t.type=y(e[o].id,e[r].id),"line"===t.dir&&(t.dir="curv"===e[r].dir?"curv":"line"),t.size=i.roundingValue(Math.hypot(t.to.x-t.from.x,t.to.y-t.from.y)),O(t),a.push(t));return n=a.pop(),a.unshift(n),a}function R(e,t,i){var r=0,o=20;switch(i){case"frame":"frame"===t.type?r=e.frameDepth.c:"impost"===t.type?r=e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.b/2);break;case"frame-bead":case"sash-bead":r=o;break;case"frame-glass":"frame"===t.type?r=e.frameDepth.d-e.frameDepth.c:"impost"===t.type&&(r=e.impostDepth.b-e.impostDepth.c/2);break;case"sash-out":"frame"===t.type?r=e.frameDepth.b-e.frameDepth.c:"impost"===t.type?r=e.impostDepth.d-e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.a/2-e.shtulpDepth.b/2);break;case"sash-in":r=e.sashDepth.c;break;case"light":"frame"===t.type?r=e.frameDepth.a:"impost"===t.type?r=e.impostDepth.a/2:"shtulp"===t.type&&(r=e.shtulpDepth.b/2);break;case"sash-light":r=e.sashDepth.b+e.sashDepth.a;break;case"hardware":r=e.sashDepth.b;break;case"sash-glass":r=e.sashDepth.d-e.sashDepth.c}var n=t.coefC-r*Math.hypot(t.coefA,t.coefB);return n}function D(e){var t=e.from.x,i=e.from.y,r=e.to.x,o=e.to.y;return Math.round((o-i)/(r-t))}function b(e,t){var i=D(e),r=D(t);return i===r?1:0}function v(e,t){var i={},r={},o=b(e,t);if(o){var n=e.to.x,a=e.to.y,l={coefA:e.coefB,coefB:-e.coefA,coefC:e.coefA*a-e.coefB*n};r=s(e,l)}else r=s(e,t);return i.x=r.x,i.y=r.y,"impost"===e.type||"impost"===t.type?i.type="impost":"shtulp"===e.type||"shtulp"===t.type?i.type="shtulp":i.type="frame","curv"===e.to.dir?(i.dir="curv",i.xQ=e.to.xQ,i.yQ=e.to.yQ):i.dir="line",i.id=e.to.id,i.view=1,i}function P(e,t,i){var r,o,n,a,s,l=[],d=e.length;for(r=0;d>r;r+=1)o=angular.copy(e[r]),n={},a={},o.coefC=R(t,o,i),s=r===d-1?0:r+1,n=angular.copy(e[s]),n.coefC=R(t,n,i),a=v(o,n),l.push(a);return l}function M(e,t){return Math.round(t/2+e*e/(8*t))}function x(e,r,o,n){e.startX=A(r.x,o.x,n.x,.5),e.startY=A(r.y,o.y,n.y,.5),e.lengthChord=i.roundingValue(Math.hypot(n.x-r.x,n.y-r.y)),e.radius=M(e.lengthChord,e.heightQ),e.radiusMax=M(e.lengthChord,e.lengthChord/4),e.radiusMin=M(e.lengthChord,t.minRadiusHeight)}function G(e){var t,i=e.pointsQ.length;if(i)for(t=0;i>t;t+=1){var r,o=e.pointsOut.length,n=0,a=0;for(r=0;o>r;r+=1)e.pointsQ[t].fromPId===e.pointsOut[r].id&&(n=e.pointsOut[r]),e.pointsQ[t].toPId===e.pointsOut[r].id&&(a=e.pointsOut[r]);if(n&&a){var s,l={from:n,to:a},d=c(n,a),u={type:e.pointsQ[t].type,id:e.pointsQ[t].id,dir:"curv",xQ:d.x,yQ:d.y};O(l),s=I(e.pointsQ[t].positionQ,l,2*e.pointsQ[t].heightQ),u.x=s.x,u.y=s.y,l.coefA||1!==e.pointsQ[t].positionQ?l.coefB||4!==e.pointsQ[t].positionQ||(u.x-=4*e.pointsQ[t].heightQ):u.y-=4*e.pointsQ[t].heightQ,e.pointsOut.push(angular.copy(u)),e.pointsQ[t].midleX=u.xQ,e.pointsQ[t].midleY=u.yQ,x(e.pointsQ[t],n,u,a)}}}function w(e){var t=0;return e.x===1/0&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&e.y===1/0?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)?t=1:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&$.isNumeric(e.y)?(e.y<-2||e.y>2)&&(t=1):$.isNumeric(e.x)&&e.y>=0&&e.y<=1&&(e.x<-2||e.x>2)&&(t=1),t}function U(e,t){var i=c(t.from,t.to);if(e)return i;var r={coefA:t.coefB,coefB:-t.coefA,coefC:t.coefA*i.y-t.coefB*i.x};return s(t,r)}function k(e,t,i,r,o){var n,a,s,l,d;i[e].from.id.indexOf("q")+1?(s=e-1,i[s]||(s=t-1),l=i[s].from,d=i[e].to,n=angular.copy(i[e].from)):i[e].to.id.indexOf("q")+1&&(s=e+1,i[s]||(s=0),l=i[e].from,d=i[s].to,n=angular.copy(i[e].to)),a=angular.copy(n);var u=h(r.t,l,n),p=h(r.t,a,d),_=c(l,r),E=c(r,d);n.x=u.x,n.y=u.y,n.xQ=_.x,n.yQ=_.y,a.x=p.x,a.y=p.y,a.xQ=E.x,a.yQ=E.y;for(var m=o.length;--m>-1;)o[m].id===n.id&&o.splice(m,1);var g=f(n,o);g&&o.push(n);var T=f(a,o);T&&o.push(a)}function H(e,t,i){var r,o=[];if(t?(r={type:"impost",id:i.impostAxis[2].id,dir:"curv"},o.push(i.impostOut[0],i.impostOut[1])):(r=angular.copy(i.impostOut[2]),o=i.impostIn.filter(function(t){return t.group===e&&"line"===t.dir?1:0})),2===o.length){var n,a={from:angular.copy(o[0]),to:angular.copy(o[1])},s=c(a.from,a.to);if(O(a),n=I(i.impostAxis[2].positionQ,a,2*i.impostAxis[2].heightQ),r.x=n.x,r.y=n.y,r.xQ=s.x,r.yQ=s.y,r.group=e,a.coefA||1!==i.impostAxis[2].positionQ?a.coefB||4!==i.impostAxis[2].positionQ||(r.x-=4*i.impostAxis[2].heightQ):r.y-=4*i.impostAxis[2].heightQ,t)return i.impostOut.push(r),r;i.impostIn.push(r)}}function V(e,t,i,r){var o,n,a,s=t.length;for(o=0;s>o;o+=1)a=g(e[0],e[1],t[o]),a>0?(n=0,r.length&&(n=T(t[o].id,r)),n||r.push(angular.copy(t[o]))):0>a&&(n=0,i.length&&(n=T(t[o].id,i)),n||i.push(angular.copy(t[o])))}function B(e,t,i){var r,o=e.length;for(r=0;o>r;r+=1)e[r].group?i.push(angular.copy(e[r])):t.push(angular.copy(e[r]))}function F(e,t,r,o,n){var a,s,l,d,c,u=[],p={x:o.y-n.y,y:n.x-o.x},_={x:e.x-2*t.x+r.x,y:e.y-2*t.y+r.y},E={x:2*(t.x-e.x),y:2*(t.y-e.y)},m={x:e.x,y:e.y},g=o.x*n.y-n.x*o.y,f=[];if(a=Math.abs(p.x)===Math.abs(p.y)?Math.abs(p.x*_.x)+Math.abs(p.y*_.y):Math.abs(p.x)?Math.abs(p.y)?p.x*_.x+p.y*_.y:p.x*_.x+_.y:_.x+p.y*_.y,s=(p.x*E.x+p.y*E.y)/a,l=(p.x*m.x+p.y*m.y+g)/a,d=s*s-4*l,d>0){var T=Math.sqrt(d);f.push(i.roundingValue((-s+T)/2),i.roundingValue((-s-T)/2))}else 0===d&&f.push(i.roundingValue(-s/2));for(c=0;c<f.length;c+=1){var h=f[c];if(h>0&&1>h){var I={t:h,x:A(e.x,t.x,r.x,h),y:A(e.y,t.y,r.y,h)},S=Math.min(o.x,n.x,e.x,t.x,r.x),N=Math.min(o.y,n.y,e.y,t.y,r.y),L=Math.max(o.x,n.x,e.x,t.x,r.x),O=Math.max(o.y,n.y,e.y,t.y,r.y);o.x===n.x&&I.y>=N&&I.y<=O?u.push(I):o.y===n.y&&I.x>=S&&I.x<=L?u.push(I):I.x>=S&&I.y>=N&&I.x<=L&&I.y<=O&&u.push(I)}}return u}function W(e,t,i,r,o){var n,a,s,l,d,c;return i[e].from.id.indexOf("q")+1?(c=e-1,i[c]||(c=t-1),n=i[c].from,a=i[e].from,s=i[e].to):i[e].to.id.indexOf("q")+1&&(c=e+1,i[c]||(c=0),n=i[e].from,a=i[e].to,s=i[c].to),l=r,d=o,F(n,a,s,l,d)}function Y(e,t,i,r,o,n,a,d,c){var u=s(o[i],n),p=l(u,o[i].to,o[i].from),_=w(p);if(_){var E=angular.copy(a);if(E.group=e,E.x=u.x,E.y=u.y,"curv"===o[i].dir){var m=U(t,n),g=W(i,r,o,m,u);g.length&&(E.x=g[0].x,E.y=g[0].y,E.t=g[0].t)}var T=f(E,d);T&&("curv"===o[i].dir&&t&&k(i,r,o,E,c),d.push(angular.copy(E)))}}function z(e,t,i){if(e.children.length){var r,o,n,a,s,l,d,c,u,p,_,E,m,g,f=t.length,T=e.impost.impostAxis.length,h=angular.copy(e.impost.impostAxis[0]),I=angular.copy(e.impost.impostAxis[1]),A=angular.copy(e.pointsOut);for("sash"===e.blockType?(r=angular.copy(e.sashPointsIn),o=e.sashLinesIn,n=angular.copy(e.sashPointsLight),a=angular.copy(e.sashLinesLight)):(r=angular.copy(e.pointsIn),o=e.linesIn,n=angular.copy(e.pointsLight),a=angular.copy(e.linesLight)),g=o.length,m=1;f>m;m+=1)t[m].id===e.children[0]?s=m:t[m].id===e.children[1]&&(l=m);for(d={type:"impost"===h.type?"impost":"shtulp",from:h,to:I},c={type:"impost"===h.type?"impost":"shtulp",from:I,to:h},O(d),O(c),u=angular.copy(d),p=angular.copy(c),u.coefC=R(i,u,"frame"),p.coefC=R(i,p,"frame"),_=angular.copy(d),E=angular.copy(c),_.coefC=R(i,_,"light"),E.coefC=R(i,E,"light"),m=0;g>m;m+=1)Y(0,0,m,g,o,u,h,e.impost.impostIn),Y(1,0,m,g,o,p,I,e.impost.impostIn),Y(0,1,m,g,o,d,h,e.impost.impostOut,r),Y(0,0,m,g,a,_,h,e.impost.impostLight),Y(1,0,m,g,a,E,I,e.impost.impostLight);if(3===T){var S,L=e.impost.impostOut.length;for(m=0;L>m;m+=1)e.impost.impostOut[m].fi=N(e.center,e.impost.impostOut[m]),e.impost.impostAxis[m].fi=N(e.center,e.impost.impostAxis[m]);e.impost.impostOut[0].fi!==e.impost.impostAxis[0].fi&&e.impost.impostOut.reverse(),S=H(0,1,e.impost),H(0,0,e.impost),H(1,0,e.impost),t[s].pointsOut.push(angular.copy(S)),t[l].pointsOut.push(angular.copy(S)),e.impost.impostAxis[2].midleX=S.xQ,e.impost.impostAxis[2].midleY=S.yQ,x(e.impost.impostAxis[2],e.impost.impostOut[0],S,e.impost.impostOut[1])}var y=angular.copy(e.impost.impostAxis);V(y,A,t[s].pointsOut,t[l].pointsOut),V(y,r,t[s].pointsIn,t[l].pointsIn),B(e.impost.impostIn,t[s].pointsIn,t[l].pointsIn),V(y,n,t[s].pointsLight,t[l].pointsLight),B(e.impost.impostLight,t[s].pointsLight,t[l].pointsLight);var C,D=e.linesOut.length;for(e.impost.impostAxis[2]&&(C=angular.copy(e.impost.impostAxis[2])),e.impost.impostAxis.length=0,m=0;D>m;m+=1)Y(0,0,m,D,e.linesOut,d,h,e.impost.impostAxis);for(C&&e.impost.impostAxis.push(C),m=0;2>m;m+=1)t[s].pointsOut.push(angular.copy(e.impost.impostAxis[m])),t[l].pointsOut.push(angular.copy(e.impost.impostAxis[m]))}}function K(e,t,i,r,o){e.points.push(t,i,r,o),("corner"===t.type||"corner"===i.type)&&(e.type="corner"),t.sill&&i.sill&&(e.sill=1)}function X(e){var t="M "+e[0].x+","+e[0].y,i=1,r=e.length;if(4===r)for(;r>i;i+=1)t+=" L "+e[i].x+","+e[i].y,i===r-1&&(t+=" Z");else if(6===r)for(;r>i;i+=1)3===i?t+=" L "+e[i].x+","+e[i].y:(t+=" Q "+e[i].x+","+e[i].y+" "+e[i+1].x+","+e[i+1].y,i+=1),i===r-1&&(t+=" Z");return t}function q(e){var t=e.length,r=0;if(2===t||4===t)r=i.roundingValue(Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y),1);else if(3===t||6===t)for(var o=.01,n=0;1>=n;){var a=2*((1-n)*(e[1].x-e[0].x)+n*(e[2].x-e[1].x)),s=2*((1-n)*(e[1].y-e[0].y)+n*(e[2].y-e[1].y));r+=Math.hypot(a,s)*o,n+=o}return r}function Q(e,t,r,a){var s,l,d,c=e.filter(function(e){return"frame"!==e.type||e.view?!0:!1}),u=[],p=c.length,_={glassId:a,sizes:[]};for(d=0;p>d;d+=1)if(0!==d||"curv"!==c[d].dir){var E={type:c[d].type,dir:"line",points:[]};if(d===p-1){if("curv"===c[d].dir)break;"curv"===c[0].dir?(E.type="arc",E.points.push(c[d],c[0],c[1],t[1],t[0],t[d]),("corner"===c[d].type||"corner"===c[1].type)&&(E.type="arc-corner"),E.dir="curv"):4!==o.product.construction_type||1!==n.design.doorConfig.doorShapeIndex&&2!==n.design.doorConfig.doorShapeIndex?4===o.product.construction_type&&3===n.design.doorConfig.doorShapeIndex&&"frame"===c[0].type&&"fp3"===c[0].id?(s=angular.copy(c[0]),s.y=1*t[0].y,K(E,c[d],s,t[0],t[d])):K(E,c[d],c[0],t[0],t[d]):"frame"===c[0].type&&"fp3"===c[0].id?(s=angular.copy(t[0]),s.y=1*c[0].y,K(E,c[d],c[0],s,t[d])):K(E,c[d],c[0],t[0],t[d])}else if("curv"===c[d].dir||"curv"===c[d+1].dir)E.type="arc",E.points.push(c[d],c[d+1]),c[d+2]?(E.points.push(c[d+2],t[d+2]),("corner"===c[d].type||"corner"===c[d+2].type)&&(E.type="arc-corner")):(E.points.push(c[0],t[0]),("corner"===c[d].type||"corner"===c[0].type)&&(E.type="arc-corner")),E.points.push(t[d+1],t[d]),E.dir="curv",d+=1;else if(4!==o.product.construction_type||1!==n.design.doorConfig.doorShapeIndex&&2!==n.design.doorConfig.doorShapeIndex)4===o.product.construction_type&&3===n.design.doorConfig.doorShapeIndex?("frame"===c[d].type&&"fp3"===c[d].id&&(s=angular.copy(t[d]),s.x=1*c[d].x,l=angular.copy(t[d+1]),l.x=1*c[d+1].x,K(E,c[d],c[d+1],l,s),E.doorstep=1),"frame"===c[d].type&&"fp4"===c[d].id?(s=angular.copy(c[d]),
s.y=1*t[d].y,K(E,s,c[d+1],t[d+1],t[d])):("frame"===c[d].type&&"fp3"!==c[d].id||"frame"!==c[d].type)&&K(E,c[d],c[d+1],t[d+1],t[d])):K(E,c[d],c[d+1],t[d+1],t[d]);else{if(1===n.design.doorConfig.doorShapeIndex&&"frame"===c[d].type&&"fp3"===c[d].id)continue;2===n.design.doorConfig.doorShapeIndex&&"frame"===c[d].type&&"fp3"===c[d].id&&(s=angular.copy(c[d]),s.x=1*t[d].x,l=angular.copy(c[d+1]),l.x=1*t[d+1].x,K(E,s,l,t[d+1],t[d]),E.doorstep=1),"frame"===c[d].type&&"fp4"===c[d].id?(s=angular.copy(t[d]),s.y=1*c[d].y,K(E,c[d],c[d+1],t[d+1],s)):("frame"===c[d].type&&"fp3"!==c[d].id||"frame"!==c[d].type)&&K(E,c[d],c[d+1],t[d+1],t[d])}E.path=X(E.points),E.size=q(E.points);var m=i.roundingValue(angular.copy(E.size)/1e3,3);"bead"===c[d].type?(E.type="bead",_.sizes.push(m)):"sash"===c[d].type?(E.type="sash",r.sashsSize.push(m)):"frame"===E.type&&(E.sill?r.frameSillSize.push(m):r.framesSize.push(m)),u.push(E)}return _.sizes.length&&r.beadsSize.push(_),u}function j(e){var t,i=0,r=e.length;for(t=0;r>t;t+=1)i+=e[t+1]?e[t].x*e[t+1].y-e[t].y*e[t+1].x:e[t].x*e[0].y-e[t].y*e[0].x;return i/=2e6}function Z(e){var t,r=e.length,o=[];for(t=0;r>t;t+=1){var n,a=0;if(0!==t||"curve"!==e[t].dir){if(n=e[t+1]?t+1:0,"curve"===e[n].dir){var s,l=.01,d=0;for(s=e[t+2]?t+2:1;1>=d;){var c=2*((1-d)*(e[n].x-e[t].x)+d*(e[s].x-e[n].x)),u=2*((1-d)*(e[n].y-e[t].y)+d*(e[s].y-e[n].y));a+=Math.hypot(c,u)*l,d+=l}t+=1}else a=i.roundingValue(Math.hypot(e[n].x-e[t].x,e[n].y-e[t].y),1);o.push(a)}}return o}function J(e,t,r){var o,n={type:"glass",points:e,path:"M ",square:0},a={elemId:r},s=e.length;for(o=0;s>o;o+=1)0===o&&("curv"===e[o].dir?n.path+=e[s-1].x+","+e[s-1].y:n.path+=e[o].x+","+e[o].y),"curv"===e[o].dir?(n.path+=" Q "+e[o].x+","+e[o].y+",",e[o+1]?n.path+=e[o+1].x+","+e[o+1].y:n.path+=e[0].x+","+e[0].y+" Z",o+=1):(n.path+=" L "+e[o].x+","+e[o].y,o===s-1&&(n.path+=" Z"));return n.square=j(e),n.sizes=Z(e),a.square=angular.copy(n.square),a.sizes=angular.copy(n.sizes).map(function(e){return i.roundingValue(e/1e3,3)}),t.glassSquares.push(a),n}function ee(e,t,i){return 0===i?"arc"!==e[t].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0:i===t?"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[0].type?1:0:"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0}function te(e){var t,i=e.length;for(t=1;i>t;t+=1)if(1===e[t].level){var r,o=e[t].pointsOut.length;if("single"===e[t].position)for(r=0;o>r;r+=1)e[t].pointsOut[r].corner=ee(e[t].pointsOut,o-1,r);else if("first"===e[t].position)for(r=0;o>r;r+=1)e[t].pointsOut[r].fi>90&&e[t].pointsOut[r].fi<270&&(e[t].pointsOut[r].corner=ee(e[t].pointsOut,o-1,r));else if("last"===e[t].position)for(r=0;o>r;r+=1)(e[t].pointsOut[r].fi<90||e[t].pointsOut[r].fi>270)&&(e[t].pointsOut[r].corner=ee(e[t].pointsOut,o-1,r))}}function ie(e,t){for(var i=angular.copy(e),r=i.length;--r>-1;)i[r].type=t;return i}function re(e){var t,i=[],r=e.length;for(t=0;r>t;t+=1)if("curv"===e[t].dir){var o,n,a=.5,s={},l=t;0===t?(o=r-1,n=t+1):t===r-1?(o=t-1,n=0):(o=t-1,n=t+1),s.x=A(e[o].to.x,e[l].to.x,e[n].to.x,a),s.y=A(e[o].to.y,e[l].to.y,e[n].to.y,a),i.push(s)}else i.push(e[t].to);return i}function oe(e,t){var i=Math.tan(t*Math.PI/180),r={center:e,coefA:i,coefB:-1,coefC:e.y-i*e.x};return r}function ne(e,t,i){var r,o,n,a,d,c=i.length,u=[];for(r=0;c>r;r+=1)if(o=s(t,i[r]),o.x>=0&&o.y>=0&&(n=l(o,i[r].to,i[r].from),a=w(n))){if("curv"===i[r].dir&&(d=W(r,c,i,t.center,o),d.length&&(o.x=d[0].x,o.y=d[0].y)),o.fi=N(t.center,o),e)switch(e){case 1:o.id=o.fi>180?"head":"tail";break;case 2:o.id=o.fi>90&&o.fi<270?"head":"tail";break;case 3:o.id=o.fi<180?"head":"tail";break;case 4:o.id=o.fi>270||o.fi<90?"head":"tail"}u.push(o)}return u}function ae(e,t,i,r){var o=oe(t,i),n=ne(e,o,r);return n}function se(e,t){var i,r,o,n,a,s,l,d,c,u,p,_,E=[],m=re(t),g=S(m),f=e.length;for(i=0;f>i;i+=1){switch(r={type:"sash-dir",points:[]},e[i]){case 1:s=ae(3,g,90,t);break;case 2:s=ae(4,g,180,t);break;case 3:s=ae(1,g,270,t);break;case 4:s=ae(2,g,180,t)}for(l=s.length;--l>-1;)if("head"===s[l].id)u=s[l];else if("tail"===s[l].id)for(o=angular.copy(m),o.push(s[l]),o=L(o,g),n=o.length,a=0;n>a;a+=1)"tail"===o[a].id&&(d=a-1,c=a+1,0>d&&(d=n-1),c>=n&&(c=0),p=o[c],_=o[d]);r.points.push(p,u,_),E.push(r)}return E}function le(e,t,i,r){for(var o={sizes:[],openDir:t,type:e},n=i.length;--n>-1;)o.sizes.push(i[n].size);r.sashesBlock.push(o)}function de(e){var t,i,r,o,n,a=[],s=[],l=[],d=e.length;for(r=0;d>r;r+=1)e[r].id.indexOf("qi")+1&&(e[r].group?i=e[r]:t=e[r]);for(r=0;d>r;r+=1)if(!(e[r].id.indexOf("qi")+1)){var c=g(t,i,e[r]);c>0?s.push(e[r]):l.push(e[r])}for(o=0;o<s.length;o+=1)s[o].group?a.unshift(s[o]):a.push(s[o]);for(a.unshift(i),a.push(t),n=0;n<l.length;n+=1)l[n].group?a.unshift(l[n]):a.push(l[n]);return a}function ce(e,t){var i,r=[];if(4===e)for(;--e>-1;)t[e].group&&r.push(t[e]);else if(6===e){for(i=0;e>i;i+=1)t[i].group&&(t[i].id.indexOf("ip")+1||t[i].id.indexOf("sht")+1)&&r.push(t[i]);for(i=0;e>i;i+=1)t[i].group&&t[i].id.indexOf("qi")+1&&r.splice(1,0,t[i])}return r}function ue(e,t){var r=e[0].type,o=e.length,n={type:r,dir:"line"};if(4===o){var a=S(e);n.points=L(e,a)}else 6===o&&(n.dir="curv",n.points=de(e));n.path=X(n.points);var s=ce(o,n.points);n.size=q(s);var l=i.roundingValue(angular.copy(n.size)/1e3,3);return"impost"===r?t.impostsSize.push(l):"shtulp"===r&&t.shtulpsSize.push(l),n}function pe(e,r,o,n,a,s){for(var l=o.length;--l>-1;){var d,c,u={blockId:r,level:e,dimId:o[l].id,minLimit:t.minRadiusHeight};for(d=1;s>d;d+=1)if(1===a[d].level&&a[d].pointsQ){var p=a[d].pointsQ.length;if(p)for(c=0;p>c;c+=1)if(a[d].pointsQ[c].id===u.dimId){switch(a[d].pointsQ[c].positionQ){case 1:u.axis="y",u.from=angular.copy(a[d].pointsQ[c].startY),u.to=angular.copy(a[d].pointsQ[c].midleY);break;case 2:u.axis="x",u.from=angular.copy(a[d].pointsQ[c].midleX),u.to=angular.copy(a[d].pointsQ[c].startX);break;case 3:u.axis="y",u.from=angular.copy(a[d].pointsQ[c].midleY),u.to=angular.copy(a[d].pointsQ[c].startY);break;case 4:u.axis="x",u.from=angular.copy(a[d].pointsQ[c].startX),u.to=angular.copy(a[d].pointsQ[c].midleX)}u.text=i.roundingValue(angular.copy(a[d].pointsQ[c].heightQ),1),u.maxLimit=a[d].pointsQ[c].lengthChord/4}}"x"===u.axis?n.dimX.push(u):n.dimY.push(u)}}function _e(e,t){for(var i=t.dimX.length,r=t.dimY.length;--i>-1;)t.dimX[i].level&&(e.w+=t.dimX[i].text);for(;--r>-1;)t.dimY[r].level&&(e.h+=t.dimY[r].text)}function Ee(e,t){for(var i=t.length;--i>-1;)t[i].t||"curv"===t[i].dir||t[i].id.indexOf("fp")+1&&!t[i].view||e.push(t[i])}function me(e){var t=e.filter(function(e){return 1===e.level}),i=t.length,r=e.filter(function(e){var r,o=0;for(r=0;i>r;r+=1)e.level||e.from!==t[r].from||e.to!==t[r].to||(o+=1);return o?void 0:1});return r}function ge(e,r,o){var n,a={},s=r.length;for(n=0;s>n;n+=1)"x"===e.axis?r[n].x===e.to&&(a.minL=r[n-1]?i.roundingValue(r[n-1].x+t.minSizeLimit,1):t.minSizeLimit,a.maxL=r[n+1]?i.roundingValue(r[n+1].x-e.from-t.minSizeLimit,1):o):r[n].y===e.to&&(a.minL=r[n-1]?i.roundingValue(r[n-1].y+t.minSizeLimit,1):t.minSizeLimit,a.maxL=r[n+1]?i.roundingValue(r[n+1].y-e.from-t.minSizeLimit,1):o);return a}function fe(e,t,i){var r,o=[],n=i.length;if("x"===e){for(r=0;n>r;r+=1)(t.y===i[r].y||i[r].id.indexOf("fp")+1)&&o.push(i[r]);u(1,o),o.sort(E)}else{for(r=0;n>r;r+=1)(t.x===i[r].x||i[r].id.indexOf("fp")+1)&&o.push(i[r]);u(2,o),o.sort(m)}return o}function Te(e,r,o,n,a){var s,l={},d=fe(e,r,n),c=d.length;for(s=0;c>s;s+=1){var u,p=0;for(u=0;c>u;u+=1)if(d[u].id===r.id){var _=r.x-d[u].x,E=r.y-d[u].y;"x"===e&&_>0?p=1:"y"===e&&E>0&&(p=1)}"x"===e?d[s].x===r.x&&(d[s-1]&&p?r.id===d[s-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.x-d[s-1].x-t.minSizeLimit,1):l.minL=t.minSizeLimit,d[s+1]?l.maxL=i.roundingValue(d[s+1].x-o-t.minSizeLimit,1):d[s-2]&&(l.maxL=i.roundingValue(r.x-d[s-2].x-t.minSizeLimit,1))):d[s].y===r.y&&(d[s-1]&&p?r.id===d[s-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.y-d[s-1].y-t.minSizeLimit,1):l.minL=t.minSizeLimit,d[s+1]?l.maxL=i.roundingValue(d[s+1].y-o-t.minSizeLimit,1):d[s-2]&&(l.maxL=i.roundingValue(r.y-d[s-2].y-t.minSizeLimit,1)))}return l}function he(e,t,r,o,n,a,s,l){var d,c={blockId:s,level:e,axis:t,dimId:n[o].id,from:"x"===t?angular.copy(n[r].x):angular.copy(n[r].y),to:"x"===t?angular.copy(n[o].x):angular.copy(n[o].y)};return c.text=i.roundingValue(Math.abs(c.to-c.from),1),d=e?ge(c,a,l):Te(t,n[o],c.from,a,l),c.minLimit=d.minL,c.maxLimit=d.maxL,c}function Ie(e,t,i,r,o,n,a){var s,l=i.length-1;for(s=0;l>s;s+=1)r.push(he(e,t,s,s+1,i,o,n,a))}function Ae(e){var t,i,o,n,a={dimX:[],dimY:[],dimQ:[]},s=e.length,l=r.global.maxSizeLimit;for(o=p(e),o=o.filter(function(e){return"curv"===e.dir||e.t?0:1}),t=angular.copy(o),i=angular.copy(o),u(1,t),u(2,i),t.sort(E),i.sort(m),n=1;s>n;n+=1){var d=e[n].pointsOut.length;if(1===e[n].level){var c,g,f=[],T=[],h={w:0,h:0};for(g=0;d>g;g+=1)e[n].pointsOut[g].id.indexOf("fp")+1?f.push(e[n].pointsOut[g]):e[n].pointsOut[g].id.indexOf("qa")+1&&T.push(e[n].pointsOut[g]);if(c=angular.copy(f),u(1,f),u(2,c),f.sort(E),c.sort(m),Ie(1,"x",f,a.dimX,t,e[n].id,l),Ie(1,"y",c,a.dimY,i,e[n].id,l),pe(1,e[n].id,T,a,e,s),e[n].pointsQ){var I=e[n].pointsQ.length;if(I)for(;--I>-1;)a.dimQ.push(e[n].pointsQ[I])}_e(h,a),h.square=j(e[n].pointsOut),e[0].overallDim.push(h)}if(!e[n].children.length){var A,S,N=[],L=[],O=1;for(Ee(N,e[n].pointsOut),S=1;s>S;S+=1)e[S].id===e[n].parent&&e[S].impost&&e[S].impost.impostAxis[2]&&a.dimQ.push(e[S].impost.impostAxis[2]);L=angular.copy(o),A=angular.copy(N),N.length>1&&(N=_(1,N),A=_(2,A),N.sort(E),A.sort(m),N[0].id.indexOf("fp")+1&&N[1].id.indexOf("fp")+1?O=0:N.length&&Ie(0,"x",N,a.dimX,L,e[n].id,l),A[0].id.indexOf("fp")+1&&A[1].id.indexOf("fp")+1?O=0:A.length&&Ie(0,"y",A,a.dimY,L,e[n].id,l))}}return a.dimX=angular.copy(me(a.dimX)),a.dimY=angular.copy(me(a.dimY)),a}function Se(t,i){var r,o,n={},a=e.defer();for(n.details=angular.copy(t.details),n.priceElements={framesSize:[],frameSillSize:[],sashsSize:[],impostsSize:[],shtulpsSize:[],glassSquares:[],beadsSize:[],sashesBlock:[]},o=n.details.length,r=0;o>r;r+=1)if(n.details[r].level)1===n.details[r].level&&n.details[r].pointsQ&&G(n.details[r]),n.details[r].center=S(n.details[r].pointsOut),n.details[r].pointsOut=L(n.details[r].pointsOut,n.details[r].center),n.details[r].linesOut=C(n.details[r].pointsOut),1===n.details[r].level?(n.details[r].pointsIn=P(n.details[r].linesOut,i,"frame"),n.details[r].pointsLight=P(n.details[r].linesOut,i,"light")):(n.details[r].center=S(n.details[r].pointsIn),n.details[r].pointsIn=L(n.details[r].pointsIn,n.details[r].center),n.details[r].pointsLight=L(n.details[r].pointsLight,S(n.details[r].pointsLight))),n.details[r].linesIn=C(n.details[r].pointsIn),n.details[r].linesLight=C(n.details[r].pointsLight),1===n.details[r].level&&(te(n.details),$.merge(n.details[r].parts,Q(n.details[r].pointsOut,n.details[r].pointsIn,n.priceElements))),n.details[r].children.length?"sash"===n.details[r].blockType&&(n.details[r].sashPointsOut=ie(P(n.details[r].linesIn,i,"sash-out"),"sash"),n.details[r].sashLinesOut=C(n.details[r].sashPointsOut),n.details[r].sashPointsIn=P(n.details[r].sashLinesOut,i,"sash-in"),n.details[r].sashLinesIn=C(n.details[r].sashPointsIn),n.details[r].sashPointsLight=P(n.details[r].sashLinesOut,i,"sash-light"),n.details[r].sashLinesLight=C(n.details[r].sashPointsLight),n.details[r].hardwarePoints=P(n.details[r].sashLinesOut,i,"hardware"),n.details[r].hardwareLines=C(n.details[r].hardwarePoints),$.merge(n.details[r].parts,Q(n.details[r].sashPointsOut,n.details[r].sashPointsIn,n.priceElements)),n.details[r].sashOpenDir=se(n.details[r].openDir,n.details[r].sashLinesIn),le(n.details[r].sashType,n.details[r].openDir,n.details[r].hardwareLines,n.priceElements)):"frame"===n.details[r].blockType?(n.details[r].beadPointsOut=ie(n.details[r].pointsIn,"bead"),n.details[r].beadLinesOut=C(n.details[r].beadPointsOut),n.details[r].beadPointsIn=P(n.details[r].beadLinesOut,i,"frame-bead"),n.details[r].glassPoints=P(n.details[r].beadLinesOut,i,"frame-glass"),n.details[r].parts.push(J(n.details[r].glassPoints,n.priceElements,n.details[r].glassId)),$.merge(n.details[r].parts,Q(n.details[r].beadPointsOut,n.details[r].beadPointsIn,n.priceElements,n.details[r].glassId))):"sash"===n.details[r].blockType&&(n.details[r].sashPointsOut=ie(P(n.details[r].linesIn,i,"sash-out"),"sash"),n.details[r].sashLinesOut=C(n.details[r].sashPointsOut),n.details[r].sashPointsIn=P(n.details[r].sashLinesOut,i,"sash-in"),n.details[r].sashLinesIn=C(n.details[r].sashPointsIn),n.details[r].hardwarePoints=P(n.details[r].sashLinesOut,i,"hardware"),n.details[r].hardwareLines=C(n.details[r].hardwarePoints),n.details[r].beadPointsOut=ie(n.details[r].sashPointsIn,"bead"),n.details[r].beadLinesOut=C(n.details[r].beadPointsOut),n.details[r].beadPointsIn=P(n.details[r].beadLinesOut,i,"sash-bead"),n.details[r].beadLinesIn=C(n.details[r].beadPointsIn),n.details[r].glassPoints=P(n.details[r].beadLinesOut,i,"sash-glass"),$.merge(n.details[r].parts,Q(n.details[r].sashPointsOut,n.details[r].sashPointsIn,n.priceElements)),n.details[r].parts.push(J(n.details[r].glassPoints,n.priceElements,n.details[r].glassId)),$.merge(n.details[r].parts,Q(n.details[r].beadPointsOut,n.details[r].beadPointsIn,n.priceElements,n.details[r].glassId)),n.details[r].sashOpenDir=se(n.details[r].openDir,n.details[r].beadLinesIn),le(n.details[r].sashType,n.details[r].openDir,n.details[r].hardwareLines,n.priceElements)),z(n.details[r],n.details,i),n.details[r].children.length&&n.details[r].parts.push(ue(n.details[r].impost.impostIn,n.priceElements));else{var s,l=n.details[r].children.length;if(1===l)for(s=0;o>s;s+=1)n.details[r].children[0]===n.details[s].id&&(n.details[s].position="single");else if(l>1)for(s=0;o>s;s+=1)n.details[r].children[0]===n.details[s].id?n.details[s].position="first":n.details[r].children[l-1]===n.details[s].id&&(n.details[s].position="last");n.details[r].overallDim=[]}return n.dimension=Ae(n.details),a.resolve(n),a.promise}function Ne(t,i){var r=e.defer(),o=angular.copy(i),n=2;for(var a in o)for(var s in o[a])o[a][s]*=n;return Se(t,o).then(function(e){r.resolve(e)}),r.promise}function Le(e,t,i,r){var o,n=e.maxX-e.minX+600,a=e.maxY-e.minY,s=d3.scale.linear().domain([0,1]).range([0,r]);return n>a?o=s(t>n?n/t:n>t?t/n:1):a>=n&&(o=s(i>a?a/i:a>i?i/a:1)),o}function Oe(e){var t,i=d3.scale.linear().domain([0,1]).range([0,e]);return t=i(.38)}function ye(e,t,i,r){var o={x:(t-(e.minX+e.maxX)*r)/2,y:(i-(e.minY+e.maxY)*r)/2};return o}function Ce(e,t,i){var r=a.templatePoints(o.product.template),n=t-(e.minY+e.maxY)*i,s={};return(1===o.product.construction_type||3===o.product.construction_type)&&(s.x=250,r.heightT<1648&&(s.y=n-310),1648<r.heightT&&(s.y=n-240),1848<r.heightT&&(s.y=n-190),2148<r.heightT&&(s.y=n-130)),2===o.product.construction_type&&(s.x=220,s.y=n/2+35),4===o.product.construction_type&&(s.x=276,s.y=n-110),s}var Re=this;return Re.publicObj={createSVGTemplate:Se,createSVGTemplateIcon:Ne,collectAllPointsOut:p,setTemplateScale:Le,setTemplateScaleMAIN:Oe,setTemplatePositionMAIN:Ce,setTemplatePosition:ye,centerBlock:S,sortingPoints:L,getAngelPoint:N,setLines:C,setLineCoef:O,getNewCoefC:R,setPointLocationToLine:g,intersectionQ:F,cteateLineByAngel:oe,getIntersectionInCurve:W,getCoordCrossPoint:s,checkLineOwnPoint:l,isInsidePointInLine:w,getCoordSideQPCurve:h,checkEqualPoints:f,setQPointCoord:I,getCenterLine:c,calcSquare:j,checkInsidePointInLineEasy:d,sortByX:E},Re.publicObj}])}(),function(){angular.module("MainModule").factory("TemplatesServ",["$filter","GeneralServ","MainServ","DesignServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,o,n,a,s,l,d){function c(e){s.product.template_id=e,i.saveTemplateInProduct(e).then(function(){if(s.product.glass.length=0,i.setCurrentGlass(s.product),i.setCurrentHardware(s.product),"design"===n.global.currOpenPage)r.setDefaultConstruction();else{var e=s.product.hardware.id||0;i.preparePrice(s.product.template,s.product.profile.id,s.product.glass,e,s.product.lamination.lamination_in_id),o.sendAnalyticsData(d.userInfo.id,a.order.id,s.product.template_id,s.product.profile.id,1)}})}function u(e,t){t?(i.closeRoomSelectorDialog(),s.product.room_id=t-1,4===n.global.rooms[t-1].group_id&&n.global.noDoorExist?l.design.isNoDoors=1:s.product.construction_type!==n.global.rooms[t-1].group_id?(s.product.construction_type=n.global.rooms[t-1].group_id,4===s.product.construction_type&&(r.setDoorConfigDefault(s.product),l.design=l.setDefaultDesign(),s.product.profile=angular.copy(i.fineItemById(l.design.sashShapeList[l.design.doorConfig.sashShapeIndex].profileId,n.global.profiles))),i.downloadAllTemplates(s.product.construction_type).then(function(t){t&&(n.global.templatesSourceSTORE=angular.copy(t),n.global.templatesSource=angular.copy(t),c(e))})):c(e)):c(e)}function p(){var e=angular.copy(n.global.templatesSourceSTORE[s.product.template_id]);n.global.templatesSource[s.product.template_id]=e}function _(i,r){function o(){p(),n.global.isChangedTemplate=0,l.design.designSteps.length=0,u(i,r)}n.global.isTemplateTypeMenu=0,"design"===n.global.currOpenPage&&(n.global.isChangedTemplate=l.design.designSteps.length?1:0),n.global.isChangedTemplate?t.confirmAlert(e("translate")("common_words.NEW_TEMPLATE_TITLE"),e("translate")("common_words.TEMPLATE_CHANGES_LOST"),o):u(i,r)}function E(e){s.product.construction_type=e,s.product.template_id=0,i.prepareTemplates(e).then(function(){"design"===n.global.currOpenPage&&r.setDefaultConstruction()})}var m=this;return m.publicObj={selectNewTemplate:_,initNewTemplateType:E},m.publicObj}])}(),function(){angular.module("MainModule").factory("AuxStor",function(){function e(){return angular.copy(t.publicObj.auxiliarySource)}var t=this;return t.publicObj={auxiliarySource:{addElementsType:[],addElementsList:[],showAddElementsMenu:0,addElementsMenuStyle:0,isFocusedAddElement:0,isAddElement:0,currentAddElementId:0,auxParameter:0,tempSize:[],currAddElementPrice:0,isTabFrame:0,isAddElementListView:0,isWindowSchemeDialog:0,isGridSelectorDialog:0,selectedGrid:0,calculatorStyle:"",addElementGroups:[],searchingWord:""},setDefaultAuxiliary:e},t.publicObj.aux=e(),t.publicObj})}(),function(){angular.module("CartModule").factory("CartStor",["OrderStor",function(e){function t(){return angular.copy(r.publicObj.cartSource)}function i(){r.publicObj.cart.customer.customer_name=angular.copy(e.order.customer_name),r.publicObj.cart.customer.customer_location=angular.copy(e.order.customer_location),r.publicObj.cart.customer.customer_address=angular.copy(e.order.customer_address),r.publicObj.cart.customer.customer_house=angular.copy(e.order.customer_house),r.publicObj.cart.customer.customer_flat=angular.copy(e.order.customer_flat),r.publicObj.cart.customer.customer_floor=angular.copy(e.order.customer_floor),r.publicObj.cart.customer.customer_city=angular.copy(e.order.customer_city),r.publicObj.cart.customer.customer_city_id=angular.copy(e.order.customer_city_id),r.publicObj.cart.customer.customer_email=angular.copy(e.order.customer_email),r.publicObj.cart.customer.customer_phone=angular.copy(e.order.customer_phone),r.publicObj.cart.customer.customer_phone_city=angular.copy(e.order.customer_phone_city),r.publicObj.cart.customer.customer_itn=angular.copy(e.order.customer_itn),r.publicObj.cart.customer.customer_starttime=angular.copy(e.order.customer_starttime),r.publicObj.cart.customer.customer_endtime=angular.copy(e.order.customer_endtime),r.publicObj.cart.customer.customer_target=angular.copy(e.order.customer_target),r.publicObj.cart.customer.customer_sex=angular.copy(e.order.customer_sex),r.publicObj.cart.customer.customer_age=angular.copy(e.order.customer_age),r.publicObj.cart.customer.customer_education=angular.copy(e.order.customer_education),r.publicObj.cart.customer.customer_occupation=angular.copy(e.order.customer_occupation),r.publicObj.cart.customer.customer_infoSource=angular.copy(e.order.customer_infoSource)}var r=this;return r.publicObj={cartSource:{allAddElements:[],isShowDiscount:0,tempConstructDisc:0,tempAddelemDisc:0,discountPriceDiff:0,discountDeliveyPlant:0,marginDeliveyPlant:0,squareTotal:0,perimeterTotal:0,qtyTotal:0,isExistAddElems:0,isAllAddElems:0,allAddElemsOrder:[],addElemsOrderPriceTOTAL:0,isSelectedProduct:0,selectedProducts:[],isMasterDialog:0,isOrderDialog:0,isCreditDialog:0,submitted:0,isCityBox:0,customer:{customer_sex:0}},optionAge:[{id:1,name:"20-30"},{id:2,name:"31-40"},{id:3,name:"41-50"},{id:4,name:"51-60"},{id:5,name:"cart.CLIENT_AGE_OLDER"}],optionEductaion:[{id:1,name:"cart.CLIENT_EDUC_MIDLE"},{id:2,name:"cart.CLIENT_EDUC_SPEC"},{id:3,name:"cart.CLIENT_EDUC_HIGH"},{id:4,name:"cart.CLIENT_EDUC_4"}],optionOccupation:[{id:1,name:"cart.CLIENT_OCCUP_WORKER"},{id:2,name:"cart.CLIENT_OCCUP_HOUSE"},{id:3,name:"cart.CLIENT_OCCUP_BOSS"},{id:4,name:"cart.CLIENT_OCCUP_STUD"},{id:5,name:"cart.CLIENT_OCCUP_PENSION"},{id:6,name:"cart.UNKNOWN"}],optionInfo:[{id:1,name:"TV"},{id:2,name:"InterNET"},{id:3,name:"cart.CLIENT_INFO_PRESS"},{id:4,name:"cart.CLIENT_INFO_FRIEND"},{id:5,name:"cart.CLIENT_INFO_ADV"}],setDefaultCart:t,fillOrderForm:i},r.publicObj.cart=t(),r.publicObj}])}(),function(){angular.module("DesignModule").factory("DesignStor",["$filter",function(e){function t(){return angular.copy(r.publicObj.designSource)}function i(){return angular.copy(r.publicObj.designSource.doorConfig)}var r=this;return r.publicObj={designSource:{templateSourceTEMP:{},templateTEMP:{},designSteps:[],activeMenuItem:0,activeSubMenuItem:0,isDropSubMenu:0,isImpostDelete:0,selectedGlass:[],selectedCorner:[],selectedImpost:[],selectedArc:[],openVoiceHelper:0,loudVoice:0,quietVoice:0,voiceTxt:"",selectedGlassId:0,isDimAnimate:0,oldSize:0,prevSize:0,tempSize:[],isMinSizeRestriction:0,isMaxSizeRestriction:0,minSizeLimit:0,maxSizeLimit:0,isDimExtra:0,isSquareExtra:0,extraGlass:[],isGlassExtra:0,extraHardware:[],isHardwareExtra:0,isNoDoors:0,doorShapeData:[{name:e("translate")("panels.DOOR_TYPE1"),icon:"img/door-config/doorstep.png",iconSelect:"img/door-config-selected/doorstep.png"},{name:e("translate")("panels.DOOR_TYPE2"),icon:"img/door-config/no-doorstep.png",iconSelect:"img/door-config-selected/no-doorstep.png"},{name:e("translate")("panels.DOOR_TYPE3")+"1",icon:"img/door-config/doorstep-al1.png",iconSelect:"img/door-config-selected/doorstep-al1.png"},{name:e("translate")("panels.DOOR_TYPE3")+"2",icon:"img/door-config/doorstep-al2.png",iconSelect:"img/door-config-selected/doorstep-al2.png"}],doorShapeList:[],sashShapeList:[],handleShapeList:[],lockShapeList:[],doorConfig:{doorShapeIndex:0,doorShapeName:"",sashShapeIndex:0,sashShapeName:"",handleShapeIndex:0,handleShape:{},lockShapeIndex:0,lockShape:{}}},setDefaultDesign:t,setDefaultDoor:i},r.publicObj.design=t(),r.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("GlobalStor",function(){function e(){return angular.copy(t.publicObj.globalSource)}var t=this;return t.publicObj={globalSource:{isDevice:0,isLoader:0,startProgramm:1,isNavMenu:1,isConfigMenu:0,activePanel:0,configMenuTips:0,isCreatedNewProject:1,isCreatedNewProduct:1,productEditNumber:0,orderEditNumber:0,prevOpenPage:"",currOpenPage:"main",isChangedTemplate:0,isVoiceHelper:0,voiceHelperLanguage:"",showGlassSelectorDialog:0,isShowCommentBlock:0,isTemplateTypeMenu:0,showRoomSelectorDialog:0,rooms:[],isRoomElements:0,templateLabel:"",templatesSource:[],templatesSourceSTORE:[],isSashesInTemplate:0,profiles:[],profilesType:[],glassesAll:[],glassTypes:[],glasses:[],selectGlassId:0,selectGlassName:"",prevGlassId:0,prevGlassName:"",hardwares:[],hardwareTypes:[],hardwareLimits:[],laminats:[],laminatCouples:[],lamGroupFiltered:[],addElementsAll:[],tempAddElements:[],noDoorExist:0,doorKitsT1:[],doorKitsT2:[],doorHandlers:[],doorLocks:[],supplyData:[],assemblingData:[],instalmentsData:[],isInfoBox:0,infoTitle:"",infoImg:"",infoLink:"",infoDescrip:"",isReport:0,currencies:[],locations:{countries:[],regions:[],cities:[]},margins:{},deliveryCoeff:{},isAlert:0,alertTitle:"",alertDescr:"",confirmAction:0,isQtyCalculator:0,isSizeCalculator:0,isWidthCalculator:0,maxSizeLimit:3200,maxSquareLimit:6},setDefaultGlobal:e},t.publicObj.global=e(),t.publicObj})}(),function(){angular.module("HistoryModule").factory("HistoryStor",function(){function e(){return angular.copy(t.publicObj.historySource)}var t=this;return t.publicObj={historySource:{orders:[],ordersSource:[],isEmptyResult:0,isOrderSearch:0,searchingWord:"",isOrderDate:0,startDate:"",finishDate:"",isStartDate:0,isFinishDate:0,isAllPeriod:1,isOrderSort:0,isSortType:"last",isFilterType:void 0,isDraftView:0,drafts:[],draftsSource:[],isEmptyResultDraft:0,isOrderDateDraft:0,startDateDraft:"",finishDateDraft:"",isStartDateDraft:0,isFinishDateDraft:0,isAllPeriodDraft:1,isOrderSortDraft:0,isSortTypeDraft:"last",reverseDraft:1},setDefaultHistory:e},t.publicObj.history=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").factory("OrderStor",function(){function e(){return angular.copy(t.publicObj.orderSource)}var t=this;return t.publicObj={orderSource:{id:0,order_number:0,order_hz:"---",order_type:1,order_date:0,order_style:"",climatic_zone:0,heat_coef_min:0,discount_construct:0,discount_addelem:0,discount_construct_max:0,discount_addelem_max:0,delivery_user_id:0,mounting_user_id:0,default_term_plant:0,disc_term_plant:0,margin_plant:0,products_qty:0,products:[],templates_price:0,addelems_price:0,products_price:0,productsPriceDis:0,delivery_date:0,new_delivery_date:0,delivery_price:0,is_date_price_less:0,is_date_price_more:0,floor_id:0,floorName:"",floor_price:0,mounting_id:0,mountingName:"",mounting_price:0,is_instalment:0,instalment_id:0,selectedInstalmentPeriod:0,selectedInstalmentPercent:0,is_old_price:0,payment_first:0,payment_monthly:0,payment_first_primary:0,payment_monthly_primary:0,paymentFirstDis:0,paymentMonthlyDis:0,paymentFirstPrimaryDis:0,paymentMonthlyPrimaryDis:0,order_price:0,order_price_dis:0,order_price_primary:0,orderPricePrimaryDis:0,customer_name:"",customer_email:"",customer_phone:"",customer_phone_city:"",customer_address:"",customer_location:"",customer_city:"",customer_city_id:0,customer_itn:0,customer_starttime:"",customer_endtime:"",customer_target:"",customer_sex:0,customer_age:0,customer_education:0,customer_occupation:0,customer_infoSource:0},setDefaultOrder:e},t.publicObj.order=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").factory("ProductStor",["$filter",function(e){function t(){return angular.copy(i.publicObj.productSource)}var i=this;return i.publicObj={productSource:{product_id:0,is_addelem_only:0,room_id:0,construction_type:1,heat_coef_total:0,template_id:0,template_source:{},template:{},templateIcon:{},template_width:0,template_height:0,template_square:0,profile:{},glass:[],hardware:{},beadsData:[],profileDepths:{frameDepth:{},frameStillDepth:{},sashDepth:{},impostDepth:{},shtulpDepth:{}},lamination:{id:0,lamination_in_id:1,lamination_out_id:1,laminat_in_name:e("translate")("mainpage.WHITE_LAMINATION"),laminat_out_name:e("translate")("mainpage.WHITE_LAMINATION"),img_in_id:1,img_out_id:1},chosenAddElements:[[],[],[],[],[],[],[],[],[],[],[]],door_shape_id:0,door_sash_shape_id:0,door_handle_shape_id:0,door_lock_shape_id:0,doorName:"",doorSashName:"",doorHandle:{},doorLock:{},template_price:0,addelem_price:0,addelemPriceDis:0,product_price:0,productPriceDis:0,report:[],comment:"",product_qty:1},setDefaultProduct:t},i.publicObj.product=t(),i.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("UserStor",function(){function e(){return angular.copy(t.publicObj.userInfoSource)}var t=this;return t.publicObj={userInfoSource:{cityName:"",regionName:"",countryName:"",fullLocation:"",climaticZone:0,heatTransfer:0,langLabel:"en",langName:"English",currencyId:0,currency:"",discountConstr:0,discountAddElem:0,discountConstrMax:0,discountAddElemMax:0,discConstrByWeek:[],discAddElemByWeek:[],factoryLink:""},setDefaultUser:e},t.publicObj.userInfo=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").constant("germanDictionary",{common_words:{CHANGE:"untreu sein",MONTHS:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTHS_SHOT:"Jan, Feb, Mär, Apr, Mai, Jun, Jul, Aug, Sep, Okt, Nov, Dez",MONTHA:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTH_LABEL:"Monat",MONTHA_LABEL:"Monats",MONTHS_LABEL:"Monate",ALL:"alles",MIN:"min.",MAX:"maks.",BUTTON_Y:"JA",BUTTON_N:"NEIN",DELETE_PRODUCT_TITLE:"Die Entfernung!",DELETE_PRODUCT_TXT:"Sie wollen das Produkt entfernen?",DELETE_ORDER_TITLE:"Die Entfernung der Bestellung!",DELETE_ORDER_TXT:"Sie wollen die Bestellung entfernen?",COPY_ORDER_TITLE:"Das Kopieren!",COPY_ORDER_TXT:"Sie wollen der Bestellung kopieren?",SEND_ORDER_TITLE:"In die Produktion!",SEND_ORDER_TXT:"Sie wollen die Bestellung auf den Betrieb absenden?",NEW_TEMPLATE_TITLE:"Template-Wechsel",TEMPLATE_CHANGES_LOST:"Die Template-Änderungen gehen verloren! Fortfahren?",PAGE_REFRESH:"Das Neuladen der Seite zu Datenverlust führen!",SELECT:"wählen",AND:"und",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Einloggen",PASS_CODE:"Teilen Sie diesen Kode dem Manager mit.",YOUR_CODE:"Ihr Kode: ",EMPTY_FIELD:"Füllen Sie dieses Feld aus.",WRONG_LOGIN:'For login (password) use only numbers, letters and symbols "@", ".", "-", "_".',SHORT_NAME:"Eine zu kurze Namen",IMPORT_DB_START:"Warten begann Laden der Datenbank",IMPORT_DB_FINISH:"Vielen Dank für das Herunterladen abgeschlossen ist",LOGIN:"Login",PASSWORD:"Passwort",MOBILE:"Handy",REGISTRATION:"Anmeldung",SELECT_COUNTRY:"Land wählen",SELECT_REGION:"Region wählen",SELECT_CITY:"Wählen Sie die Stadt",USER_EXIST:"Dieser Benutzer ist bereits vorhanden! Versuchen Sie es erneut.",USER_NOT_EXIST:"Ein solcher Benutzer nicht existiert. Registrieren.",USER_NOT_ACTIVE:"Sie haben Ihr Profil aktiviert. Überprüfen Sie Ihre E-Mail.",USER_CHECK_EMAIL:"Bestätigungsemail wurde Ihnen in der E-Mail gesendet.",SELECT_PRODUCER:"Hersteller auswählen",SELECT_FACTORY:"Sie haben noch keine gewählten Hersteller",USER_PASSWORD_ERROR:"ungültiges Kennwort!",OFFLINE:"Keine Verbindung zum Internet!",IMPORT_DB:"Databases JETZT HERUNTERLADEN! Warten Sie mal!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"Die Klimazone",THERMAL_RESISTANCE:"Wärmeübertragung",AIR_CIRCULATION:"Der Koeffizient des Luftwechsels",NAVMENU_GEOLOCATION:"Die Anordnung zu wählen",NAVMENU_CURRENT_GEOLOCATION:"Die laufende Anordnung",NAVMENU_CURRENT_CALCULATION:"Die laufende Berechnung",NAVMENU_CART:"Der Korb der Berechnung",NAVMENU_ADD_ELEMENTS:"Die zusätzlichen Elemente",NAVMENU_ALL_CALCULATIONS:"Bestellverlauf",NAVMENU_SETTINGS:"Einstellungen",NAVMENU_MORE_INFO:"Es gibt als mehrere Informationen",NAVMENU_VOICE_HELPER:"Der Stimmverwaltung",NAVMENU_CALCULATIONS:"Die Berechnungen",NAVMENU_APPENDIX:"Anwendung",NAVMENU_NEW_CALC:"+Neue Berechnungs",CONFIGMENU_CONFIGURATION:"Die Konfiguration und die Umfänge",CONFIGMENU_SIZING:"Die Breite * die Höhe",CONFIGMENU_PROFILE:"Profil",CONFIGMENU_GLASS:"Bauglasplatte",CONFIGMENU_HARDWARE:"Zubehör",CONFIGMENU_LAMINATION:"Laminierung",CONFIGMENU_LAMINATION_TYPE:"in den Zimmer / Die Fassade",WHITE_LAMINATION:"Weiß",CONFIGMENU_ADDITIONAL:"Zusätzlich",CONFIGMENU_IN_CART:"Zum Warenkorb",VOICE_SPEACH:"Sprechen...",COMMENT:"Lassen Sie eine Notiz in der Größenordnung hier.",ROOM_SELECTION:"Die Wahl Template",CONFIGMENU_NO_ADDELEMENTS:"Zusätzliche Elemente ausgewählt",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Um die Größe zu ändern, klicken Sie hier",PROFILE_TIP:"Um ein Profil auszuwählen, klicken Sie hier",GLASS_TIP:"Um eine doppelt verglasten Fenster auszuwählen, klicken Sie hier",SELECT_ALL:"Alle auswählen",SELECT_GLASS_WARN:"Klicken Sie auf die Verglasung zu ändern, Sie wollen"},panels:{TEMPLATE_WINDOW:"Fenster",TEMPLATE_BALCONY:"Altan",TEMPLATE_DOOR:"Tür",TEMPLATE_BALCONY_ENTER:"Der Ausgang auf den Balkon",TEMPLATE_EDIT:"Editieren",TEMPLATE_DEFAULT:"Das Projekt als Voreinstellung",COUNTRY:"Land",BRAND:"Das Warenzeichen",HEAT_INSULATION:"warm Isolation",NOICE_INSULATION:"Isolierung",CORROSION_COEFF:"Korrosionsschutz",BURGLAR_COEFF:"Diebstahlschutz",LAMINAT_INSIDE:"im Raum",
LAMINAT_OUTSIDE:"Straßenfront",ONE_WINDOW_TYPE:"Das Einaufklappbare",TWO_WINDOW_TYPE:"Das Zweiaufklappbare",THREE_WINDOW_TYPE:"Das Dreiaufklappbare",CAMERa:"Kameras",CAMER:"Kameras",CAMERs:"Kameras",ENERGY_SAVE:"+Energiesparen",DOOR_TYPE1:"Nach dem Perimeter",DOOR_TYPE2:"Ohne Schwelle",DOOR_TYPE3:"Die Aluminiumschwelle, Typ",HANDLE_TYPE1:"Druck- die Garnitur",HANDLE_TYPE2:"Der standardmäßige Bürogriff",LOCK_TYPE1:"One-Stop-Verriegelung",LOCK_TYPE2:"Multipoint-Latch",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Wählen",ADD:"drauflegen",GRID:"Moskitonetz",VISOR:"Deflektor",SPILLWAY:"Entwässerungsanlage",OUTSIDE:"Außen Pisten",LOUVERS:"Jalousie",INSIDE:"Innen Pisten",CONNECTORS:"Zwischenstepsel",FAN:"Mikroventilation",WINDOWSILL:"Fensterbank",HANDLEL:"Griff",OTHERS:"Übrige",GRIDS:"Moskitonetze",VISORS:"Visiere",SPILLWAYS:"Entwässerungsanlagen",WINDOWSILLS:"Fensterbänke",HANDLELS:"Griff",NAME_LABEL:"Benennung",ARTICUL_LABEL:"Nachschlagewerke",QTY_LABEL:"pcs",SIZE_LABEL:"Größe",WIDTH_LABEL:"Breite",HEIGHT_LABEL:"Höhe",OTHER_ELEMENTS1:"Noch",OTHER_ELEMENTS2:"Komponente ...",SCHEME_VIEW:"Schematisch",LIST_VIEW:"Liste",INPUT_ADD_ELEMENT:"Komponente hinzufügen",CANCEL:"Stornierung",TOTAL_PRICE_TXT:"Gesamte zusätzliche Komponenten in der Menge von:",ELEMENTS:"Komponenten",ELEMENT:"Komponente",ELEMENTA:"Komponente"},add_elements_menu:{TIP:"Wählen Sie ein Element aus der Liste",EMPTY_ELEMENT:"Ohne das Element",TAB_NAME_SIMPLE_FRAME:"Einfacher Aufbau",TAB_NAME_HARD_FRAME:"Verbundstruktur",TAB_EMPTY_EXPLAIN:"Wählen Sie den Anfangspunkt zu starten Bau."},design:{SASH_SHAPE:"Flügel",ANGEL_SHAPE:"Winkel",IMPOST_SHAPE:"Abgaben",ARCH_SHAPE:"Gewölbe",POSITION_SHAPE:"Position",UNITS_DESCRIP:"Da die Einheiten in mm",PROJECT_DEFAULT:"Standardprojekt",DOOR_CONFIG_LABEL:"Anordnung der Türen",DOOR_CONFIG_DESCTIPT:"Türrahmen",SASH_CONFIG_DESCTIPT:"Torblatt",HANDLE_CONFIG_DESCTIPT:"Griff",LOCK_CONFIG_DESCTIPT:"Verschluss",STEP:"Schritt",LABEL_DOOR_TYPE:"Wählen Sie ein Design Türrahmen",LABEL_SASH_TYPE:"Wählen Sie die Art des Türblattes",LABEL_HANDLE_TYPE:"Wählen Sie die Art der Griff",LABEL_LOCK_TYPE:"Wählen Sie die Art der Sperre",VOICE_SWITCH_ON:"Voice-Modus aktiviert ist",VOICE_NOT_UNDERSTAND:"es ist nicht klar",VOICE_SMALLEST_SIZE:"zu klein",VOICE_BIGGEST_SIZE:"zu groß",VOICE_SMALL_GLASS_BLOCK:"zu kleine Oberlichter",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"nicht Verfügbar!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",BY_WIDTH:"by width",BY_HEIGHT:"by height",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры.",DOOR_ERROR:"Systems of entrance doors are not configured"},history:{SEARCH_PLACEHOLDER:"Suche nach Stichwort",DRAFT_VIEW:"Entwürfe Berechnungen",HISTORY_VIEW:"Siedlungsgeschichte",PHONE:"Telefon",CLIENT:"Der Kunde",ADDRESS:"Anschrift",FROM:"von ",UNTIL:"vor ",PAYMENTS:"Zahlungen",ALLPRODUCTS:"Produkte",ON:"bis",DRAFT:"Entwurf",DATE_RANGE:"Datumsbereich",ALL_TIME:"Die ganze Zeit",SORTING:"Sortierung",NEWEST_FIRST:"Mit der Zeit: neue zuerst",NEWEST_LAST:"Zu der Zeit, neue am Ende",SORT_BY_TYPE:"Nach Art",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Nur aktiv",SORT_SHOW_WAIT:"Nur angemeldete",SORT_SHOW_DONE:"nur abgeschlossen",BY_YOUR_REQUEST:"Je nach Wunsch",NOT_FIND:"nichts gefunden",WAIT_MASTER:"erwartet Gager",INCLUDED:"inbegriffen",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Alle Anbauteile bestellen",ADD_ORDER:"Fügen Sie das Produkt",PRODUCT_QTY:"Anzahl der Produkte",LIGHT_VIEW:"Kurzansicht",FULL_VIEW:"Vollansicht",DELIVERY:"Lieferung",SELF_EXPORT:"Abholen",FLOOR:"Etage",ASSEMBLING:"Montage",WITHOUT_ASSEMBLING:"ohne Montage",FREE:"kostenlos",PAYMENT_BY_INSTALMENTS:"Ratenzahlung",WITHOUT_INSTALMENTS:"losen Raten",DELIVERY_DATE:"Liefertermin",TOTAL_PRICE_LABEL:"Insgesamt Lieferung auf",MONTHLY_PAYMENT_LABEL:"monatlichen Zahlungen auf",DATE_DELIVERY_LABEL:"Geliefert auf",FIRST_PAYMENT_LABEL:"Die erste Zahlung",ORDER:"Bestellen",MEASURE:"Maßnahme",READY:"Bereit",CALL_MASTER:"Rufen Gager zu berechnen",CALL_MASTER_DESCRIP:"Um Gager nennen wir brauchen etwas für Sie zu wissen. Beide Felder sind Pflichtfelder.",CLIENT_LOCATION:"Lage",CLIENT_ADDRESS:"Anschrift",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Bestellung zur Berechnung",CALL_ORDER_DESCRIP:"Um den Auftrag zu erfüllen, müssen wir etwas über Sie wissen.",CALL_ORDER_CLIENT_INFO:"Kundeninformation (muss ausgefüllt werden):",CLIENT_NAME:"Vollständiger Name",CALL_ORDER_DELIVERY:"Liefern Sie eine Bestellung für",CALL_ORDER_TOTAL_PRICE:"insgesamt",CALL_ORDER_ADD_INFO:"Extras:",CLIENT_EMAIL_ORDER:"Электронная почта для получения спецификации",CLIENT_EMAIL:"E-Mail",ADD_PHONE:"Zusätzliche Telefon",CALL_CREDIT:"Machen Tranche und um zu berechnen",CALL_CREDIT_DESCRIP:"Um Raten anordnen und erfüllen den Auftrag, wir haben etwas für Sie zu wissen.",CALL_CREDIT_CLIENT_INFO:"Ratenzahlung:",CREDIT_TARGET:"Der Zweck der Registrierung von Raten",CLIENT_ITN:"Individuelle Steuernummers",CALL_START_TIME:"Rufen Sie aus:",CALL_END_TIME:"vor:",CALL_CREDIT_PARTIAL_PRICE:"auf",ADDELEMENTS_EDIT_LIST:"Liste bearbeiten ...",ADDELEMENTS_PRODUCT_COST:"einem Produkt",HEAT_TRANSFER:"Wärmeübertragung",WRONG_EMAIL:"Falsche E-Mail",LINK_BETWEEN_COUPLE:"zwischen einem Paar von",LINK_BETWEEN_ALL:"unter allen",CLIENT_SEX:"Paul",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Alter",CLIENT_AGE_OLDER:"älteren 61",CLIENT_EDUCATION:"Das wichtigste Kriterium Ihrer Wahl",CLIENT_EDUC_MIDLE:"Guter Preis",CLIENT_EDUC_SPEC:"Bildermacher",CLIENT_EDUC_HIGH:"Markenprofil und Hardware",CLIENT_EDUC_4:"Empfehlungen Verkäufers",CLIENT_OCCUPATION:"Beschäftigung",CLIENT_OCCUP_WORKER:"Mitarbeiter",CLIENT_OCCUP_HOUSE:"Hausfrau",CLIENT_OCCUP_BOSS:"Entrepreneur",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Retired",CLIENT_INFO_SOURCE:"Source",CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"Von Freunden",CLIENT_INFO_ADV:"Visuelle Werbung",SELECT_PLACEHOLD:"wählen Sie Ihre Variante",NO_DISASSEMBL:"Ohne Demontage",STANDART_ASSEMBL:"Der Standardmäßige",VIP_ASSEMBL:"Der VIP-Montage",DISCOUNT:"Rabatt",DISCOUNT_SELECT:"Die Auswahl der Preisnachlässe",DISCOUNT_WITH:"Im Hinblick auf die Preisnachlässe",DISCOUNT_WITHOUT:"Ohne Rabatte",DISCOUNT_WINDOW:"Rabatt auf ein Produkt",DISCOUNT_ADDELEM:"Discount auf zusätzliche Elemente",ORDER_COMMENT:"Anmerkung Bestellen",UNKNOWN:"unbekannt"},settings:{AUTHORIZATION:"Autorisierung:",CHANGE_PASSWORD:"Kennwort ändern",CHANGE_LANGUAGE:"ändern Sie die Sprache",PRIVATE_INFO:"Persönliche Informationen:",USER_NAME:"Gesprächspartner",CITY:"Stadt",ADD_PHONES:"Zusätzliche Telefone:",INSERT_PHONE:"Hinzufügen einer Telefon",CLIENT_SUPPORT:"Poderzhka Benutzer",LOGOUT:"Beenden Sie die Anwendung",SAVE:"Speichern",CURRENT_PASSWORD:"Die Jetzige",NEW_PASSWORD:"Neu",CONFIRM_PASSWORD:"Bestätigen",NO_CONFIRM_PASS:"Ungültiges Passwort"}})}(),function(){angular.module("BauVoiceApp").constant("englishDictionary",{common_words:{CHANGE:"Change",MONTHS:"January, February, March, April, May, June, July, August, September, October, November, December",MONTHS_SHOT:"Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sept, Oct, Nov, Dec",MONTHA:"January, February, March, April, May, June, July, August, September, October, November, December",MONTH_LABEL:"month",MONTHA_LABEL:"months",MONTHS_LABEL:"months",ALL:"All",MIN:"min.",MAX:"max.",BUTTON_Y:"YES",BUTTON_N:"NO",DELETE_PRODUCT_TITLE:"Delete!",DELETE_PRODUCT_TXT:"Do you want to delete a product?",DELETE_ORDER_TITLE:"Delete of order!",DELETE_ORDER_TXT:"Do you want to delete an order?",COPY_ORDER_TITLE:"Printing-down!",COPY_ORDER_TXT:"Do you want to do the copy of order?",SEND_ORDER_TITLE:"In a production!",SEND_ORDER_TXT:"Do you want to send an order on a factory?",NEW_TEMPLATE_TITLE:"Template changing",TEMPLATE_CHANGES_LOST:"The template changes will lost! Continue?",PAGE_REFRESH:"Reloading the page will lead to data loss!",SELECT:"Select",AND:"and",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"To enter",PASS_CODE:"You will reveal to this code the manager.",YOUR_CODE:"Your code: ",EMPTY_FIELD:"You should to fill this field.",WRONG_LOGIN:'For login (password) use only numbers, letters and symbols "@", ".", "-", "_".',SHORT_NAME:"Too short name",IMPORT_DB_START:"Wait, began loading the database",IMPORT_DB_FINISH:"Thank you for the download is complete",LOGIN:"Login",PASSWORD:"Password",MOBILE:"Mobile telephone",REGISTRATION:"Registration",SELECT_COUNTRY:"Select country",SELECT_REGION:"Select region",SELECT_CITY:"Select city",USER_EXIST:"Sorry, but this user already exists! Please, try again.",USER_NOT_EXIST:"Sorry, but this user not exists! Registrate please.",USER_NOT_ACTIVE:"Sorry, but your profile is not active. Please check your email.",USER_CHECK_EMAIL:"The confirmed email was send to you. Please check your email.",SELECT_PRODUCER:"Choose the producer",SELECT_FACTORY:"Please select the producer",USER_PASSWORD_ERROR:"Sorry, but your password is wrong!",OFFLINE:"No internet connection!",IMPORT_DB:"DataBase Import was started! Waite please!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"climatic area",THERMAL_RESISTANCE:"heat transfer",AIR_CIRCULATION:"coefficient of ventilation",NAVMENU_GEOLOCATION:"To choose a location",NAVMENU_CURRENT_GEOLOCATION:"Current location",NAVMENU_CURRENT_CALCULATION:"Current calculation",NAVMENU_CART:"Basket of calculation",NAVMENU_ADD_ELEMENTS:"Add. elements",NAVMENU_ALL_CALCULATIONS:"Order history",NAVMENU_SETTINGS:"Settings",NAVMENU_MORE_INFO:"More information",NAVMENU_VOICE_HELPER:"Voice control",NAVMENU_CALCULATIONS:"Calculations",NAVMENU_APPENDIX:"Appendix",NAVMENU_NEW_CALC:"+New calculation",CONFIGMENU_CONFIGURATION:"Configuration and sizes",CONFIGMENU_SIZING:"width * height",CONFIGMENU_PROFILE:"Profile",CONFIGMENU_GLASS:"Glazing",CONFIGMENU_HARDWARE:"accessories",CONFIGMENU_LAMINATION:"Lamination",CONFIGMENU_LAMINATION_TYPE:"room / Facade",WHITE_LAMINATION:"White",CONFIGMENU_ADDITIONAL:"Additionally",CONFIGMENU_IN_CART:"In a basket",VOICE_SPEACH:"You talk...",COMMENT:"Leave a note on the order here.",ROOM_SELECTION:"Template selection",CONFIGMENU_NO_ADDELEMENTS:"Add Elements are not choosen",HEATCOEF_VAL:"W",TEMPLATE_TIP:"To change the size, click here",PROFILE_TIP:"To select a profile, click here",GLASS_TIP:"To select a double-glazed window, click here",SELECT_ALL:"Take all",SELECT_GLASS_WARN:"Click on the glazing, you want to change"},panels:{TEMPLATE_WINDOW:"Window",TEMPLATE_BALCONY:"Balcony",TEMPLATE_DOOR:"Door",TEMPLATE_BALCONY_ENTER:"Exit to a balcony",TEMPLATE_EDIT:"edit",TEMPLATE_DEFAULT:"Project by default",COUNTRY:"country",BRAND:"trademark",HEAT_INSULATION:"thermal insulation",NOICE_INSULATION:"noise isolation",CORROSION_COEFF:"Anticorrosion",BURGLAR_COEFF:"Burglar",LAMINAT_INSIDE:"In room",LAMINAT_OUTSIDE:"Facade",ONE_WINDOW_TYPE:"One-casement",TWO_WINDOW_TYPE:"Two-casement",THREE_WINDOW_TYPE:"Three-leaf",CAMERa:"cameras",CAMER:"cameras",CAMERs:"cameras",ENERGY_SAVE:"+energy saving",DOOR_TYPE1:"on perimeter",DOOR_TYPE2:"without threshold",DOOR_TYPE3:"aluminum threshold, type",HANDLE_TYPE1:"press set",HANDLE_TYPE2:"standard office handle",LOCK_TYPE1:"one-locking with a latch",LOCK_TYPE2:"multilocking with a latch",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"select",ADD:"add",GRID:"mosquito grid",VISOR:"peak",SPILLWAY:"water outflow",OUTSIDE:"external slopes",LOUVERS:"blinds",INSIDE:"internal slopes",CONNECTORS:"connector",FAN:"microairing",WINDOWSILL:"windowsill",HANDLEL:"handle",OTHERS:"other",GRIDS:"mosquito grids",VISORS:"peaks",SPILLWAYS:"Drainages",WINDOWSILLS:"sills",HANDLELS:"handle",NAME_LABEL:"name",ARTICUL_LABEL:"reference",QTY_LABEL:"pcs.",SIZE_LABEL:"size",WIDTH_LABEL:"width",HEIGHT_LABEL:"height",OTHER_ELEMENTS1:"Yet",OTHER_ELEMENTS2:"component...",SCHEME_VIEW:"Schematically",LIST_VIEW:"List",INPUT_ADD_ELEMENT:"Add Component",CANCEL:"cancel",TOTAL_PRICE_TXT:"Total additional components in the amount of:",ELEMENTS:"components",ELEMENT:"component",ELEMENTA:"component"},add_elements_menu:{TIP:"Select an item from the list",EMPTY_ELEMENT:"Without the element",TAB_NAME_SIMPLE_FRAME:"Simple design",TAB_NAME_HARD_FRAME:"Composite structure",TAB_EMPTY_EXPLAIN:"Please select the first item to start up construction."},design:{SASH_SHAPE:"shutters",ANGEL_SHAPE:"corners",IMPOST_SHAPE:"imposts",ARCH_SHAPE:"arches",POSITION_SHAPE:"position",UNITS_DESCRIP:"All Units are in mm",PROJECT_DEFAULT:"Default project",DOOR_CONFIG_LABEL:"configuration of doors",DOOR_CONFIG_DESCTIPT:"door frame",SASH_CONFIG_DESCTIPT:"door leaf",HANDLE_CONFIG_DESCTIPT:"handle",LOCK_CONFIG_DESCTIPT:"lock",STEP:"step",LABEL_DOOR_TYPE:"Select a design door frame",LABEL_SASH_TYPE:"Select the type of door leaf",LABEL_HANDLE_TYPE:"Select the type of handle",LABEL_LOCK_TYPE:"Select the type of lock",VOICE_SWITCH_ON:"The voice helper is switched on",VOICE_NOT_UNDERSTAND:"It is not clear",VOICE_SMALLEST_SIZE:"The smallest size",VOICE_BIGGEST_SIZE:"The biggest size",VOICE_SMALL_GLASS_BLOCK:"too small skylights",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Not Available!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",BY_WIDTH:"by width",BY_HEIGHT:"by height",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры.",DOOR_ERROR:"Systems of entrance doors are not configured"},history:{SEARCH_PLACEHOLDER:"Search by keyword",DRAFT_VIEW:"Drafts calculations",HISTORY_VIEW:"History of settlements",PHONE:"phone",CLIENT:"client",ADDRESS:"address",FROM:"from ",UNTIL:"to ",PAYMENTS:"payments",ALLPRODUCTS:"products",ON:"on",DRAFT:"Draft",DATE_RANGE:"Date Range",ALL_TIME:"For all time",SORTING:"Sorting",NEWEST_FIRST:"By the time: new first",NEWEST_LAST:"By the time new at the end of",SORT_BY_TYPE:"By type",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Only active",SORT_SHOW_WAIT:"Only pending",SORT_SHOW_DONE:"Only completed",BY_YOUR_REQUEST:"According to your request",NOT_FIND:"nothing found",WAIT_MASTER:"expects gager",INCLUDED:"included",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"All additional elements order",ADD_ORDER:"Add the product",PRODUCT_QTY:"number of products",LIGHT_VIEW:"Short view",FULL_VIEW:"Full view",DELIVERY:"Delivery",SELF_EXPORT:"Pickup",FLOOR:"floor",ASSEMBLING:"mounting",WITHOUT_ASSEMBLING:"without mounting",FREE:"free",PAYMENT_BY_INSTALMENTS:"Payment by installments",WITHOUT_INSTALMENTS:"free installments",DELIVERY_DATE:"Delivery date",TOTAL_PRICE_LABEL:"Total Delivered on",MONTHLY_PAYMENT_LABEL:"monthly payments on",DATE_DELIVERY_LABEL:"Delivered on",FIRST_PAYMENT_LABEL:"The first payment",ORDER:"To order",MEASURE:"Measure",READY:"Ready",CALL_MASTER:"Call gager to calculate",CALL_MASTER_DESCRIP:"To call gager we need something for you to know. Both fields are required.",CLIENT_LOCATION:"Location",CLIENT_ADDRESS:"address",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Ordering for calculating",CALL_ORDER_DESCRIP:"In order to fulfill the order, we need to something about you know.",CALL_ORDER_CLIENT_INFO:"Customer Information (must be filled):",CLIENT_NAME:"Full Name",CALL_ORDER_DELIVERY:"Deliver an order for",CALL_ORDER_TOTAL_PRICE:"in all",CALL_ORDER_ADD_INFO:"Extras:",CLIENT_EMAIL_ORDER:"Электронная почта для получения спецификации",CLIENT_EMAIL:"Email",ADD_PHONE:"Additional phone",CALL_CREDIT:"Making installment and order to calculate",CALL_CREDIT_DESCRIP:"To arrange installments and fulfill the order, we have something for you to know.",CALL_CREDIT_CLIENT_INFO:"Installment:",CREDIT_TARGET:"The purpose of registration of installments",CLIENT_ITN:"Individual Tax Number",CALL_START_TIME:"Call from:",CALL_END_TIME:"prior to:",CALL_CREDIT_PARTIAL_PRICE:"on",ADDELEMENTS_EDIT_LIST:"Edit List ...",ADDELEMENTS_PRODUCT_COST:"one product",HEAT_TRANSFER:"heat transfer",WRONG_EMAIL:"Incorrect e-mail",LINK_BETWEEN_COUPLE:"between couple",LINK_BETWEEN_ALL:"between all",CLIENT_SEX:"Sex",CLIENT_SEX_M:"m",CLIENT_SEX_F:"F",CLIENT_AGE:"Age",CLIENT_AGE_OLDER:"older than 61",CLIENT_EDUCATION:"The main criterion of your choice",CLIENT_EDUC_MIDLE:"Good price",CLIENT_EDUC_SPEC:"image maker",CLIENT_EDUC_HIGH:"brand profile and hardware",CLIENT_EDUC_4:"Recommendations seller",CLIENT_OCCUPATION:"Occupation",CLIENT_OCCUP_WORKER:"Employee",CLIENT_OCCUP_HOUSE:"Householder",CLIENT_OCCUP_BOSS:"Employer",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensioner",CLIENT_INFO_SOURCE:"Information source",CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"From friends",CLIENT_INFO_ADV:"Visual advertising",SELECT_PLACEHOLD:"select your option",NO_DISASSEMBL:"without dismantle",STANDART_ASSEMBL:"the standard",VIP_ASSEMBL:"VIP-installation",DISCOUNT:"Discount",DISCOUNT_SELECT:"The choice of discounts",DISCOUNT_WITH:"In view of the discounts",DISCOUNT_WITHOUT:"Excluding discounts",DISCOUNT_WINDOW:"Discount on a product",DISCOUNT_ADDELEM:"Discount on additional elements",ORDER_COMMENT:"Order note",UNKNOWN:"Unknown"},settings:{AUTHORIZATION:"Authorization:",CHANGE_PASSWORD:"Change password",CHANGE_LANGUAGE:"Change language",PRIVATE_INFO:"Personal information:",USER_NAME:"Contact person",CITY:"City",ADD_PHONES:"Additional phones:",INSERT_PHONE:"Add a phone",CLIENT_SUPPORT:"Customer Support",LOGOUT:"Exit the application",SAVE:"Save",CURRENT_PASSWORD:"The Current",NEW_PASSWORD:"New",CONFIRM_PASSWORD:"Confirm",NO_CONFIRM_PASS:"Invalid password"}})}(),function(){angular.module("BauVoiceApp").constant("italianDictionary",{common_words:{CHANGE:"Cambiare",MONTHS:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTHS_SHOT:"Gen., Febb., Marzo, Apr., Mag., Giu., Luglio, Ago., Sett., Ott., Nov., Dic.",MONTHA:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTH_LABEL:"mese",MONTHA_LABEL:"del mese",MONTHS_LABEL:"mesi",ALL:"tutto",MIN:"Min",MAX:"Max",BUTTON_Y:"Sì",BUTTON_N:"No",DELETE_PRODUCT_TITLE:"Cancella!",DELETE_PRODUCT_TXT:"Volete cancellare il prodotto?",DELETE_ORDER_TITLE:"Cancellazione dell’ordine!",DELETE_ORDER_TXT:"Volete cancellare l’ordine?",COPY_ORDER_TITLE:"Copia!",COPY_ORDER_TXT:"Volete fare una copia dell’ordine?",SEND_ORDER_TITLE:"La produzione !",SEND_ORDER_TXT:" Volete inviare l’ordine in fabbrica?",NEW_TEMPLATE_TITLE:"Cambiamento di una sagoma",TEMPLATE_CHANGES_LOST:" I cambiamenti in una sagoma saranno persi! Continuare?",PAGE_REFRESH:"L'azzerramento della pagina porterà a perdita di dati!",SELECT:" Scegliere ",AND:" e ",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Entrare",PASS_CODE:"Comunicate il codice al manager.",YOUR_CODE:"Il vostro codice: ",EMPTY_FIELD:"Riempite questo campo.",WRONG_LOGIN:'For login (password) use only numbers, letters and symbols "@", ".", "-", "_".',SHORT_NAME:"Nome troppo piccolo.",IMPORT_DB_START:"Aspetti, il carico di un database ha cominciato",IMPORT_DB_FINISH:" Grazie, caricandolo sono complete",LOGIN:"Login",PASSWORD:"Password",MOBILE:"Il cellulare",REGISTRATION:"Registrazione",SELECT_COUNTRY:"Il paese di Veberite",SELECT_REGION:"Scelga la regione",SELECT_CITY:"Scelga la città",USER_EXIST:"Un tal utente già esiste! Provi ancora una volta.",USER_NOT_EXIST:"Un tal utente non esiste. Esser registrato.",USER_NOT_ACTIVE:"Non ha attivato il Suo profilo. Controlli la Sua posta.",USER_CHECK_EMAIL:"La lettera di conferma La è stata mandata a posta.",SELECT_PRODUCER:"Scelga il produttore",SELECT_FACTORY:"Non ha scelto il produttore",USER_PASSWORD_ERROR:"Parola d'ordine scorretta!",OFFLINE:"Non c'è connessione con l'Internet!",IMPORT_DB:"Il carico di Database ha cominciato! Aspetti, per favore!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"Zona  climatica",THERMAL_RESISTANCE:"Resistenza alla trasmissione termica",AIR_CIRCULATION:"Coefficiente della circolazione d’aria",NAVMENU_GEOLOCATION:"Scegliere la disposizione",NAVMENU_CURRENT_GEOLOCATION:"La disposizione corrente",NAVMENU_CURRENT_CALCULATION:"Pagamento corrente",NAVMENU_CART:"Cestino per il pagamento",NAVMENU_ADD_ELEMENTS:"Elementi aggiuntivi",NAVMENU_ALL_CALCULATIONS:"Tutti i pagamenti",NAVMENU_SETTINGS:"Impostazioni",NAVMENU_MORE_INFO:"Maggiore informazione",NAVMENU_VOICE_HELPER:"Assistenza a voce",NAVMENU_CALCULATIONS:"Pagamenti",NAVMENU_APPENDIX:"Allegato",NAVMENU_NEW_CALC:"Il nuovo pagamento",CONFIGMENU_CONFIGURATION:"Configurazioni e dimensioni",CONFIGMENU_SIZING:"larghezza * altezza -",CONFIGMENU_PROFILE:"Profilo",CONFIGMENU_GLASS:"Parquet di vetro",CONFIGMENU_HARDWARE:"Fornitura",CONFIGMENU_LAMINATION:"Laminazione",CONFIGMENU_LAMINATION_TYPE:"in camera / facciata",WHITE_LAMINATION:"La bianca",CONFIGMENU_ADDITIONAL:"In aggiunta",CONFIGMENU_IN_CART:"Nel cestino",VOICE_SPEACH:"Parlate...",COMMENT:"Lasci la nota sull'ordine qui.",ROOM_SELECTION:"Scelta template",CONFIGMENU_NO_ADDELEMENTS:"Gli elementi supplementari non sono scelti",HEATCOEF_VAL:"Wt",TEMPLATE_TIP:"Poiché il cambiamento delle dimensioni preme qui",PROFILE_TIP:"Poiché una scelta di un profilo preme qui",GLASS_TIP:"Poiché una scelta di una finestra doppio invetriata preme qui",SELECT_ALL:"Selezionare tutto",SELECT_GLASS_WARN:"Clicca sul vetro, che si desidera modificare"},panels:{TEMPLATE_WINDOW:"Finestra",TEMPLATE_BALCONY:"Balcone",TEMPLATE_DOOR:"Porta",TEMPLATE_BALCONY_ENTER:"Uscita sul balcone",TEMPLATE_EDIT:"Redigere",TEMPLATE_DEFAULT:"Progetto per difetto",COUNTRY:"paese",BRAND:"marchio commerciale",HEAT_INSULATION:"isolamento termico",NOICE_INSULATION:"isolamento acustico",CORROSION_COEFF:"anticorrosione",BURGLAR_COEFF:"protezione contro rottura",LAMINAT_INSIDE:"in camera",LAMINAT_OUTSIDE:"la facciata",ONE_WINDOW_TYPE:"La porta sola",TWO_WINDOW_TYPE:"L'ala doppio",THREE_WINDOW_TYPE:"Il da tre foglie",CAMERa:"di camera",CAMER:" di camera ",CAMERs:"di camere",ENERGY_SAVE:"+risparmio di energia",DOOR_TYPE1:"su perimetro",DOOR_TYPE2:"senza soglia",DOOR_TYPE3:"la soglia di alluminio, battere a macchina",HANDLE_TYPE1:"prema la serie",HANDLE_TYPE2:"maniglia di ufficio standard",LOCK_TYPE1:"una chiusura con una serratura a scatto",LOCK_TYPE2:"la multichiusura con una serratura a scatto",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Scegliere",ADD:"Aggiungere",GRID:"zanzaniera",VISOR:"tettoia",SPILLWAY:"scolo d’acqua",OUTSIDE:"spallette esterne",LOUVERS:"le serrande",INSIDE:"spallette interne",CONNECTORS:"connettore",FAN:"microventilazione",WINDOWSILL:"davanzale",HANDLEL:"maniglia",OTHERS:"altro",GRIDS:"le zanzariere",VISORS:"le tettoie",SPILLWAYS:"gli scoli d’acqua",WINDOWSILLS:"i davanzali",HANDLELS:"le maniglie",NAME_LABEL:"denominazione",ARTICUL_LABEL:"riferimento",QTY_LABEL:"pz.",SIZE_LABEL:"dimensione, misura",WIDTH_LABEL:"larghezza",HEIGHT_LABEL:"altezza",OTHER_ELEMENTS1:"Ancora",OTHER_ELEMENTS2:"componenti...",SCHEME_VIEW:"Schematicamente",LIST_VIEW:"Lista",INPUT_ADD_ELEMENT:"Aggiungere un componente elemento",CANCEL:"Revoca",TOTAL_PRICE_TXT:"Totale componenti aggiuntivi:",ELEMENTS:"componenti",ELEMENT:"componente",ELEMENTA:"di componente"},add_elements_menu:{TIP:"Scegliete un componente dalal lista",EMPTY_ELEMENT:"Senza elemento",TAB_NAME_SIMPLE_FRAME:"Schema semplice",TAB_NAME_HARD_FRAME:"Schema complesso",TAB_EMPTY_EXPLAIN:"Scegliete il primo elemento dalla lista."},design:{SASH_SHAPE:"battenti",ANGEL_SHAPE:"angoli",IMPOST_SHAPE:"imposte",ARCH_SHAPE:"archi",POSITION_SHAPE:"posizione",UNITS_DESCRIP:"come unità di musura sono usati millimetri",PROJECT_DEFAULT:"progetto per difetto",DOOR_CONFIG_LABEL:"configurazione delal porta",DOOR_CONFIG_DESCTIPT:"infisso porta",SASH_CONFIG_DESCTIPT:"battente della porta",HANDLE_CONFIG_DESCTIPT:"maniglia",LOCK_CONFIG_DESCTIPT:"la serratura",STEP:"passo",LABEL_DOOR_TYPE:"Scegliete il modello dell’infisso porta",LABEL_SASH_TYPE:"Scegliete un tipo dibattente portamaniglia",LABEL_HANDLE_TYPE:"Scegliete un tipo di maniglia",LABEL_LOCK_TYPE:"Scegliete un tipo di serratura",VOICE_SWITCH_ON:"il modo di voce è incluso",VOICE_NOT_UNDERSTAND:"Non è chiaro",VOICE_SMALLEST_SIZE:"dimensioni troppo piccole",VOICE_BIGGEST_SIZE:"dimensioni troppo grandi",VOICE_SMALL_GLASS_BLOCK:"apertura leggera troppo piccola",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"È inaccessibile!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",BY_WIDTH:"by width",BY_HEIGHT:"by height",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры.",DOOR_ERROR:"Systems of entrance doors are not configured"},history:{SEARCH_PLACEHOLDER:"Ricerca per parole chiave",DRAFT_VIEW:"Brutte copie dei conteggi",HISTORY_VIEW:"Storia deiconteggi",PHONE:"telefono",CLIENT:"cliente",ADDRESS:"indirizzo",FROM:"da ",UNTIL:"fino a ",PAYMENTS:"dei pagamenti",ALLPRODUCTS:"prodotti",ON:"per",DRAFT:"Brutta copia",DATE_RANGE:"Diapason delle date",ALL_TIME:"Per tutto il tempo",SORTING:"Cernita",NEWEST_FIRST:"Per cronologia: i nuovi all’inizio",NEWEST_LAST:"Per cronologia: i nuovi alal fine",SORT_BY_TYPE:"Per tipo",SORT_SHOW:"Mostrare",SORT_SHOW_ACTIVE:"Solo attivi",SORT_SHOW_WAIT:"Solo in attesa",SORT_SHOW_DONE:"Appena finito",BY_YOUR_REQUEST:"Su vostra richiesta",NOT_FIND:"Non è stato trovato niente",WAIT_MASTER:"Aspetta il misuratore ",INCLUDED:"sono inclusi",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Tutti gli elementi supplementari dell’oedine",ADD_ORDER:"Aggiungere un prodotto",PRODUCT_QTY:"quantitativo di prodotti",LIGHT_VIEW:"Aspetto ridotto",FULL_VIEW:"Aspetto integrale ",DELIVERY:"Consegna",SELF_EXPORT:"Trasporto individuale",FLOOR:"piano",ASSEMBLING:"Montaggio",WITHOUT_ASSEMBLING:"senza montaggio",FREE:"gratuitamente",PAYMENT_BY_INSTALMENTS:"Rateazione",WITHOUT_INSTALMENTS:"senza rateazione",DELIVERY_DATE:"Data consegna",TOTAL_PRICE_LABEL:"Totale per la consegna",MONTHLY_PAYMENT_LABEL:"pagamenti mensili per",DATE_DELIVERY_LABEL:"con consegna per ",FIRST_PAYMENT_LABEL:"Nuovo pagamento",ORDER:"Ordinare",MEASURE:"Misurare",READY:"Pronto",CALL_MASTER:"Chiamata del misuratore per il conteggio",CALL_MASTER_DESCRIP:"Per la telefonata del measurer abbiamo bisogno di sapere qualcosa su Lei. Entrambi i campi sono obbligatori per riempitura.",CLIENT_LOCATION:"Località",CLIENT_ADDRESS:"Indirizzo",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Stesura dell’ordine per il conteggio",CALL_ORDER_DESCRIP:"Per poter eseguire il vostro ordine dobbiamo sapere qualccosa di voi.",CALL_ORDER_CLIENT_INFO:"Informazioni sul cliente (campo obbligatorio):",CLIENT_NAME:"Cognome Nome Patronimico",CALL_ORDER_DELIVERY:"Consegnare l’ordine per",CALL_ORDER_TOTAL_PRICE:"In totale",CALL_ORDER_ADD_INFO:"In aggiunta:",CLIENT_EMAIL_ORDER:"Электронная почта для получения спецификации",CLIENT_EMAIL:"posta elettronica",ADD_PHONE:"Telefono supplementare",CALL_CREDIT:"Concessione rateazione e Accettazione dell’ordine per il conteggio",CALL_CREDIT_DESCRIP:"Per emettere il pagamento di rate ed eseguire l'ordine, dobbiamo sapere qualcosa su Lei.",CALL_CREDIT_CLIENT_INFO:"Rateazione:",CREDIT_TARGET:"Finalità della concessione di rateazione",CLIENT_ITN:"Codice  fiscale ",CALL_START_TIME:"Telefonare da:",CALL_END_TIME:"fino a:",CALL_CREDIT_PARTIAL_PRICE:"per",ADDELEMENTS_EDIT_LIST:"Redigere la lista ...",ADDELEMENTS_PRODUCT_COST:"in un prodotto",HEAT_TRANSFER:"tarsmissione di calore",WRONG_EMAIL:"Posta elettronica errata",LINK_BETWEEN_COUPLE:"tra coppia",LINK_BETWEEN_ALL:"tra tutti",CLIENT_SEX:"di sesso",CLIENT_SEX_M:"U",CLIENT_SEX_F:"D",CLIENT_AGE:"Età",CLIENT_AGE_OLDER:"è più anziano di 61",CLIENTE_ISTRUZIONE:"Il criterio principale della vostra scelta",CLIENT_EDUC_MIDLE:"Il buon prezzo",CLIENTE_EDUC_SPEC:"creatore di immagine",CLIENT_EDUC_HIGH:"il profilo del marchio e hardware",CLIENT_EDUC_4:"Raccomandazioni venditore",CLIENT_OCCUPATION:"Occupazione",CLIENT_OCCUP_WORKER:"Dipendente",CLIENT_OCCUP_HOUSE:"Casalinga",CLIENT_OCCUP_BOSS:"Uomo d'affari",CLIENT_OCCUP_STUD:"Studente",CLIENT_OCCUP_PENSION:"Pensionato",CLIENT_INFO_SOURCE:"Fonte di informazioni",CLIENT_INFO_PRESS:"Premere",CLIENT_INFO_FRIEND:"Da conoscenti",CLIENT_INFO_ADV:"Fare annunci visivo",SELECT_PLACEHOLD:"selezionare l'opzione",NO_DISASSEMBL:"senza smontano",STANDART_ASSEMBL:"lo standard",VIP_ASSEMBL:"INSTALLAZIONE DEL VIP",DISCOUNT:"Sconto",DISCOUNT_SELECT:"Scelta di sconto",DISCOUNT_WITH:"Prendere in considerazione uno sconto",DISCOUNT_WITHOUT:"Senza uno sconto",DISCOUNT_WINDOW:"Sconto a un prodotto",DISCOUNT_ADDELEM:"Sconto a elementi supplementari",ORDER_COMMENT:"Nota Order",UNKNOWN:"Sconosciuto"},settings:{AUTHORIZATION:"Autorizzazione:",CHANGE_PASSWORD:"Cambiare la parola d'ordine",CHANGE_LANGUAGE:"Cambiare la lingua",PRIVATE_INFO:"Dati personalio:",USER_NAME:"Persona di contatto",CITY:"Città",ADD_PHONES:"Telefoni supplementari:",INSERT_PHONE:"Aggiungere un telefono",CLIENT_SUPPORT:"Assistenza agli utentui",LOGOUT:"Uscire dall’allegato",SAVE:"Salvare",CURRENT_PASSWORD:"Corrente",NEW_PASSWORD:"Nuovo",CONFIRM_PASSWORD:"Confermare",NO_CONFIRM_PASS:"Password errata"}})}(),function(){angular.module("BauVoiceApp").constant("romanianDictionary",{common_words:{CHANGE:"Modifică",MONTHS:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Decembrie",MONTHS_SHOT:"Ian, Feb, Mart, Apr, Mai, Iun, Iul, Aug, Sept, Oct, Nov, Dec",MONTHA:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Decembrie",MONTH_LABEL:"luna",MONTHA_LABEL:"luna",MONTHS_LABEL:"luni",ALL:"Toate",MIN:"min.",MAX:"max.",BUTTON_Y:"DA",BUTTON_N:"NU",DELETE_PRODUCT_TITLE:"Ștergere!",DELETE_PRODUCT_TXT:"Doriți să ștergeți produsul?",DELETE_ORDER_TITLE:"Ștergerea comenzii!",DELETE_ORDER_TXT:"Doriți să ștergeți comanda?",COPY_ORDER_TITLE:"Copiere!",COPY_ORDER_TXT:"Doriți să faceți o copie a comenzii?",SEND_ORDER_TITLE:"În producere!",SEND_ORDER_TXT:"Doriți să trimiteți comanda spre executare?",NEW_TEMPLATE_TITLE:"Modificarea șablonului",TEMPLATE_CHANGES_LOST:"Modificările în șablon nu vor fi salvate! Doriți să  continuați?",PAGE_REFRESH:"Reîncărcarea paginii va duce la pierderea datelor!",SELECT:"Alege",AND:"și",OK:"OK",BACK:"Înapoi",LETTER_M:"m"},login:{ENTER:"Intră",PASS_CODE:"Comunicați acest cod managerului.",YOUR_CODE:"Codul Dvs.: ",EMPTY_FIELD:"Completați acest câmp.",WRONG_LOGIN:'Pentru numele de utilizator (parolă) folosiți doar cifre, litere latine și simbolurile  "@" , "." , "-" , "_" .',SHORT_NAME:"Nume prea scurt.",IMPORT_DB_START:"Așteptați, a început încărcarea bazei de date",IMPORT_DB_FINISH:"Vă mulțumim, încărcarea a luat sfârșit",LOGIN:"Nume de utilizator",PASSWORD:"Parolă",MOBILE:"Telefon mobil",REGISTRATION:"Înregistrare",SELECT_COUNTRY:"Selectați țara",SELECT_REGION:"Selectați regiunea",SELECT_CITY:"Selectați orașul",USER_EXIST:"Un astfel de utilizator există deja! Încercați încă o dată.",USER_NOT_EXIST:"Un astfel de utilizator nu există. Înregistrați-vă.",USER_NOT_ACTIVE:"Nu ați activat profilul Dvs. Verificați adresa de e-mail.",USER_CHECK_EMAIL:"Mesajul de confirmare a fost expediat pe adresa Dvs. de e-mail.",
SELECT_PRODUCER:"Selectați producătorul",SELECT_FACTORY:"Nu ați selectat producătorul",USER_PASSWORD_ERROR:"Parolă incorectă!",OFFLINE:"Nu există conexiune la Internet!",IMPORT_DB:"A început încărcarea Bazei de date! Vă rugăm să așteptați!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"zonă climatică",THERMAL_RESISTANCE:"transfer de căldură",AIR_CIRCULATION:"coeficientul schimbului de aer",NAVMENU_GEOLOCATION:"Alege amplasarea",NAVMENU_CURRENT_GEOLOCATION:"Amplasarea curentă",NAVMENU_CURRENT_CALCULATION:"Calcul curent",NAVMENU_CART:"Coșul de calcul",NAVMENU_ADD_ELEMENTS:"Elemente supl.",NAVMENU_ALL_CALCULATIONS:"Istoricul comenzilor",NAVMENU_SETTINGS:"Setări",NAVMENU_MORE_INFO:"Mai multe informații",NAVMENU_VOICE_HELPER:"Comenzi vocale",NAVMENU_CALCULATIONS:"Calcule",NAVMENU_APPENDIX:"Anexă",NAVMENU_NEW_CALC:"+Calcul nou",CONFIGMENU_CONFIGURATION:"Configurație și dimensiuni",CONFIGMENU_SIZING:"lățime * înălțime",CONFIGMENU_PROFILE:"Profil",CONFIGMENU_GLASS:"Termopan",CONFIGMENU_HARDWARE:"Furnitură",CONFIGMENU_LAMINATION:"Laminare",CONFIGMENU_LAMINATION_TYPE:"fațadă  în cameră / fațadă",WHITE_LAMINATION:"Albă",CONFIGMENU_ADDITIONAL:"Suplimentar",CONFIGMENU_IN_CART:"În coș",VOICE_SPEACH:"Vorbiți...",COMMENT:"Lăsați mențiunile cu privire la comandă aici.",ROOM_SELECTION:"Selectare șablon",CONFIGMENU_NO_ADDELEMENTS:"Elemente supl. nu au fost alese",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Pentru a modifica dimensiunile apăsați aici",PROFILE_TIP:"Pentru a selecta profilul apăsați aici",GLASS_TIP:"Pentru a selecta termopanul apăsați aici",SELECT_ALL:"Selectează totul",SELECT_GLASS_WARN:"Faceți un clic pe termopanul, pe care doriți să-l modificați."},panels:{TEMPLATE_WINDOW:"Fereastră",TEMPLATE_BALCONY:"Balcon",TEMPLATE_DOOR:"Ușă",TEMPLATE_BALCONY_ENTER:"Ieșire la balcon",TEMPLATE_EDIT:"Editează",TEMPLATE_DEFAULT:"Proiect implicit",COUNTRY:"țara",BRAND:"marca comercială",HEAT_INSULATION:"izolare termică",NOICE_INSULATION:"izolare fonică",CORROSION_COEFF:"anticoroziune",BURGLAR_COEFF:"antiefracție",LAMINAT_INSIDE:"în cameră",LAMINAT_OUTSIDE:"fațadă",ONE_WINDOW_TYPE:"Cu un canat",TWO_WINDOW_TYPE:"Cu două canaturi",THREE_WINDOW_TYPE:"Cu trei canaturi",CAMERa:"cameră",CAMER:"camere",CAMERs:"camere",ENERGY_SAVE:"+economisire de energie",DOOR_TYPE1:"pe perimetru",DOOR_TYPE2:"fără prag",DOOR_TYPE3:"prag din aluminiu, tip",HANDLE_TYPE1:"garnitură de mâner",HANDLE_TYPE2:"mâner standard de birou",LOCK_TYPE1:"unisafe cu dispozitiv de blocare",LOCK_TYPE2:"multisafe cu dispozitiv de blocare",EXTRA_GLASS1:"Nu exisă posibilitate de montare a termopanului ",EXTRA_GLASS2:"pentru o astfel de construcție"},add_elements:{CHOOSE:"Selectează",ADD:"Adaugă",GRID:"plasă de protecție împotriva țânțarilor",VISOR:"glafuri exterioare",SPILLWAY:"glafuri exterioare",OUTSIDE:"cadre exterioare",LOUVERS:"jaluzele",INSIDE:"cadre interioare",CONNECTORS:"conector",FAN:"micro-aerisire",WINDOWSILL:"pervaz",HANDLEL:"mâner",OTHERS:"altele",GRIDS:"plase de protecție împotriva țânțarilor",VISORS:"apărători",SPILLWAYS:"glafuri pentru evacuarea apei",WINDOWSILLS:"pervazuri",HANDLELS:"mânere",NAME_LABEL:"denumire",ARTICUL_LABEL:"articol",QTY_LABEL:"buc.",SIZE_LABEL:"dimensiuni",WIDTH_LABEL:"lățime",HEIGHT_LABEL:"înălțime",OTHER_ELEMENTS1:"Mai multe",OTHER_ELEMENTS2:"componentei...",SCHEME_VIEW:"Schematic",LIST_VIEW:"Listă",INPUT_ADD_ELEMENT:"Adaugă component",CANCEL:"Anulare",TOTAL_PRICE_TXT:"Total componenți suplimentari în sumă de:",ELEMENTS:"componente",ELEMENT:"componentă",ELEMENTA:"componentei"},add_elements_menu:{TIP:"Selectați elementul din listă",EMPTY_ELEMENT:"Fără element",TAB_NAME_SIMPLE_FRAME:"Structură simplă",TAB_NAME_HARD_FRAME:"Structură din materiale compozite",TAB_EMPTY_EXPLAIN:"Selectați din listă primul element, pentru a începe crearea structurii."},design:{SASH_SHAPE:"canaturi",ANGEL_SHAPE:"colțuri",IMPOST_SHAPE:"imposte",ARCH_SHAPE:"arce",POSITION_SHAPE:"poziție",UNITS_DESCRIP:"Ca unitate de măsură sunt folosiți milimetrii",PROJECT_DEFAULT:"Proiect implicit",DOOR_CONFIG_LABEL:"configurația ușii",DOOR_CONFIG_DESCTIPT:"cadrul ușii",SASH_CONFIG_DESCTIPT:"canatul ușii",HANDLE_CONFIG_DESCTIPT:"mâner",LOCK_CONFIG_DESCTIPT:"lacăt",STEP:"pas",LABEL_DOOR_TYPE:"Selectați structura cadrului ușii",LABEL_SASH_TYPE:"Selectați tipul canatului ușii",LABEL_HANDLE_TYPE:"Selectați tipul mânerului",LABEL_LOCK_TYPE:"Selectați tipul lacătului",VOICE_SWITCH_ON:"regimul vocal este activ",VOICE_NOT_UNDERSTAND:"Nu este clar",VOICE_SMALLEST_SIZE:"dimensiuni prea mici",VOICE_BIGGEST_SIZE:"dimensiuni prea mari",VOICE_SMALL_GLASS_BLOCK:"golul pentru pătrunderea luminii prea mic",SQUARE_EXTRA:"Suprafața construcției depășește valorile admisibile.",DIM_EXTRA:"Dimensiunile construcției depășesc valorile admisibile. ",NOT_AVAILABLE:"Nu este disponibil!",TEST_STAGE:"Se află la etapa de testare.",GLASS:"Termopanul",GLASS_SIZE:"cu dimensiunea de",NO_MATCH_RANGE:"nu corespunde diapazonului permis",BY_WIDTH:"după lățime",BY_HEIGHT:"după înălțime",GLASS_SQUARE:"cu suprafața de",MAX_VALUE_HIGHER:"depășește valorile maxime admisibile",EXTRA_SASH:"Dimensiunea curentă a canatului după falț ",CHANGE_SIZE:"Pentru salvarea construcției modificați dimensiunile.",DOOR_ERROR:"Systems of entrance doors are not configured"},history:{SEARCH_PLACEHOLDER:"Căutare după cuvinte-cheie",DRAFT_VIEW:"Ciorne cu calcule",HISTORY_VIEW:"Istoricul calculelor",PHONE:"telefon",CLIENT:"client",ADDRESS:"adresă",FROM:"de la",UNTIL:"până la",PAYMENTS:"plăți pentru",ALLPRODUCTS:"articole",ON:"la",DRAFT:"Ciornă",DATE_RANGE:"Diapazon de zile",ALL_TIME:"Pentru toată perioada",SORTING:"Clasificare",NEWEST_FIRST:"După dată: cele mai recente la început",NEWEST_LAST:"După dată: cele mai recente la sfârșit",SORT_BY_TYPE:"După tip",SORT_SHOW:"Afișează",SORT_SHOW_ACTIVE:"Doar cele active",SORT_SHOW_WAIT:"Doar cele în așteptare",SORT_SHOW_DONE:"Doar cele finalizate",BY_YOUR_REQUEST:"Conform solicitării Dvs.",NOT_FIND:"nu au fost găsite rezultate",WAIT_MASTER:"se așteaptă specialistul în măsurări",INCLUDED:"incluse",NO_PRINT:"Afișarea specificațiilor nu este posibilă din cauza lipsei conexiunii la Internet."},cart:{ALL_ADD_ELEMENTS:"Toate elementele supl. ale comenzii",ADD_ORDER:"Adaugă articol",PRODUCT_QTY:"numărul articolelor",LIGHT_VIEW:"Tip abreviat",FULL_VIEW:"Tip complet",DELIVERY:"Livrare",SELF_EXPORT:"transport cu mijloace proprii",FLOOR:"etaj",ASSEMBLING:"Montare",WITHOUT_ASSEMBLING:"fără montare",FREE:"gratuit",PAYMENT_BY_INSTALMENTS:"În rate",WITHOUT_INSTALMENTS:"fără achitare în rate",DELIVERY_DATE:"Data livrării",TOTAL_PRICE_LABEL:"Total livrare la",MONTHLY_PAYMENT_LABEL:"plăți lunare pentru",DATE_DELIVERY_LABEL:"în cazul livrării la",FIRST_PAYMENT_LABEL:"Prima plată",ORDER:"Comandă",MEASURE:"Măsoară",READY:"Finalizat",CALL_MASTER:"Chemarea specialistului în măsurări, pentru calcule",CALL_MASTER_DESCRIP:"Pentru chemarea specialistului în măsurări trebuie să cunoaștem unele detalii. Ambele câmpuri sunt ",CLIENT_LOCATION:"Amplasare",CLIENT_ADDRESS:"Adresa",CLIENT_HOUSE:"Casă",CLIENT_FLAT:"Ap.",CLIENT_FLOOR:"Et.",CALL_ORDER:"Perfectarea comenzii pentru calculare",CALL_ORDER_DESCRIP:"Pentru a executa comanda, trebuie să cunoaștem informații despre Dvs.",CALL_ORDER_CLIENT_INFO:"Informații despre client (a se completa neapărat):",CLIENT_NAME:"Nume Prenume Patronimic",CALL_ORDER_DELIVERY:"Livrare comandă la",CALL_ORDER_TOTAL_PRICE:"Total",CALL_ORDER_ADD_INFO:"Suplimentar:",CLIENT_EMAIL_ORDER:"Электронная почта для получения спецификации",CLIENT_EMAIL:"E-mail",ADD_PHONE:"Număr de telefon suplimentar",CALL_CREDIT:"Achitare în rate și perfectarea comenzii pentru calculare",CALL_CREDIT_DESCRIP:"Pentru a beneficia de achitarea în rate, trebuie să cunoaștem informații despre Dvs.",CALL_CREDIT_CLIENT_INFO:"Achitare în rate:",CREDIT_TARGET:"Scopul achitării în rate",CLIENT_ITN:"Codul fiscal individual",CALL_START_TIME:"Disponibil pentru apeluri:",CALL_END_TIME:"de la:",CALL_CREDIT_PARTIAL_PRICE:"până la",ADDELEMENTS_EDIT_LIST:"Editează lista ...",ADDELEMENTS_PRODUCT_COST:"într-un articol",HEAT_TRANSFER:"transfer de căldură",WRONG_EMAIL:"Adresă de e-mail incorectă",LINK_BETWEEN_COUPLE:"între o pereche",LINK_BETWEEN_ALL:"între toți",CLIENT_SEX:"Sex",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Vârsta",CLIENT_AGE_OLDER:"mai mare 61",CLIENT_EDUCATION:"Criteriul principal al alegerii Dvs.",CLIENT_EDUC_MIDLE:"Preț avantajos",CLIENT_EDUC_SPEC:"Imaginea producătorului ",CLIENT_EDUC_HIGH:"Marca profilului sau accesoriilor",CLIENT_EDUC_4:"Recomandările vânzătorului",CLIENT_OCCUPATION:"Ocuparea în câmpul muncii",CLIENT_OCCUP_WORKER:"Funcționar",CLIENT_OCCUP_HOUSE:"Casnică",CLIENT_OCCUP_BOSS:"Antreprenor",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensionar",CLIENT_INFO_SOURCE:"Sursa de informații",CLIENT_INFO_PRESS:"Presă",CLIENT_INFO_FRIEND:"De la persoane cunoscute",CLIENT_INFO_ADV:"Publicitate vizuală",SELECT_PLACEHOLD:"selectați opțiunea Dvs.",NO_DISASSEMBL:"fără demontare",STANDART_ASSEMBL:"standard",VIP_ASSEMBL:"montare VIP",DISCOUNT:"Reducere",DISCOUNT_SELECT:"Selectarea reducerii",DISCOUNT_WITH:"Cu reducere",DISCOUNT_WITHOUT:"Fără reducere",DISCOUNT_WINDOW:"Reducere pentru articol",DISCOUNT_ADDELEM:"Reducere pentru elementele suplimentare",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Logare:",CHANGE_PASSWORD:"Schimbă parola",CHANGE_LANGUAGE:"Schimbă limba",PRIVATE_INFO:"Date personale:",USER_NAME:"Persoana de contat",CITY:"Orașul",ADD_PHONES:"Numere de telefon suplimentare:",INSERT_PHONE:"Adaugă număr de telefon",CLIENT_SUPPORT:"Asistență utilizatori",LOGOUT:"Ieși din aplicație",SAVE:"Salvează",CURRENT_PASSWORD:"Curent",NEW_PASSWORD:"Nou",CONFIRM_PASSWORD:"Confirmă",NO_CONFIRM_PASS:"Parolă incorectă"}})}(),function(){angular.module("BauVoiceApp").constant("russianDictionary",{common_words:{CHANGE:"Изменить",MONTHS:"Январь, Февраль, Март, Апрель, Май, Июнь, Июль, Август, Сентябрь, Октябрь, Ноябрь, Декабрь",MONTHS_SHOT:"Янв, Февр, Март, Апр, Май, Июнь, Июль, Авг, Сент, Окт, Ноя, Дек",MONTHA:"Января, Февраля, Марта, Апреля, Мая, Июня, Июля, Августа, Сентября, Октября, Ноября, Декабря",MONTH_LABEL:"месяц",MONTHA_LABEL:"месяца",MONTHS_LABEL:"месяцeв",ALL:"Все",MIN:"мин.",MAX:"макс.",BUTTON_Y:"ДА",BUTTON_N:"НЕТ",DELETE_PRODUCT_TITLE:"Удаление!",DELETE_PRODUCT_TXT:"Хотите удалить продукт?",DELETE_ORDER_TITLE:"Удаление заказа!",DELETE_ORDER_TXT:"Хотите удалить заказ?",COPY_ORDER_TITLE:"Копирование!",COPY_ORDER_TXT:"Хотите сделать копию заказа?",SEND_ORDER_TITLE:"В производство!",SEND_ORDER_TXT:"Хотите отправить заказ на завод?",NEW_TEMPLATE_TITLE:"Изменение шаблона",TEMPLATE_CHANGES_LOST:"Изменения в шаблоне будут потеряны! Продолжить?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"и",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Войти",PASS_CODE:"Сообщите этот код менеджеру.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заполните это поле.",WRONG_LOGIN:'Для логина (пароля) используйте только цифры, латинские буквы и символы "@" , "." , "-" , "_" .',SHORT_NAME:"Слишком маленькое имя.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",LOGIN:"Логин",PASSWORD:"Пароль",MOBILE:"Мобильный телефон",REGISTRATION:"Регистрация",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нет соединения с интернетом!",IMPORT_DB:"Началась загрузка Баз данных! Подождите пожалуйста!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"климатическая зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коэффициент воздухообмена",NAVMENU_GEOLOCATION:"Выбрать расположение",NAVMENU_CURRENT_GEOLOCATION:"Текущее расположение",NAVMENU_CURRENT_CALCULATION:"Текущий расчет",NAVMENU_CART:"Корзина расчета",NAVMENU_ADD_ELEMENTS:"Доп. элементы",NAVMENU_ALL_CALCULATIONS:"История заказов",NAVMENU_SETTINGS:"Настройки",NAVMENU_MORE_INFO:"Больше информации",NAVMENU_VOICE_HELPER:"Голосовое управление",NAVMENU_CALCULATIONS:"Расчеты",NAVMENU_APPENDIX:"Приложение",NAVMENU_NEW_CALC:"+Новый расчет",CONFIGMENU_CONFIGURATION:"Конфигурация и размеры",CONFIGMENU_SIZING:"ширина * высота",CONFIGMENU_PROFILE:"Профиль",CONFIGMENU_GLASS:"Стеклопакет",CONFIGMENU_HARDWARE:"Фурнитура",CONFIGMENU_LAMINATION:"Ламинация",CONFIGMENU_LAMINATION_TYPE:"в комнате / фасад",WHITE_LAMINATION:"Белая",CONFIGMENU_ADDITIONAL:"Дополнительно",CONFIGMENU_IN_CART:"В корзину",VOICE_SPEACH:"Говорите...",COMMENT:"Оставьте свою заметку о заказе здесь.",ROOM_SELECTION:"Выбор шаблона",CONFIGMENU_NO_ADDELEMENTS:"Доп.элементы не выбраны",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для изменения размеров нажмите сюда",PROFILE_TIP:"Для выбора профиля нажмите сюда",GLASS_TIP:"Для выбора стеклопакета нажмите сюда",SELECT_ALL:"Выбрать все",SELECT_GLASS_WARN:"Кликните на стеклопакет, который хотите изменить"},panels:{TEMPLATE_WINDOW:"Oкно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Дверь",TEMPLATE_BALCONY_ENTER:"Выход на балкон",TEMPLATE_EDIT:"Редактировать",TEMPLATE_DEFAULT:"Проект по умолчанию",COUNTRY:"страна",BRAND:"торговая марка",HEAT_INSULATION:"теплоизоляция",NOICE_INSULATION:"шумоизоляция",CORROSION_COEFF:"aнтикоррозийность",BURGLAR_COEFF:"противовзломность",LAMINAT_INSIDE:"в комнате",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминиевый порог, тип",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Выбрать",ADD:"Добавить",GRID:"москитная сетка",VISOR:"козырек",SPILLWAY:"водоотлив",OUTSIDE:"наружные откосы",LOUVERS:"жалюзи",INSIDE:"внутренние откосы",CONNECTORS:"соединитель",FAN:"микропроветривание",WINDOWSILL:"подоконник",HANDLEL:"ручка",OTHERS:"прочее",GRIDS:"москитные сетки",VISORS:"козырьки",SPILLWAYS:"водоотливы",WINDOWSILLS:"подоконники",HANDLELS:"ручки",NAME_LABEL:"наименование",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"размер",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"высота",OTHER_ELEMENTS1:"Еще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематически",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Добавить компонент",CANCEL:"Отмена",TOTAL_PRICE_TXT:"Итого дополнительных компонентов на сумму:",ELEMENTS:"компонентов",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Выберите элемент из списка",EMPTY_ELEMENT:"Без элемента",TAB_NAME_SIMPLE_FRAME:"Простая конструкция",TAB_NAME_HARD_FRAME:"Составная конструкция",TAB_EMPTY_EXPLAIN:"Выберите из списка первый элемент, чтобы начать составлять конструкцию."},design:{SASH_SHAPE:"створки",ANGEL_SHAPE:"углы",IMPOST_SHAPE:"импосты",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиция",UNITS_DESCRIP:"В качестве единиц измерения используются миллиметры",PROJECT_DEFAULT:"Проект по умолчанию",DOOR_CONFIG_LABEL:"конфигурация двери",DOOR_CONFIG_DESCTIPT:"рама двери",SASH_CONFIG_DESCTIPT:"створка двери",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"шаг",LABEL_DOOR_TYPE:"Выберите конструкцию рамы двери",LABEL_SASH_TYPE:"Выберите тип створки двери",LABEL_HANDLE_TYPE:"Выберите тип ручки",LABEL_LOCK_TYPE:"Выберите тип замка",VOICE_SWITCH_ON:"голосовой режим включен",VOICE_NOT_UNDERSTAND:"Не понятно",VOICE_SMALLEST_SIZE:"слишком маленький размер",VOICE_BIGGEST_SIZE:"слишком большой размер",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Недоступно!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",BY_WIDTH:"по ширине",BY_HEIGHT:"по высоте",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры.",DOOR_ERROR:"Системы входных дверей не настроены"},history:{SEARCH_PLACEHOLDER:"Поиск по ключевым словам",DRAFT_VIEW:"Черновики расчетов",HISTORY_VIEW:"История расчетов",PHONE:"телефон",CLIENT:"клиент",ADDRESS:"адрес",FROM:"от ",UNTIL:"до ",PAYMENTS:"платежей по",ALLPRODUCTS:"изделий",ON:"на",DRAFT:"Черновик",DATE_RANGE:"Диапазон дат",ALL_TIME:"За все время",SORTING:"Сортировка",NEWEST_FIRST:"По времени: новые в начале",NEWEST_LAST:"По времени: новые в конце",SORT_BY_TYPE:"По типам",SORT_SHOW:"Показать",SORT_SHOW_ACTIVE:"Только активные",SORT_SHOW_WAIT:"Только в ожидании",SORT_SHOW_DONE:"Только завершенные",BY_YOUR_REQUEST:"По вашему запросу",NOT_FIND:"ничего не найдено",WAIT_MASTER:"ожидает замерщика",INCLUDED:"включены",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Все доп.элементы заказа",ADD_ORDER:"Добавить изделие",PRODUCT_QTY:"количество изделий",LIGHT_VIEW:"Сокращенный вид",FULL_VIEW:"Полный вид",DELIVERY:"Доставка",SELF_EXPORT:"самовывоз",FLOOR:"этаж",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажа",FREE:"бесплатно",PAYMENT_BY_INSTALMENTS:"Рассрочка",WITHOUT_INSTALMENTS:"без рассрочки",DELIVERY_DATE:"Дата поставки",TOTAL_PRICE_LABEL:"Итого при поставке на",MONTHLY_PAYMENT_LABEL:"ежемесячных платежа по",DATE_DELIVERY_LABEL:"при поставке на",FIRST_PAYMENT_LABEL:"Первый платеж",ORDER:"Заказать",MEASURE:"Замерить",READY:"Готово",CALL_MASTER:"Вызов замерщика для рассчета",CALL_MASTER_DESCRIP:"Для вызова замерщика нам нужно кое-что о вас знать. Оба поля являются обязательными для заполнения.",CLIENT_LOCATION:"Местоположение",CLIENT_ADDRESS:"Адрес",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Оформление заказа для рассчета",CALL_ORDER_DESCRIP:"Для того, чтобы выполнить заказ, мы должны кое-что о вас знать.",CALL_ORDER_CLIENT_INFO:"Информация о клиенте (заполняйте обязательно):",CLIENT_NAME:"Фамилия Имя Отчество",CALL_ORDER_DELIVERY:"Доставить заказ на",CALL_ORDER_TOTAL_PRICE:"Всего",CALL_ORDER_ADD_INFO:"Дополнительно:",CLIENT_EMAIL_ORDER:"Электронная почта для получения спецификации",CLIENT_EMAIL:"Электронная почта",ADD_PHONE:"Дополнительный телефон",CALL_CREDIT:"Оформление рассрочки и заказа для рассчета",CALL_CREDIT_DESCRIP:"Для того, чтобы оформить рассрочку и выполнить заказ, мы должны кое-что о вас знать.",CALL_CREDIT_CLIENT_INFO:"Рассрочка:",CREDIT_TARGET:"Цель оформления рассрочки",CLIENT_ITN:"Индивидуальный налоговый номер",CALL_START_TIME:"Звонить от:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редактировать список ...",ADDELEMENTS_PRODUCT_COST:"в одном изделии",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Неверная электронная почта",LINK_BETWEEN_COUPLE:"между парой",LINK_BETWEEN_ALL:"между всеми",CLIENT_SEX:"Пол",CLIENT_SEX_M:"M",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Возраст",CLIENT_AGE_OLDER:"старше 61",CLIENT_EDUCATION:"Главный критерий вашего выбора",CLIENT_EDUC_MIDLE:"Выгодная цена",CLIENT_EDUC_SPEC:"Имидж производителя",CLIENT_EDUC_HIGH:"Бренд профиля или фурнитуры",CLIENT_EDUC_4:"Рекомендации продавца",CLIENT_OCCUPATION:"Занятость",CLIENT_OCCUP_WORKER:"Служащий",CLIENT_OCCUP_HOUSE:"Домохозяйка",CLIENT_OCCUP_BOSS:"Предприниматель",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсионер",CLIENT_INFO_SOURCE:"Источник информации",CLIENT_INFO_PRESS:"Пресса",CLIENT_INFO_FRIEND:"От знакомых",CLIENT_INFO_ADV:"Визуальная реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Cкидка",DISCOUNT_SELECT:"Выбор скидки",DISCOUNT_WITH:"С учетом скидки",DISCOUNT_WITHOUT:"Без учета скидки",DISCOUNT_WINDOW:"Скидка на изделие",DISCOUNT_ADDELEM:"Скидка на дополнительные элементы",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизация:",CHANGE_PASSWORD:"Изменить пароль",CHANGE_LANGUAGE:"Изменить язык",PRIVATE_INFO:"Личная информация:",USER_NAME:"Контактное лицо",CITY:"Город",ADD_PHONES:"Дополнительные телефоны:",INSERT_PHONE:"Добавить телефон",CLIENT_SUPPORT:"Подержка пользователей",LOGOUT:"Выйти из приложения",SAVE:"Сохранить",CURRENT_PASSWORD:"Текущий",NEW_PASSWORD:"Новый",CONFIRM_PASSWORD:"Подтвердить",NO_CONFIRM_PASS:"Неверный пароль"}})}(),function(){angular.module("BauVoiceApp").constant("ukrainianDictionary",{common_words:{CHANGE:"Змінити",MONTHS:"Січень, Лютий, Березень, Квітень, Травень, Червень, Липень, Серпень, Вересень, Жовтень, Листопад, Грудень",MONTHS_SHOT:"Січ, Лют, Бер, Квіт, Трав, Черв, Лип, Серп, Вер, Жовт, Лист, Груд",MONTHA:"Січня, Лютого, Березня, Квітня, Травня, Червня, Липня, Серпня, Вересня, Жовтня, Листопада, Грудня",MONTH_LABEL:"місяць",MONTHA_LABEL:"місяця",MONTHS_LABEL:"місяців",ALL:"Все",MIN:"мін.",MAX:"макс.",BUTTON_Y:"ТАК",BUTTON_N:"НІ",DELETE_PRODUCT_TITLE:"Видалення!",DELETE_PRODUCT_TXT:"Хочете видалити продукт?",DELETE_ORDER_TITLE:"Видалення замовлення!",DELETE_ORDER_TXT:"Хочете видалити замовлення?",COPY_ORDER_TITLE:"Копіювання!",COPY_ORDER_TXT:"Хочете зробити копію замовлення?",SEND_ORDER_TITLE:"На виробництво!",SEND_ORDER_TXT:"Хочете відправити замовлення на завод?",NEW_TEMPLATE_TITLE:"Зміна шаблона",TEMPLATE_CHANGES_LOST:"Зміни у шаблоні будуть загублені. Продовжити?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"та",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Увійти",PASS_CODE:"Повідомте цей код менеджерові.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заповніть це поле.",WRONG_LOGIN:'Для логина (пароля) используйте только цифры, латинские буквы и символы "@" , "." , "-" , "_" .',SHORT_NAME:"Слишком маленькое имя.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",LOGIN:"Логин",PASSWORD:"Пароль",MOBILE:"Мобільный телефон",REGISTRATION:"Регістрація",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нема зв`язку з iнтернетом!",IMPORT_DB:"Почалась загрузка Баз данних! Почекайте будь ласка!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"кліматична зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коефіцієнт повітрообміну",NAVMENU_GEOLOCATION:"Вибрати розташування",NAVMENU_CURRENT_GEOLOCATION:"Поточне розташування",NAVMENU_CURRENT_CALCULATION:"Поточний розрахунок",NAVMENU_CART:"Кошик розрахунку",NAVMENU_ADD_ELEMENTS:"Дод. елементи",NAVMENU_ALL_CALCULATIONS:"Історія замовлень",NAVMENU_SETTINGS:"Налаштування",NAVMENU_MORE_INFO:"Більше інформації",NAVMENU_VOICE_HELPER:"Голосове управління",NAVMENU_CALCULATIONS:"Розрахунки",NAVMENU_APPENDIX:"Додаток",NAVMENU_NEW_CALC:"+Новий розрахунок",CONFIGMENU_CONFIGURATION:"Конфігурація і розміри",CONFIGMENU_SIZING:"ширина * висота -",CONFIGMENU_PROFILE:"Профіль",CONFIGMENU_GLASS:"Склопакет",CONFIGMENU_HARDWARE:"Фурнітура",CONFIGMENU_LAMINATION:"Ламінація",CONFIGMENU_LAMINATION_TYPE:"в кімнаті / фасад",WHITE_LAMINATION:"Біла",CONFIGMENU_ADDITIONAL:"Додатково",CONFIGMENU_IN_CART:"В кошик",VOICE_SPEACH:"Говоріть...",COMMENT:"Залиште свою замітку про заказ тут.",ROOM_SELECTION:"Вибір шаблону",CONFIGMENU_NO_ADDELEMENTS:"Дод.елементи не вибранi",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для зміни розмірів натисніть сюди",PROFILE_TIP:"Для вибору профілю натисніть сюди",GLASS_TIP:"Для вибору склопакета натисніть сюди",SELECT_ALL:"Вибрати все",SELECT_GLASS_WARN:"Натисніть на склопакет, який хочете змінити"},panels:{TEMPLATE_WINDOW:"Вікно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Двері",TEMPLATE_BALCONY_ENTER:"Вихід на балкон",TEMPLATE_EDIT:"Редагувати",TEMPLATE_DEFAULT:"Проект за умовчанням",COUNTRY:"країна",BRAND:"торгова марка",HEAT_INSULATION:"теплоізоляція",NOICE_INSULATION:"шумоізоляція",CORROSION_COEFF:"aнтикорозійність",BURGLAR_COEFF:"протизламність",LAMINAT_INSIDE:"в кімнаті",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминевый порог, тип",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Вибрати",ADD:"Додати",GRID:"москітна сітка",VISOR:"Козирок",SPILLWAY:"водовідлив",OUTSIDE:"зовнішні укоси",LOUVERS:"жалюзі",INSIDE:"внутрішні укоси",CONNECTORS:"з`єднувач",FAN:"мікропровітрювання",WINDOWSILL:"підвіконня",HANDLEL:"ручка",OTHERS:"інше",GRIDS:"москітні сітки",VISORS:"козирки",SPILLWAYS:"водовідливи",WINDOWSILLS:"підвіконня",HANDLELS:"ручки",NAME_LABEL:"найменування",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"розмір",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"висота",OTHER_ELEMENTS1:"Ще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематично",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Додати компонент",CANCEL:"Відміна",TOTAL_PRICE_TXT:"Разом додаткових компонентів на суму:",ELEMENTS:"компонентів",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Виберіть елемент зі списку",EMPTY_ELEMENT:"Без элементу",TAB_NAME_SIMPLE_FRAME:"Проста конструкція",TAB_NAME_HARD_FRAME:"Складена конструкція",TAB_EMPTY_EXPLAIN:"Виберіть зі списку перший елемент, щоб почати складати конструкцію."},design:{SASH_SHAPE:"стулки",ANGEL_SHAPE:"кути",IMPOST_SHAPE:"імпости",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиція",UNITS_DESCRIP:"Як одиниці виміру використовуються міліметри",PROJECT_DEFAULT:"Проект за умовчанням",DOOR_CONFIG_LABEL:"конфігурація дверей",DOOR_CONFIG_DESCTIPT:"рама дверей",SASH_CONFIG_DESCTIPT:"стулка дверей",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"крок",LABEL_DOOR_TYPE:"Виберіть конструкцію рами дверей",LABEL_SASH_TYPE:"Виберіть тип стулки дверей",LABEL_HANDLE_TYPE:"Виберіть тип ручки",LABEL_LOCK_TYPE:"Виберіть тип замка",VOICE_SWITCH_ON:"голосовий режим включен",VOICE_NOT_UNDERSTAND:"Не зрозуміло",VOICE_SMALLEST_SIZE:"замалий розмір",VOICE_BIGGEST_SIZE:"завеликий розмір",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Недоступно!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",BY_WIDTH:"по ширине",BY_HEIGHT:"по высоте",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры.",DOOR_ERROR:"Системы входных дверей не настроены"},history:{SEARCH_PLACEHOLDER:"Пошук за ключовими словами",DRAFT_VIEW:"Чернетки розрахунків",HISTORY_VIEW:"Історія розрахунків",PHONE:"телефон",CLIENT:"клієнт",ADDRESS:"адреса",FROM:"від ",UNTIL:"до ",PAYMENTS:"платежів по",ALLPRODUCTS:"виробів",ON:"на",DRAFT:"Чернетка",DATE_RANGE:"Діапазон дат",ALL_TIME:"За весь час",SORTING:"Сортування",NEWEST_FIRST:"За часом: нові на початку",NEWEST_LAST:"За часом: нові у кінці",SORT_BY_TYPE:"По типах",SORT_SHOW:"Показати",SORT_SHOW_ACTIVE:"Тільки активні",SORT_SHOW_WAIT:"Тільки в очікуванні",SORT_SHOW_DONE:"Тільки завершені",BY_YOUR_REQUEST:"По вашому запиту",NOT_FIND:"нічого не знайдено",WAIT_MASTER:"очікує замірювача",INCLUDED:"включені",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Всі дод.елементи замовлення",ADD_ORDER:"Додати виріб",PRODUCT_QTY:"кількість виробів",LIGHT_VIEW:"Скорочений вид",FULL_VIEW:"Повний вид",DELIVERY:"Доставка",SELF_EXPORT:"самовивезення",FLOOR:"поверх",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажу",FREE:"безкоштовно",PAYMENT_BY_INSTALMENTS:"Розстрочка",WITHOUT_INSTALMENTS:"без розстрочки",DELIVERY_DATE:"Дата постачання",TOTAL_PRICE_LABEL:"Разом при постачанні на",MONTHLY_PAYMENT_LABEL:"щомісячних платежів по",DATE_DELIVERY_LABEL:"при постачанні на",FIRST_PAYMENT_LABEL:"Перший платіж",ORDER:"Замовити",MEASURE:"Заміряти",READY:"Готово",CALL_MASTER:"Виклик замірювача для розрахунку",CALL_MASTER_DESCRIP:"Для виклику замірювача нам потрібно дещо про вас знати. Обидва поля є обов`язковими для заповнення.",CLIENT_LOCATION:"Місце розташування",CLIENT_ADDRESS:"Адреса",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Оформлення замовлення для розрахунку",CALL_ORDER_DESCRIP:"Для того, щоб виконати замовлення, ми повинні дещо про вас знати.",CALL_ORDER_CLIENT_INFO:"Інформація про клієнта (заповнюйте обов`язково):",CLIENT_NAME:"Прізвище Ім`я По батькові",CALL_ORDER_DELIVERY:"Доставити замовлення на",CALL_ORDER_TOTAL_PRICE:"Загалом",CALL_ORDER_ADD_INFO:"Додатково:",CLIENT_EMAIL_ORDER:"Електронна пошта для отримання специфiкацii",CLIENT_EMAIL:"Електронна пошта",ADD_PHONE:"Додатковий телефон",CALL_CREDIT:"Оформлення розстрочки і замовлення для розрахунку",CALL_CREDIT_DESCRIP:"Для того, щоб оформити розстрочку і виконати замовлення, ми повинні дещо про вас знати.",CALL_CREDIT_CLIENT_INFO:"Розстрочка:",CREDIT_TARGET:"Мета оформлення розстрочки",CLIENT_ITN:"Індивідуальний податковий номер",CALL_START_TIME:"Дзвонити від:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редагувати список ...",ADDELEMENTS_PRODUCT_COST:"в одному виробі",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Невірна електронна пошта",LINK_BETWEEN_COUPLE:"між парою",LINK_BETWEEN_ALL:"між усіма",CLIENT_SEX:"Стать",CLIENT_SEX_M:"Ч",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Вік",CLIENT_AGE_OLDER:"старше 61",CLIENT_EDUCATION:"Головний критерій вашого вибору",CLIENT_EDUC_MIDLE:"Вигідна ціна",CLIENT_EDUC_SPEC:"Імідж виробника",CLIENT_EDUC_HIGH:"Бренд профілю або фурнітури",CLIENT_EDUC_4:"Рекомендації продавця",CLIENT_OCCUPATION:"Зайнятість",CLIENT_OCCUP_WORKER:"Службовець",CLIENT_OCCUP_HOUSE:"Домогосподарка",CLIENT_OCCUP_BOSS:"Підприэмиць",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсіонер",CLIENT_INFO_SOURCE:"Джерело информаціі",CLIENT_INFO_PRESS:"Преса",CLIENT_INFO_FRIEND:"Від знайомих",CLIENT_INFO_ADV:"Візуальна реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Знижка",DISCOUNT_SELECT:"Вибір знижки",DISCOUNT_WITH:"Зі знижкою",DISCOUNT_WITHOUT:"Без знижки",DISCOUNT_WINDOW:"Знижка на виріб",DISCOUNT_ADDELEM:"Знижка на додаткові елементи",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизація:",CHANGE_PASSWORD:"Змінити пароль",CHANGE_LANGUAGE:"Змінити мову",PRIVATE_INFO:"Особиста інформація:",USER_NAME:"Контактна особа",CITY:"Місто",ADD_PHONES:"Додаткові телефони:",INSERT_PHONE:"Додати телефон",CLIENT_SUPPORT:"Підтримка користувачів",LOGOUT:"Вийти з додатка",SAVE:"Зберегти",CURRENT_PASSWORD:"Поточний",NEW_PASSWORD:"Новий",CONFIRM_PASSWORD:"Підтвердити",NO_CONFIRM_PASS:"Невірний пароль"}})}();var speechKit=new NuanceSpeechKitPlugin;