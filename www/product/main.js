"use strict";function parseStringToDimension(e){e=e.toLowerCase();var t=e.split(" ");return t=updateDigits(t),t=updateFirstTwoToM(t),t=updateCM(t),t=updateMs(t),t=updateM(t),t=updateMM(t),e=summAll(t)}function updateDigits(e){for(var t=0;t<e.length;t++)"ноль"===e[t]&&(e[t]="0"),"раз"===e[t]&&(e[t]="1"),"один"===e[t]&&(e[t]="1"),"два"===e[t]&&(e[t]="2"),"три"===e[t]&&(e[t]="3"),"четыре"===e[t]&&(e[t]="4"),"пять"===e[t]&&(e[t]="5"),"шесть"===e[t]&&(e[t]="6"),"семь"===e[t]&&(e[t]="7"),"восемь"===e[t]&&(e[t]="8"),"девять"===e[t]&&(e[t]="9");return e}function updateCM(e){for(var t=0;t<e.length;t++)"и"===e[t]&&(e[t]="см"),t>0&&"см"===e[t]&&isNumber(e[t-1])&&(e[t-1]=10*parseInt(e[t-1],10),e.splice(t,1));return e}function updateMM(e){for(var t=0;t<e.length;t++)t>0&&"мм"===e[t]&&isNumber(e[t-1])&&e.splice(t,1);return e}function updateMs(e){for(var t=0;t<e.length;t++)("метр"===e[t]||"1м"===e[0]||"тыща"===e[t]||"тысяча"===e[t])&&(e[t]="м");return e}function updateM(e){for(var t=1;t<e.length;t++)"м"===e[t]&&isNumber(e[t-1])&&(e[t-1]=""+1e3*parseInt(e[t-1],10),e=upadtePostM(e,t),e.splice(t,1));return"м"===e[0]&&(e[0]="1000",e=upadtePostM(e,0)),e}function updateFirstTwoToM(e){return 2==e.length&&isNumber(e[0])&&isNumber(e[1])&&(e[2]=e[1],e[1]="м",parseInt(e[2],10)<100?e[3]="см":e[3]="мм"),e}function upadtePostM(e,t){return t===e.length-2?isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&(e[t+1]=""+10*parseInt(e[t+1],10)):t<e.length-1&&isNumber(e[t+1])&&parseInt(e[t+1],10)<100&&isNumber(e[t+2])&&(e[t+1]=""+10*parseInt(e[t+1],10)),e}function summAll(e){for(var t=0,i=0;i<e.length;i++)t+=parseInt(e[i],10);return""+t}function isNumber(e){return""+parseInt(e,10)===e}function OkResult(e){this.status=!0,this.data=e}function ErrorResult(e,t){this.status=!1,this.code=e,this.message=t,console.error(this.code,this.message)}function doInit(){var e="cvq.nmdp.nuancemobility.net";speechKit.initialize("Credentials",e,443,!1,function(e){printResult(e)},function(e){printResult(e)})}function doCleanup(){speechKit.cleanup(function(e){printResult(e)},function(e){printResult(e)})}function startRecognition(e,t,i){function r(){console.log("FORCE STOP"+s),s===!0&&(console.log("FORCE STOP"),n())}function n(){speechKit.stopRecognition(function(e){o(e)},function(e){console.log(e)})}function o(e){"RecoVolumeUpdate"==e.event?(console.log("RecoVolumeUpdate"),t&&t(e.volumeLevel)):a(e)}function a(t){return console.log("parseAndCallback"+t.event),void 0!=t.results&&t.results.length>0?(e(t.results[0].value),void(s=!1)):"RecoStarted"!=t.event?(e("0"),void(s=!1)):void 0}var s=!0,l=i;console.log("Before startRecognition"),speechKit.startRecognition("dictation",l,function(e){o(e)},function(e){o(e)}),console.log("After startRecognition");setTimeout(r,5e3)}function stopRecognition(){speechKit.stopRecognition(function(e){printRecoResult(e)},function(e){console.log(e)})}function getResult(){speechKit.getResults(function(e){printResult(e)},function(e){console.log("getResult"+e)})}function printResult(e){console.log("printResult "+e.event)}function playTTS(e,t){function i(e){console.log("printTTSResult "+JSON.stringify(e))}if(e.length>0){console.log("Playing TTS");var r=(document.getElementById("tts-language"),t);speechKit.playTTS(e,r,null,function(e){i(e)},function(e){i(e)})}}var isDevice=/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(window.navigator.userAgent)?1:0;!function(){function e(e,t,i,r,n,o,a,s,l){e.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl as loginPage",title:"Login"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl as mainPage",title:"Main"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl as settingsPage",title:"Settings"}).when("/change-pass",{templateUrl:"views/change-pass.html",controller:"ChangePassCtrl as passwordPage",title:"Change Pass"}).when("/change-lang",{templateUrl:"views/change-lang.html",controller:"ChangeLangCtrl as languagePage",title:"Change Language"}).when("/location",{templateUrl:"views/location.html",controller:"LocationCtrl as locationPage",title:"Location"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl as historyPage",title:"History"}).when("/cart",{templateUrl:"views/cart.html",controller:"CartCtrl as cartPage",title:"Cart"}).when("/design",{templateUrl:"views/design.html",controller:"DesignCtrl as designPage",title:"Design"}).otherwise({redirectTo:"/"}),i.translations("ru",n),i.translations("uk",r),i.translations("en",o),i.translations("de",a),i.translations("ro",s),i.translations("it",l),i.preferredLanguage("en").fallbackLanguage("en")}e.$inject=["$routeProvider","$locationProvider","$translateProvider","ukrainianDictionary","russianDictionary","englishDictionary","germanDictionary","romanianDictionary","italianDictionary"],/(chrome|Chromium|safari|firefox|Opera|Yandex|internet explorer|Seamonkey)/i.test(window.navigator.userAgent)&&(isDevice=0),console.log("isDevice===",isDevice),isDevice&&(window.PhonegapApp={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){doInit(),angular.element(document).ready(function(){angular.bootstrap(document,["BauVoiceApp","LoginModule"])})}},PhonegapApp.initialize()),angular.module("BauVoiceApp",["ngRoute","pascalprecht.translate","ngTouch","ngCordova","swipe","LoginModule","MainModule","DesignModule","CartModule","HistoryModule","SettingsModule"]).config(e),angular.module("LoginModule",[]),angular.module("MainModule",[]),angular.module("DesignModule",[]),angular.module("CartModule",[]),angular.module("HistoryModule",[]),angular.module("SettingsModule",[])}(),function(){angular.module("CartModule").controller("CartCtrl",["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor","CartStor","CartServ","CartMenuServ",function(e,t,i,r,n,o,a,s,l){function d(e){a.cart.allAddElements[e].length>0&&(m.config.detailProductIndex=e,m.config.isAddElementDetail=!0)}function c(){m.config.isAddElementDetail=!1}function u(){m.config.isCartLightView=!m.config.isCartLightView}function p(e){var t=e+1;m.config.isProductComment=m.config.isProductComment===t?0:t}function _(e){e?(m.config.isShowDiscInput=0,m.config.isShowDiscInputAdd=1):(m.config.isShowDiscInput=1,m.config.isShowDiscInputAdd=0)}function E(e){13===e.which&&l.closeDiscountBlock()}var m=this;m.constants=t,m.G=i,m.O=r,m.U=o,m.C=a,m.config={currDisConstr:0,isAddElementDetail:0,isCartLightView:0,detailProductIndex:0,isShowDiscInput:0,isShowDiscInputAdd:0,isProductComment:0,element:e("translate")("add_elements.ELEMENT"),elementa:e("translate")("add_elements.ELEMENTA"),elements:e("translate")("add_elements.ELEMENTS"),DELAY_START:t.STEP,typing:"on"},m.ALL_ADD_ELEMENTS=e("translate")("cart.ALL_ADD_ELEMENTS"),m.ADD_ORDER=e("translate")("cart.ADD_ORDER"),m.LETTER_M=e("translate")("common_words.LETTER_M"),m.HEATCOEF_VAL=e("translate")("mainpage.HEATCOEF_VAL"),m.MM=e("translate")("mainpage.MM"),m.CONFIGMENU_SIZING=e("translate")("mainpage.CONFIGMENU_SIZING"),m.CONFIGMENU_PROFILE=e("translate")("mainpage.CONFIGMENU_PROFILE"),m.CONFIGMENU_GLASS=e("translate")("mainpage.CONFIGMENU_GLASS"),m.CONFIGMENU_HARDWARE=e("translate")("mainpage.CONFIGMENU_HARDWARE"),m.CONFIGMENU_LAMINATION_TYPE=e("translate")("mainpage.CONFIGMENU_LAMINATION_TYPE"),m.CONFIGMENU_LAMINATION=e("translate")("mainpage.CONFIGMENU_LAMINATION"),m.CONFIGMENU_ADDITIONAL=e("translate")("mainpage.CONFIGMENU_ADDITIONAL"),m.PRODUCT_QTY=e("translate")("cart.PRODUCT_QTY"),m.ORDER_COMMENT=e("translate")("cart.ORDER_COMMENT"),m.LIGHT_VIEW=e("translate")("cart.LIGHT_VIEW"),m.DISCOUNT_SELECT=e("translate")("cart.DISCOUNT_SELECT"),m.MAX=e("translate")("common_words.MAX"),m.DISCOUNT_WINDOW=e("translate")("cart.DISCOUNT_WINDOW"),m.DISCOUNT_ADDELEM=e("translate")("cart.DISCOUNT_ADDELEM"),m.DISCOUNT=e("translate")("cart.DISCOUNT"),m.DISCOUNT_WITHOUT=e("translate")("cart.DISCOUNT_WITHOUT"),m.DISCOUNT_WITH=e("translate")("cart.DISCOUNT_WITH"),m.FULL_VIEW=e("translate")("cart.FULL_VIEW"),m.ADDELEMENTS_EDIT_LIST=e("translate")("cart.ADDELEMENTS_EDIT_LIST"),m.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),m.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),m.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),m.ADDELEMENTS_PRODUCT_COST=e("translate")("cart.ADDELEMENTS_PRODUCT_COST"),m.GRID=e("translate")("add_elements.GRID"),m.VISOR=e("translate")("add_elements.VISOR"),m.SPILLWAY=e("translate")("add_elements.SPILLWAY"),m.OUTSIDE=e("translate")("add_elements.OUTSIDE"),m.LOUVERS=e("translate")("add_elements.LOUVERS"),m.INSIDE=e("translate")("add_elements.INSIDE"),m.CONNECTORS=e("translate")("add_elements.CONNECTORS"),m.FAN=e("translate")("add_elements.FAN"),m.WINDOWSILL=e("translate")("add_elements.WINDOWSILL"),m.HANDLEL=e("translate")("add_elements.HANDLEL"),m.OTHERS=e("translate")("add_elements.OTHERS"),m.NAME_LABEL=e("translate")("add_elements.NAME_LABEL"),m.TOTAL_PRICE_TXT=e("translate")("add_elements.TOTAL_PRICE_TXT"),m.LINK_BETWEEN_COUPLE=e("translate")("cart.LINK_BETWEEN_COUPLE"),m.LINK_BETWEEN_ALL=e("translate")("cart.LINK_BETWEEN_ALL"),i.global.currOpenPage="cart",i.global.productEditNumber=0,l.joinAllAddElements(),l.calculateOrderPrice(),"main"===i.global.prevOpenPage&&(n.product=n.setDefaultProduct()),i.global.orderEditNumber||(a.cart.customer.customer_location=r.order.customer_location),m.decreaseProductQty=s.decreaseProductQty,m.increaseProductQty=s.increaseProductQty,m.addNewProductInOrder=s.addNewProductInOrder,m.clickDeleteProduct=s.clickDeleteProduct,m.editProduct=s.editProduct,m.showAddElementDetail=d,m.closeAddElementDetail=c,m.viewSwitching=u,m.switchProductComment=p,m.showAllAddElements=s.showAllAddElements,m.openDiscountBlock=l.openDiscountBlock,m.closeDiscountBlock=l.closeDiscountBlock,m.approveNewDisc=l.approveNewDisc,m.openDiscInput=_,m.pressEnterInDisc=E}])}(),function(){angular.module("SettingsModule").controller("ChangeLangCtrl",["$location","$translate","$timeout","globalConstants","GlobalStor","UserStor","NavMenuServ",function(e,t,i,r,n,o,a){function s(s){t.use(r.languages[s].label),o.userInfo.langLabel=r.languages[s].label,o.userInfo.langName=r.languages[s].name,n.global.isVoiceHelper&&(n.global.voiceHelperLanguage=a.setLanguageVoiceHelper()),i(function(){e.path("/main")},200)}function l(){e.path("/settings")}var d=this;d.constants=r,d.U=o,d.config={DELAY_START:r.STEP,typing:"on"},d.switchLang=s,d.gotoSettingsPage=l}])}(),function(){angular.module("SettingsModule").controller("ChangePassCtrl",["globalConstants","SettingServ","UserStor","localDB",function(e,t,i,r){function n(){s.config.oldPassword&&i.userInfo.password==r.md5(s.config.oldPassword)&&s.config.newPassword&&s.config.confirmPassword&&s.config.newPassword===s.config.confirmPassword?(s.config.isErrorPassword=0,i.userInfo.password=r.md5(s.config.newPassword),r.updateLocalServerDBs(r.tablesLocalDB.users.tableName,i.userInfo.id,{password:i.userInfo.password}).then(function(){s.config.newPassword=s.config.confirmPassword="",t.gotoSettingsPage()})):s.config.oldPassword&&i.userInfo.password==r.md5(s.config.oldPassword)?s.config.isErrorPassword=1:s.config.isErrorOldPassword=1}function o(){s.config.isErrorPassword=0}function a(){s.config.isErrorOldPassword=0}var s=this;s.U=i,s.config={DELAY_START:e.STEP,oldPassword:0,newPassword:0,confirmPassword:0,isErrorPassword:0,isErrorOldPassword:0,typing:"on"},s.saveNewPassword=n,s.gotoSettingsPage=t.gotoSettingsPage,s.checkError=o,s.checkErrorOld=a}])}(),function(){angular.module("DesignModule").controller("DesignCtrl",["$filter","$timeout","globalConstants","DesignServ","GlobalStor","ProductStor","DesignStor",function(e,t,i,r,n,o,a){function s(){a.design.activeMenuItem=0,a.design.activeSubMenuItem=0,a.design.isDropSubMenu=0}function l(){D.config.isDesignError=1,a.design.activeMenuItem=0,a.design.activeSubMenuItem=0,t(function(){D.config.isDesignError=0},800)}function d(e){if(a.design.activeSubMenuItem=e,!a.design.selectedGlass.length){var t=d3.selectAll("#tamlateSVG .glass");a.design.selectedGlass=t[0],t.classed("glass-active",!0)}}function c(e,t){t.preventDefault();var i,n=1,o=a.design.selectedGlass.length;if(1===e)for(s(),i=0;o>i;i+=1)r.deleteSash(a.design.selectedGlass[i]);else if((2===e||6===e||8===e)&&(a.design.isDropSubMenu===e?a.design.isDropSubMenu=0:(a.design.isDropSubMenu=e,n=0)),n)for(s(),i=0;o>i;i+=1)r.createSash(e,a.design.selectedGlass[i])}function u(e){var t=d3.selectAll("#tamlateSVG .corner_mark");t[0].length?(a.design.activeSubMenuItem=e,t.transition().duration(300).ease("linear").attr("r",50),a.design.selectedCorner=t[0],t.on("click",function(){r.hideCornerMarks();var e=d3.select(this).transition().duration(300).ease("linear").attr("r",50);a.design.selectedCorner.push(e[0][0])})):l()}function p(e,t){t.preventDefault(),s(),D.config.isTest=1,r.hideCornerMarks()}function _(e){var t=d3.selectAll("#tamlateSVG .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});if(t.length){if(a.design.activeSubMenuItem=e,!a.design.selectedArc.length){var i=d3.selectAll(t);a.design.selectedArc=i[0],i.classed("active_svg",!0)}}else l()}function E(e,t){t.preventDefault(),s(),D.config.isTest=1,r.deselectAllArc()}function m(e,i){i.preventDefault();var n,o=1,l=a.design.selectedImpost.length;if(1===e){if(s(),l){for(n=0;l>n;n+=1)r.deleteImpost(a.design.selectedImpost[n]);t(function(){a.design.isImpostDelete=0},300)}}else if(2===e||3===e){if((4===e||8===e||12===e)&&(a.design.isDropSubMenu===e?a.design.isDropSubMenu=0:(a.design.isDropSubMenu=e,o=0)),o)if(s(),l)r.deselectAllImpost();else{var d=a.design.selectedGlass.length;if(d)for(n=0;d>n;n+=1)r.createImpost(e,a.design.selectedGlass[n])}}else s(),D.config.isTest=1,r.deselectAllGlass(),r.deselectAllImpost()}function g(e){e.preventDefault(),s(),r.initMirror()}function f(e){e.preventDefault(),s(),r.positionAxises()}function T(e){e.preventDefault(),s(),r.positionGlasses()}function I(){D.config.isDoorConfig=1,r.closeSizeCaclulator()}function A(e){D.config.selectedStep2||(a.design.doorConfig.doorShapeIndex===e?(a.design.doorConfig.doorShapeIndex="",D.config.selectedStep1=0):(a.design.doorConfig.doorShapeIndex=e,D.config.selectedStep1=1))}function h(e){D.config.selectedStep3||(a.design.doorConfig.sashShapeIndex===e?(a.design.doorConfig.sashShapeIndex="",D.config.selectedStep2=0):(a.design.doorConfig.sashShapeIndex=e,D.config.selectedStep2=1))}function S(e){D.config.selectedStep4||(a.design.doorConfig.handleShapeIndex===e?(a.design.doorConfig.handleShapeIndex="",D.config.selectedStep3=0):(a.design.doorConfig.handleShapeIndex=e,D.config.selectedStep3=1))}function N(e){a.design.doorConfig.lockShapeIndex===e?(a.design.doorConfig.lockShapeIndex="",D.config.selectedStep4=0):(a.design.doorConfig.lockShapeIndex=e,D.config.selectedStep4=1)}function L(){D.config.selectedStep3?(D.config.selectedStep3=0,D.config.selectedStep4=0,a.design.doorConfig.lockShapeIndex="",a.design.doorConfig.handleShapeIndex=""):D.config.selectedStep2?(D.config.selectedStep2=0,a.design.doorConfig.sashShapeIndex=""):D.config.selectedStep1?(D.config.selectedStep1=0,a.design.doorConfig.doorShapeIndex=""):(D.config.isDoorConfig=0,a.design.doorConfig=a.setDefaultDoor())}function O(){r.rebuildSVGTemplate(),D.config.isDoorConfig=0}function y(e){if(a.design.tempSize.length)r.closeSizeCaclulator();else if(a.design.activeMenuItem=a.design.activeMenuItem===e?0:e,a.design.isDropSubMenu=0,r.hideCornerMarks(),r.deselectAllImpost(),4!==e&&r.deselectAllArc(),r.hideSizeTools(),a.design.activeMenuItem)switch(a.design.activeMenuItem){case 1:d(e),t(function(){a.design.isDropSubMenu=2},v),t(function(){a.design.isDropSubMenu=6},b),t(function(){a.design.isDropSubMenu=8},P),t(function(){a.design.isDropSubMenu=0},M);break;case 2:r.deselectAllGlass(),u(e);break;case 3:d(e),t(function(){a.design.isDropSubMenu=4},v),t(function(){a.design.isDropSubMenu=8},b),t(function(){a.design.isDropSubMenu=12},P),t(function(){a.design.isDropSubMenu=0},M);break;case 4:r.deselectAllGlass(),_(e);break;case 5:a.design.activeSubMenuItem=e}else a.design.activeSubMenuItem=0,r.deselectAllGlass(),r.deselectAllArc(),t(function(){a.design.isImpostDelete=0},300)}function C(){n.global.activePanel?(n.global.activePanel=0,r.initAllImposts(),r.initAllGlass(),r.initAllArcs(),r.initAllDimension()):n.global.activePanel=1}function R(){D.config.isTest=0,a.design.isDimExtra=0,a.design.isSquareExtra=0}var D=this,v=300,b=600,P=900,M=1200;D.constants=i,D.G=n,D.P=o,D.D=a,n.global.currOpenPage="design",D.config={isDesignError:0,isTest:0,isDoorConfig:0,selectedStep1:0,selectedStep2:0,selectedStep3:0,selectedStep4:0,DELAY_SHOW_FIGURE_ITEM:1e3,typing:"on"},D.IMPOST_SHAPE=e("translate")("design.IMPOST_SHAPE"),D.SASH_SHAPE=e("translate")("design.SASH_SHAPE"),D.ANGEL_SHAPE=e("translate")("design.ANGEL_SHAPE"),D.ARCH_SHAPE=e("translate")("design.ARCH_SHAPE"),D.POSITION_SHAPE=e("translate")("design.POSITION_SHAPE"),D.UNITS_DESCRIP=e("translate")("design.UNITS_DESCRIP"),D.PROJECT_DEFAULT=e("translate")("design.PROJECT_DEFAULT"),D.BACK=e("translate")("common_words.BACK"),D.SAVE=e("translate")("settings.SAVE"),D.CANCEL=e("translate")("add_elements.CANCEL"),D.DOOR_CONFIG_LABEL=e("translate")("design.DOOR_CONFIG_LABEL"),D.DOOR_CONFIG_DESCTIPT=e("translate")("design.DOOR_CONFIG_DESCTIPT"),D.SASH_CONFIG_DESCTIPT=e("translate")("design.SASH_CONFIG_DESCTIPT"),D.HANDLE_CONFIG_DESCTIPT=e("translate")("design.HANDLE_CONFIG_DESCTIPT"),D.LOCK_CONFIG_DESCTIPT=e("translate")("design.LOCK_CONFIG_DESCTIPT"),D.STEP=e("translate")("design.STEP"),D.LABEL_DOOR_TYPE=e("translate")("design.LABEL_DOOR_TYPE"),D.LABEL_SASH_TYPE=e("translate")("design.LABEL_SASH_TYPE"),D.LABEL_HANDLE_TYPE=e("translate")("design.LABEL_HANDLE_TYPE"),D.LABEL_LOCK_TYPE=e("translate")("design.LABEL_LOCK_TYPE"),D.NOT_AVAILABLE=e("translate")("design.NOT_AVAILABLE"),D.DIM_EXTRA=e("translate")("design.DIM_EXTRA"),D.SQUARE_EXTRA=e("translate")("design.SQUARE_EXTRA"),D.ROOM_SELECTION=e("translate")("mainpage.ROOM_SELECTION"),D.TEST_STAGE=e("translate")("design.TEST_STAGE"),D.VOICE_SPEACH=e("translate")("design.VOICE_SPEACH"),r.setDefaultTemplate(),4===o.product.construction_type&&r.setIndexDoorConfig(),t(function(){r.initAllImposts(),r.initAllGlass(),r.initAllArcs(),r.initAllDimension()},50),D.designSaved=r.designSaved,D.designCancel=r.designCancel,D.selectMenuItem=y,D.setDefaultConstruction=r.setDefaultConstruction,D.showTemplates=C,D.toggleDoorConfig=I,D.selectDoor=A,D.selectSash=h,D.selectHandle=S,D.selectLock=N,D.closeDoorConfig=L,D.saveDoorConfig=O,D.insertSash=c,D.insertCorner=p,D.insertImpost=m,D.insertArc=E,D.initMirror=g,D.positionAxis=f,D.positionGlass=T,D.stepBack=r.stepBack,D.closeAttantion=R}])}(),function(){angular.module("HistoryModule").controller("HistoryCtrl",["$filter","GlobalStor","UserStor","HistoryStor","HistoryServ",function(e,t,i,r,n){var o=this;o.G=t,o.H=r,o.U=i,o.FROM=e("translate")("history.FROM"),o.UNTIL=e("translate")("history.UNTIL"),o.DATE_RANGE=e("translate")("history.DATE_RANGE"),o.ALL_TIME=e("translate")("history.ALL_TIME"),o.SORTING=e("translate")("history.SORTING"),o.NEWEST_FIRST=e("translate")("history.NEWEST_FIRST"),o.NEWEST_LAST=e("translate")("history.NEWEST_LAST"),o.SORT_BY_TYPE=e("translate")("history.SORT_BY_TYPE"),o.SORT_SHOW=e("translate")("history.SORT_SHOW"),o.ALL=e("translate")("common_words.ALL"),o.SORT_SHOW_ACTIVE=e("translate")("history.SORT_SHOW_ACTIVE"),o.SORT_SHOW_WAIT=e("translate")("history.SORT_SHOW_WAIT"),o.SORT_SHOW_DONE=e("translate")("history.SORT_SHOW_DONE"),o.INCLUDED=e("translate")("history.INCLUDED"),o.DELIVERY=e("translate")("cart.DELIVERY"),o.AND=e("translate")("common_words.AND"),o.ASSEMBLING=e("translate")("cart.ASSEMBLING"),o.CLIENT=e("translate")("history.CLIENT"),o.PHONE=e("translate")("history.PHONE"),o.ADDRESS=e("translate")("history.ADDRESS"),o.PAYMENTS=e("translate")("history.PAYMENTS"),o.WAIT_MASTER=e("translate")("history.WAIT_MASTER"),o.ALLPRODUCTS=e("translate")("history.ALLPRODUCTS"),o.ON=e("translate")("history.ON"),o.CHANGE=e("translate")("common_words.CHANGE"),o.BY_YOUR_REQUEST=e("translate")("history.BY_YOUR_REQUEST"),o.NOT_FIND=e("translate")("history.NOT_FIND"),o.DRAFT_VIEW=e("translate")("history.DRAFT_VIEW"),o.DRAFT=e("translate")("history.DRAFT"),o.HISTORY_VIEW=e("translate")("history.HISTORY_VIEW"),t.global.currOpenPage="history",o.createdDate="created",n.downloadOrders(),o.toCurrentCalculation=n.toCurrentCalculation,o.sendOrderToFactory=n.sendOrderToFactory,o.makeOrderCopy=n.makeOrderCopy,o.clickDeleteOrder=n.clickDeleteOrder,o.editOrder=n.editOrder,o.orderPrint=n.orderPrint,o.viewSwitching=n.viewSwitching,o.orderSearching=n.orderSearching,o.orderDateSelecting=n.orderDateSelecting,o.openCalendarScroll=n.openCalendarScroll,o.orderSorting=n.orderSorting,o.sortingInit=n.sortingInit}])}(),function(){angular.module("SettingsModule").controller("LocationCtrl",["localDB","GeneralServ","loginServ","SettingServ","GlobalStor","OrderStor","UserStor",function(e,t,i,r,n,o,a){function s(o){l.userNewLocation=o.fullLocation,a.userInfo.therm_coeff_id?a.userInfo.heatTransfer=t.roundingValue(1/o.heatTransfer):a.userInfo.heatTransfer=o.heatTransfer,"settings"===n.global.currOpenPage?(a.userInfo.city_id=o.cityId,a.userInfo.cityName=o.cityName,a.userInfo.countryId=o.countryId,a.userInfo.fullLocation=o.fullLocation,a.userInfo.climaticZone=o.climaticZone,e.updateLocalServerDBs(e.tablesLocalDB.users.tableName,a.userInfo.id,{city_id:o.cityId})):"main"===n.global.currOpenPage&&i.setUserGeoLocation(o.cityId,o.cityName,o.climaticZone,a.userInfo.heatTransfer,o.fullLocation),n.global.startProgramm=!1,r.closeLocationPage()}var l=this;l.userNewLocation=angular.copy(o.order.customer_location),l.locations=n.global.locations.cities.filter(function(e){return e.countryId===a.userInfo.countryId}),l.closeLocationPage=r.closeLocationPage,l.selectCity=s}])}(),function(){angular.module("LoginModule").controller("LoginCtrl",["$location","$cordovaNetwork","$filter","globalConstants","localDB","loginServ","GlobalStor","UserStor",function(e,t,i,r,n,o,a,s){function l(){S.isStartImport=1,n.importAllDB(s.userInfo.phone,s.userInfo.device_code).then(function(e){e?(o.downloadAllData(),S.isStartImport=0):console.log("Error!")})}function d(e){for(var t,i=e.length;--i>-1;)for(t=a.global.locations.cities.length;--t>-1;)e[i].city_id===a.global.locations.cities[t].cityId&&(e[i].location=a.global.locations.cities[t].fullLocation);return e}function c(){o.setUserLocation(),+s.userInfo.factory_id>0?o.isLocalDBExist().then(function(e){S.isLocalDB=e,S.isLocalDB?o.downloadAllData():l(s.userInfo.factory_id)}):o.collectCityIdsAsCountry().then(function(e){n.importFactories(s.userInfo.phone,s.userInfo.device_code,e).then(function(e){a.global.isLoader=0,e.status?(S.factories=d(e.factories),S.isFactoryId=1):console.log("can not get factories!")})})}function u(e){e.locked?n.cleanLocalDB(n.tablesLocalDB).then(function(t){t&&n.createTablesLocalDB(n.tablesLocalDB).then(function(t){t&&(n.insertRowLocalDB(e,n.tablesLocalDB.users.tableName),angular.extend(s.userInfo,e),n.importLocation(s.userInfo.phone,s.userInfo.device_code).then(function(e){e&&o.prepareLocationToUse().then(function(){c()})}))})}):(a.global.isLoader=0,S.isUserNotActive=1)}function p(){n.importUser(S.user.phone).then(function(e){if(e.status){var t=angular.copy(e.user);console.log("USER!!!!!!!!!!!!",S.user.phone,e);var i=n.md5(S.user.password);i===t.password?u(t):(a.global.isLoader=0,S.isUserPasswordError=1)}else a.global.isLoader=0,S.isUserNotExist=1})}function _(){var t=e.search(),i=["7d537b6746f925b1703aefa9b8a9a4bc","3f5f0c7d46d318e026f9ba60dceffc65","799e078b084c6d57cea0b0d53a7e3008","9aefeef9c7e53f9de9bb36f32649dc3f","a2da6d85764368b24392740020efbc92","ceb60bfed037baaa484bd7b88d274c98","632b3213660804acb71fe045c6e321ed","04fc711301f3c784d66955d98d399afb","768c1c687efe184ae6dd2420710b8799","f7a5c99c58103f6b65c451efd0f81826","27701bd8dd141b953b94a5c9a44697c0","7f7d5f9f3a660f2b09e3aae62a15e29b","23ff17389acbfd020043268fb49e7048","cd714cc33cfd23e74f414cbb8b9787fe","2959f1aea8db0f7fbba61f0f8474d0ef","a28a19e19b283845c851b4876b97cef4","661e67f8ce5eaf9d63c1b5be6fce1afb","0653e359db756493450c3fb1fc6790b2","ec5fefce8d1d81849b47923d6d1b52c0","d4ccb0f347163d9ee1cd5a106e1ec48b","c500ea6c5baf3deb447be25b90cf5f1c","59a6670111970ede6a77e9b43a5c4787","266021e24dd0bfaaa96f2b5e21d7c800","b8c4b7f74db12fadbe2d979ed93f392b","2482b711a07d1da3efa733aa7014f947","573b8926f015aa477cb6604901b92aea","b54d11c86eb7c8955a50d20f6b3be2f2","3a55b7218a5ca395ac71b3ec9904b6ed","3615d9213b1b3d5fe760901f43a8405f","e50137601a90943ce98b03e90d73272e","d4651afb4e1c749f0bacc7ff5d101982","988a8fa4855bf7ea54057717655d3fc9"],r=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],o=["0950604425","0500505500","78124541170","22274313","9201922876","903528981","9301600441","000001","000002","000003","000007","000008","000009","000010","000011","000012","000013","000014","000015","000016","000017","000018","000019","000020","000021","000022","000023","000024","000025","000026","000027","000028"],s=i.length,l=0;if(t.access){for(;s>-1;)s-=1,i[s]===t.access&&(S.user.phone=r[s],S.user.password=o[s],l=1);l?S.user.phone&&S.user.password&&(a.global.isLoader=1,p()):n.importUser(t.access,1).then(function(e){var t=angular.copy(e.user);a.global.isLoader=1,u(t)})}}function E(){S.isOffline=!1}function m(e){S.submitted=1,e.$valid&&(a.global.isLoader=1,S.isOnline?(console.log("IMPORT"),p()):S.isLocalDB?(console.log("OFFLINE"),n.selectLocalDB(n.tablesLocalDB.users.tableName,{phone:S.user.phone}).then(function(e){if(e.length){var t=n.md5(S.user.password);t===e[0].password?e[0].locked?e[0].factory_id>0?(angular.extend(s.userInfo,e[0]),o.prepareLocationToUse().then(function(){o.setUserLocation(),o.downloadAllData()})):(a.global.isLoader=0,S.isOffline=1):(a.global.isLoader=0,S.isUserNotActive=1):(a.global.isLoader=0,S.isUserPasswordError=1)}else a.global.isLoader=0,S.isUserNotExist=1})):(a.global.isLoader=0,S.isOffline=1))}function g(){S.user.factoryId>0?S.isOnline?(a.global.isLoader=1,s.userInfo.factory_id=angular.copy(S.user.factoryId),n.updateLocalServerDBs(n.tablesLocalDB.users.tableName,s.userInfo.id,{factory_id:s.userInfo.factory_id}).then(function(){S.isFactoryId=0,l()})):S.isOffline=1:S.isFactoryNotSelect=1}function f(){S.isFactoryNotSelect=0,S.isFactoryId=0,delete S.user.factoryId}function T(){S.isOnline?o.isLocalDBExist().then(function(e){S.isLocalDB=e,S.isLocalDB?(a.global.isLoader=1,o.prepareLocationToUse(1).then(function(){a.global.isLoader=0,S.isRegistration=1})):(a.global.isLoader=1,n.cleanLocalDB(n.tablesLocalDB).then(function(e){e&&n.createTablesLocalDB(n.tablesLocationLocalDB).then(function(e){e&&n.importLocation().then(function(e){e&&o.prepareLocationToUse(1).then(function(){a.global.isLoader=0,S.isRegistration=1})})})})),S.user={}}):S.isOffline=1}function I(){S.user={},S.isRegistration=0}function A(e){S.submitted=!0,e.$valid&&(S.isOnline?(a.global.isLoader=1,n.importUser(S.user.phone).then(function(e){if(e.status)a.global.isLoader=0,S.isUserExist=1;else{var t={name:S.user.name,phone:S.user.phone,email:S.user.mail,cityId:S.user.city.id,password:n.md5(S.user.phone)};console.log("CREATE USER!!!!!!!!!!!!",t),n.createUserServer(t),a.global.isLoader=0,S.isSendEmail=1,I()}})):S.isOffline=1)}function h(){S.user.country?S.user.region||delete S.user.city:(delete S.user.region,delete S.user.city)}var S=this;S.G=a,S.isOnline=1,S.isOffline=0,S.isLocalDB=0,S.isRegistration=0,S.submitted=0,S.isUserExist=0,S.isUserNotExist=0,S.isUserPasswordError=0,S.isSendEmail=0,S.isUserNotActive=0,S.isFactoryId=0,S.isFactoryNotSelect=0,S.isStartImport=0,S.user={},S.factories=0,S.regPhone=r.REG_PHONE,S.regName=r.REG_NAME,S.regMail=r.REG_MAIL,S.OFFLINE=i("translate")("login.OFFLINE"),S.OK=i("translate")("common_words.OK"),S.USER_CHECK_EMAIL=i("translate")("login.USER_CHECK_EMAIL"),S.USER_NOT_EXIST=i("translate")("login.USER_NOT_EXIST"),S.USER_NOT_ACTIVE=i("translate")("login.USER_NOT_ACTIVE"),S.USER_PASSWORD_ERROR=i("translate")("login.USER_PASSWORD_ERROR"),S.IMPORT_DB=i("translate")("login.IMPORT_DB"),S.MOBILE=i("translate")("login.MOBILE"),S.EMPTY_FIELD=i("translate")("login.EMPTY_FIELD"),S.WRONG_NUMBER=i("translate")("login.WRONG_NUMBER"),S.SHORT_PHONE=i("translate")("login.SHORT_PHONE"),S.PASSWORD=i("translate")("login.PASSWORD"),S.SHORT_PASSWORD=i("translate")("login.SHORT_PASSWORD"),S.ENTER=i("translate")("login.ENTER"),S.REGISTRATION=i("translate")("login.REGISTRATION"),S.SELECT_FACTORY=i("translate")("login.SELECT_FACTORY"),S.SELECT_PRODUCER=i("translate")("login.SELECT_PRODUCER"),S.SELECT=i("translate")("common_words.SELECT"),S.USER_EXIST=i("translate")("login.USER_EXIST"),S.CLIENT_NAME=i("translate")("cart.CLIENT_NAME"),S.WRONG_NAME=i("translate")("login.WRONG_NAME"),S.SHORT_NAME=i("translate")("login.SHORT_NAME"),S.SELECT_COUNTRY=i("translate")("login.SELECT_COUNTRY"),S.SELECT_REGION=i("translate")("login.SELECT_REGION"),S.SELECT_CITY=i("translate")("login.SELECT_CITY"),S.CLIENT_EMAIL=i("translate")("cart.CLIENT_EMAIL"),S.WRONG_EMAIL=i("translate")("cart.WRONG_EMAIL"),S.switchRegistration=T,S.closeRegistration=I,S.enterForm=m,S.registrForm=A,S.selectLocation=h,S.selectFactory=g,S.closeFactoryDialog=f,S.closeOfflineAlert=E,o.getDeviceLanguage(),S.isOnline&&(o.initExport(),_())}])}(),function(){angular.module("MainModule").controller("MainCtrl",["loginServ","MainServ","SVGServ","GlobalStor","ProductStor","UserStor","AuxStor",function(e,t,i,r,n,o,a){var s=this;s.G=r,s.P=n,s.U=o,s.A=a,r.global.currOpenPage="main",r.global.isReport=0,r.global.startProgramm&&(t.saveUserEntry(),t.createOrderData(),t.setCurrDiscounts(),t.setCurrTemplate(),t.prepareTemplates(n.product.construction_type).then(function(){t.prepareMainPage(),t.laminatFiltering(),1===r.global.locations.cities.length&&e.downloadAllCities(1)})),r.global.productEditNumber&&(console.log("EDIT!!!!"),console.log("product = ",n.product),i.createSVGTemplate(n.product.template_source,n.product.profileDepths).then(function(e){n.product.template=e}))}])}(),function(){angular.module("MainModule").controller("addElementMenuCtrl",["$timeout","$filter","globalConstants","GlobalStor","ProductStor","UserStor","AuxStor","MainServ","AddElementMenuServ","AddElementsServ","DesignServ",function(e,t,i,r,n,o,a,s,l,d,c){function u(){a.aux.isTabFrame=!a.aux.isTabFrame}function p(t,i,r){var n;a.aux.isAddElement===t+"-"+i?a.aux.isAddElement=!1:a.aux.isAddElement===!1?(n=$(r.target).offset(),E.coordinats={top:n.top-17},e(function(){l.getAddElementPrice(t,i)},500)):(a.aux.isAddElement=!1,e(function(){n=$(r.target).offset(),E.coordinats={top:n.top-17}},500),e(function(){l.getAddElementPrice(t,i)},1e3))}function _(e,t,i){(r.global.isQtyCalculator||r.global.isSizeCalculator)&&l.finishCalculators(),a.aux.isAddElementListView?p(e,t,i):1===a.aux.isFocusedAddElement?n.product.is_addelem_only?l.chooseAddElement(e,t):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,c.initAllGlassXGrid()):l.chooseAddElement(e,t)}var E=this;E.constants=i,E.G=r,E.P=n,E.U=o,E.A=a,E.config={DELAY_START:i.STEP,DELAY_SHOW_ELEMENTS_MENU:10*i.STEP,typing:"on"},E.TIP=t("translate")("add_elements_menu.TIP"),E.EMPTY_ELEMENT=t("translate")("add_elements_menu.EMPTY_ELEMENT"),E.NAME_LABEL=t("translate")("add_elements.NAME_LABEL"),E.QTY_LABEL=t("translate")("add_elements.QTY_LABEL"),E.WIDTH_LABEL=t("translate")("add_elements.WIDTH_LABEL"),E.HEIGHT_LABEL=t("translate")("add_elements.HEIGHT_LABEL"),E.ADD=t("translate")("add_elements.ADD"),E.TAB_NAME_SIMPLE_FRAME=t("translate")("add_elements_menu.TAB_NAME_SIMPLE_FRAME"),E.TAB_NAME_HARD_FRAME=t("translate")("add_elements_menu.TAB_NAME_HARD_FRAME"),E.TAB_EMPTY_EXPLAIN=t("translate")("add_elements_menu.TAB_EMPTY_EXPLAIN"),
E.SELECT_ALL=t("translate")("mainpage.SELECT_ALL"),E.SELECT_GLASS_WARN=t("translate")("mainpage.SELECT_GLASS_WARN"),E.closeAddElementsMenu=l.closeAddElementsMenu,E.selectAddElement=_,E.chooseAddElement=l.chooseAddElement,E.chooseAddElementList=l.chooseAddElementList,E.deleteAddElement=l.deleteAddElement,E.showFrameTabs=u,E.initAddElementTools=d.initAddElementTools,E.showInfoBox=s.showInfoBox,E.closeQtyCaclulator=l.closeQtyCaclulator,E.setValueQty=l.setValueQty,E.pressCulculator=l.pressCulculator,E.confirmGrid=l.confirmGrid,E.setGridToAll=l.setGridToAll,E.closeGridSelectorDialog=l.closeGridSelectorDialog}])}(),function(){angular.module("CartModule").controller("CartMenuCtrl",["$filter","globalConstants","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ",function(e,t,i,r,n,o,a){function s(e){u.config.activeMenuItem=u.config.activeMenuItem===e?0:e}function l(){r.order.is_instalment=0,r.order.instalment_id=0,r.order.selectedInstalmentPeriod=0,r.order.selectedInstalmentPercent=0,u.config.activeMenuItem=0}function d(){o.cart.isMasterDialog=1}function c(){r.order.is_instalment?o.cart.isCreditDialog=1:o.cart.isOrderDialog=1}var u=this;u.G=i,u.U=n,u.O=r,u.C=o,u.config={activeMenuItem:!1,month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL"),DELAY_START:t.STEP,typing:"on"},u.DELIVERY=e("translate")("cart.DELIVERY"),u.SELF_EXPORT=e("translate")("cart.SELF_EXPORT"),u.FLOOR=e("translate")("cart.FLOOR"),u.ASSEMBLING=e("translate")("cart.ASSEMBLING"),u.WITHOUT_ASSEMBLING=e("translate")("cart.WITHOUT_ASSEMBLING"),u.FREE=e("translate")("cart.FREE"),u.PAYMENT_BY_INSTALMENTS=e("translate")("cart.PAYMENT_BY_INSTALMENTS"),u.WITHOUT_INSTALMENTS=e("translate")("cart.WITHOUT_INSTALMENTS"),u.DELIVERY_DATE=e("translate")("cart.DELIVERY_DATE"),u.FIRST_PAYMENT_LABEL=e("translate")("cart.FIRST_PAYMENT_LABEL"),u.DATE_DELIVERY_LABEL=e("translate")("cart.DATE_DELIVERY_LABEL"),u.MONTHLY_PAYMENT_LABEL=e("translate")("cart.MONTHLY_PAYMENT_LABEL"),u.TOTAL_PRICE_LABEL=e("translate")("cart.TOTAL_PRICE_LABEL"),u.ORDER=e("translate")("cart.ORDER"),u.MEASURE=e("translate")("cart.MEASURE"),u.selectMenuItem=s,u.closeInstalment=l,u.selectFloorPrice=a.selectFloorPrice,u.selectAssembling=a.selectAssembling,u.selectInstalment=a.selectInstalment,u.openMasterDialog=d,u.openOrderDialog=c,u.swipeDiscountBlock=a.swipeDiscountBlock}])}(),function(){angular.module("MainModule").controller("ConfigMenuCtrl",["$location","$filter","globalConstants","GeneralServ","MainServ","AddElementMenuServ","DesignServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,n,o,a,s,l,d,c,u){function p(t){(s.global.isQtyCalculator||s.global.isSizeCalculator)&&o.finishCalculators(),s.global.showRoomSelectorDialog=0,s.global.configMenuTips=0,s.global.isShowCommentBlock=0,s.global.isTemplateTypeMenu=0,r.stopStartProg(),n.setDefaultAuxParam(),s.global.showGlassSelectorDialog&&a.closeGlassSelectorDialog(1),1===t?(s.global.activePanel=0,c.design.isGlassExtra=0,e.path("/design")):s.global.activePanel=s.global.activePanel===t?0:t}function _(){n.inputProductInOrder()&&n.goToCart()}function E(){var e=m.config.TOOLTIP.length;s.global.configMenuTips+=1,s.global.configMenuTips===e&&(s.global.configMenuTips=0)}var m=this;m.constants=i,m.G=s,m.O=l,m.P=d,m.U=u,m.config={TOOLTIP:["",t("translate")("mainpage.TEMPLATE_TIP"),t("translate")("mainpage.PROFILE_TIP"),t("translate")("mainpage.GLASS_TIP")],DELAY_START:i.STEP,DELAY_SHOW_CONFIG_LIST:5*i.STEP,DELAY_SHOW_FOOTER:5*i.STEP,DELAY_TYPE_ITEM_TITLE:10*i.STEP,DELAY_SHOW_U_COEFF:20*i.STEP,DELAY_GO_TO_CART:2*i.STEP,typing:"on"},m.CONFIGMENU_CONFIGURATION=t("translate")("mainpage.CONFIGMENU_CONFIGURATION"),m.CONFIGMENU_SIZING=t("translate")("mainpage.CONFIGMENU_SIZING"),m.MM=t("translate")("mainpage.MM"),m.CONFIGMENU_PROFILE=t("translate")("mainpage.CONFIGMENU_PROFILE"),m.CONFIGMENU_GLASS=t("translate")("mainpage.CONFIGMENU_GLASS"),m.CONFIGMENU_HARDWARE=t("translate")("mainpage.CONFIGMENU_HARDWARE"),m.CONFIGMENU_LAMINATION=t("translate")("mainpage.CONFIGMENU_LAMINATION"),m.CONFIGMENU_LAMINATION_TYPE=t("translate")("mainpage.CONFIGMENU_LAMINATION_TYPE"),m.CONFIGMENU_ADDITIONAL=t("translate")("mainpage.CONFIGMENU_ADDITIONAL"),m.CONFIGMENU_NO_ADDELEMENTS=t("translate")("mainpage.CONFIGMENU_NO_ADDELEMENTS"),m.CONFIGMENU_IN_CART=t("translate")("mainpage.CONFIGMENU_IN_CART"),m.SAVE=t("translate")("settings.SAVE"),m.LETTER_M=t("translate")("common_words.LETTER_M"),m.HEATCOEF_VAL=t("translate")("mainpage.HEATCOEF_VAL"),m.selectConfigPanel=p,m.inputProductInOrder=_,m.showNextTip=E}])}(),function(){angular.module("MainModule").controller("NavMenuCtrl",["$location","$window","$filter","globalConstants","GeneralServ","NavMenuServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,n,o,a,s,l,d){function c(t){switch(p.activeMenuItem=p.activeMenuItem===t?0:t,t){case 1:n.stopStartProg(),e.path("/location");break;case 2:o.getCurrentGeolocation(),p.activeMenuItem=0;break;case 3:n.setPreviosPage(),e.path("/main");break;case 4:e.path("/cart");break;case 5:o.createAddElementsProduct();break;case 6:n.stopStartProg(),o.gotoHistoryPage();break;case 7:n.setPreviosPage(),e.path("/settings");break;case 8:p.activeMenuItem=0,d.userInfo.factoryLink&&d.userInfo.factoryLink.length&&n.goToLink(d.userInfo.factoryLink);break;case 9:o.switchVoiceHelper()}}function u(){p.activeMenuItem=0,o.clickNewProject()}var p=this;p.G=a,p.O=s,p.P=l,p.activeMenuItem=0,p.NAVMENU_GEOLOCATION=i("translate")("mainpage.NAVMENU_GEOLOCATION"),p.NAVMENU_CURRENT_GEOLOCATION=i("translate")("mainpage.NAVMENU_CURRENT_GEOLOCATION"),p.NAVMENU_CALCULATIONS=i("translate")("mainpage.NAVMENU_CALCULATIONS"),p.NAVMENU_CURRENT_CALCULATION=i("translate")("mainpage.NAVMENU_CURRENT_CALCULATION"),p.NAVMENU_CART=i("translate")("mainpage.NAVMENU_CART"),p.NAVMENU_ADD_ELEMENTS=i("translate")("mainpage.NAVMENU_ADD_ELEMENTS"),p.NAVMENU_ALL_CALCULATIONS=i("translate")("mainpage.NAVMENU_ALL_CALCULATIONS"),p.NAVMENU_APPENDIX=i("translate")("mainpage.NAVMENU_APPENDIX"),p.NAVMENU_SETTINGS=i("translate")("mainpage.NAVMENU_SETTINGS"),p.NAVMENU_MORE_INFO=i("translate")("mainpage.NAVMENU_MORE_INFO"),p.NAVMENU_VOICE_HELPER=i("translate")("mainpage.NAVMENU_VOICE_HELPER"),p.NAVMENU_NEW_CALC=i("translate")("mainpage.NAVMENU_NEW_CALC"),p.selectMenuItem=c,p.clickNewProject=u}])}(),function(){angular.module("CartModule").controller("AddElemCartCtrl",["globalConstants","GeneralServ","CartServ","CartMenuServ","OrderStor","CartStor","AuxStor",function(e,t,i,r,n,o,a){function s(){o.cart.isAllAddElems=0,o.cart.allAddElemsOrder.length=0,o.cart.addElemsOrderPriceTOTAL=0,o.cart.isSelectedProduct=0,a.aux.showAddElementsMenu=0,a.aux.addElementGroups.length=0,a.aux.searchingWord=""}function l(e){for(var t,i,r,o=n.order.products,a=o.length;--a>-1;)for(r=o[a].chosenAddElements,t=r.length;--t>-1;)if(i=r[t].length)if(e)for(;--i>-1;)r[t][i].id===e.id&&r[t][i].element_width===e.element_width&&r[t][i].element_height===e.element_height&&r[t].splice(i,1);else r[t].length=0}function d(e){l(e),r.joinAllAddElements(),o.cart.isExistAddElems?i.showAllAddElements():s(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function c(){l(),i.calculateAddElemsProductsPrice(),r.calculateOrderPrice(),r.joinAllAddElements(),s()}function u(){var e,t,i,r,a,s,l,d=o.cart.allAddElements.length;for(S.config.addElemUnitProducts.length=0,i=0;d>i;i+=1)for(l=o.cart.allAddElements[i],e=l.length,r=0;e>r;r+=1)if(l[r].id===S.config.selectedAddElemUnit.id&&l[r].element_width===S.config.selectedAddElemUnit.element_width&&l[r].element_height===S.config.selectedAddElemUnit.element_height)if(n.order.products[i].is_addelem_only)t={productIndex:i,is_addelem_only:n.order.products[i].is_addelem_only,name:l[r].name,element_width:l[r].element_width,element_height:l[r].element_height,element_qty:l[r].element_qty,elementPriceDis:l[r].elementPriceDis},S.config.addElemUnitProducts.push(t);else if(t={productIndex:i,is_addelem_only:n.order.products[i].is_addelem_only,element_qty:l[r].element_qty/n.order.products[i].product_qty},n.order.products[i].product_qty>1){for(a=[],s=+n.order.products[i].product_qty;--s>-1;)a.push(t);S.config.addElemUnitProducts.push(a)}else S.config.addElemUnitProducts.push(t)}function p(e){S.config.selectedAddElemUnit=e,u(),S.config.isAddElemUnitDetail=1}function _(){S.config.isAddElemUnitDetail=0,S.config.selectedAddElemUnit={id:0},S.config.isLinkExplodeMenu=0}function E(e){for(var t,i=n.order.products[e].chosenAddElements,r=i.length,o=S.config.selectedAddElemUnit;--r>-1;)if(t=i[r].length)for(;--t>-1;)i[r][t].id===o.id&&i[r][t].element_width===o.element_width&&i[r][t].element_height===o.element_height&&i[r].splice(t,1)}function m(){for(var e=o.cart.allAddElemsOrder,t=S.config.selectedAddElemUnit,i=e.length,r=1;--i>-1;)e[i].id===t.id&&(t.element_qty=angular.copy(e[i].element_qty),r-=1);r&&_()}function g(e,t){t?i.decreaseProductQty(e[0].productIndex):(E(e),r.joinAllAddElements()),o.cart.isExistAddElems?(i.showAllAddElements(),u(),m()):(_(),s()),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function f(e,t){S.config.isLinkExplodeMenu=!S.config.isLinkExplodeMenu,S.config.explodeMenuTop=t.center.y-50,S.config.explodeMenuLeft=t.center.x-30}function T(e,t){var o=d3.max(n.order.products.map(function(e){return e.product_id})),a=angular.copy(n.order.products[e[0].productIndex]),s=a.product_qty-1;if(a.product_qty=1,t)for(n.order.products[e[0].productIndex].product_qty=1;--s>-1;)i.addCloneProductInOrder(a,o);else n.order.products[e[0].productIndex].product_qty-=1,i.addCloneProductInOrder(a,o);S.config.isLinkExplodeMenu=0,r.joinAllAddElements(),i.showAllAddElements(),u(),m(),i.calculateAddElemsProductsPrice(1),r.calculateOrderPrice()}function I(){S.config.isSwipeProdSelector=!S.config.isSwipeProdSelector}function A(){for(var e=0,t=o.cart.selectedProducts.length;--t>-1;)o.cart.selectedProducts[t].length&&(e+=1);o.cart.isSelectedProduct=e?1:0}function h(e){var t=o.cart.selectedProducts[e].length;t?(o.cart.selectedProducts[e].length=0,A()):(o.cart.selectedProducts[e].push(1),o.cart.isSelectedProduct=1)}var S=this;S.constants=e,S.config={addElementDATA:t.addElementDATA,selectedAddElemUnit:{id:0},isAddElemUnitDetail:0,addElemUnitProducts:[],isLinkExplodeMenu:0,explodeMenuTop:0,explodeMenuLeft:0,isSwipeProdSelector:0},S.closeAllAddElemsPanel=s,S.deleteAllAddElems=c,S.deleteAddElemsItem=d,S.showAddElemUnitDetail=p,S.closeAddElemUnitDetail=_,S.deleteAddElemUnit=g,S.toggleExplodeLinkMenu=f,S.explodeUnitToProduct=T,S.swipeProductSelector=I,S.selectProductToAddElem=h}])}(),function(){angular.module("MainModule").controller("AddElementsListCtrl",["$filter","globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","GlobalStor","ProductStor","UserStor","AuxStor",function(e,t,i,r,n,o,a,s,l){var d=this;d.G=o,d.P=a,d.U=s,d.A=l,d.config={addElementDATA:i.addElementDATA,DELAY_START:t.STEP,DELAY_SHOW_ELEMENTS_MENU:6*t.STEP,filteredGroups:[],typing:"on"},d.NAME_LABEL=e("translate")("add_elements.NAME_LABEL"),d.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),d.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),d.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),d.TOTAL_PRICE_TXT=e("translate")("add_elements.TOTAL_PRICE_TXT"),d.SCHEME_VIEW=e("translate")("add_elements.SCHEME_VIEW"),d.selectAddElement=r.selectAddElement,d.initAddElementTools=r.initAddElementTools,d.deleteAddElement=n.deleteAddElement,d.deleteAllAddElements=n.deleteAllAddElements,d.closeAddElementListView=r.closeAddElementListView,d.pressCulculator=n.pressCulculator}])}(),function(){angular.module("MainModule").controller("AddElementsCtrl",["$filter","globalConstants","GeneralServ","AddElementsServ","AddElementMenuServ","GlobalStor","AuxStor","ProductStor",function(e,t,i,r,n,o,a,s){function l(){a.aux.isWindowSchemeDialog=!0}function d(){a.aux.isWindowSchemeDialog=!1}var c=this;c.constants=t,c.G=o,c.P=s,c.A=a,c.config={DELAY_START:t.STEP,addElementDATA:i.addElementDATA,DELAY_SHOW_INSIDESLOPETOP:20*t.STEP,DELAY_SHOW_INSIDESLOPERIGHT:22*t.STEP,DELAY_SHOW_INSIDESLOPELEFT:21*t.STEP,DELAY_SHOW_FORCECONNECT:30*t.STEP,DELAY_SHOW_BALCONCONNECT:35*t.STEP,DELAY_SHOW_BUTTON:40*t.STEP,DELAY_SHOW_ELEMENTS_MENU:12*t.STEP,typing:"on"},c.CHOOSE=e("translate")("add_elements.CHOOSE"),c.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),c.WIDTH_LABEL=e("translate")("add_elements.WIDTH_LABEL"),c.HEIGHT_LABEL=e("translate")("add_elements.HEIGHT_LABEL"),c.OTHER_ELEMENTS1=e("translate")("add_elements.OTHER_ELEMENTS1"),c.OTHER_ELEMENTS2=e("translate")("add_elements.OTHER_ELEMENTS2"),c.LIST_VIEW=e("translate")("add_elements.LIST_VIEW"),c.selectAddElement=r.selectAddElement,c.initAddElementTools=r.initAddElementTools,c.pressCulculator=n.pressCulculator,c.openAddElementListView=r.openAddElementListView,c.showWindowScheme=l,c.closeWindowScheme=d}])}(),function(){angular.module("MainModule").controller("GlassesCtrl",["$filter","globalConstants","MainServ","AnalyticsServ","DesignServ","SVGServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,n,o,a,s,l,d,c){function u(e,t){a.global.prevGlassId=angular.copy(a.global.selectGlassId),a.global.prevGlassName=angular.copy(a.global.selectGlassName),a.global.selectGlassId=e,a.global.selectGlassName=t,a.global.showGlassSelectorDialog=1,n.initAllGlassXGlass()}function p(){var e;d.design.selectedGlass.length=0,o.createSVGTemplate(l.product.template_source,l.product.profileDepths).then(function(t){l.product.template=angular.copy(t),e=l.product.hardware.id||0,i.preparePrice(l.product.template,l.product.profile.id,l.product.glass,e,l.product.lamination.lamination_in_id)})}function _(){i.setGlassToTemplateBlocks(l.product.template_source,a.global.selectGlassId,a.global.selectGlassName),p(),n.closeGlassSelectorDialog()}function E(){var e,t=d.design.selectedGlass.length,r=angular.copy(l.product.glass);if(t||i.setGlassToTemplateBlocks(l.product.template,a.global.selectGlassId,a.global.selectGlassName),i.setCurrentGlass(l.product,a.global.selectGlassId),i.checkGlassSizes(l.product.template),d.design.extraGlass.length)d.design.isGlassExtra=1,l.product.glass=angular.copy(r),i.setGlassToTemplateBlocks(l.product.template,a.global.prevGlassId,a.global.prevGlassName);else if(t){for(;--t>-1;)e=d.design.selectedGlass[t].attributes.block_id.nodeValue,i.setGlassToTemplateBlocks(l.product.template_source,a.global.selectGlassId,a.global.selectGlassName,e);p(),n.closeGlassSelectorDialog()}else _()}var m=this;m.constants=t,m.G=a,m.P=l,m.config={prevGlassId:0,prevGlassName:"",camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},m.ENERGY_SAVE=e("translate")("panels.ENERGY_SAVE"),m.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),m.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),m.selectGlass=u,m.confirmGlass=E,m.setGlassToAll=_,m.closeGlassSelectorDialog=n.closeGlassSelectorDialog,m.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("HardwaresCtrl",["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor","MainServ","AnalyticsServ",function(e,t,i,r,n,o,a,s){function l(e){n.product.hardware.id!==e&&(a.setCurrentHardware(n.product,e),a.preparePrice(n.product.template,n.product.profile.id,n.product.glass,n.product.hardware.id,n.product.lamination.lamination_in_id),s.sendAnalyticsData(o.userInfo.id,r.order.id,n.product.template_id,e,3))}var d=this;d.G=i,d.P=n,d.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.BRAND=e("translate")("panels.BRAND"),d.COUNTRY=e("translate")("panels.COUNTRY"),d.CORROSION_COEFF=e("translate")("panels.CORROSION_COEFF"),d.BURGLAR_COEFF=e("translate")("panels.BURGLAR_COEFF"),d.selectHardware=l,d.showInfoBox=a.showInfoBox}])}(),function(){angular.module("MainModule").controller("LaminationsCtrl",["$filter","globalConstants","MainServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,n,o,a){function s(e){for(var t=r.global.laminats.length;--t>-1;)r.global.laminats[t].type_id===e&&(r.global.laminats[t].isActive=!r.global.laminats[t].isActive,i.laminatFiltering())}function l(e){i.setCurrLamination(e),i.setProfileByLaminat(e).then(function(){})}var d=this;d.G=r,d.P=o,d.config={DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},d.LAMINAT_INSIDE=e("translate")("panels.LAMINAT_INSIDE"),d.LAMINAT_OUTSIDE=e("translate")("panels.LAMINAT_OUTSIDE"),d.selectLaminat=l,d.initLaminatFilter=s,d.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("ProfilesCtrl",["$filter","globalConstants","MainServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,n,o,a,s,l){function d(e){var t;a.product.profile.id!==e&&(t=angular.copy(a.product),i.setCurrentProfile(a.product,e).then(function(){i.saveTemplateInProduct(a.product.template_id).then(function(){i.checkGlassSizes(a.product.template),n.global.isSashesInTemplate&&i.checkHardwareSizes(a.product.template),a.product=angular.copy(t),s.design.extraGlass.length?s.design.isGlassExtra=1:s.design.extraHardware.length?s.design.isHardwareExtra=1:(i.setCurrLamination(),i.setCurrentProfile(a.product,e).then(function(){i.parseTemplate().then(function(){i.laminatFiltering(),r.sendAnalyticsData(l.userInfo.id,o.order.id,a.product.template_id,e,1)})}))})}))}var c=this;c.G=n,c.P=a,c.config={camera:e("translate")("panels.CAMERa"),camer:e("translate")("panels.CAMER"),camers:e("translate")("panels.CAMERs"),DELAY_START:5*t.STEP,DELAY_BLOCK:2*t.STEP,DELAY_TYPING:2.5*t.STEP,typing:"on"},c.COUNTRY=e("translate")("panels.COUNTRY"),c.HEAT_INSULATION=e("translate")("panels.HEAT_INSULATION"),c.NOICE_INSULATION=e("translate")("panels.NOICE_INSULATION"),c.selectProfile=d,c.showInfoBox=i.showInfoBox}])}(),function(){angular.module("MainModule").controller("TemplatesCtrl",["$location","$filter","globalConstants","MainServ","GeneralServ","TemplatesServ","optionsServ","GlobalStor","DesignStor","OrderStor","ProductStor",function(e,t,i,r,n,o,a,s,l,d,c){function u(){s.global.isTemplateTypeMenu=!s.global.isTemplateTypeMenu}function p(e){function i(){4===e&&r.setDefaultDoorConfig(),s.global.isChangedTemplate=0,o.initNewTemplateType(e)}s.global.isTemplateTypeMenu=0,"design"===s.global.currOpenPage&&(s.global.isChangedTemplate=l.design.designSteps.length?1:0),s.global.isChangedTemplate?n.confirmAlert(t("translate")("common_words.NEW_TEMPLATE_TITLE"),t("translate")("common_words.TEMPLATE_CHANGES_LOST"),i):o.initNewTemplateType(e)}var _=this;_.constants=i,_.G=s,_.O=d,_.P=c,_.config={DELAY_TEMPLATE_ELEMENT:5*i.STEP,typing:"on"},_.TEMPLATE_WINDOW=t("translate")("panels.TEMPLATE_WINDOW"),_.TEMPLATE_DOOR=t("translate")("panels.TEMPLATE_DOOR"),_.TEMPLATE_BALCONY_ENTER=t("translate")("panels.TEMPLATE_BALCONY_ENTER"),_.TEMPLATE_BALCONY=t("translate")("panels.TEMPLATE_BALCONY"),a.getTemplateImgIcons(function(e){e.status?_.templatesImgs=e.data.templateImgs:console.log(e)}),_.selectNewTemplate=o.selectNewTemplate,_.toggleTemplateType=u,_.selectNewTemplateType=p}])}(),function(){angular.module("MainModule").controller("AddElemGroupMenuCtrl",["AddElementsServ","AuxStor",function(e,t){var i=this;i.A=t,i.selectAddElement=e.selectAddElement}])}(),function(){angular.module("MainModule").controller("AlertCtrl",["$filter","GlobalStor",function(e,t){function i(){t.global.isAlert=0,t.global.confirmAction()}var r=this;r.G=t,r.BUTTON_N=e("translate")("common_words.BUTTON_N"),r.BUTTON_Y=e("translate")("common_words.BUTTON_Y"),r.clickYes=i}])}(),function(){angular.module("MainModule").controller("AttantCtrl",["$filter","DesignStor","HistoryStor",function(e,t,i){function r(){t.design.isGlassExtra=0,t.design.isHardwareExtra=0,i.history.isNoPrint=0}var n=this;n.D=t,n.H=i,n.NO_PRINT=e("translate")("history.NO_PRINT"),n.EXTRA_SASH=e("translate")("design.EXTRA_SASH"),n.CHANGE_SIZE=e("translate")("design.CHANGE_SIZE"),n.closeAttantion=r}])}(),function(){angular.module("MainModule").controller("infoBoxCtrl",["GlobalStor",function(e){function t(){e.global.isInfoBox=0,e.global.infoTitle="",e.global.infoImg="",e.global.infoLink="",e.global.infoDescrip=""}var i=this;i.G=e,i.closeInfoBox=t}])}(),function(){angular.module("MainModule").controller("LoaderCtrl",["GlobalStor",function(e){var t=this;t.G=e}])}(),function(){angular.module("CartModule").controller("OrderFormCtrl",["$filter","GlobalStor","OrderStor","UserStor","CartStor","CartMenuServ",function(e,t,i,r,n,o){function a(e){n.cart.submitted=!0,e.$valid&&o.sendOrder()}var s=this;s.O=i,s.C=n,s.U=r,s.config={month:e("translate")("common_words.MONTH_LABEL"),montha:e("translate")("common_words.MONTHA_LABEL"),months:e("translate")("common_words.MONTHS_LABEL")},s.CALL_ORDER=e("translate")("cart.CALL_ORDER"),s.CALL_ORDER_DESCRIP=e("translate")("cart.CALL_ORDER_DESCRIP"),s.CALL_ORDER_CLIENT_INFO=e("translate")("cart.CALL_ORDER_CLIENT_INFO"),s.CLIENT_NAME=e("translate")("cart.CLIENT_NAME"),s.EMPTY_FIELD=e("translate")("login.EMPTY_FIELD"),s.MOBILE=e("translate")("login.MOBILE"),s.WRONG_NUMBER=e("translate")("login.WRONG_NUMBER"),s.CALL_ORDER_DELIVERY=e("translate")("cart.CALL_ORDER_DELIVERY"),s.CLIENT_LOCATION=e("translate")("cart.CLIENT_LOCATION"),s.CLIENT_ADDRESS=e("translate")("cart.CLIENT_ADDRESS"),s.CLIENT_HOUSE=e("translate")("cart.CLIENT_HOUSE"),s.CLIENT_FLAT=e("translate")("cart.CLIENT_FLAT"),s.CLIENT_FLOOR=e("translate")("cart.CLIENT_FLOOR"),s.CALL_ORDER_TOTAL_PRICE=e("translate")("cart.CALL_ORDER_TOTAL_PRICE"),s.CALL_ORDER_ADD_INFO=e("translate")("cart.CALL_ORDER_ADD_INFO"),s.CLIENT_EMAIL=e("translate")("cart.CLIENT_EMAIL"),s.WRONG_EMAIL=e("translate")("cart.WRONG_EMAIL"),s.ADD_PHONE=e("translate")("cart.ADD_PHONE"),s.CLIENT_SEX=e("translate")("cart.CLIENT_SEX"),s.CLIENT_SEX_M=e("translate")("cart.CLIENT_SEX_M"),s.CLIENT_SEX_F=e("translate")("cart.CLIENT_SEX_F"),s.CLIENT_AGE=e("translate")("cart.CLIENT_AGE"),s.SELECT_PLACEHOLD=e("translate")("cart.SELECT_PLACEHOLD"),s.CLIENT_EDUCATION=e("translate")("cart.CLIENT_EDUCATION"),s.CLIENT_OCCUPATION=e("translate")("cart.CLIENT_OCCUPATION"),s.CLIENT_INFO_SOURCE=e("translate")("cart.CLIENT_INFO_SOURCE"),s.READY=e("translate")("cart.READY"),s.CALL_MASTER=e("translate")("cart.CALL_MASTER"),s.CALL_MASTER_DESCRIP=e("translate")("cart.CALL_MASTER_DESCRIP"),s.CALL_CREDIT=e("translate")("cart.CALL_CREDIT"),s.CALL_CREDIT_DESCRIP=e("translate")("cart.CALL_CREDIT_DESCRIP"),s.CALL_CREDIT_CLIENT_INFO=e("translate")("cart.CALL_CREDIT_CLIENT_INFO"),s.CREDIT_TARGET=e("translate")("cart.CREDIT_TARGET"),s.CLIENT_ITN=e("translate")("cart.CLIENT_ITN"),s.CALL_START_TIME=e("translate")("cart.CALL_START_TIME"),s.CALL_END_TIME=e("translate")("cart.CALL_END_TIME"),s.CALL_CREDIT_PARTIAL_PRICE=e("translate")("cart.CALL_CREDIT_PARTIAL_PRICE"),s.locations=t.global.locations.cities.filter(function(e){return e.countryId===r.userInfo.countryId}),s.submitForm=a,s.changeLocation=o.changeLocation,s.selectCity=o.selectCity,s.closeOrderDialog=o.closeOrderDialog}])}(),function(){angular.module("MainModule").controller("qtyCalculatorCtrl",["$filter","AddElementMenuServ",function(e,t){var i=this;i.QTY_LABEL=e("translate")("add_elements.QTY_LABEL"),i.setValueQty=t.setValueQty,i.closeQtyCaclulator=t.closeQtyCaclulator,i.pressCulculator=t.pressCulculator}])}(),function(){angular.module("MainModule").controller("ReportCtrl",["$rootScope","$filter","localDB","GeneralServ","GlobalStor","ProductStor","UserStor",function(e,t,i,r,n,o,a){function s(e){var t;t=e?o.product.report.filter(function(t){return t.element_group_id===e}):angular.copy(o.product.report),t.length?(c.config.reportPriceTotal=r.roundingValue(t.reduce(function(e,t){return{priceReal:e.priceReal+t.priceReal}}).priceReal,2),c.config.reportPriceBase=r.roundingValue(t.reduce(function(e,t){return{price:e.price+t.price}}).price,2)):(c.config.reportPriceTotal=0,c.config.reportPriceBase=0)}function l(e){s(e),e?c.config.reportFilterId=e:c.config.reportFilterId=void 0}function d(){n.global.isReport=!n.global.isReport,s(),n.global.isReport&&i.selectLocalDB(i.tablesLocalDB.elements_groups.tableName).then(function(e){c.config.reportMenu=e.filter(function(e){return e.position>0}),c.config.reportMenu.push({id:0,name:t("translate")("common_words.ALL")})}),e.$apply()}var c=this;c.G=n,c.P=o,c.U=a,c.config={reportMenu:[],reportFilterId:void 0,reportPriceTotal:0,reportPriceBase:0},c.NAME_LABEL=t("translate")("add_elements.NAME_LABEL"),c.ARTICUL_LABEL=t("translate")("add_elements.ARTICUL_LABEL"),c.QTY_LABEL=t("translate")("add_elements.QTY_LABEL"),c.SIZE_LABEL=t("translate")("add_elements.SIZE_LABEL"),c.LETTER_M=t("translate")("common_words.LETTER_M"),c.CALL_ORDER_TOTAL_PRICE=t("translate")("cart.CALL_ORDER_TOTAL_PRICE"),$(".main-content").off("keypress").keypress(function(e){(5===a.userInfo.user_type||7===a.userInfo.user_type)&&(82===e.keyCode||114===e.keyCode)&&d()}),c.sortReport=l}])}(),function(){angular.module("MainModule").controller("RoomInfoCtrl",["$filter","globalConstants","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,n,o){function a(){i.global.isShowCommentBlock||(i.global.showRoomSelectorDialog=1)}function s(){i.global.isShowCommentBlock=!i.global.isShowCommentBlock}var l=this;l.G=i,l.O=r,l.P=n,l.U=o,l.config={DELAY_SHOW_COEFF:20*t.STEP,DELAY_SHOW_ALLROOMS_BTN:15*t.STEP,typing:"on"},l.CLIMATE_ZONE=e("translate")("mainpage.CLIMATE_ZONE"),l.THERMAL_RESISTANCE=e("translate")("mainpage.THERMAL_RESISTANCE"),l.ROOM_SELECTION=e("translate")("mainpage.ROOM_SELECTION"),l.COMMENT=e("translate")("mainpage.COMMENT"),l.showRoomSelectorDialog=a,l.switchComment=s}])}(),function(){angular.module("MainModule").controller("RoomSelectorCtrl",["globalConstants","MainServ","TemplatesServ","GlobalStor","ProductStor","UserStor",function(e,t,i,r,n,o){function a(e){i.selectNewTemplate(r.global.rooms[e].template_id-1,e+1)}var s=this;s.G=r,s.P=n,s.U=o,s.config={DELAY_SHOW_ROOM:2*e.STEP},s.selectRoom=a,s.closeRoomSelectorDialog=t.closeRoomSelectorDialog}])}(),function(){angular.module("MainModule").controller("searchCtrl",["$filter","GlobalStor","AuxStor","HistoryStor","AddElementsServ","AddElementMenuServ",function(e,t,i,r,n,o){function a(){p.searchingWord="",i.aux.addElementGroups.length=0,i.aux.searchingWord=p.searchingWord,o.closeAddElementsMenu()}function s(){""!==p.searchingWord?(1===p.searchingWord.length&&n.createAddElementGroups(),i.aux.searchingWord=p.searchingWord):a()}function l(){p.searchingWord=p.searchingWord.slice(0,-1),""===p.searchingWord?a():i.aux.searchingWord=p.searchingWord}function d(){""!==p.searchingWord&&(r.history.searchingWord=p.searchingWord)}function c(){p.searchingWord="",r.history.searchingWord="",r.history.isOrderSearch=0}function u(){p.searchingWord=p.searchingWord.slice(0,-1),r.history.searchingWord=p.searchingWord}var p=this;p.G=t,p.CANCEL=e("translate")("add_elements.CANCEL"),"main"===t.global.currOpenPage||"cart"===t.global.currOpenPage?(p.placeholder=e("translate")("add_elements.INPUT_ADD_ELEMENT"),p.checkChanges=s,p.cancelSearching=a,p.deleteSearchChart=l):"history"===t.global.currOpenPage&&(p.placeholder=e("translate")("history.SEARCH_PLACEHOLDER"),p.checkChanges=d,p.cancelSearching=c,p.deleteSearchChart=u)}])}(),function(){angular.module("MainModule").controller("sizeCalculatorCtrl",["$filter","GlobalStor","DesignStor","AddElementMenuServ","DesignServ",function(e,t,i,r,n){var o=this;o.isDesignPage=!1,o.D=i,o.MIN=e("translate")("common_words.MIN"),o.MAX=e("translate")("common_words.MAX"),"main"===t.global.currOpenPage?(o.isDesignPage=!1,o.setValueSize=r.setValueSize,o.deleteLastNumber=r.deleteLastNumber,o.closeSizeCaclulator=r.closeSizeCaclulator):(o.isDesignPage=!0,o.setValueSize=n.setValueSize,o.deleteLastNumber=n.deleteLastNumber,o.closeSizeCaclulator=n.closeSizeCaclulator),o.pressCulculator=r.pressCulculator}])}(),function(){angular.module("MainModule").controller("UserInfoCtrl",["globalConstants","GlobalStor","UserStor",function(e,t,i){function r(){t.global.isNavMenu=!t.global.isNavMenu,t.global.isConfigMenu=!t.global.isConfigMenu}function n(){t.global.isNavMenu&&(t.global.isNavMenu=0,t.global.isConfigMenu=1)}function o(){t.global.isNavMenu||(t.global.isNavMenu=1,t.global.isConfigMenu=0)}var a=this;a.G=t,a.U=i,a.config={DELAY_SHOW_USER_INFO:40*e.STEP,typing:"on",checked:!1},a.swipeMainPage=r,a.swipeLeft=n,a.swipeRight=o}])}(),function(){angular.module("SettingsModule").controller("SettingsCtrl",["$location","$timeout","globalConstants","localDB","SettingServ","GlobalStor","OrderStor","ProductStor","AuxStor","UserStor",function(e,t,i,r,n,o,a,s,l,d){function c(e,t){var i={};switch(e){case"user-name":i.name=t;break;case"user-address":i.address=t;break;case"user-email":var n=O.config.mailReg.test(t);n?(O.config.isEmailError=0,i.email=t):O.config.isEmailError=1}$.isEmptyObject(i)||r.updateLocalServerDBs(r.tablesLocalDB.users.tableName,d.userInfo.id,i)}function u(e){t(function(){$("#"+e).find("input").focus()},100)}function p(){t(function(){$(".set-input-phone").focus()},100)}function _(e,t){O.config.selectedSetting=e,u(t.target.id)}function E(e,t){13===event.which&&c(e,t)}function m(e,t){c(e,t)}function g(){O.config.isEmailError=0}function f(e){var t=e.join(",");d.userInfo.city_phone=t,r.updateLocalServerDBs(r.tablesLocalDB.users.tableName,d.userInfo.id,{city_phone:t}),O.config.tempAddPhone=""}function T(){var e=O.config.regex.test(O.config.tempAddPhone);e?(O.config.isInsertPhone=0,O.config.isErrorPhone=0,O.config.addPhones.push(O.config.tempAddPhone),f(O.config.addPhones)):O.config.isErrorPhone=1}function I(){O.config.isInsertPhone=!O.config.isInsertPhone,O.config.tempAddPhone="",O.config.isErrorPhone=0,p()}function A(){O.config.tempAddPhone&&""!==O.config.tempAddPhone?T():I()}function h(){O.config.isInsertPhone=0,O.config.isErrorPhone=0}function S(){13===event.which&&T()}function N(e){O.config.addPhones.splice(e,1),f(O.config.addPhones)}function L(){d.userInfo=d.setDefaultUser(),o.global=o.setDefaultGlobal(),a.order=a.setDefaultOrder(),s.product=s.setDefaultProduct(),l.aux=l.setDefaultAuxiliary(),e.path("/login")}var O=this;O.U=d,O.config={DELAY_START:i.STEP,DELAY_SHOW_ICONS:10*i.STEP,isInsertPhone:!1,isEmailError:!1,addPhones:[],tempAddPhone:"",regex:i.REG_PHONE,mailReg:i.REG_MAIL,typing:"on"},o.global.currOpenPage="settings",d.userInfo.city_phone&&(O.config.addPhones=d.userInfo.city_phone.split(",")),O.changeSettingData=_,O.appendInputPhone=I,O.cancelAddPhone=h,O.saveChanges=E,O.saveChangesBlur=m,O.changeEmail=g,O.addNewPhone=A,O.saveChangesPhone=S,O.deletePhone=N,O.gotoPasswordPage=n.gotoPasswordPage,O.gotoLanguagePage=n.gotoLanguagePage,O.gotoLocationPage=n.gotoLocationPage,O.closeSettingsPage=n.closeSettingsPage,O.logOut=L}])}(),function(){angular.module("HistoryModule").directive("calendarScroll",["$filter","HistoryStor",function($filter,HistoryStor){return{restrict:"E",transclude:!0,replace:!0,scope:{calendarType:"=",orderType:"="},template:function(e,t){var i=+t.calendarType,r="",n="",o="",a="",s="",l="",d="",c="",u="",p=$filter("translate")("common_words.MONTHS"),_=p.split(", "),E=_.length,m=1,g=0,f=2010,T=(new Date).getFullYear()+1;for(i?(n="date_range_from",o="date_from",a="from_date",s="from_date_"+t.orderType,l="from_month",d="from_month_"+t.orderType,c="from_fullYear",u="from_fullYear_"+t.orderType):(n="date_range_to",o="date_to",a="to_date",s="to_date_"+t.orderType,l="to_month",d="to_month_"+t.orderType,c="to_fullYear",u="to_fullYear_"+t.orderType),r='<div class="date_range outside"><div class="date_range_container"><div class="'+n+'"><form name="'+o+'"><div class="lines"><div></div></div><select class="date" id="'+a+'" name="'+s+'">';32>m;)r+='<option value="'+m+'">'+m+"</option>",m+=1;for(r+='</select><select class="date" id="'+l+'" name="'+d+'">';E>g;)r+='<option value="'+g+'">'+_[g]+"</option>",g+=1;for(r+='</select><select class="date" id="'+c+'" name="'+u+'">';T>=f;)r+='<option value="'+f+'">'+f+"</option>",
f+=1;return r+="</select></form></div></div></div>"},link:function(scope){function getIndexForValue(e,t){for(var i=e.options.length;--i>-1;)if(e.options[i].value===t)return i}function update(e,t,i){$("."+e).find("#"+t+"_date").drum("setIndex",i.getDate()-1),$("."+e).find("#"+t+"_month").drum("setIndex",i.getMonth()),$("."+e).find("#"+t+"_fullYear").drum("setIndex",getIndexForValue($("#"+t+"_fullYear")[0],i.getFullYear()))}$(function(){$("select.date").drum({onChange:function(elem){var elemNameArr=elem.name.split("_"),section=elemNameArr[0],isOrder=+elemNameArr[2],arr={date:"setDate",month:"setMonth",fullYear:"setFullYear"},date=new Date,s,i;for(s in arr)i=$("form[name='date_"+section+"'] select[id='"+section+"_"+s+"']")[0].value,eval("date."+arr[s]+"("+i+")");isOrder?(update("history-view",section,date),"from"===section?HistoryStor.history.startDate=date:HistoryStor.history.finishDate=date):(update("draft-view",section,date),"from"===section?HistoryStor.history.startDateDraft=date:HistoryStor.history.finishDateDraft=date),scope.$apply()}});var now=new Date;update("history-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("history-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","from",new Date(now.getFullYear(),now.getMonth(),now.getDate())),update("draft-view","to",new Date(now.getFullYear(),now.getMonth(),now.getDate()))})}}}])}(),function(){angular.module("CartModule").directive("calendar",["$filter","CartMenuServ","GlobalStor","OrderStor",function(e,t,i,r){return{restrict:"E",transclude:!0,link:function(n,o){var a=new Date(r.order.order_date).getDate(),s=(new Date).setDate(a+i.global.deliveryCoeff.min_time-1),l=e("date")(r.order.new_delivery_date,"dd.MM.yyyy"),d=e("date")(r.order.delivery_date,"dd.MM.yyyy");$(function(){var i={flat:!0,format:"d.m.Y",locale:{days:[],daysShort:[],daysMin:[],monthsShort:[],months:[]},date:l,min:s,change:function(e){t.checkDifferentDate(d,e),n.$apply()}};i.locale.monthsShort=e("translate")("common_words.MONTHS_SHOT").split(", "),i.locale.months=e("translate")("common_words.MONTHS").split(", "),o.pickmeup(i)})}}}])}(),function(){angular.module("BauVoiceApp").directive("fileread",["SettingServ","UserStor",function(e,t){return{scope:{fileread:"="},link:function(i,r){r.bind("change",function(r){var n=new FormData,o=new FileReader;n.append("user",t.userInfo.id),n.append("file",r.target.files[0]),o.onload=function(t){i.$apply(function(){i.fileread=t.target.result,e.changeAvatar(i.fileread,n)})},o.readAsDataURL(r.target.files[0])})}}}])}(),function(){angular.module("BauVoiceApp").filter("locationFilter",["$filter",function(e){return function(t,i){var r,n=t.length,o=[];if(i&&i.length>2)for(r=i.toLowerCase();--n>-1;)0===t[n].fullLocation.toLowerCase().indexOf(r)&&o.push(t[n]);return o=e("orderBy")(o,"cityName",!1)}}])}(),function(){angular.module("HistoryModule").directive("orderDate",["$filter",function(e){return{restrict:"A",scope:{orderDate:"@",typeDate:"="},link:function(t,i,r){function n(t,r){var n,o,a,s,l;a=e("translate")("common_words.MONTHA").split(", "),""!==t?"order"===r?(n=t.split(" "),o=n[0].split("-"),l=parseInt(o[1],10)-1,s=o[2]+" "+a[l]+", "+o[0]):(o=t.split("/"),l=parseInt(o[0],10)-1,s=o[1]+" "+a[l]+", "+o[2]):(n=new Date,s=n.getDate()+" "+a[n.getMonth()]+", "+n.getFullYear()),r||""!==t?i.text(s):i.text("")}n(t.orderDate,t.typeDate),r.$observe("orderDate",function(){n(t.orderDate,t.typeDate)})}}}])}(),function(){angular.module("HistoryModule").filter("orderSorting",function(){return function(e,t){function i(e,t){angular.forEach(e,function(e){angular.equals(e.order_style,t)&&r.push(e)})}var r=[];return"type"===t?(i(e,"order"),i(e,"master"),i(e,"done")):"first"===t?(angular.forEach(e,function(e){r.push(e)}),r.reverse()):angular.forEach(e,function(e){r.push(e)}),r}})}(),function(){angular.module("BauVoiceApp").directive("priceFixed",function(){return{restrict:"A",scope:{priceFixed:"@",qtyElement:"@",currencyElement:"@"},link:function(e,t,i){function r(e,i,r){var n=parseFloat((Math.round(100*parseFloat(e))/100*i).toFixed(2))+" "+r;t.text(n)}r(e.priceFixed,e.qtyElement,e.currencyElement),i.$observe("qtyElement",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)}),i.$observe("priceFixed",function(){r(e.priceFixed,e.qtyElement,e.currencyElement)})}}})}(),function(){angular.module("BauVoiceApp").directive("price",["globalConstants","SoundPlayServ",function(e,t){function i(r,n){var o,a,s,l,d,c=2*e.STEP,u=64,p=n.find("#price").children(),_=p.length,E=$(p[0]).children().length,m=0;for(void 0!==r&&(t.playSound(),o="string"==typeof r?r.split(""):r.toFixed(2).split("")),i.revertDigitState=function(){a.animate({top:0},"fast")},i.initDigit=function(){s=o.shift()},i.animateDigit=function(){l="."===s?(E-1)*u:(parseInt(s,10)+1)*u,a.delay(m*c).animate({top:-l/16+"rem"},"fast")},d=_;d>0;d-=1)a=$(p[m]),d>o.length?i.revertDigitState():(i.initDigit(),i.animateDigit()),m+=1}return{restrict:"E",replace:!0,transclude:!0,scope:{priceValue:"=",priceCurrency:"="},template:'<div class="price clearfix" data-output="priceValue"><div id="price" class="price-value"><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div><div class="digit-cell"><div class="digit">&nbsp;</div><div class="digit">0</div><div class="digit">1</div><div class="digit">2</div><div class="digit">3</div><div class="digit">4</div><div class="digit">5</div><div class="digit">6</div><div class="digit">7</div><div class="digit">8</div><div class="digit">9</div><div class="digit">.</div></div></div><div id="currency" class="price-currency">{{ priceCurrency }}</div></div>',link:function(e,t,r){e.$watch(r.output,function(e){i(e,t)})}}}])}(),function(){angular.module("BauVoiceApp").directive("showDelay",function(){return{scope:{showDelay:"@"},link:function(e,t,i){function r(){var i="unvisible";setTimeout(function(){t.removeClass(i)},+e.showDelay)}i.$observe("showDelay",function(){r()})}}})}(),function(){angular.module("BauVoiceApp").directive("svgTemplate",["globalConstants","GeneralServ","ProductStor","SVGServ","DesignServ",function(e,t,i,r,n){return{restrict:"E",replace:!0,transclude:!0,scope:{typeConstruction:"=",template:"=",templateWidth:"=",templateHeight:"="},link:function(o,a){function s(){d3.select("#main_group").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(e,t,i,r,n,o,a,s,l,d){e.append("marker").classed(d,!0).attr({id:t,viewBox:i,refX:r,refY:n,markerWidth:a,markerHeight:s,orient:o}).append("path").attr("d",l)}function d(t,i,r,n){var a,s,l=-150,d=50,c=-20,u=160,p=70,_=20,E=[],m=[],g=[],f={x:t?c:i.from,y:t?i.from:c},T={x:t?l:i.from,y:t?i.from:l},I={x:t?c:i.to,y:t?i.to:c},A={x:t?l:i.to,y:t?i.to:l},h={x:t?l+d:i.from,y:t?i.from:l+d},S={x:t?l+d:i.to,y:t?i.to:l+d};E.push(f,T),m.push(I,A),g.push(h,S),a=r.append("g").attr({"class":function(){var e;return e=t?i.level?"dim_blockY":"dim_block dim_hidden":i.level?"dim_blockX":"dim_block dim_hidden"},block_id:i.blockId,axis:i.axis}),a.append("path").classed("size-line",!0).attr("d",n(m)),a.append("path").classed("size-line",!0).attr("d",n(E)),a.append("path").classed("size-line",!0).attr({d:n(g),"marker-start":function(){return t?"url(#dimVertR)":"url(#dimHorL)"},"marker-end":function(){return t?"url(#dimVertL)":"url(#dimHorR)"}}),s=a.append("g").classed("size-box",!0),"tamlateSVG"===o.typeConstruction&&s.append("rect").classed("size-rect",!0).attr({x:function(){return t?l-.8*u:(i.from+i.to-u)/2},y:function(){return t?(i.from+i.to-p)/2:l-.8*p},rx:_,ry:_}),s.append("text").text(i.text).attr({"class":function(){return o.typeConstruction===e.SVG_ID_EDIT?"size-txt-edit":"size-txt"},x:function(){return t?l-.8*u:(i.from+i.to-u)/2},y:function(){return t?(i.from+i.to-p)/2:l-.8*p},dx:80,dy:40,type:"line",block_id:i.blockId,size_val:i.text,min_val:i.minLimit,max_val:i.maxLimit,dim_id:i.dimId,from_point:i.from,to_point:i.to,axis:i.axis})}function c(t,i,r){var n,a,s=[],l=20,d={x:t.startX,y:t.startY},c={x:t.midleX,y:t.midleY};s.push(c,d),n=i.append("g").attr({"class":"dim_block_radius",block_id:t.blockId}),n.append("path").classed("size-line",!0).attr({d:r(s),style:"stroke: #000;","marker-end":"url(#dimArrow)"}),a=n.append("g").classed("size-box",!0),o.typeConstruction===e.SVG_ID_EDIT&&a.append("rect").classed("size-rect",!0).attr({x:t.midleX,y:t.midleY,rx:l,ry:l}),a.append("text").text(t.radius).attr({"class":"size-txt-edit",x:t.midleX,y:t.midleY,dx:80,dy:40,type:"curve",block_id:t.blockId,size_val:t.radius,min_val:t.radiusMax,max_val:t.radiusMin,dim_id:t.id,chord:t.lengthChord})}function u(u,p,_){if(u&&!$.isEmptyObject(u)){var E,m,g,f,T,I,A,h,S,N,L=document.createElement("div"),O=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear"),y=.7,C={x:0,y:0};if(o.typeConstruction===e.SVG_CLASS_ICON?y=1:o.typeConstruction===e.SVG_ID_EDIT&&(y=.6),E=d3.select(L).append("svg").attr({width:p,height:_}),o.typeConstruction===e.SVG_CLASS_ICON?E.attr("class",o.typeConstruction):E.attr("id",o.typeConstruction),T=r.collectAllPointsOut(u.details),I=t.getMaxMinCoord(T),A=r.setTemplateScale(I,p,_,y),o.typeConstruction!==e.SVG_CLASS_ICON&&(C=r.setTemplatePosition(I,p,_,A)),m=E.append("g").attr({id:"main_group",transform:"translate("+C.x+", "+C.y+") scale("+A+","+A+")"}),o.typeConstruction===e.SVG_ID_EDIT&&E.call(d3.behavior.zoom().translate([C.x,C.y]).scale(A).scaleExtent([0,8]).on("zoom",s)),o.typeConstruction!==e.SVG_CLASS_ICON){var R=m.append("defs"),D="M4.5,0C2.015,0,0,2.015,0,4.5v6c0,1.56,0.795,2.933,2,3.74V7.5C2,6.119,3.119,5,4.5,5S7,6.119,7,7.5v6.74c1.205-0.807,2-2.18,2-3.74v-6C9,2.015,6.985,0,4.5,0zM7,26.5C7,27.881,5.881,29,4.5,29l0,0C3.119,29,2,27.881,2,26.5v-19C2,6.119,3.119,5,4.5,5l0,0C5.881,5,7,6.119,7,7.5V26.5z";l(R,"dimHorL","-5, -5, 1, 8",-5,-2,0,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),l(R,"dimHorR","-5, -5, 1, 8",-5,-2,180,50,50,"M 0,0 L -4,-2 L0,-4 z","size-line"),l(R,"dimVertL","4.2, -1, 8, 9",5,2,90,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),l(R,"dimVertR","4.2, -1, 8, 9",5,2,270,100,60,"M 0,0 L 4,2 L0,4 z","size-line"),l(R,"dimArrow","4.2, -1, 8, 9",5,2,"auto",100,60,"M 0,0 L 4,2 L0,4 z","size-line"),l(R,"handleR","0 -1 9 32",4,23,90,29,49,D,"handle-mark"),l(R,"handleL","0 -1 9 32",5,23,270,29,49,D,"handle-mark"),l(R,"handleU","0 -1 9 32",-10,10,270,29,49,D,"handle-mark"),l(R,"handleD","0 -1 9 32",20,10,270,29,49,D,"handle-mark"),i.product.lamination.img_in_id>1&&R.append("pattern").attr("id","laminat").attr("patternUnits","userSpaceOnUse").attr("width",600).attr("height",400).append("image").attr("xlink:href","img/lamination/"+i.product.lamination.img_in_id+".jpg").attr("width",600).attr("height",400)}for(g=m.append("g").attr({id:"elem_group"}),f=m.append("g").attr({id:"dim_group"}),h=u.details.length,S=1;h>S;S+=1)g.selectAll("path."+u.details[S].id).data(u.details[S].parts).enter().append("path").attr({block_id:u.details[S].id,parent_id:u.details[S].parent,"class":function(t){var i;return i=o.typeConstruction===e.SVG_CLASS_ICON?"glass"===t.type?"glass-icon":"frame-icon":t.doorstep?"doorstep":"glass"===t.type?"glass":"frame"},item_type:function(e){return e.type},item_dir:function(e){return e.dir},item_id:function(e){return e.points[0].id},d:function(e){return e.path},fill:function(e){var t;return t=i.product.lamination.img_in_id>1?"glass"!==e.type?"url(#laminat)":"":"#f9f9f9"}}),o.typeConstruction!==e.SVG_CLASS_ICON&&(u.details[S].sashOpenDir&&g.selectAll("path.sash_mark."+u.details[S].id).data(u.details[S].sashOpenDir).enter().append("path").classed("sash_mark",!0).attr({d:function(e){return O(e.points)},"marker-mid":function(e){var t,i=u.details[S].sashOpenDir.length;return u.details[S].handlePos?(1===i?2===u.details[S].handlePos?t="url(#handleR)":1===u.details[S].handlePos?t="url(#handleU)":4===u.details[S].handlePos?t="url(#handleL)":3===u.details[S].handlePos&&(t="url(#handleD)"):2===i&&(e.points[1].fi<45||e.points[1].fi>315?t="url(#handleR)":e.points[1].fi>135&&e.points[1].fi<225&&(t="url(#handleL)")),t):void 0}}),o.typeConstruction===e.SVG_ID_EDIT&&1===u.details[S].level&&(N=u.details[S].pointsOut.filter(function(e){return e.corner>0}),g.selectAll("circle.corner_mark."+u.details[S].id).data(N).enter().append("circle").attr({block_id:u.details[S].id,"class":"corner_mark",parent_id:function(e){return e.id},cx:function(e){return e.x},cy:function(e){return e.y},r:0})),"tamlateGlassSVG"===o.typeConstruction&&(u.details[S].children.length||g.append("text").text(u.details[S].glassTxt).attr({block_id:u.details[S].id,"class":"glass-txt",x:u.details[S].center.x,y:u.details[S].center.y})),"tamlateGridSVG"===o.typeConstruction&&!u.details[S].children.length&&u.details[S].gridId&&g.append("text").text(u.details[S].gridTxt).attr({"class":"glass-txt",x:u.details[S].center.x,y:u.details[S].center.y}));if(o.typeConstruction!==e.SVG_CLASS_ICON){var v,b,P,M=u.dimension.dimX.length,x=u.dimension.dimY.length,G=u.dimension.dimQ.length;for(v=0;M>v;v+=1)d(0,u.dimension.dimX[v],f,O);for(b=0;x>b;b+=1)d(1,u.dimension.dimY[b],f,O);for(P=0;G>P;P+=1)c(u.dimension.dimQ[P],f,O)}a.html(L),n.removeAllEventsInSVG(),o.typeConstruction===e.SVG_ID_EDIT&&(n.initAllImposts(),n.initAllGlass(),n.initAllArcs(),n.initAllDimension())}}o.$watch("template",function(){u(o.template,o.templateWidth,o.templateHeight)})}}}])}(),function(){angular.module("BauVoiceApp").directive("typing",function(){return{scope:{output:"@",typingDelay:"@"},link:function(e,t,i){function r(){setTimeout(function(){var i,r,n=e.output,o="",a=15;i=setInterval(function(){r=o.length<n.length,r?o+=n[o.length]:clearInterval(i),t.text(o)},a)},+e.typingDelay)}i.$observe("typing",function(e){"on"===e.toString()&&r()}),i.$observe("output",function(){r()})}}})}();var NuanceSpeechKitPlugin=function(){};NuanceSpeechKitPlugin.prototype.initialize=function(e,t,i,r,n,o){return Cordova.exec(n,o,"PhoneGapSpeechPlugin","initSpeechKit",[e,t,i,r])},NuanceSpeechKitPlugin.prototype.cleanup=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","cleanupSpeechKit",[])},NuanceSpeechKitPlugin.prototype.startRecognition=function(e,t,i,r){return Cordova.exec(i,r,"PhoneGapSpeechPlugin","startRecognition",[e,t])},NuanceSpeechKitPlugin.prototype.stopRecognition=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopRecognition",[])},NuanceSpeechKitPlugin.prototype.getResults=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","getRecoResult",[])},NuanceSpeechKitPlugin.prototype.playTTS=function(e,t,i,r,n){return Cordova.exec(r,n,"PhoneGapSpeechPlugin","startTTS",[e,t,i])},NuanceSpeechKitPlugin.prototype.stopTTS=function(e,t){return Cordova.exec(e,t,"PhoneGapSpeechPlugin","stopTTS",[])},String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)},function(){angular.module("MainModule").factory("AddElementMenuServ",["$q","$timeout","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor","DesignStor","UserStor","localDB","GeneralServ","MainServ","SVGServ","DesignServ","AnalyticsServ","CartServ","CartMenuServ",function(e,t,i,r,n,o,a,s,l,d,c,u,p,_,E,m,g){function f(){a.aux.auxParameter=0,i.global.isQtyCalculator=0,i.global.isSizeCalculator=0,i.global.isWidthCalculator=0}function T(e){var i,n=e.chosenAddElements.length;for(e.addelem_price=0,e.addelemPriceDis=0;--n>-1;)if(i=e.chosenAddElements[n].length,i>0)for(;--i>-1;)e.addelem_price+=e.chosenAddElements[n][i].element_qty*e.chosenAddElements[n][i].element_price;e.addelem_price=c.roundingValue(e.addelem_price),e.addelemPriceDis=c.setPriceDis(e.addelem_price,r.order.discount_addelem),t(function(){u.setProductPriceTOTAL(e)},50)}function I(e){var t=a.aux.currentAddElementId,i=a.aux.auxParameter.split("-")[0]-1;return n.product.chosenAddElements[i][t].element_qty<2&&0>e?!1:n.product.chosenAddElements[i][t].element_qty<6&&-5==e?!1:void(a.aux.tempSize.length?(n.product.chosenAddElements[i][t].element_qty=parseInt(a.aux.tempSize.join(""),10)+e,a.aux.tempSize.length=0):n.product.chosenAddElements[i][t].element_qty+=e)}function A(){f(),a.aux.tempSize.length=0,T(n.product)}function h(e,t,n){var o={currencyId:l.userInfo.currencyId,elementId:n[e][t].id,elementWidth:n[e][t].element_width/1e3,elementHeight:n[e][t].element_height/1e3};return d.getAdditionalPrice(o).then(function(o){return o&&(n[e][t].element_price=c.roundingValue(c.addMarginToPrice(o.priceTotal,i.global.margins.margin),2),n[e][t].elementPriceDis=c.roundingValue(c.setPriceDis(n[e][t].element_price,r.order.discount_addelem)),a.aux.currAddElementPrice=angular.copy(n[e][t].elementPriceDis)),o})}function S(){var e=a.aux.currentAddElementId,t=a.aux.auxParameter.split("-")[0]-1;a.aux.tempSize.length=0,f(),h(t,e,n.product.chosenAddElements).then(function(){T(n.product)})}function N(){var e="",t=a.aux.currentAddElementId,r=a.aux.auxParameter.split("-")[0]-1;e=parseInt(a.aux.tempSize.join(""),10),i.global.isQtyCalculator?n.product.chosenAddElements[r][t].element_qty=e:i.global.isSizeCalculator&&(i.global.isWidthCalculator?n.product.chosenAddElements[r][t].element_width=e:n.product.chosenAddElements[r][t].element_height=e)}function L(e){var t=a.aux.tempSize.length;(4===t||1===t&&!a.aux.tempSize[0])&&(a.aux.tempSize.length=0),"0"===e?t&&a.aux.tempSize[0]&&(a.aux.tempSize.push(e),N()):"00"===e?t&&a.aux.tempSize[0]&&(3>t?a.aux.tempSize.push(0,0):3===t&&a.aux.tempSize.push(0),N()):(a.aux.tempSize.push(e),N())}function O(){a.aux.tempSize.pop(),a.aux.tempSize.length<1&&a.aux.tempSize.push(0),N()}function y(e){var t;if(13===e.which)i.global.isQtyCalculator?A():i.global.isSizeCalculator&&S();else if(8===e.which)O();else{switch(e.which){case 48:case 96:t=0;break;case 49:case 97:t=1;break;case 50:case 98:t=2;break;case 51:case 99:t=3;break;case 52:case 100:t=4;break;case 53:case 101:t=5;break;case 54:case 102:t=6;break;case 55:case 103:t=7;break;case 56:case 104:t=8;break;case 57:case 105:t=9}void 0!==t&&L(t)}}function C(){i.global.isSizeCalculator?S():i.global.isQtyCalculator&&A(),a.aux.currentAddElementId=0}function R(){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&C(),a.aux.isFocusedAddElement=0,a.aux.isTabFrame=0,a.aux.isGridSelectorDialog=0,a.aux.selectedGrid=0,a.aux.showAddElementsMenu=0,a.aux.isAddElement=0}function D(e){var t;if(n.product.template_source.details[e].gridId)for(t=n.product.chosenAddElements[0].length;--t>-1;)n.product.chosenAddElements[0][t].block_id===n.product.template_source.details[e].id&&(1===n.product.chosenAddElements[0][t].element_qty?n.product.chosenAddElements[0].splice(t,1):n.product.chosenAddElements[0][t].element_qty>1&&(n.product.chosenAddElements[0][t].element_qty-=1))}function v(e,t,i){var r,o=n.product.template.details[t].pointsIn.map(function(e){return e.x}),s=n.product.template.details[t].pointsIn.map(function(e){return e.y});return n.product.template_source.details[t].gridId=a.aux.addElementsList[i[0]][i[1]].id,n.product.template_source.details[t].gridTxt=a.aux.addElementsList[i[0]][i[1]].name,r=angular.copy(a.aux.addElementsList[i[0]][i[1]]),r.element_width=d3.max(o)-d3.min(o),r.element_height=d3.max(s)-d3.min(s),r.block_id=e,r}function b(e,t){for(var i=n.product.template_source.details.length,r=[];--i>0;)if(e){if(n.product.template_source.details[i].id===e){D(i),r.push(v(e,i,t));break}}else"sash"===n.product.template_source.details[i].blockType&&(D(i),r.push(v(n.product.template_source.details[i].id,i,t)));return r}function P(){p.createSVGTemplate(n.product.template_source,n.product.profileDepths).then(function(e){n.product.template=angular.copy(e)})}function M(){_.removeGlassEventsInSVG(),s.design.selectedGlass.length=0,a.aux.selectedGrid=0,a.aux.isGridSelectorDialog=!a.aux.isGridSelectorDialog}function x(e,t){for(var i=e.length,r=0;--i>-1;)if(e[i].id===t.id&&(t.element_width&&t.element_height&&e[i].element_width===t.element_width&&e[i].element_height===t.element_height&&(r+=1),t.element_width&&!t.element_height&&e[i].element_width===t.element_width&&(r+=1),t.element_width||t.element_height||(r+=1),r)){e[i].element_qty+=1;break}return r}function G(e,t){var i,r=a.aux.isFocusedAddElement-1;if(i=x(e.chosenAddElements[r],t),!i){var n={element_type:r,element_width:0,element_height:0,block_id:0},o=angular.extend(n,t);e.chosenAddElements[r].push(o),2===e.chosenAddElements[r].length&&(a.aux.isTabFrame=1)}}function w(e){_.getGridPrice(e).then(function(e){var t=e.length;if(a.aux.currAddElementPrice=0,t){for(;--t>-1;)G(n.product,e[t]),a.aux.currAddElementPrice+=e[t].elementPriceDis;a.aux.currAddElementPrice=c.roundingValue(a.aux.currAddElementPrice),a.aux.isAddElement=a.aux.selectedGrid[0]+"-"+a.aux.selectedGrid[1],T(n.product),P(),M()}})}function U(){if(s.design.selectedGlass.length){var e=s.design.selectedGlass.map(function(e){var t=e.attributes.block_id.nodeValue;return b(t,a.aux.selectedGrid)[0]});w(e)}}function k(){var e=b(0,a.aux.selectedGrid);w(e)}function H(e){for(var t=n.product.template_source.details.length;--t>0;)if(e){if(n.product.template_source.details[t].id===e&&n.product.template_source.details[t].gridId){delete n.product.template_source.details[t].gridId,delete n.product.template_source.details[t].gridTxt;break}}else n.product.template_source.details[t].gridId&&(delete n.product.template_source.details[t].gridId,delete n.product.template_source.details[t].gridTxt);P()}function V(t,i){var r=e.defer();return a.aux.isAddElement=t+"-"+i,h(t,i,a.aux.addElementsList).then(function(){r.resolve(angular.copy(a.aux.addElementsList[t][i]))}),r.promise}function B(e,t){if((i.global.isQtyCalculator||i.global.isSizeCalculator)&&C(),void 0===e&&void 0===t){1===a.aux.isFocusedAddElement&&H();var r=a.aux.isFocusedAddElement-1;a.aux.isAddElement=0,n.product.chosenAddElements[r].length=0,T(n.product)}else V(e,t).then(function(e){G(n.product,e),T(n.product)})}function F(e,t){var s,l;if("main"===i.global.currOpenPage)1===a.aux.isFocusedAddElement?n.product.is_addelem_only?(G(n.product,a.aux.addElementsList[e][t]),T(n.product)):(a.aux.selectedGrid=[e,t],a.aux.isGridSelectorDialog=1,_.initAllGlassXGrid()):(G(n.product,a.aux.addElementsList[e][t]),T(n.product));else if("cart"===i.global.currOpenPage)for(s=o.cart.selectedProducts.length,l=0;s>l;l+=1)o.cart.selectedProducts[l].length&&(G(r.order.products[l],a.aux.addElementsList[e][t]),m.calculateAddElemsProductsPrice(1),g.joinAllAddElements(),m.collectAllAddElems(),m.getAddElemsPriceTotal(),g.calculateOrderPrice());a.aux.currAddElementPrice=0,a.aux.isAddElement=0}function W(e,t){(i.global.isQtyCalculator||i.global.isSizeCalculator)&&C(),1===a.aux.isFocusedAddElement&&H(n.product.chosenAddElements[e][t].block_id),n.product.chosenAddElements[e].splice(t,1),T(n.product)}function Y(){var e,t=n.product.chosenAddElements.length;for(e=0;t>e;e+=1)e||n.product.chosenAddElements[e].length&&H(),n.product.chosenAddElements[e].length=0;n.product.addelem_price=0,n.product.addelemPriceDis=0,T(n.product),R()}var z=this;return z.publicObj={closeAddElementsMenu:R,chooseAddElement:B,chooseAddElementList:F,getAddElementPrice:V,deleteAddElement:W,deleteAllAddElements:Y,finishCalculators:C,confirmGrid:U,setGridToAll:k,closeGridSelectorDialog:M,pressCulculator:y,setValueQty:I,closeQtyCaclulator:A,setValueSize:L,deleteLastNumber:O,changeElementSize:N,closeSizeCaclulator:S},z.publicObj}])}(),function(){angular.module("MainModule").factory("AddElementsServ",["$timeout","globalConstants","GeneralServ","AddElementMenuServ","GlobalStor","ProductStor","AuxStor",function(e,t,i,r,n,o,a){function s(e){var t=e-1;a.aux.addElementsMenuStyle=i.addElementDATA[t].typeClass+"-theme",a.aux.addElementsType=angular.copy(n.global.addElementsAll[t].elementType),a.aux.addElementsList=angular.copy(n.global.addElementsAll[t].elementsList)}function l(e){a.aux.isFocusedAddElement=e,a.aux.showAddElementsMenu=t.activeClass,s(e)}function d(t){(n.global.isQtyCalculator||n.global.isSizeCalculator)&&r.finishCalculators(),a.aux.showAddElementsMenu?a.aux.isFocusedAddElement===t?r.closeAddElementsMenu():(r.closeAddElementsMenu(),e(function(){l(t)},g)):l(t)}function c(e,t,s){var l;if(a.aux.auxParameter===e+"-"+t+"-"+s)r.finishCalculators();else switch((n.global.isQtyCalculator||n.global.isSizeCalculator)&&r.finishCalculators(),l=o.product.chosenAddElements[e-1][s],a.aux.auxParameter=e+"-"+t+"-"+s,a.aux.currentAddElementId=s,a.aux.calculatorStyle=i.addElementDATA[e-1].typeClass+"-theme",t){case 1:n.global.isQtyCalculator=1;break;case 2:n.global.isSizeCalculator=1,n.global.isWidthCalculator=1;break;case 3:n.global.isSizeCalculator=1,n.global.isWidthCalculator=0}}function u(){a.aux.isFocusedAddElement=0,a.aux.isTabFrame=0,a.aux.showAddElementsMenu=0,a.aux.isAddElement=0,a.aux.isGridSelectorDialog=0,(n.global.isQtyCalculator||n.global.isSizeCalculator)&&r.finishCalculators()}function p(){a.aux.isAddElementListView=1,u()}function _(){a.aux.isAddElementListView=0,u()}function E(){var e,t,r=i.addElementDATA.length;for(a.aux.addElementGroups.length=0,t=0;r>t;t+=1)n.global.addElementsAll[t].elementsList&&(e={},e.groupId=t+1,e.groupName=angular.copy(i.addElementDATA[t].name),e.groupClass=i.addElementDATA[t].typeClass+"-theme",a.aux.addElementGroups.push(e))}var m=this,g=12*t.STEP;return m.publicObj={selectAddElement:d,initAddElementTools:c,openAddElementListView:p,closeAddElementListView:_,createAddElementGroups:E},m.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("AnalyticsServ",["localDB","UserStor",function(e,t){function i(i,r,n,o,a){var s={user_id:i,order_id:r,calculation_id:n,element_id:o,date:new Date},l="";switch(a){case 1:l="profile_analytics";break;case 2:break;case 3:l="hardware_analytics";break;case 4:}e.insertServer(t.userInfo.phone,t.userInfo.device_code,l,s)}var r=this;return r.analyticsObjSource={user_id:0,order_id:0,element_id:0,element_type:0},r.publicObj={sendAnalyticsData:i},r.publicObj}])}(),function(){angular.module("CartModule").factory("CartMenuServ",["$location","GeneralServ","MainServ","GlobalStor","OrderStor","CartStor","UserStor",function(e,t,i,r,n,o,a){function s(){var e,t,i,r,a,s,l,d,c=n.order.products.length,u=0;for(o.cart.allAddElements.length=0,o.cart.isExistAddElems=0,s=0;c>s;s+=1){for(i=[],e=n.order.products[s].chosenAddElements.length,l=0;e>l;l+=1)if(t=n.order.products[s].chosenAddElements[l].length,t>0)for(d=0;t>d;d+=1)r=angular.copy(n.order.products[s].chosenAddElements[l][d]),a={id:r.id,list_group_id:r.list_group_id,name:r.name,elementPriceDis:r.elementPriceDis,element_price:r.element_price,element_qty:r.element_qty*n.order.products[s].product_qty,element_type:r.element_type,element_width:r.element_width,element_height:r.element_height},i.push(a);i.length&&(u+=1),o.cart.allAddElements.push(i)}u&&(o.cart.isExistAddElems=1)}function l(){var e=new Date(n.order.new_delivery_date).getDay(),i=0;switch(e){case 0:i=a.userInfo.mount_sun||0;break;case 1:i=a.userInfo.mount_mon||0;break;case 2:i=a.userInfo.mount_tue||0;break;case 3:i=a.userInfo.mount_wed||0;break;case 4:i=a.userInfo.mount_thu||0;break;case 5:i=a.userInfo.mount_fri||0;break;case 6:i=a.userInfo.mount_sat||0}n.order.mounting_price=t.roundingValue(n.order.mounting_price*(1+i/100))}function d(e,i,r,o){n.order.is_instalment&&(n.order.payment_first=t.roundingValue(e*n.order.selectedInstalmentPercent/100),n.order.payment_monthly=t.roundingValue((e-n.order.payment_first)/n.order.selectedInstalmentPeriod),n.order.paymentFirstDis=t.roundingValue(r*n.order.selectedInstalmentPercent/100),n.order.paymentMonthlyDis=t.roundingValue((r-n.order.paymentFirstDis)/n.order.selectedInstalmentPeriod),i&&(n.order.payment_first_primary=t.roundingValue(i*n.order.selectedInstalmentPercent/100),n.order.payment_monthly_primary=t.roundingValue((i-n.order.payment_first_primary)/n.order.selectedInstalmentPeriod),n.order.paymentFirstPrimaryDis=t.roundingValue(o*n.order.selectedInstalmentPercent/100),n.order.paymentMonthlyPrimaryDis=t.roundingValue((o-n.order.paymentFirstPrimaryDis)/n.order.selectedInstalmentPeriod)))}function c(){if(n.order.order_price=0,n.order.order_price_dis=0,l(),n.order.order_price=n.order.products_price,n.order.order_price_dis=t.roundingValue(n.order.productsPriceDis+n.order.floor_price+n.order.mounting_price),n.order.order_price_primary=angular.copy(n.order.order_price),n.order.orderPricePrimaryDis=angular.copy(n.order.order_price_dis),n.order.delivery_price)if(n.order.is_date_price_more)o.cart.marginDeliveyPlant&&(n.order.order_price+=n.order.products_price*o.cart.marginDeliveyPlant/100),n.order.order_price_dis+=n.order.delivery_price;else if(n.order.is_date_price_less)o.cart.discountDeliveyPlant&&(n.order.order_price-=n.order.products_price*o.cart.discountDeliveyPlant/100),n.order.order_price_dis-=n.order.delivery_price;else{
var e=r.global.deliveryCoeff.percents[r.global.deliveryCoeff.standart_time];e&&(n.order.order_price-=n.order.products_price*e/100)}n.order.order_price=t.roundingValue(n.order.order_price),n.order.order_price_dis=t.roundingValue(n.order.order_price_dis),o.cart.discountPriceDiff=t.roundingValue(n.order.order_price-n.order.productsPriceDis),d(n.order.order_price,n.order.order_price_primary,n.order.order_price_dis,n.order.orderPricePrimaryDis)}function u(e){n.order.floor_id!==e.id&&(n.order.floor_id=e.id,e.id?(n.order.floorName=e.name,n.order.floor_price=e.priceReal,n.order.delivery_user_id=e.user_id):(n.order.floorName="",n.order.floor_price=0,n.order.delivery_user_id=0),c())}function p(e){n.order.mounting_id!==e.id&&(n.order.mounting_id=e.id,e.id?(n.order.mountingName=e.name,n.order.mounting_price=e.priceReal,n.order.mounting_user_id=e.user_id):(n.order.mountingName="",n.order.mounting_price=0,n.order.mounting_user_id=0),c())}function _(e,t,i){n.order.instalment_id!==e&&(n.order.is_instalment=1,n.order.instalment_id=e,n.order.selectedInstalmentPeriod=t,n.order.selectedInstalmentPercent=i,d(n.order.order_price,n.order.order_price_primary,n.order.order_price_dis,n.order.orderPricePrimaryDis))}function E(e){for(var i,r=n.order.products.length;--r>-1;)i=t.setPriceDis(n.order.products[r].template_price,e)+n.order.products[r].addelemPriceDis,n.order.products[r].productPriceDis=angular.copy(t.roundingValue(i))}function m(){var e=n.order.products.length;for(n.order.templates_price=0,n.order.addelems_price=0,n.order.products_price=0,n.order.productsPriceDis=0,o.cart.squareTotal=0,o.cart.perimeterTotal=0,o.cart.qtyTotal=0;--e>-1;)n.order.addelems_price+=n.order.products[e].addelem_price*n.order.products[e].product_qty,n.order.templates_price+=n.order.products[e].template_price*n.order.products[e].product_qty,n.order.products_price+=n.order.products[e].product_price*n.order.products[e].product_qty,n.order.productsPriceDis+=n.order.products[e].productPriceDis*n.order.products[e].product_qty,o.cart.squareTotal+=n.order.products[e].template_square*n.order.products[e].product_qty,o.cart.perimeterTotal+=.002*(n.order.products[e].template_width+n.order.products[e].template_height)*n.order.products[e].product_qty,o.cart.qtyTotal+=n.order.products[e].product_qty;n.order.addelems_price=t.roundingValue(n.order.addelems_price),n.order.templates_price=t.roundingValue(n.order.templates_price),n.order.products_price=t.roundingValue(n.order.products_price),o.cart.squareTotal=t.roundingValue(o.cart.squareTotal),o.cart.perimeterTotal=t.roundingValue(o.cart.perimeterTotal),o.cart.qtyTotal=t.roundingValue(o.cart.qtyTotal),n.order.productsPriceDis?n.order.productsPriceDis=t.roundingValue(n.order.productsPriceDis):n.order.productsPriceDis=angular.copy(n.order.products_price)}function g(e){var i,r,o,a,l,d,c=n.order.products.length;for(a=0;c>a;a++)for(i=n.order.products[a].productPriceDis-n.order.products[a].addelemPriceDis,n.order.products[a].addelemPriceDis=t.setPriceDis(n.order.products[a].addelem_price,e),n.order.products[a].productPriceDis=t.roundingValue(i+n.order.products[a].addelemPriceDis),r=n.order.products[a].chosenAddElements.length,l=0;r>l;l++)if(o=n.order.products[a].chosenAddElements[l].length,o>0)for(d=0;o>d;d++)n.order.products[a].chosenAddElements[l][d].elementPriceDis=t.setPriceDis(n.order.products[a].chosenAddElements[l][d].element_price,e);s()}function f(){n.order.delivery_price=t.roundingValue(n.order.productsPriceDis*o.cart.discountDeliveyPlant/100)}function T(){n.order.delivery_price=t.roundingValue(n.order.productsPriceDis*o.cart.marginDeliveyPlant/100)}function I(){n.order.is_date_price_less=0,n.order.is_date_price_more=0,n.order.is_old_price=0}function A(e,t){var s=e.split("."),l=t.split("."),d=new Date(s[2],s[1]-1,s[0]),u=new Date(l[2],l[1]-1,l[0]),p=Math.floor((u-d)/864e5);if(n.order.delivery_price=0,p&&p>0){var _=p/7,A=0,h=0,S=0;1>=_?(A=r.global.deliveryCoeff.week_1,h=a.userInfo.discConstrByWeek[0],S=a.userInfo.discAddElemByWeek[0]):_>1&&2>=_?(A=r.global.deliveryCoeff.week_2,h=a.userInfo.discConstrByWeek[1],S=a.userInfo.discAddElemByWeek[1]):_>2&&3>=_?(A=r.global.deliveryCoeff.week_3,h=a.userInfo.discConstrByWeek[2],S=a.userInfo.discAddElemByWeek[2]):_>3&&4>=_?(A=r.global.deliveryCoeff.week_4,h=a.userInfo.discConstrByWeek[3],S=a.userInfo.discAddElemByWeek[3]):_>4&&5>=_?(A=r.global.deliveryCoeff.week_5,h=a.userInfo.discConstrByWeek[4],S=a.userInfo.discAddElemByWeek[4]):_>5&&6>=_?(A=r.global.deliveryCoeff.week_6,h=a.userInfo.discConstrByWeek[5],S=a.userInfo.discAddElemByWeek[5]):_>6&&7>=_?(A=r.global.deliveryCoeff.week_7,h=a.userInfo.discConstrByWeek[6],S=a.userInfo.discAddElemByWeek[6]):_>7&&(A=r.global.deliveryCoeff.week_8,h=a.userInfo.discConstrByWeek[7],S=a.userInfo.discAddElemByWeek[7]),h?(n.order.discount_construct=h,E(h),m()):(n.order.discount_construct=angular.copy(a.userInfo.discountConstr),E(n.order.discount_construct),m()),S?(n.order.discount_addelem=S,g(S),m()):(n.order.discount_addelem=angular.copy(a.userInfo.discountAddElem),g(n.order.discount_addelem),m()),A?(o.cart.discountDeliveyPlant=A,f(),n.order.is_date_price_less=1,n.order.is_date_price_more=0,n.order.is_old_price=1):(m(),I())}else if(p&&0>p){i.setCurrDiscounts(),g(n.order.discount_addelem),E(n.order.discount_construct),m();var N=Math.abs(r.global.deliveryCoeff.standart_time+p);o.cart.marginDeliveyPlant=+r.global.deliveryCoeff.percents[N],o.cart.marginDeliveyPlant?(T(),n.order.is_date_price_more=1,n.order.is_date_price_less=0,n.order.is_old_price=1):I()}else i.setCurrDiscounts(),g(n.order.discount_addelem),E(n.order.discount_construct),m(),I();n.order.new_delivery_date=u.getTime(),c()}function h(e){if(e)for(var t=e.length;--t>-1;)if(e[t].type)switch(e[t].type){case 1:e[t].priceReal=Math.round(e[t].price*o.cart.qtyTotal);break;case 2:e[t].priceReal=Math.round(e[t].price*o.cart.squareTotal);break;case 3:e[t].priceReal=Math.round(e[t].price*o.cart.perimeterTotal);break;case 4:e[t].priceReal=Math.round(n.order.productsPriceDis*e[t].price/100);break;default:e[t].priceReal=Math.round(e[t].price)}}function S(){m(),o.cart.discountDeliveyPlant&&f(),o.cart.marginDeliveyPlant&&T(),c(),h(r.global.supplyData),h(r.global.assemblingData)}function N(){o.cart.tempConstructDisc=+n.order.discount_construct,o.cart.tempAddelemDisc=+n.order.discount_addelem,o.cart.isShowDiscount=1}function L(){o.cart.isShowDiscount=0}function O(){o.cart.isShowDiscount||(o.cart.tempConstructDisc=+n.order.discount_construct,o.cart.tempAddelemDisc=+n.order.discount_addelem),o.cart.isShowDiscount=!o.cart.isShowDiscount}function y(e){return null==e?e=0:e%1&&(e=parseFloat(e.toFixed(1))),e}function C(e){e?(o.cart.tempAddelemDisc=y(o.cart.tempAddelemDisc),o.cart.tempAddelemDisc>a.userInfo.discountAddElemMax&&(o.cart.tempAddelemDisc=+a.userInfo.discountAddElemMax),n.order.discount_addelem=+o.cart.tempAddelemDisc,g(n.order.discount_addelem)):(o.cart.tempConstructDisc=y(o.cart.tempConstructDisc),o.cart.tempConstructDisc>a.userInfo.discountConstrMax&&(o.cart.tempConstructDisc=+a.userInfo.discountConstrMax),n.order.discount_construct=+o.cart.tempConstructDisc,E(n.order.discount_construct)),S()}function R(){o.cart.customer.customer_city_id=arguments[0],o.cart.customer.customer_city=arguments[1],o.cart.customer.customer_location=arguments[2]}function D(){o.cart.submitted=0,o.cart.isCityBox=0,r.global.orderEditNumber>0?o.fillOrderForm():(R(n.order.customer_city_id,n.order.customer_city,n.order.customer_location),o.cart.customer.customer_sex=0),o.cart.isMasterDialog=0,o.cart.isOrderDialog=0,o.cart.isCreditDialog=0}function v(){var n;r.global.isLoader=1,n=o.cart.isMasterDialog?"master":"order",i.saveOrderInDB(o.cart.customer,1,n).then(function(){D(),t.setPreviosPage(),r.global.isLoader=0,e.path("/history")})}function b(){o.cart.customer.customer_location?o.cart.isCityBox=1:o.cart.isCityBox=0}function P(e){R(e.cityId,e.cityName,e.fullLocation),o.cart.isCityBox=0}var M=this;return M.publicObj={joinAllAddElements:s,selectFloorPrice:u,selectAssembling:p,selectInstalment:_,checkDifferentDate:A,calculateOrderPrice:S,calculateAllProductsPrice:m,calculateTotalOrderPrice:c,changeProductPriceAsDiscount:E,changeAddElemPriceAsDiscount:g,openDiscountBlock:N,closeDiscountBlock:L,swipeDiscountBlock:O,approveNewDisc:C,closeOrderDialog:D,changeLocation:b,selectCity:P,sendOrder:v},M.publicObj}])}(),function(){angular.module("CartModule").factory("CartServ",["$location","$filter","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor","CartStor","AuxStor",function(e,t,i,r,n,o,a,s,l,d){function c(){i.setPreviosPage(),r.createNewProduct()}function u(e){a.order.products[e].product_qty+=1,n.joinAllAddElements(),n.calculateOrderPrice()}function p(e){function r(){a.order.products.splice(e,1),l.cart.allAddElements.splice(e,1),n.calculateOrderPrice(),a.order.products.length>0}i.confirmAlert(t("translate")("common_words.DELETE_PRODUCT_TITLE"),t("translate")("common_words.DELETE_PRODUCT_TXT"),r)}function _(e){1===a.order.products[e].product_qty?p(e):(a.order.products[e].product_qty-=1,n.calculateOrderPrice()),n.joinAllAddElements()}function E(t,n){s.product=angular.copy(a.order.products[t]),o.global.productEditNumber=s.product.product_id,o.global.isCreatedNewProduct=1,o.global.isChangedTemplate=1,r.prepareMainPage(),"auxiliary"===n&&(o.global.activePanel=6),i.setPreviosPage(),e.path("/main")}function m(){var e,t,r,n=angular.copy(l.cart.allAddElements),o=n.length;for(l.cart.allAddElemsOrder.length=0;--o>-1;)if(e=n[o].length)for(;--e>-1;)if(t=l.cart.allAddElemsOrder.length){for(r=1;--t>-1;)l.cart.allAddElemsOrder[t].id===n[o][e].id&&l.cart.allAddElemsOrder[t].element_width===n[o][e].element_width&&l.cart.allAddElemsOrder[t].element_height===n[o][e].element_height&&(l.cart.allAddElemsOrder[t].element_qty=i.roundingValue(l.cart.allAddElemsOrder[t].element_qty+n[o][e].element_qty),r-=1);r&&l.cart.allAddElemsOrder.push(n[o][e])}else l.cart.allAddElemsOrder.push(n[o][e]);console.warn(l.cart.allAddElemsOrder)}function g(){var e=a.order.products.length;for(l.cart.addElemsOrderPriceTOTAL=0;--e>-1;)l.cart.addElemsOrderPriceTOTAL+=a.order.products[e].addelemPriceDis*a.order.products[e].product_qty;l.cart.addElemsOrderPriceTOTAL=i.roundingValue(l.cart.addElemsOrderPriceTOTAL)}function f(){l.cart.selectedProducts.length=0,l.cart.selectedProducts=a.order.products.map(function(){return[]})}function T(){m(),g(),f(),l.cart.isAllAddElems=1,d.aux.isAddElementListView=1}function I(e){for(var t,n,o=a.order.products.length;--o>-1;){if(a.order.products[o].addelem_price=0,a.order.products[o].addelemPriceDis=0,e)for(t=a.order.products[o].chosenAddElements.length;--t>-1;)if(n=a.order.products[o].chosenAddElements[t].length){for(;--n>-1;)a.order.products[o].addelem_price+=a.order.products[o].chosenAddElements[t][n].element_qty*a.order.products[o].chosenAddElements[t][n].element_price;a.order.products[o].addelem_price=i.roundingValue(a.order.products[o].addelem_price),a.order.products[o].addelemPriceDis=i.setPriceDis(a.order.products[o].addelem_price,a.order.discount_addelem)}r.setProductPriceTOTAL(a.order.products[o])}}function A(e,t){t+=1,e.product_id=t,a.order.products.push(e)}function h(e){var t=d3.max(a.order.products.map(function(e){return e.product_id})),i=angular.copy(a.order.products[e]);A(i,t),n.joinAllAddElements(),n.calculateOrderPrice()}var S=this;return S.publicObj={increaseProductQty:u,decreaseProductQty:_,addNewProductInOrder:c,clickDeleteProduct:p,editProduct:E,showAllAddElements:T,collectAllAddElems:m,getAddElemsPriceTotal:g,calculateAddElemsProductsPrice:I,createProductCopy:h,addCloneProductInOrder:A},S.publicObj}])}(),function(){angular.module("BauVoiceApp").constant("globalConstants",{serverIP:"http://api.steko.com.ua",printIP:"http://admin.steko.com.ua:3002/orders/get-order-pdf/",STEP:50,REG_PHONE:/^\d+$/,REG_NAME:/^[a-zA-Z]+$/,REG_MAIL:/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,SVG_CLASS_ICON:"tamlateIconSVG",SVG_ID_EDIT:"tamlateSVG",SVG_ID_ICON:"tamlateIconBigSVG",SVG_ID_GLASS:"tamlateGlassSVG",SVG_ID_GRID:"tamlateGridSVG",svgTemplateIconWidth:70,svgTemplateIconHeight:70,svgTemplateIconBigWidth:500,svgTemplateIconBigHeight:450,svgTemplateWidth:1022,svgTemplateHeight:767,squareLimit:.15,minSizeLimit:100,minSizeLimitStulp:300,minRadiusHeight:10,activeClass:"active",languages:[{label:"uk",name:"Українська"},{label:"ru",name:"Русский"},{label:"en",name:"English"},{label:"de",name:"Deutsch"},{label:"ro",name:"Român"},{label:"it",name:"Italiano"}]})}(),function(){angular.module("DesignModule").factory("DesignServ",["$rootScope","$location","$timeout","$filter","$q","globalConstants","GeneralServ","localDB","MainServ","AnalyticsServ","optionsServ","SVGServ","GlobalStor","DesignStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,n,o,a,s,l,d,c,u,p,_,E,m,g){function f(){d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_blockX").classed("dim_shiftX",!1),d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_blockY").classed("dim_shiftY",!1),d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_block").classed("dim_hidden",!0)}function T(){_.design.selectedCorner.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" .corner_mark").transition().duration(300).ease("linear").attr("r",0)}function I(){_.design.selectedImpost.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" [item_type=impost]").classed("frame-active",!1)}function A(){_.design.selectedArc.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" .frame").classed("active_svg",!1)}function h(){_.design.selectedGlass.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" .glass").classed("glass-active",!1)}function S(){d3.selectAll("#"+o.SVG_ID_EDIT+" .size-rect").classed("active",!1),d3.selectAll("#"+o.SVG_ID_EDIT+" .size-txt-edit").classed("active",!1)}function N(){S(),p.global.isSizeCalculator=0,_.design.openVoiceHelper=0}function L(){u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e)})}function O(e,t){var i=t||o.SVG_ID_EDIT,r=d3.select("#"+i+" .glass[block_id="+e+"]"),n=1;r.classed("error_glass",!0);var a=setInterval(function(){11===n&&clearInterval(a),n%2?r.classed("error_glass",!1):r.classed("error_glass",!0),n+=1},50)}function y(){d3.selectAll("#"+o.SVG_ID_EDIT+" [item_type=impost]").each(function(){d3.select(this).on(Qe,null)}),d3.selectAll("#"+o.SVG_ID_EDIT+" .glass").each(function(){d3.select(this).on(Qe,null)}),d3.selectAll("#"+o.SVG_ID_EDIT+" .frame").each(function(){d3.select(this).on(Qe,null)}),d3.selectAll("#"+o.SVG_ID_EDIT+" .size-box").each(function(){d3.select(this).on(Qe,null)}),d3.select(window).on("keydown",null)}function C(){d3.selectAll("#"+o.SVG_ID_GLASS+" .glass").each(function(){d3.select(this).on(Qe,null).classed("glass-active",!1)}),d3.selectAll("#"+o.SVG_ID_GRID+" .glass").each(function(){d3.select(this).on(Qe,null).classed("glass-active",!1)}),d3.select(window).on("keydown",null)}function R(){_.design.tempSize.length=0,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0,_.design.isDimExtra=0,_.design.isSquareExtra=0}function D(e,t){return a.roundingValue(t-Math.sqrt(Math.pow(t,2)-Math.pow(e,2)/4),1)}function v(e){var t,i,r,n,o=_.design.templateSourceTEMP.details,a=_.design.oldSize.attributes[6].nodeValue,s=_.design.oldSize.attributes[5].nodeValue,l=_.design.oldSize.attributes[10].nodeValue,d=+_.design.oldSize.attributes[11].nodeValue,c=+_.design.oldSize.attributes[12].nodeValue,u=_.design.oldSize.attributes[13].nodeValue,p=o.length;if(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),"curve"===s){t=D(+_.design.oldSize.attributes[11].nodeValue,e);e:for(i=1;p>i;i+=1)if(o[i].id===a){if(o[i].pointsQ)for(n=o[i].pointsQ.length;--n>-1;)if(o[i].pointsQ[n].id===l){o[i].pointsQ[n].heightQ=t;break e}if(o[i].impost&&o[i].impost.impostAxis[2].id===l){o[i].impost.impostAxis[2].heightQ=t;break e}}}else if(l.indexOf("qa")+1){for(i=1;p>i;i+=1)if(1===o[i].level&&(n=o[i].pointsQ.length))for(;--n>-1;)o[i].pointsQ[n].id===l&&(o[i].pointsQ[n].heightQ=e)}else for(i=1;p>i;i+=1){var E=o[i].pointsOut.length;if(E)for(;--E>-1;)"x"===u?o[i].pointsOut[E].x===c&&(o[i].pointsOut[E].x=d+e):"y"===u&&o[i].pointsOut[E].y===c&&(o[i].pointsOut[E].y=d+e);if(o[i].impost)for(r=0;2>r;r+=1)"x"===u?o[i].impost.impostAxis[r].x===c&&(o[i].impost.impostAxis[r].x=d+e):"y"===u&&o[i].impost.impostAxis[r].y===c&&(o[i].impost.impostAxis[r].y=d+e)}}function b(e){var t,i,r,n,o=_.design.templateTEMP.details,a=o.length,s=+_.design.oldSize.attributes[11].nodeValue,l=+_.design.oldSize.attributes[12].nodeValue,d=_.design.oldSize.attributes[13].nodeValue;for(i=1;a>i;i+=1)if(1===o[i].level&&(r=o[i].pointsOut.length,r&&(n=0,n=o[i].pointsOut.some(function(e){return"x"===d?e.x===l:"y"===d?e.y===l:void 0}))))for(t=angular.copy(o[i].pointsOut);--r>-1;)"x"===d?o[i].pointsOut[r].x===l&&(t[r].x=s+e):"y"===d&&o[i].pointsOut[r].y===l&&(t[r].y=s+e);return t}function P(e){var t=n.defer();if(_.design.tempSize.length){var i=parseInt(_.design.tempSize.join(""),10),o=b(i),a=o?u.calcSquare(o):0;a<p.global.maxSquareLimit?i>=_.design.minSizeLimit&&i<=_.design.maxSizeLimit?(v(i),N(),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),R(),t.resolve(1)})):(i<_.design.minSizeLimit?p.global.isVoiceHelper?playTTS(r("translate")("construction.VOICE_SMALLEST_SIZE"),p.global.voiceHelperLanguage):(_.design.isMinSizeRestriction=1,_.design.isMaxSizeRestriction=0):i>_.design.maxSizeLimit&&(p.global.isVoiceHelper?playTTS(r("translate")("construction.VOICE_BIGGEST_SIZE"),p.global.voiceHelperLanguage):(_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=1),i>p.global.maxSizeLimit&&(_.design.isDimExtra=1)),d3.select(_.design.oldSize).text(_.design.prevSize),_.design.tempSize.length=0,t.resolve(1)):(_.design.isSquareExtra=1,d3.select(_.design.oldSize).text(_.design.prevSize),_.design.tempSize.length=0,t.resolve(1))}else N(),t.resolve(1);return _.design.openVoiceHelper=0,_.design.loudVoice=0,_.design.quietVoice=0,e?t.promise:void 0}function M(){var e=_.design.tempSize.join("");d3.select(_.design.oldSize).text(e),p.global.isVoiceHelper&&P()}function x(e){var t=_.design.tempSize.length;if(p.global.isVoiceHelper){var i=parseInt(e,10);_.design.voiceTxt="",_.design.openVoiceHelper=!1,i>0&&1e4>i&&(_.design.tempSize=(""+i).split(""),M()),S()}else(4===t||1===t&&!_.design.tempSize[0])&&(_.design.tempSize.length=0),"0"===e?t&&_.design.tempSize[0]&&(_.design.tempSize.push(e),M()):"00"===e?t&&_.design.tempSize[0]&&(3>t?_.design.tempSize.push(0,0):3===t&&_.design.tempSize.push(0),M()):(_.design.tempSize.push(e),M())}function G(){_.design.tempSize.pop(),_.design.tempSize.length<1&&_.design.tempSize.push(0),M()}function w(t){var i;if(13===t.which)P(),e.$apply();else if(8===t.which)G();else{switch(t.which){case 48:case 96:i=0;break;case 49:case 97:i=1;break;case 50:case 98:i=2;break;case 51:case 99:i=3;break;case 52:case 100:i=4;break;case 53:case 101:i=5;break;case 54:case 102:i=6;break;case 55:case 103:i=7;break;case 56:case 104:i=8;break;case 57:case 105:i=9}void 0!==i&&x(i)}}function U(t){_.design.voiceTxt=t,e.$apply(),i(function(){var i=parseStringToDimension(t);"NaN"===i&&(i=r("translate")("construction.VOICE_NOT_UNDERSTAND")),playTTS(i),x(i),e.$apply()},1e3)}function k(t){t>100?(_.design.loudVoice=!0,_.design.quietVoice=!1):(_.design.loudVoice=!1,_.design.quietVoice=!0),e.$apply()}function H(){d3.selectAll("#"+o.SVG_ID_EDIT+" .size-box").each(function(){var t=d3.select(this);t.on(Qe,function(){var i=t.select(".size-rect"),r=i[0][0].attributes[0].nodeValue.indexOf("active")+1;if(_.design.tempSize.length)P(),R();else{if(r)N();else{S(),i.classed("active",!0);var n=t.select(".size-txt-edit");n.classed("active",!0),_.design.oldSize=n[0][0],_.design.prevSize=n[0][0].textContent,_.design.minSizeLimit=+n[0][0].attributes[8].nodeValue,_.design.maxSizeLimit=+n[0][0].attributes[9].nodeValue,p.global.isVoiceHelper?(_.design.openVoiceHelper=1,startRecognition(U,k,p.global.voiceHelperLanguage)):(p.global.isSizeCalculator=1,_.design.isMinSizeRestriction=0,_.design.isMaxSizeRestriction=0,_.design.isDimExtra=0,_.design.isSquareExtra=0)}e.$apply()}})}),d3.select(window).on("keydown",function(){p.global.isSizeCalculator&&w(d3.event)})}function V(){var e,t,i,r,n=m.product.chosenAddElements[0],o=n.length,a=m.product.template.details,s=0;if(o)e:for(;--o>-1;)for(e=a.length;--e>0;)if(a[e].id===n[o].block_id){if(!a[e].gridId){m.product.chosenAddElements[0].splice(o,1);continue e}t=a[e].pointsIn.map(function(e){return e.x}),i=a[e].pointsIn.map(function(e){return e.y}),r={},r.width=d3.max(t)-d3.min(t),r.height=d3.max(i)-d3.min(i),(n[o].element_width!==r.width||n[o].element_height!==r.height)&&(n[o].element_width=r.width,n[o].element_height=r.height,s=1)}return s}function B(e){var t=n.defer(),i=e.map(function(e){var t=n.defer(),i={currencyId:g.userInfo.currencyId,elementId:e.id,elementWidth:e.element_width/1e3,elementHeight:e.element_height/1e3};return s.getAdditionalPrice(i).then(function(i){i?(e.element_price=angular.copy(a.roundingValue(i.priceTotal)),e.elementPriceDis=angular.copy(a.setPriceDis(i.priceTotal,E.order.discount_addelem)),t.resolve(e)):t.reject(i)}),t.promise});return t.resolve(n.all(i)),t.promise}function F(){_.designSource.templateSourceTEMP=angular.copy(m.product.template_source),_.designSource.templateTEMP=angular.copy(m.product.template),_.design.templateSourceTEMP=angular.copy(m.product.template_source),_.design.templateTEMP=angular.copy(m.product.template)}function W(){_.design=_.setDefaultDesign(),p.global.activePanel=0,p.global.isNavMenu=0,p.global.isConfigMenu=1,t.path("/main")}function Y(e,t){var i,r=e.length;for(i=0;r>i;i+=1)if(e[i].shapeId===t)return i}function z(){_.designSource.doorConfig.doorShapeIndex=Y(_.design.doorShapeList,m.product.door_shape_id),_.designSource.doorConfig.sashShapeIndex=Y(_.design.doorShapeList,m.product.door_sash_shape_id),_.designSource.doorConfig.handleShapeIndex=Y(_.design.doorShapeList,m.product.door_handle_shape_id),_.designSource.doorConfig.lockShapeIndex=Y(_.design.doorShapeList,m.product.door_lock_shape_id),_.design.doorConfig=_.setDefaultDoor()}function X(){N(),_.design=_.setDefaultDesign(),F(),4===m.product.construction_type&&z()}function K(e,t){for(var i=1,r=e.attributes.block_id.nodeValue,n=t.length;--n>-1;)if(t[n].attributes.block_id.nodeValue===r){t.splice(n,1),i=0;break}return i&&t.push(e),i}function q(){_.design.selectedImpost.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" [item_type=impost]").each(function(){var t=d3.select(this);t.on(Qe,function(){if(_.design.tempSize.length)P(),R();else{var i=K(t[0][0],_.design.selectedImpost);i?(t.classed("frame-active",!0),_.design.activeMenuItem=3,_.design.isImpostDelete=1,_.design.activeSubMenuItem=3,T(),A(),N(),e.$apply()):(t.classed("frame-active",!1),_.design.selectedImpost.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply(),_.design.isImpostDelete=0))}})})}function Q(e){var t=d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_block[block_id="+e+"]"),i=t[0].length,r=0,n=0;if(i){for(;--i>-1;)t[0][i].attributes.axis&&("x"===t[0][i].attributes.axis.nodeValue?r+=1:"y"===t[0][i].attributes.axis.nodeValue&&(n+=1));r&&d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_blockX").classed("dim_shiftX",1),n&&d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_blockY").classed("dim_shiftY",1),t.classed("dim_hidden",0)}}function j(){_.design.selectedGlass.length=0,d3.selectAll("#"+o.SVG_ID_EDIT+" .glass").each(function(){var t=d3.select(this);t.on(Qe,function(){if(_.design.tempSize.length)P(),R();else{var i=K(t[0][0],_.design.selectedGlass),r=t[0][0].attributes.block_id.nodeValue;i?(t.classed("glass-active",!0),T(),I(),A(),N(),Q(r),e.$apply()):(t.classed("glass-active",!1),d3.selectAll("#"+o.SVG_ID_EDIT+" .dim_block[block_id="+r+"]").classed("dim_hidden",!0),_.design.selectedGlass.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,f(),e.$apply()))}})})}function Z(){_.design.selectedGlass.length=0,d3.selectAll("#"+o.SVG_ID_GLASS+" .glass").each(function(){var e=d3.select(this);e.on(Qe,function(){var t=K(e[0][0],_.design.selectedGlass),i=e[0][0].attributes.block_id.nodeValue;t?(e.classed("glass-active",!0),d3.select(".glass-txt[block_id="+i+"]").text(p.global.selectGlassName),l.setGlassToTemplateBlocks(m.product.template,p.global.selectGlassId,p.global.selectGlassName,i)):(e.classed("glass-active",!1),d3.select(".glass-txt[block_id="+i+"]").text(p.global.prevGlassName),l.setGlassToTemplateBlocks(m.product.template,p.global.prevGlassId,p.global.prevGlassName,i))})})}function J(e){e&&(p.global.selectGlassId=p.global.prevGlassId,p.global.selectGlassName=p.global.prevGlassName,u.createSVGTemplate(m.product.template_source,m.product.profileDepths).then(function(e){m.product.template=angular.copy(e)})),C(),p.global.showGlassSelectorDialog=0}function ee(){_.design.selectedGlass.length=0,d3.selectAll("#"+o.SVG_ID_GRID+" .glass").each(function(){var e=d3.select(this);e.on(Qe,function(){for(var t,i=m.product.template.details,r=i.length,n=e[0][0].attributes.block_id.nodeValue;--r>0;)i[r].id===n&&("sash"===i[r].blockType?(t=K(e[0][0],_.design.selectedGlass),t?e.classed("glass-active",!0):e.classed("glass-active",!1)):O(n,o.SVG_ID_GRID))})})}function te(e,t){for(var i=1,r=e.attributes.item_id.nodeValue,n=t.length;--n>-1;)if(t[n].attributes.item_id.nodeValue===r){t.splice(n,1),i=0;break}return i&&t.push(e),i}function ie(){var t=d3.selectAll("#"+o.SVG_ID_EDIT+" .frame")[0].filter(function(e){return"frame"===e.__data__.type||"arc"===e.__data__.type?!0:void 0});t.length&&d3.selectAll(t).each(function(){var t=d3.select(this);t.on(Qe,function(){if(_.design.tempSize.length)P(),R();else{var i=te(t[0][0],_.design.selectedArc);i?(t.classed("active_svg",!0),h(),T(),I(),N(),e.$apply()):(t.classed("active_svg",!1),_.design.selectedArc.length||(_.design.activeMenuItem=0,_.design.activeSubMenuItem=0,e.$apply()))}})})}function re(e,t){var i=1,r=40,n=t.x-e.x,o=t.y-e.y;return n>0&&r>n&&o>0&&r>o&&(i=0),i}function ne(e,t,i,r,n,o){var a={type:"impost",id:"ip"+t,x:Math.round(e.x),y:Math.round(e.y),dir:"line",dimType:n};o&&(a.type="shtulp",a.id="sht"+t),r[i].impost||(r[i].impost={impostAxis:[],impostOut:[],impostIn:[]}),r[i].impost.impostAxis.push(a)}function oe(e,t,i,r,n){var o={type:"skylight",id:"block_"+e,level:i[t].level+1,blockType:"frame",parent:i[t].id,children:[],pointsOut:[],pointsIn:[],parts:[],glassId:i[t].glassId,glassTxt:i[t].glassTxt};r&&(o.blockType="sash",angular.extend(o,n)),i[t].children.push(o.id),i.push(o)}function ae(e){for(var t=5,i=e.length;--i>-1;)for(var r=e.length;--r>-1;){var n=Math.abs(e[i].x-e[r].x),o=Math.abs(e[i].y-e[r].y);if(n>0&&t>n&&o>0&&t>o){e.splice(i,1);break}}}function se(e){for(var t,i=e.length,r=0;--i>0;)t=Number(e[i].id.replace(/\D+/g,"")),t>r&&(r=t);return r}function le(e,t){var i,r,n,o,a,s,l,d=[],c=t.length;for(i=0;c>i;i+=1)r=u.getCoordCrossPoint(e,t[i]),r.x>=0&&r.y>=0&&(n=u.checkLineOwnPoint(r,t[i].to,t[i].from),o=u.isInsidePointInLine(n),o&&(a=u.checkEqualPoints(r,d),a&&(s=re(t[i].from,r),s&&(l=re(t[i].to,r),l&&d.push(r)))));return d}function de(e,t,i,r){var n=le(t,i);if(2===n.length){var o,s,l,d,c={from:n[0],to:n[1]},p=a.roundingValue(Math.hypot(c.from.x-c.to.x,c.from.y-c.to.y)/2,1),_=angular.copy(r),E=_.length,m=[];for(u.setLineCoef(c),l=u.setQPointCoord(e,c,p),c.coefA||1!==e?c.coefB||4!==e||(l.x-=2*p):l.y-=2*p,d=u.setPointLocationToLine(c.from,c.to,l);--E>-1;){var g=u.setPointLocationToLine(c.from,c.to,_[E]);g>0&&d>0?m.push(_[E]):0>g&&0>d&&m.push(_[E])}return m.push(c.from,c.to),o=u.centerBlock(m),s=a.roundingValue(Math.abs((c.coefA*o.x+c.coefB*o.y+c.coefC)/Math.hypot(c.coefA,c.coefB)),1),s>p?p/2:s/2}}function ce(e,t,i,r,n){var o={blockId:n[r].id,dir:"curv",id:"qi"+i,heightQ:e,positionQ:t};n[r].impost.impostAxis.push(o)}function ue(e,t){var i,r,n,o,a,s=_.design.templateTEMP.details,l=s.length,d=_.design.templateSourceTEMP.details,c=90,p=0;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--l>0;)s[l].id===e&&(i=+l,r=Number(s[l].id.replace(/\D+/g,"")));n=se(d),o=u.cteateLineByAngel(s[i].center,c),a=le(o,s[i].linesOut),a.length>2&&ae(a);var E=a.length;if(2===E){for(;--E>-1;)ne(a[E],r,i,d,p,1),oe(n+=1,i,d,1,t[E]);L()}else O(e)}function pe(e,t){var i,r,n=t.__data__,a=t.attributes.block_id.nodeValue,s=_.design.templateSourceTEMP.details,l=s.length,d=d3.min(n.sizes);if(8===e||9===e)d>=o.minSizeLimitStulp?(8===e?i=[{openDir:[4],handlePos:0,sashType:4},{openDir:[1,2],handlePos:2,sashType:17}]:9===e&&(i=[{openDir:[1,4],handlePos:4,sashType:17},{openDir:[2],handlePos:0,sashType:4}]),ue(a,i)):O(a);else if(d>=o.minSizeLimit||n.square>=o.squareLimit){for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),r=1;l>r;r+=1)if(s[r].id===a){switch(s[r].blockType="sash",s[r].gridId=0,s[r].gridTxt="",e){case 2:s[r].openDir=[4],s[r].handlePos=4,s[r].sashType=2;break;case 3:s[r].openDir=[2],s[r].handlePos=2,s[r].sashType=2;break;case 4:s[r].openDir=[1],s[r].handlePos=1,s[r].sashType=7;break;case 5:s[r].openDir=[3],s[r].handlePos=3,s[r].sashType=2;break;case 6:s[r].openDir=[1,2],s[r].handlePos=2,s[r].sashType=6;break;case 7:s[r].openDir=[1,4],s[r].handlePos=4,s[r].sashType=6}L()}}else O(a)}function _e(e,t,i){for(var r=0;--i>0;)t[i].id===e&&t[i].impost&&"shtulp"===t[i].impost.impostAxis[0].type&&(r=i);return r}function Ee(e){e.blockType="frame",delete e.openDir,delete e.handlePos,delete e.sashType,delete e.gridId,delete e.gridTxt}function me(e,t){for(var i,r=t.length;--r>0;)if(t[r].id===e){i=t[r].children.length,i?(me(t[r].children[0],t),me(t[r].children[1],t),t.splice(r,1)):t.splice(r,1);break}}function ge(e){var t,i=e.attributes.block_id.nodeValue,r=_.design.templateSourceTEMP.details,n=r.length,o=0;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),t=1;n>t;t+=1)if(r[t].id===i){o=_e(r[t].parent,r,n),o?(me(r[o].children[0],r),me(r[o].children[1],r),r[o].children.length=0,delete r[o].impost):Ee(r[t]);break}L()}function fe(e){for(var t,i,r=_.design.templateSourceTEMP.details,n=e.details.length,a=0;--n>0;)if(e.details[n].level&&"sash"===e.details[n].blockType)for(t=e.details[n].parts.length;--t>-1;)"glass"===e.details[n].parts[t].type&&(i=d3.min(e.details[n].parts[t].sizes),i<=o.minSizeLimit&&i<=o.minSizeLimit&&(Ee(r[n]),a=1));return a}function Te(e,t,i,r,n){var o=200,a={type:"corner",id:"c"+t+"-"+e,dir:"line"};1===e?(a.x=(i.from.x*(i.size-o)+i.to.x*o)/i.size,a.y=(i.from.y*(i.size-o)+i.to.y*o)/i.size):2===e&&(a.x=(i.from.x*o+i.to.x*(i.size-o))/i.size,a.y=(i.from.y*o+i.to.y*(i.size-o))/i.size),n[r].pointsOut.push(a)}function Ie(e,t,i,r,n){var o,a=i.length;for(o=0;a>o;o+=1)i[o].from.id===e?Te(1,t,i[o],r,n):i[o].to.id===e&&Te(2,t,i[o],r,n);for(var s=n[r].pointsOut.length;--s>-1;)n[r].pointsOut[s].id===e&&(n[r].pointsOut[s].view=0)}function Ae(e,t,i){for(var r,n,o=i.length;--o>0;)if(i[o].id===t)for(r=i[o].pointsOut.length;--r>-1;)for(n=e.length;--n>-1;)if(i[o].pointsOut[r].id===e[n]){i[o].pointsOut.splice(r,1);break}}function he(e,t,i,r,n,o){var a={type:e,blockId:o[n].id,id:t,heightQ:i.size/4,fromPId:i.from.id,toPId:i.to.id,positionQ:r};o[n].pointsQ||(o[n].pointsQ=[]),o[n].pointsQ.push(a)}function Se(e,t,i){for(var r=i[t].pointsOut.length,n={};--r>-1;)"corner"===i[t].pointsOut[r].type&&(i[t].pointsOut[r].id==="c"+e+"-2"&&(n.from=i[t].pointsOut[r]),i[t].pointsOut[r].id==="c"+e+"-1"&&(n.to=i[t].pointsOut[r]));u.setLineCoef(n),n.size=a.roundingValue(Math.hypot(n.to.x-n.from.x,n.to.y-n.from.y),1),he("corner","qc"+e,n,e,t,i)}function Ne(e,t,i){for(var r,n=i.length;--n>0;)if(i[n].id===t&&i[n].pointsQ)for(r=i[n].pointsQ.length;--r>-1;)if(i[n].pointsQ[r].id===e){i[n].pointsQ.splice(r,1);break}}function Le(e){var t=e.__data__.id,i=Number(t.replace(/\D+/g,"")),r=e.attributes.block_id.nodeValue,n=_.design.templateSourceTEMP.details,o=_.design.templateTEMP.details,a=o.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--a>0;)o[a].id===r&&(e.__data__.view?Ie(t,i,o[a].linesOut,a,n):Ne("qc"+i,r,n));L()}function Oe(e){var t,i,r=e.__data__.id,n=Number(r.replace(/\D+/g,"")),o=e.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details,s=_.design.templateTEMP.details,l=s.length;
for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--l>0;)if(s[l].id===o)if(e.__data__.view)Ie(r,n,s[l].linesOut,l,a),Se(n,l,a);else for(t=s[l].linesOut.length,i=0;t>i;i+=1)s[l].linesOut[i].from.id==="c"+n+"-2"&&s[l].linesOut[i].to.id==="c"+n+"-1"&&he("corner","qc"+n,s[l].linesOut[i],n,l,a);L()}function ye(e){var t,i=e.__data__.id,r=Number(i.replace(/\D+/g,"")),n=e.attributes.block_id.nodeValue,o=_.design.templateSourceTEMP.details,a=o.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),Ae(["c"+r+"-1","c"+r+"-2"],n,o),Ne("qc"+r,n,o);--a>0;)if(o[a].id===n)for(t=o[a].pointsOut.length;--t>-1;)o[a].pointsOut[t].id===i&&(o[a].pointsOut[t].view=1);L()}function Ce(e,t,i,r,n){for(;--r>-1;)t?e?i[r].x+=n:i[r].x-=n:e?i[r].y+=n:i[r].y-=n}function Re(e,t,i,r){for(var n,o=r.length;--o>0;)r[o].level&&(r[o].pointsOut.length&&Ce(e,t,r[o].pointsOut,r[o].pointsOut.length,i),r[o].pointsIn.length&&Ce(e,t,r[o].pointsIn,r[o].pointsIn.length,i),r[o].impost&&(n=r[o].impost.impostAxis.length,n&&Ce(e,t,r[o].impost.impostAxis,n,i)))}function De(e,t,i){for(var r,n=u.centerBlock(i[t].pointsOut),o=u.sortingPoints(i[t].pointsOut,n),a=u.setLines(o),s=a.length;--s>-1;)a[s].from.id===e[0].id&&a[s].to.id===e[1].id&&(r=a[s]);return r}function ve(e){var t=n.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("frame"===i.type){var r,o,a,s,l,d=Number(i.points[0].id.replace(/\D+/g,"")),c=e.attributes.block_id.nodeValue,p=angular.copy(_.design.templateTEMP.details),E=p.length,g=_.design.templateSourceTEMP.details;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),s=1;E>s;s+=1)if(p[s].id===c)for(l=p[s].linesOut.length;--l>-1;)p[s].linesOut[l].from.id===i.points[0].id&&p[s].linesOut[l].to.id===i.points[1].id&&(r=s,o=p[s].linesOut[l]);i.points[0].fi<180&&i.points[1].fi<180?a=1:i.points[0].fi<90&&i.points[1].fi>270?a=2:i.points[0].fi>180&&i.points[1].fi>180?a=3:i.points[0].fi<270&&i.points[1].fi>90&&(a=4);var f=u.setQPointCoord(a,o,o.size/2);1===a?(Re(1,0,f.y,p),Re(1,0,f.y,g),f.y=0):4===a&&(Re(1,1,f.x,p),Re(1,1,f.x,g),f.x=0),f.y&&f.x||(o=De(i.points,r,g)),he("arc","qa"+d,o,a,r,g),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=fe(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function be(e){var t=n.defer();if(!$.isEmptyObject(e)){var i=e.__data__;if("arc"===i.type){var r=i.points[1].id,o=e.attributes.block_id.nodeValue,a=_.design.templateSourceTEMP.details;_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),Ne(r,o,a),i.points[1].x?i.points[1].y||Re(0,0,i.points[0].y,a):Re(0,1,i.points[0].x,a),u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){var i=fe(e);i?u.createSVGTemplate(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){_.design.templateTEMP=angular.copy(e),t.resolve("done")}):(_.design.templateTEMP=angular.copy(e),t.resolve("done"))})}else t.resolve("done")}return t.promise}function Pe(e){var t=_.design.selectedArc.shift(),r=t.attributes.item_id.nodeValue,n=d3.select("#"+o.SVG_ID_EDIT+" [item_id="+r+"]");n[0].length&&(e?ve(n[0][0]).then(function(){_.design.selectedArc.length&&i(function(){Pe(e)},1)}):be(n[0][0]).then(function(){_.design.selectedArc.length&&i(function(){Pe(e)},1)}))}function Me(e,t){var i,r,n,a,s,l,d,c,p=t.__data__,E=t.attributes.block_id.nodeValue,m=d3.min(p.sizes),g=_.design.templateTEMP.details,f=g.length,T=_.design.templateSourceTEMP.details,I=0,A=0;if(m>=o.minSizeLimit&&p.square>=o.squareLimit){switch(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),e){case 2:i=90;break;case 3:i=180,I=1;break;case 4:i=170,I=1;break;case 5:i=190,I=1;break;case 6:i=80;break;case 7:i=100;break;case 8:i=90,A=1,r=2;break;case 9:i=90,A=1,r=4;break;case 10:i=180,I=1,A=1,r=1;break;case 11:i=180,I=1,A=1,r=3;break;case 12:i=100,A=1,r=1;break;case 13:i=100,A=1,r=3;break;case 14:i=10,I=1,A=1,r=4;break;case 15:i=10,I=1,A=1,r=2}for(c=1;f>c;c+=1)g[c].id===E&&(n=c,a=Number(g[c].id.replace(/\D+/g,"")));s=se(T),l=u.cteateLineByAngel(g[n].center,i),d=le(l,g[n].linesOut),d.length>2&&ae(d);var h=d.length;if(2===h){for(;--h>-1;)ne(d[h],a,n,T,I),oe(++s,n,T);if(A){var S=de(r,l,g[n].linesIn,g[n].pointsIn);ce(S,r,a,n,T)}L()}else O(E)}else O(E)}function xe(e){var t=e.attributes.block_id.nodeValue,i=_.design.templateSourceTEMP.details,r=i.length;for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP));--r>0;)if(i[r].id===t){me(i[r].children[0],i),me(i[r].children[1],i),i[r].children.length=0,delete i[r].impost;break}L()}function Ge(e,t){for(var i=t.length;--i>-1;)0===t[i].x?t[i].x=e:t[i].x===e?t[i].x=0:t[i].x=e-t[i].x}function we(e){4===e.positionQ?e.positionQ=2:2===e.positionQ&&(e.positionQ=4)}function Ue(e){4===e.positionQ?e.positionQ=3:2===e.positionQ?e.positionQ=1:1===e.positionQ?e.positionQ=2:3===e.positionQ&&(e.positionQ=4)}function ke(e,t,i){var r,n,o=i[e].children.length;if(o)for(r=i[e].children.pop(),i[e].children.unshift(r),n=1;t>n;n+=1)(i[n].id===i[e].children[0]||i[n].id===i[e].children[1])&&ke(n,t,i)}function He(e,t,i){var r,n;for(n=1;i>n;n+=1){if(t[n].level&&t[n].pointsQ&&(r=t[n].pointsQ.length))for(;--r>-1;)t[n].pointsQ[r].id.indexOf("qa")+1?we(t[n].pointsQ[r]):t[n].pointsQ[r].id.indexOf("qc")+1&&Ue(t[n].pointsQ[r]);if(t[n].impost&&(Ge(e,t[n].impost.impostAxis),t[n].impost.impostAxis[2])){var o={from:t[n].impost.impostAxis[0],to:t[n].impost.impostAxis[1]};u.setLineCoef(o),o.coefA&&o.coefB?Ue(t[n].impost.impostAxis[2]):we(t[n].impost.impostAxis[2])}t[n].pointsOut.length&&Ge(e,t[n].pointsOut),t[n].pointsIn.length&&Ge(e,t[n].pointsIn)}}function Ve(){var e,t=_.design.templateSourceTEMP.details,r=t.length,n=u.collectAllPointsOut(_.design.templateTEMP.details),o=d3.max(n,function(e){return e.x});for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),He(o,t,r),e=1;r>e;e+=1)1===t[e].level&&ke(e,r,t);L(),i(function(){_.design.activeMenuItem=0},500)}function Be(e,t,i){var r,n={x:t,y:i},o=0,a=0,s=e.length;for(r=0;s>r;r+=1)if(a=e[r+1]?u.setPointLocationToLine(e[r],e[r+1],n):u.setPointLocationToLine(e[r],e[0],n),a>0){o=a;break}return o}function Fe(){var e,t,i,r,n,o,a,s,l,d,c,p,E,m=_.design.templateSourceTEMP.details,g=m.length,f=_.design.templateTEMP.details,T=[],I=[];for(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),c=1;g>c;c+=1)1===m[c].level&&T.push(m[c].pointsOut.map(function(e){return e.x}));for(e=T.length,p=0;e>p;p+=1){for(I=[],t=d3.min(T[p]),i=d3.max(T[p]),c=1;g>c;c+=1)m[c].impost&&m[c].impost.impostAxis&&m[c].impost.impostAxis[0].x===m[c].impost.impostAxis[1].x&&m[c].impost.impostAxis[0].x>t&&m[c].impost.impostAxis[0].x<i&&(r={ind:c,x:m[c].impost.impostAxis[0].x},I.push(r));for(n=Math.round(i/(I.length+1)),o=I.sort(u.sortByX),a=o.length,E=0;a>E;E+=1)s=E?o[E-1].x+n:t+n,l=Be(f[o[E].ind].pointsOut,s,m[o[E].ind].impost.impostAxis[0].y),d=Be(f[o[E].ind].pointsOut,s,m[o[E].ind].impost.impostAxis[1].y),l||d||(o[E].x=s,m[o[E].ind].impost.impostAxis[0].x=s,m[o[E].ind].impost.impostAxis[1].x=s)}L()}function We(e,t){var i,r,n,o,a,s,l,d={imps:[]},c=e.pointsOut.filter(function(e){return"impost"===e.type||"shtulp"===e.type}),u=c.length;for(s=0;u>s;s+=1){for(i=0,r=0,l=0;u>l;l+=1)s!==l&&c[l].id===c[s].id&&(r=1,c[l].x===c[s].x&&(i=1));if(!r)break;if(i){for(n=1,o=d.imps.length;--o>-1;)d.imps[o].id===c[s].id&&(n=0);n&&d.imps.push(c[s])}}d.imps.length&&(a=e.glassPoints.map(function(e){return e.x}),d.minX=d3.min(a),d.maxX=d3.max(a),d.width=d.maxX-d.minX,t.push(d))}function Ye(){var e,t,i,r,n,o,s,l,d,c,u,p,E,m,g,f,T,I,A,h,S,N=_.design.templateTEMP.details,O=N.length,y=_.design.templateSourceTEMP.details,C=_.design.selectedGlass.length,R=[];if(_.design.designSteps.push(angular.copy(_.design.templateSourceTEMP)),C)for(E=0;C>E;E+=1)for(e=_.design.selectedGlass[E].attributes.block_id.nodeValue,m=1;O>m;m+=1)N[m].id===e&&We(N[m],R);else for(m=1;O>m;m+=1)!N[m].children.length&&N[m].glassPoints&&We(N[m],R);if(t=R.length,i=a.roundingValue(R.reduce(function(e,t){return{width:e.width+t.width}}).width/t),2===t){r=R[0].imps.length,n=R[1].imps.length,o=0;e:for(g=0;r>g;g+=1)for(f=0;n>f;f+=1)if(R[1].imps[f].id===R[0].imps[g].id){o=R[1].imps[f].id;break e}}for(T=0;t>T;T+=1)for(s=R[T].imps.length,d=Math.round(i-R[T].width),I=0;s>I;I+=1)if(!R[T].imps[I].isChanged&&(c=0,2===t?R[T].imps[I].id===o&&(c=1):c=1,c))for(R[T].imps[I].x<R[T].maxX&&(d*=-1),R[T].imps[I].x+=d,A=0;t>A;A+=1)if(I!==A)for(l=R[A].imps.length,h=0;l>h;h+=1)T!==A&&R[A].imps[h].id===R[T].imps[I].id&&(R[A].imps[h].isChanged=1,R[A].width-=d);for(T=0;t>T;T+=1)for(s=R[T].imps.length,I=0;s>I;I+=1)if(!R[T].imps[I].isChanged)for(u=Number(R[T].imps[I].id.replace(/\D+/g,"")),S=1;O>S;S+=1)p=Number(y[S].id.replace(/\D+/g,"")),p===u&&y[S].impost&&(y[S].impost.impostAxis[0].x=+R[T].imps[I].x,y[S].impost.impostAxis[1].x=+R[T].imps[I].x);L()}function ze(){var e=_.design.designSteps.length-1;_.design.templateSourceTEMP=angular.copy(_.design.designSteps[e]),L(),_.design.designSteps.pop(),R(),N()}function Xe(){var e,t=_.design.doorShapeList,i=_.design.doorConfig;P(1).then(function(){if(l.checkGlassSizes(_.design.templateTEMP),_.design.extraGlass.length)_.design.isGlassExtra=1;else if(e=l.checkSashInTemplate(_.design.templateSourceTEMP),e?l.checkHardwareSizes(_.design.templateTEMP):(m.product.hardware={},m.product.hardware.id=0,p.global.isSashesInTemplate=0,_.design.extraHardware.length=0),_.design.extraHardware.length)_.design.isHardwareExtra=1;else{e&&(p.global.isSashesInTemplate||(p.global.isSashesInTemplate=1,m.product.hardware=p.global.hardwares[0][0])),m.product.template_source=angular.copy(_.design.templateSourceTEMP),m.product.template=angular.copy(_.design.templateTEMP),u.createSVGTemplateIcon(_.design.templateSourceTEMP,m.product.profileDepths).then(function(e){m.product.templateIcon=angular.copy(e)}),4===m.product.construction_type&&(m.product.door_shape_id=t[i.doorShapeIndex].shapeId,m.product.door_sash_shape_id=t[i.sashShapeIndex].shapeId,m.product.door_handle_shape_id=t[i.handleShapeIndex].shapeId,m.product.door_lock_shape_id=t[i.lockShapeIndex].shapeId),p.global.templatesSource[m.product.templateIndex]=angular.copy(m.product.template_source);var r=V();r&&B(m.product.chosenAddElements[0]),l.preparePrice(m.product.template,m.product.profile.id,m.product.glass,m.product.hardware.id,m.product.lamination.lamination_in_id).then(function(){p.global.isChangedTemplate=1,W()})}})}function Ke(){N(),W()}var qe=this,Qe=p.global.isDevice?"touchstart":"click";return qe.publicObj={setDefaultTemplate:F,designSaved:Xe,designCancel:Ke,setDefaultConstruction:X,initAllImposts:q,initAllGlass:j,initAllGlassXGlass:Z,initAllGlassXGrid:ee,initAllArcs:ie,initAllDimension:H,hideCornerMarks:T,deselectAllImpost:I,deselectAllArc:A,deselectAllGlass:h,rebuildSVGTemplate:L,createSash:pe,deleteSash:ge,setCornerPoints:Le,setCurvCornerPoints:Oe,deleteCornerPoints:ye,createArc:ve,deleteArc:be,workingWithAllArcs:Pe,createImpost:Me,deleteImpost:xe,initMirror:Ve,positionAxises:Fe,positionGlasses:Ye,removeAllEventsInSVG:y,removeGlassEventsInSVG:C,closeGlassSelectorDialog:J,setValueSize:x,deleteLastNumber:G,closeSizeCaclulator:P,hideSizeTools:N,stepBack:ze,getGridPrice:B,setIndexDoorConfig:z},qe.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("GeneralServ",["$filter","$window","$document","globalConstants","GlobalStor",function(e,t,i,r,n){function o(){n.global.startProgramm&&"main"===n.global.currOpenPage&&(n.global.startProgramm=0)}function a(){n.global.prevOpenPage=n.global.currOpenPage}function s(e,t){var i,r,n=t||2,o=typeof e,a="1";for(i=0;n>i;i+=1)a+="0";return a*=1,"string"===o?r=parseFloat((Math.round(parseFloat(e)*a)/a).toFixed(n)):"number"===o&&(r=parseFloat((Math.round(e*a)/a).toFixed(n))),r}function l(e,t){return e*t}function d(e,t){return s(e*(1-t/100))}function c(e,t){return e-t}function u(e){return e.filter(function(e,t,i){return t===i.indexOf(e)})}function p(e){var t={minX:d3.min(e,function(e){return e.x}),maxX:d3.max(e,function(e){return e.x}),minY:d3.min(e,function(e){return e.y}),maxY:d3.max(e,function(e){return e.y})};return t}function _(e,t,i){n.global.isAlert=1,n.global.alertTitle=e||"",n.global.alertDescr=t||"",n.global.confirmAction=i}function E(e){if(n.global.isDevice){var i=window.open(e);i.close()}else t.open(e)}var m=this,g=[{id:20,name:e("translate")("add_elements.GRIDS"),typeClass:"aux-grid",delay:5*r.STEP},{id:21,name:e("translate")("add_elements.VISORS"),typeClass:"aux-visor",delay:6*r.STEP},{id:9,name:e("translate")("add_elements.SPILLWAYS"),typeClass:"aux-spillway",delay:6*r.STEP},{id:19,name:e("translate")("add_elements.OUTSIDE"),typeClass:"aux-outside",delay:10*r.STEP},{id:26,name:e("translate")("add_elements.LOUVERS"),typeClass:"aux-louver",delay:15*r.STEP},{id:19,name:e("translate")("add_elements.INSIDE"),typeClass:"aux-inside",delay:20*r.STEP},{id:12,name:e("translate")("add_elements.CONNECTORS"),typeClass:"aux-connectors",delay:30*r.STEP},{id:27,name:e("translate")("add_elements.FAN"),typeClass:"aux-fan",delay:31*r.STEP},{id:8,name:e("translate")("add_elements.WINDOWSILLS"),typeClass:"aux-windowsill",delay:13*r.STEP},{id:24,name:e("translate")("add_elements.HANDLELS"),typeClass:"aux-handle",delay:28*r.STEP},{id:18,name:e("translate")("add_elements.OTHERS"),typeClass:"aux-others",delay:31*r.STEP}];return t.onbeforeunload=function(){return e("translate")("common_words.PAGE_REFRESH")},t.addEventListener("keydown",function(e){8!==e.keyCode||$(e.target).is("input, textarea")||e.preventDefault()}),m.publicObj={addElementDATA:g,stopStartProg:o,setPreviosPage:a,roundingValue:s,addMarginToPrice:l,setPriceDis:d,sorting:c,removeDuplicates:u,getMaxMinCoord:p,confirmAlert:_,goToLink:E},m.publicObj}])}(),function(){angular.module("HistoryModule").factory("HistoryServ",["$location","$filter","$q","globalConstants","localDB","GeneralServ","MainServ","SVGServ","GlobalStor","OrderStor","ProductStor","UserStor","HistoryStor","CartStor",function(e,t,i,r,n,o,a,s,l,d,c,u,p,_){function E(){o.setPreviosPage(),l.global.isCreatedNewProduct&&l.global.isCreatedNewProject?e.path("/main"):a.createNewProject()}function m(){n.selectLocalDB(n.tablesLocalDB.orders.tableName,{order_type:1}).then(function(e){var t=angular.copy(e),i=t.length;if(p.history.isEmptyResult=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);p.history.ordersSource=angular.copy(t),p.history.orders=angular.copy(t)}else p.history.isEmptyResult=1})}function g(e,i){function r(){var e,t=p.history.orders.length;for(e=0;t>e;e+=1)p.history.orders[e].id===i&&(p.history.orders[e].order_style=G,p.history.ordersSource[e].order_style=G,n.updateLocalServerDBs(n.tablesLocalDB.orders.tableName,i,{order_style:G,sended:new Date}))}e!==x&&o.confirmAlert(t("translate")("common_words.SEND_ORDER_TITLE"),t("translate")("common_words.SEND_ORDER_TXT"),r)}function f(e,i){function r(e,t,i){n.selectLocalDB(i,{order_id:e}).then(function(e){if(e.length){var r,o=angular.copy(e),a=o.length;if(a>0)for(r=0;a>r;r+=1)delete o[r].id,o[r].modified=new Date,o[r].order_id=t,n.insertRowLocalDB(o[r],i),n.insertServer(u.userInfo.phone,u.userInfo.device_code,i,o[r])}else console.log("Empty result = ",e)})}function s(){var e,t,o=p.history.orders.length;for(t=0;o>t;t+=1)p.history.orders[t].id===i&&(e=angular.copy(p.history.orders[t]));e.id=a.createOrderID(),e.order_number=0,e.order_hz="---",e.created=new Date,e.modified=new Date,n.insertServer(u.userInfo.phone,u.userInfo.device_code,n.tablesLocalDB.orders.tableName,e).then(function(t){t.status&&(e.order_number=t.order_number),p.history.orders.push(e),p.history.ordersSource.push(e),n.insertRowLocalDB(e,n.tablesLocalDB.orders.tableName)}),r(i,e.id,n.tablesLocalDB.order_products.tableName),r(i,e.id,n.tablesLocalDB.order_addelements.tableName)}e!==x&&o.confirmAlert(t("translate")("common_words.COPY_ORDER_TITLE"),t("translate")("common_words.COPY_ORDER_TXT"),s)}function T(e,i,r){function s(){var t,r;e?(t=p.history.orders,r=p.history.ordersSource):(t=p.history.drafts,r=p.history.draftsSource);for(var o=t.length;--o>-1;)if(t[o].id===i){t.splice(o,1),r.splice(o,1);break}t.length||(p.history.isEmptyResult=1),a.deleteOrderInDB(i),e&&n.deleteOrderServer(u.userInfo.phone,u.userInfo.device_code,i)}r.preventDefault(),r.stopPropagation(),o.confirmAlert(t("translate")("common_words.DELETE_ORDER_TITLE"),t("translate")("common_words.DELETE_ORDER_TXT"),s)}function I(e,t,i){if(t)for(var r=i.length;--r>-1;)if(i[r].id===t)switch(e){case 1:d.order.floorName=angular.copy(i[r].name);break;case 2:d.order.mountingName=angular.copy(i[r].name);break;case 3:d.order.selectedInstalmentPeriod=angular.copy(i[r].name),d.order.selectedInstalmentPercent=angular.copy(i[r].value)}}function A(e,t){var i=l.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});i.length&&e.glass.unshift(a.fineItemById(t,i[0].glasses))}function h(){var e=i.defer();return n.selectLocalDB(n.tablesLocalDB.order_products.tableName,{order_id:l.global.orderEditNumber}).then(function(t){var r=angular.copy(t);if(r.length){var n=r.map(function(e){var t=i.defer(),r=c.setDefaultProduct();return angular.extend(r,e),delete r.id,delete r.modified,r.is_addelem_only?t.resolve(1):(r.template_source=JSON.parse(r.template_source),a.setCurrentProfile(r,r.profile_id).then(function(){if(r.glass_id){var e=r.glass_id.split(", "),i=e.length;if(i)for(;--i>-1;)A(r,+e[i])}l.global.isSashesInTemplate=a.checkSashInTemplate(r.template_source),a.setCurrentHardware(r,r.hardware_id),a.setCurrLamination(r.lamination_id),delete r.lamination_id,delete r.lamination_in_id,delete r.lamination_out_id,t.resolve(r)})),t.promise});i.all(n).then(function(t){var r=t.map(function(e){var t=i.defer();return s.createSVGTemplateIcon(e.template_source,e.profileDepths).then(function(i){e.templateIcon=i,delete e.profile_id,delete e.glass_id,delete e.hardware_id,e.addelemPriceDis=o.setPriceDis(e.addelem_price,d.order.discount_addelem),e.productPriceDis=o.setPriceDis(e.template_price,d.order.discount_construct)+e.addelemPriceDis,d.order.products.push(e),t.resolve(1)}),t.promise});e.resolve(i.all(r))})}else e.reject(r)}),e.promise}function S(){var e=i.defer();return n.selectLocalDB(n.tablesLocalDB.order_addelements.tableName,{order_id:l.global.orderEditNumber}).then(function(t){var i,r=angular.copy(t),n=r.length,a=d.order.products.length;if(n)for(;--n>-1;)for(i=0;a>i;i+=1)r[n].product_id===d.order.products[i].product_id&&(r[n].id=angular.copy(r[n].element_id),delete r[n].element_id,delete r[n].modified,r[n].elementPriceDis=o.setPriceDis(r[n].element_price,d.order.discount_addelem),d.order.products[i].chosenAddElements[r[n].element_type].push(r[n]),n||e.resolve(1));else e.resolve(1)}),e.promise}function N(t,i){l.global.isLoader=1,l.global.orderEditNumber=i,d.order=d.setDefaultOrder();for(var r=t?p.history.orders.length:p.history.drafts.length;--r>-1;)t?p.history.orders[r].id===i&&(angular.extend(d.order,p.history.orders[r]),_.fillOrderForm()):p.history.drafts[r].id===i&&(angular.extend(d.order,p.history.drafts[r]),_.fillOrderForm());d.order.order_date=new Date(d.order.order_date).getTime(),d.order.delivery_date=new Date(d.order.delivery_date).getTime(),d.order.new_delivery_date=new Date(d.order.new_delivery_date).getTime(),I(1,d.order.floor_id,l.global.supplyData),I(2,d.order.mounting_id,l.global.assemblingData),I(3,d.order.instalment_id,l.global.instalmentsData),delete d.order.additional_payment,delete d.order.created,delete d.order.sended,delete d.order.state_to,delete d.order.state_buch,delete d.order.batch,delete d.order.base_price,delete d.order.factory_margin,delete d.order.purchase_price,delete d.order.sale_price,delete d.order.modified,h().then(function(){S().then(function(){l.global.isConfigMenu=1,l.global.isNavMenu=0,o.setPreviosPage(),l.global.isLoader=0,e.path("/cart")})})}function L(){n.selectLocalDB(n.tablesLocalDB.orders.tableName,{order_type:0}).then(function(e){var t=angular.copy(e),i=t.length;if(p.history.isEmptyResultDraft=0,i){for(;--i>-1;)t[i].created=new Date(t[i].created),t[i].delivery_date=new Date(t[i].delivery_date),t[i].new_delivery_date=new Date(t[i].new_delivery_date),t[i].order_date=new Date(t[i].order_date);p.history.draftsSource=angular.copy(t),p.history.drafts=angular.copy(t)}else p.history.isEmptyResultDraft=1})}function O(){p.history.isOrderDate=0,p.history.isOrderDateDraft=0,p.history.isDraftView=!p.history.isDraftView,p.history.drafts.length||L()}function y(e){var t=r.printIP+e+"?userId="+u.userInfo.id;navigator.onLine?o.goToLink(t):p.history.isNoPrint=1}function C(){p.history.isOrderSearch=1,p.history.isOrderDate=0,p.history.isOrderSort=0}function R(e,t,i){var r,n,o,a,s;if(""!==t||""!==i){if(r=angular.copy(e),n=new Date(t).valueOf(),o=new Date(i).valueOf(),""!==t&&""!==i&&n>o)return!1;for(a=r.length-1;a>=0;a-=1)s=new Date(r[a].created).valueOf(),(n>s||s>o)&&r.splice(a,1);return r}return!1}function D(){var e;p.history.isDraftView?(p.history.isOrderDateDraft&&(e=R(p.history.draftsSource,p.history.startDateDraft,p.history.finishDateDraft),e&&(p.history.drafts=e)),p.history.isOrderDateDraft=!p.history.isOrderDateDraft,p.history.isOrderSortDraft=0):(p.history.isOrderDate&&(e=R(p.history.ordersSource,p.history.startDate,p.history.finishDate),e&&(p.history.orders=e)),p.history.isOrderDate=!p.history.isOrderDate,p.history.isOrderSearch=0,p.history.isOrderSort=0)}function v(e){p.history.isDraftView?"start-date"!==e||p.history.isStartDateDraft?"finish-date"!==e||p.history.isFinishDateDraft?"full-date"!==e||p.history.isAllPeriodDraft?(p.history.isStartDateDraft=0,p.history.isFinishDateDraft=0,p.history.isAllPeriodDraft=0):(p.history.isStartDateDraft=0,p.history.isFinishDateDraft=0,p.history.isAllPeriodDraft=1,p.history.startDateDraft="",p.history.finishDateDraft="",p.history.drafts=angular.copy(p.history.draftsSource)):(p.history.isStartDateDraft=0,p.history.isFinishDateDraft=1,p.history.isAllPeriodDraft=0):(p.history.isStartDateDraft=1,p.history.isFinishDateDraft=0,p.history.isAllPeriodDraft=0):"start-date"!==e||p.history.isStartDate?"finish-date"!==e||p.history.isFinishDate?"full-date"!==e||p.history.isAllPeriod?(p.history.isStartDate=0,p.history.isFinishDate=0,p.history.isAllPeriod=0):(p.history.isStartDate=0,p.history.isFinishDate=0,p.history.isAllPeriod=1,p.history.startDate="",p.history.finishDate="",p.history.orders=angular.copy(p.history.ordersSource)):(p.history.isStartDate=0,p.history.isFinishDate=1,p.history.isAllPeriod=0):(p.history.isStartDate=1,p.history.isFinishDate=0,p.history.isAllPeriod=0)}function b(){p.history.isDraftView?(p.history.isOrderSortDraft=!p.history.isOrderSortDraft,p.history.isOrderDateDraft=0):(p.history.isOrderSort=!p.history.isOrderSort,p.history.isOrderSearch=0,p.history.isOrderDate=0)}function P(e,t){p.history.isDraftView?p.history.isSortTypeDraft===t?(p.history.isSortTypeDraft=0,p.history.reverseDraft=1):(p.history.isSortTypeDraft=t,"first"===p.history.isSortTypeDraft&&(p.history.reverseDraft=1),"last"===p.history.isSortTypeDraft&&(p.history.reverseDraft=0)):e?p.history.isFilterType===t?p.history.isFilterType=void 0:p.history.isFilterType=t:p.history.isSortType===t?(p.history.orders=angular.copy(p.history.ordersSource),p.history.isSortType="last"):p.history.isSortType=t}var M=this,x="master",G="done";return M.publicObj={toCurrentCalculation:E,downloadOrders:m,sendOrderToFactory:g,makeOrderCopy:f,clickDeleteOrder:T,editOrder:N,orderPrint:y,viewSwitching:O,orderSearching:C,orderDateSelecting:D,openCalendarScroll:v,orderSorting:b,sortingInit:P},M.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("localDB",["$http","$q","$filter","globalConstants","GeneralServ","UserStor","GlobalStor",function(e,t,i,r,n,o,a){function s(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return K.transaction(function(t){t.executeSql("DROP TABLE IF EXISTS "+e,[],function(){i.resolve(1)},function(){console.log("not find deleting table"),i.resolve(0)})}),i.promise});return t.all(r)}function l(e){var i=Object.keys(e),r=i.map(function(e){var i=t.defer();return K.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+q[e].tableName+" (id INTEGER PRIMARY KEY AUTOINCREMENT, "+q[e].prop+", modified TIMESTAMP DEFAULT CURRENT_TIMESTAMP"+q[e].foreignKey+")",[],function(){i.resolve(1)},function(){console.log("Something went wrong with creating table "+q[e].tableName),i.resolve(0)})}),i.promise});return t.all(r)}function d(e){return angular.isString(e)&&e.indexOf("'")+1?e.replace(/'/g,"''"):e}function c(e,t){var i=Object.keys(e),r=i.join(", "),n=i.map(function(t){return e[t]=d(e[t]),"'"+e[t]+"'"}).join(", ");K.transaction(function(e){e.executeSql("INSERT INTO "+t+" ("+r+") VALUES ("+n+")",[],null,function(){console.log("Something went wrong with insert into "+t)})})}function u(e){var i=[],r=Object.keys(e.tables),n=r.length;return K.transaction(function(o){var a;for(a=0;n>a;a+=1){var s,l=e.tables[r[a]].fields.join(", "),c=e.tables[r[a]].rows.length;if(c)for(s=0;c>s;s+=1){var u=t.defer(),p=e.tables[r[a]].rows[s].map(function(e){return e=d(e),"'"+e+"'"}).join(", ");o.executeSql("INSERT INTO "+r[a]+" ("+l+") VALUES ("+p+")",[],function(){u.resolve(1)},function(e){console.log("Error!!! ",e,r[a],l),u.resolve(0)}),i.push(u.promise)}}}),t.all(i)}function p(e,i,r){var n=t.defer(),o=r||"*",a="";if(i){a=" WHERE ";var s=Object.keys(i);a+=s[0]+" = '"+i[s[0]]+"'";var l,d=s.length;if(d>1)for(l=1;d>l;l+=1)a+=" AND "+s[l]+" = '"+i[s[l]]+"'"}return K.transaction(function(t){t.executeSql("SELECT "+o+" FROM "+e+a,[],function(e,t){var i=t.rows.length;if(i){var r,o=[];for(r=0;i>r;r+=1)o.push(t.rows.item(r));n.resolve(o)}else n.resolve(0)},function(e,t){0===Object.keys(e).length&&5===t.code&&n.resolve(0)})}),n.promise}function _(e,t,i){var r,n,o="",a=Object.keys(t),s=a.length,l=Object.keys(i),d=l.length,c="";if(s)for(r=0;s>r;r+=1)c+=r?", "+a[r]+" = '"+t[a[r]]+"'":a[r]+" = '"+t[a[r]]+"'";if(d&&(o=" WHERE ",o+=l[0]+" = '"+i[l[0]]+"'",d>1))for(n=1;d>n;n+=1)o+=" AND "+l[n]+" = '"+i[l[n]]+"'";K.transaction(function(t){t.executeSql("UPDATE "+e+" SET "+c+o,[],function(){},function(){console.log("Something went wrong with updating "+e+" record")})})}function E(e,t){var i="";if(t){var r,n=Object.keys(t),o=n.length;if(i=" WHERE "+n[0]+" = '"+t[n[0]]+"'",o>1)for(r=1;o>r;r+=1)i+=" AND "+n[r]+" = '"+t[n[r]]+"'"}K.transaction(function(t){t.executeSql("DELETE FROM "+e+i,[],null,function(){console.log("Something went wrong with insert into "+e)})})}function m(i,n){var o=t.defer(),a=n?"/api/login?type=1":"/api/login";return e.post(r.serverIP+a,{login:i}).then(function(e){o.resolve(e.data)},function(){console.log("Something went wrong with User recive!"),o.resolve({status:0})}),o.promise}function g(i,n){var o=t.defer();return e.get(r.serverIP+"/api/get/locations?login="+i+"&access_token="+n).then(function(e){e.data.status?u(e.data).then(function(){o.resolve(1)}):(console.log("Error!"),o.resolve(0))},function(){console.log("Something went wrong with Location!"),o.resolve(0)}),o.promise}function f(i,n,o){var a=t.defer();return e.get(r.serverIP+"/api/get/factories-by-country?login="+i+"&access_token="+n+"&cities_ids="+o).then(function(e){a.resolve(e.data)},function(){console.log("Something went wrong with get factories!"),a.resolve({status:0})}),a.promise}function T(i,n){var o=t.defer();return console.log("Import database begin!"),e.get(r.serverIP+"/api/sync?login="+i+"&access_token="+n).then(function(e){console.log("importAllDB+++",e),e.data.status?u(e.data).then(function(){o.resolve(1)}):(console.log("Error!"),o.resolve(0))},function(){console.log("Something went wrong with importing Database!"),o.resolve(0)}),o.promise}function I(i,n,o,a){var s=t.defer(),l={model:o,row:JSON.stringify(a)};return e.post(r.serverIP+"/api/insert?login="+i+"&access_token="+n,l).then(function(e){console.log("send changes to server success:",e),s.resolve(e.data)},function(e){console.log("send changes to server failed"),s.resolve(e.data)}),s.promise}function A(i,n,o){var a=o.map(function(o){var a=t.defer();return e.post(r.serverIP+"/api/update?login="+i+"&access_token="+n,o).then(function(e){console.log("send changes to server success:",e),a.resolve(1)},function(){console.log("send changes to server failed"),a.resolve(0)}),a.promise});return t.all(a)}function h(t){e.post(r.serverIP+"/api/register",t).then(function(e){console.log(e)},function(){console.log("Something went wrong when user creating!")})}function S(t,i){var n=new Date;e.get(r.serverIP+"/api/signed?login="+t+"&access_token="+i+"&date="+n).then(function(){console.log("Sucsess!")},function(){console.log("Something went wrong!")})}function N(t,i,n){var o={orderId:+n};e.post(r.serverIP+"/api/remove-order?login="+t+"&access_token="+i,o).then(function(e){console.log(e.data)},function(){console.log("Something went wrong with order delete!")})}function L(e,i,r){var n=t.defer(),a=[{model:e,rowId:i,field:JSON.stringify(r)}];return _(e,r,{id:i}),A(o.userInfo.phone,o.userInfo.device_code,a).then(function(e){e||c(a,q["export"].tableName),n.resolve(1)}),n.promise}function O(i){var n=t.defer();e.post(r.serverIP+"/api/load-avatar",i,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){console.log("send changes to server success:",e),n.resolve(1)},function(){console.log("send changes to server failed"),n.resolve(0)})}function y(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,r,n,o,a;return n=2147483648&e,o=2147483648&t,i=1073741824&e,r=1073741824&t,a=(1073741823&e)+(1073741823&t),i&r?2147483648^a^n^o:i|r?1073741824&a?3221225472^a^n^o:1073741824^a^n^o:a^n^o}function r(e,t,i){return e&t|~e&i}function n(e,t,i){return e&i|t&~i}function o(e,t,i){return e^t^i}function a(e,t,i){return t^(e|~i)}function s(e,n,o,a,s,l,d){return e=i(e,i(i(r(n,o,a),s),d)),i(t(e,l),n)}function l(e,r,o,a,s,l,d){return e=i(e,i(i(n(r,o,a),s),d)),i(t(e,l),r)}function d(e,r,n,a,s,l,d){return e=i(e,i(i(o(r,n,a),s),d)),i(t(e,l),r)}function c(e,r,n,o,s,l,d){return e=i(e,i(i(a(r,n,o),s),d)),i(t(e,l),r)}function u(e){for(var t,i=e.length,r=i+8,n=(r-r%64)/64,o=16*(n+1),a=Array(o-1),s=0,l=0;i>l;)t=(l-l%4)/4,s=l%4*8,a[t]=a[t]|e.charCodeAt(l)<<s,l++;return t=(l-l%4)/4,s=l%4*8,a[t]=a[t]|128<<s,a[o-2]=i<<3,a[o-1]=i>>>29,a}function p(e){var t,i,r="",n="";for(i=0;3>=i;i++)t=e>>>8*i&255,n="0"+t.toString(16),r+=n.substr(n.length-2,2);return r}function _(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var E,m,g,f,T,I,A,h,S,N=Array(),L=7,O=12,y=17,C=22,R=5,D=9,v=14,b=20,P=4,M=11,x=16,G=23,w=6,U=10,k=15,H=21;for(e=_(e),N=u(e),I=1732584193,A=4023233417,h=2562383102,S=271733878,E=0;E<N.length;E+=16)m=I,g=A,f=h,T=S,I=s(I,A,h,S,N[E+0],L,3614090360),S=s(S,I,A,h,N[E+1],O,3905402710),h=s(h,S,I,A,N[E+2],y,606105819),A=s(A,h,S,I,N[E+3],C,3250441966),I=s(I,A,h,S,N[E+4],L,4118548399),S=s(S,I,A,h,N[E+5],O,1200080426),h=s(h,S,I,A,N[E+6],y,2821735955),A=s(A,h,S,I,N[E+7],C,4249261313),I=s(I,A,h,S,N[E+8],L,1770035416),S=s(S,I,A,h,N[E+9],O,2336552879),h=s(h,S,I,A,N[E+10],y,4294925233),A=s(A,h,S,I,N[E+11],C,2304563134),I=s(I,A,h,S,N[E+12],L,1804603682),S=s(S,I,A,h,N[E+13],O,4254626195),h=s(h,S,I,A,N[E+14],y,2792965006),A=s(A,h,S,I,N[E+15],C,1236535329),I=l(I,A,h,S,N[E+1],R,4129170786),S=l(S,I,A,h,N[E+6],D,3225465664),h=l(h,S,I,A,N[E+11],v,643717713),A=l(A,h,S,I,N[E+0],b,3921069994),I=l(I,A,h,S,N[E+5],R,3593408605),S=l(S,I,A,h,N[E+10],D,38016083),h=l(h,S,I,A,N[E+15],v,3634488961),A=l(A,h,S,I,N[E+4],b,3889429448),I=l(I,A,h,S,N[E+9],R,568446438),S=l(S,I,A,h,N[E+14],D,3275163606),
h=l(h,S,I,A,N[E+3],v,4107603335),A=l(A,h,S,I,N[E+8],b,1163531501),I=l(I,A,h,S,N[E+13],R,2850285829),S=l(S,I,A,h,N[E+2],D,4243563512),h=l(h,S,I,A,N[E+7],v,1735328473),A=l(A,h,S,I,N[E+12],b,2368359562),I=d(I,A,h,S,N[E+5],P,4294588738),S=d(S,I,A,h,N[E+8],M,2272392833),h=d(h,S,I,A,N[E+11],x,1839030562),A=d(A,h,S,I,N[E+14],G,4259657740),I=d(I,A,h,S,N[E+1],P,2763975236),S=d(S,I,A,h,N[E+4],M,1272893353),h=d(h,S,I,A,N[E+7],x,4139469664),A=d(A,h,S,I,N[E+10],G,3200236656),I=d(I,A,h,S,N[E+13],P,681279174),S=d(S,I,A,h,N[E+0],M,3936430074),h=d(h,S,I,A,N[E+3],x,3572445317),A=d(A,h,S,I,N[E+6],G,76029189),I=d(I,A,h,S,N[E+9],P,3654602809),S=d(S,I,A,h,N[E+12],M,3873151461),h=d(h,S,I,A,N[E+15],x,530742520),A=d(A,h,S,I,N[E+2],G,3299628645),I=c(I,A,h,S,N[E+0],w,4096336452),S=c(S,I,A,h,N[E+7],U,1126891415),h=c(h,S,I,A,N[E+14],k,2878612391),A=c(A,h,S,I,N[E+5],H,4237533241),I=c(I,A,h,S,N[E+12],w,1700485571),S=c(S,I,A,h,N[E+3],U,2399980690),h=c(h,S,I,A,N[E+10],k,4293915773),A=c(A,h,S,I,N[E+1],H,2240044497),I=c(I,A,h,S,N[E+8],w,1873313359),S=c(S,I,A,h,N[E+15],U,4264355552),h=c(h,S,I,A,N[E+6],k,2734768916),A=c(A,h,S,I,N[E+13],H,1309151649),I=c(I,A,h,S,N[E+4],w,4149444226),S=c(S,I,A,h,N[E+11],U,3174756917),h=c(h,S,I,A,N[E+2],k,718787259),A=c(A,h,S,I,N[E+9],H,3951481745),I=i(I,m),A=i(A,g),h=i(h,f),S=i(S,T);var V=p(I)+p(A)+p(h)+p(S);return V.toLowerCase()}function C(e,i,r){var n=t.defer();return p(q.window_hardwares.tableName,{window_hardware_group_id:e}).then(function(e){var t,o,a,s,l,d,c=e.length,u=[],p=i.length;if(c){for(l=0;p>l;l+=1){for(t=angular.copy(e),o=[],a=[],s=i[l].openDir.length,d=0;s>d;d+=1)4===i[l].openDir[d]?i[l].openDir[d]=2:2===i[l].openDir[d]?i[l].openDir[d]=3:i[l].openDir[d]=1;o=t.filter(function(e){if(e.window_hardware_type_id==i[l].type&&(e.window_hardware_color_id==r||!e.window_hardware_color_id)){if(1==s)return e.direction_id==i[l].openDir[0]||1==e.direction_id;if(2==s)return e.direction_id==i[l].openDir[0]||e.direction_id==i[l].openDir[1]||1==e.direction_id}}),a=o.filter(function(e){if(e.min_width&&e.max_width&&!e.min_height&&!e.max_height){if(i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!e.min_width&&!e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height)return e}else if(e.min_width&&e.max_width&&e.min_height&&e.max_height){if(i[l].sizes[1]>=e.min_height&&i[l].sizes[1]<=e.max_height&&i[l].sizes[0]>=e.min_width&&i[l].sizes[0]<=e.max_width)return e}else if(!(e.min_width||e.max_width||e.min_height||e.max_height))return e}),u.push(a)}u.length?n.resolve(u):n.resolve(0)}else n.resolve(0)}),n.promise}function R(e){var i=t.defer(),r=e.sizes.map(function(i,r,n){var o=t.defer();if(i.length&&e.ids[r])if(r===n.length-1)C(e.ids[r],i,e.laminationId).then(function(e){e.length?o.resolve(e):o.resolve(0)});else if(angular.isArray(e.ids[r])){var a=e.ids[r].map(function(e){var i=t.defer();return p(q.lists.tableName,{id:e},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});t.all(a).then(function(e){for(var t=angular.copy(e),i=t.length,r=[],n=0;i>n;n++)t[n]&&(t[n][0].amendment_pruning&&(t[n][0].amendment_pruning/=1e3),r.push(t[n][0]));r.length>1?o.resolve(r):1===r.length?o.resolve(r[0]):o.resolve(0)})}else p(q.lists.tableName,{id:e.ids[r]},"id, parent_element_id, name, waste, amendment_pruning").then(function(e){var t=angular.copy(e);t&&t.length?(t[0].amendment_pruning&&(t[0].amendment_pruning/=1e3),o.resolve(t[0])):o.resolve(0)});else o.resolve(0);return o.promise});return i.resolve(t.all(r)),i.promise}function D(e){var i=t.defer();return p(q.lists.tableName,{id:e},"parent_element_id, name, waste, amendment_pruning").then(function(e){e&&e.length?(e[0].amendment_pruning&&(e[0].amendment_pruning/=1e3),i.resolve(e[0])):i.resolve(0)}),i.promise}function v(e){var i=t.defer(),r=[],n=[];return angular.isArray(e)?r=e:r.push(e),function o(){if(r.length){var e=r.shift(0),t=0;t="object"==typeof e?e.childId:e,p(q.list_contents.tableName,{parent_list_id:t}).then(function(t){var i,a=t.length;if(a)for(i=0;a>i;i+=1)if("object"==typeof e&&(t[i].parentId=e.parentId),n.push(t[i]),"list"===t[i].child_type){var s={childId:t[i].child_id,parentId:t[i].id};r.push(s)}o()})}else n.length?i.resolve(n):i.resolve(0)}(),i.promise}function b(e){var i=t.defer(),r=e.map(function(e,i,r){var n=t.defer();if(e)if(angular.isArray(e)){var o=e.map(function(e){var n=t.defer();if(i===r.length-1){if(angular.isArray(e)){var o=e.map(function(e){var i=t.defer();return v(e.child_id).then(function(e){e.length?i.resolve(e):i.resolve(0)}),i.promise});n.resolve(t.all(o))}}else v(e.id).then(function(e){e.length?n.resolve(e):n.resolve(0)});return n.promise});t.all(o).then(function(e){var t,i=e.length,r=[];if(i)for(t=0;i>t;t+=1)angular.isArray(e[t])?r.push(e[t]):e[t][0]?r.push(e[t][0]):r.push(e[t]);r.length?n.resolve(r):n.resolve(0)})}else{var a=0;a=i===r.length-1?e.child_id:e.id,a?v(a).then(function(e){e.length?n.resolve(e):n.resolve(0)}):n.resolve(0)}else n.resolve(0);return n.promise});return i.resolve(t.all(r)),i.promise}function P(e,i){var r=t.defer();return p(q.elements.tableName,{id:i},"id, sku, currency_id, price, name, element_group_id").then(function(t){t.length?e?r.resolve(t):r.resolve(t[0]):r.resolve(0)}),r.promise}function M(e){var i=t.defer(),r=e.map(function(e,i,r){var n=t.defer();if(e)if(angular.isArray(e)){var o=e.map(function(e){var n=t.defer();if(i===r.length-1){if(angular.isArray(e)){var o=e.map(function(e){var i=t.defer();return"element"===e.child_type?i.resolve(P(1,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(1,t.parent_element_id))}),i.promise});n.resolve(t.all(o))}}else n.resolve(P(0,e.parent_element_id));return n.promise});t.all(o).then(function(e){var t,r=e.length,o=[];if(r)if(5===i||6===i)o=e;else for(t=0;r>t;t+=1)if(e[t])if(angular.isArray(e[t])){var a,s=[],l=e[t].length;for(a=0;l>a;a+=1)e[t][a]&&s.push(e[t][a][0]);o.push(s)}else o.push(e[t][0]);o.length?n.resolve(o):n.resolve(0)})}else i===r.length-1?"element"===e.child_type?n.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),n.resolve(P(0,t.parent_element_id))}):n.resolve(P(0,e.parent_element_id));else n.resolve(0);return n.promise});return i.resolve(t.all(r)),i.promise}function x(e){var i=t.defer();if(e.length){var r=e.map(function(e){var i=t.defer();if(e&&e.length){var r=e.map(function(e){var i=t.defer();if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();if(e)if(angular.isArray(e)){var r=e.map(function(e){var i=t.defer();return e?"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))}):i.resolve(0),i.promise});i.resolve(t.all(r))}else"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))});else i.resolve(0);return i.promise});i.resolve(t.all(r))}else e?"element"===e.child_type?i.resolve(P(0,e.child_id)):D(e.child_id).then(function(t){angular.extend(e,t),i.resolve(P(0,t.parent_element_id))}):i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise});i.resolve(t.all(r))}else i.resolve(0);return i.promise}function G(e,t){var i,r,n,s=a.global.currencies.length;if(s)for(i=0;s>i;i+=1)a.global.currencies[i].id===o.userInfo.currencyId&&(r=i),a.global.currencies[i].id===t&&(n=i);return a.global.currencies[r]&&a.global.currencies[n]&&(e*=a.global.currencies[n].value),e}function w(e,t,r,a,s,l,d){var c,u=0,p=0,_=0,E=1,m={},g=t.waste?1+t.waste/100:1;if(6===e){for(c=0;s>c;c+=1)if(a[c].elemId===t.id)for(var f=a[c].sizes.length;--f>-1;)m=angular.copy(r),p=a[c].sizes[f]+t.amendment_pruning,u=p*m.price*g,o.userInfo.currencyId!=m.currency_id&&(u=G(u,m.currency_id)),m.qty=angular.copy(E),m.size=n.roundingValue(p,3),m.priceReal=n.roundingValue(u,3),l.priceTotal+=u,d.push(m)}else for(var T=0;s>T;T++){if(m=angular.copy(r),5===e){var I=0;a[T].elemId===t.id&&(p=a[T].square,_=n.roundingValue(a[T].square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+a[T].sizes[0]+" x "+a[T].sizes[1]+")",u=p*m.price*g,I++)}else 7===e?(E=t.count,u=E*m.price*g):(p=a[T]+t.amendment_pruning,u=p*m.price*g);(5===e&&I||5!==e)&&(o.userInfo.currencyId!=m.currency_id&&(u=G(u,m.currency_id)),m.qty=angular.copy(E),m.size=n.roundingValue(p,3),m.sizeLabel=_,m.priceReal=n.roundingValue(u,3),l.priceTotal+=u,d.push(m))}}function U(e,t){var i=e.kitsElem.length,r=0,n=[];e.priceTotal=0;for(var o=0;i>o;o++)if(e.kitsElem[o])if(r=t[o].length,angular.isArray(e.kitsElem[o]))for(var a=e.kitsElem[o].length,s=0;a>s;s++)if(angular.isArray(e.kitsElem[o][s]))for(var l=e.kitsElem[o][s].length,d=0;l>d;d++)w(o,e.kits[o][s][d],e.kitsElem[o][s][d],t[o][s],1,e,n);else w(o,e.kits[o][s],e.kitsElem[o][s],t[o],r,e,n);else w(o,e.kits[o],e.kitsElem[o],t[o],r,e,n);return n}function k(e,t,i){if(1==e.direction_id)return 1;for(var r=0,n=0;i>n;n++)t[n]===e.direction_id&&r++;return r}function H(e,t,i){var r=0;switch(i){case 1:case 21:case 22:r=n.roundingValue(e-t,3);break;case 2:case 5:var o=1>e?1:parseInt(e);r=o*t;break;case 3:case 12:case 14:r=n.roundingValue(Math.round(e)*t,3);break;case 6:case 7:case 8:case 9:case 13:case 23:r=n.roundingValue(e*t,3);break;default:r=t}return r}function V(e,t,i,r,a,s,l,d){if(r){var c=angular.copy(r),u=0,p=0,_=1;switch(9===c.element_group_id&&(p=t),i.rules_type_id){case 1:case 21:case 22:p=n.roundingValue(t+a-i.value,3);break;case 3:_=(t+a)*i.value;break;case 5:_=i.value;break;case 6:case 23:_=(t+a)*i.value;break;case 2:case 4:case 15:_=e*i.value;break;default:p=n.roundingValue(t+a,3)}u=p?p*_*r.price*s:_*r.price*s,o.userInfo.currencyId!=r.currency_id&&(u=G(u,r.currency_id)),c.priceReal=u,c.size=n.roundingValue(p,3),c.sizeLabel=d,c.qty=_,l.constrElements.push(c),l.priceTotal+=c.priceReal}}function B(e,t,r,o,a,s,l){if(o.parent_list_id===r.id){var d=1,c=1,u=0,p=r.waste?1+r.waste/100:1;5===e?5===o.rules_type_id?(d=t.square,c=t.square,u=n.roundingValue(t.square,3)+" "+i("translate")("common_words.LETTER_M")+"2 ("+t.sizes[0]+" x "+t.sizes[1]+")"):21===o.rules_type_id?(d=t.sizes[0],c=t.sizes[0]):22===o.rules_type_id?(d=t.sizes[1],c=t.sizes[1]):c=t.square:(d=n.roundingValue(t+r.amendment_pruning,3),c=t),"list"===o.child_type&&(o.newValue=H(d,o.value,o.rules_type_id)),V(1,c,o,a,r.amendment_pruning,p,l,u)}else for(var _=s.length,E=0;_>E;E++)if(o.parent_list_id===s[E].child_id&&o.parentId===s[E].id){var p=s[E].waste?1+s[E].waste/100:1,m=1;"list"===o.child_type&&(o.newValue=H(s[E].newValue,o.value,o.rules_type_id)),2===s[E].rules_type_id&&(2===o.rules_type_id||4===o.rules_type_id||15===o.rules_type_id)&&(m=s[E].newValue),V(m,s[E].newValue,o,a,s[E].amendment_pruning,p,l)}}function F(e,t,i,r,a,s){if(e===s.consist.length-1){if(angular.isArray(i))for(var l=i.length,d=r.openDir.length,c=0;l>c;c++)if(angular.isArray(i[c])){var u=i[c].length,p=0;e:for(;u>p;p++)if(k(t[c][p],r.openDir,d)){var _=angular.copy(i[c][p]),E=0,m=1;if(t[c][p].parent_list_id===a[c].child_id)m=a[c].waste?1+a[c].waste/100:1,_.qty=H(a[c].count,t[c][p].value,t[c][p].rules_type_id),"list"===t[c][p].child_type&&(t[c][p].newValue=angular.copy(_.qty));else for(var g=0;u>g;g++)if(t[c][p].parent_list_id===t[c][g].child_id&&t[c][p].parentId===t[c][g].id){if(!k(t[c][g],r.openDir,d))continue e;m=t[c][g].waste?1+t[c][g].waste/100:1,_.qty=H(t[c][g].newValue,t[c][p].value,t[c][p].rules_type_id),"list"===t[c][p].child_type&&(t[c][p].newValue=angular.copy(_.qty))}E=_.qty*i[c][p].price*m,E&&(o.userInfo.currencyId!=i[c][p].currency_id&&(E=G(E,i[c][p].currency_id)),_.priceReal=n.roundingValue(E,3),_.size=0,s.constrElements.push(_),s.priceTotal+=_.priceReal)}}}else if(angular.isArray(i))for(var f=i.length,T=0;f>T;T++)if(6===e)for(var I=r.sizes.length;--I>-1;)B(e,r.sizes[I],a,t[T],i[T],t,s);else B(e,r,a,t[T],i[T],t,s);else if(6===e)for(var I=r.sizes.length;--I>-1;)B(e,r.sizes[I],a,t,i,s.consist[e],s);else B(e,r,a,t,i,s.consist[e],s)}function W(e,t){for(var i=e.consist.length,r=0;i>r;r++)if(e.consist[r]){var n=t.sizes[r].length,o=e.consist[r].length;if(o)if(angular.isArray(e.kits[r]))for(var a=0;o>a;a++)if(5===r||6===r)for(var s=t.sizes[r].length,l=0;s>l;l++)t.sizes[r][l].elemId===e.kits[r][a].id&&e.consistElem[r][a]&&F(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][l],e.kits[r][a],e);else e.consistElem[r][a]&&F(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][a],e.kits[r][a],e);else for(var l=0;n>l;l++)for(var a=0;o>a;a++)e.consistElem[r][a]&&F(r,e.consist[r][a],e.consistElem[r][a],t.sizes[r][l],e.kits[r],e)}}function Y(e){var i=t.defer(),r={},o={};return R(e).then(function(t){r.kits=t,b(r.kits).then(function(t){r.consist=t,M(r.kits).then(function(t){r.kitsElem=t,x(r.consist).then(function(t){r.consistElem=t,r.constrElements=U(r,e.sizes),W(r,e),r.priceTotal=n.roundingValue(r.priceTotal),o.constrElements=angular.copy(r.constrElements),o.priceTotal=isNaN(r.priceTotal)?0:angular.copy(r.priceTotal),i.resolve(o)})})})}),i.promise}function z(e){var i=t.defer(),r={},a={constrElements:[],priceTotal:0};return v(angular.copy(e.elementId)).then(function(t){a.consist=t,D(e.elementId).then(function(t){t?(a.kits=t,P(0,a.kits.parent_element_id).then(function(t){a.kitsElem=t,x([a.consist]).then(function(t){if(a.consistElem=t[0],e.elementWidth>0){var s=0,l=0;e.elementHeight?(s=n.roundingValue(e.elementWidth*e.elementHeight,3),l=n.roundingValue((e.elementWidth+a.kits.amendment_pruning)*(e.elementHeight+a.kits.amendment_pruning),3)):(s=e.elementWidth,l=e.elementWidth+a.kits.amendment_pruning);var d=a.kits.waste?1+a.kits.waste/100:1,c=angular.copy(a.kitsElem),u=n.roundingValue(l*c.price*d);if(o.userInfo.currencyId!=c.currency_id&&(u=G(u,c.currency_id)),c.qty=1,c.size=l,c.priceReal=u,a.priceTotal+=u,a.constrElements.push(c),a.consistElem){var p=a.consist.length;if(p)for(var _=0;p>_;_++)if(a.consist[_])if(a.consist[_].parent_list_id===e.elementId)"list"===a.consist[_].child_type&&(a.consist[_].newValue=H(l,a.consist[_].value,a.consist[_].rules_type_id)),V(1,s,a.consist[_],a.consistElem[_],a.kits.amendment_pruning,d,a);else for(var E=0;p>E;E++)a.consist[_].parent_list_id===a.consist[E].child_id&&a.consist[_].parentId===a.consist[E].id&&(d=a.consist[E].waste?1+a.consist[E].waste/100:1,"list"===a.consist[_].child_type&&(a.consist[_].newValue=H(a.consist[E].newValue,a.consist[_].value,a.consist[_].rules_type_id)),V(a.consist[_].newValue,a.consist[E].newValue,a.consist[_],a.consistElem[_],a.consist[E].amendment_pruning,d,a))}}a.priceTotal=n.roundingValue(a.priceTotal),r.constrElements=angular.copy(a.constrElements),r.priceTotal=angular.copy(a.priceTotal),i.resolve(r)})})):i.resolve(a)})}),i.promise}var X=this,K=openDatabase("bauvoice","1.0","bauvoice",5e6),q={addition_folders:{tableName:"addition_folders",prop:"name VARCHAR(255), addition_type_id INTEGER, factory_id INTEGER, position INTEGER, img VARCHAR, description VARCHAR, link VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(addition_type_id) REFERENCES addition_types(id)"},cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},currencies:{tableName:"currencies",prop:"name VARCHAR(100), value NUMERIC(10, 2), factory_id INTEGER, is_base INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},directions:{tableName:"directions",prop:"name VARCHAR(255)",foreignKey:""},elements_groups:{tableName:"elements_groups",prop:"name VARCHAR(255), base_unit INTEGER, position INTEGER",foreignKey:""},beed_profile_systems:{tableName:"beed_profile_systems",prop:"profile_system_id INTEGER, list_id INTEGER, glass_width INTEGER",foreignKey:", FOREIGN KEY(list_id) REFERENCES lists(id)"},glass_folders:{tableName:"glass_folders",prop:"name VARCHAR(255), img VARCHAR, position INTEGER, factory_id INTEGER, description VARCHAR, link VARCHAR, is_base INTEGER",foreignKey:""},glass_prices:{tableName:"glass_prices",prop:"element_id INTEGER, col_1_range NUMERIC(10, 2), col_1_price NUMERIC(10, 2), col_2_range_1 NUMERIC(10, 2), col_2_range_2 NUMERIC(10, 2), col_2_price NUMERIC(10, 2), col_3_range_1 NUMERIC(10, 2), col_3_range_2 NUMERIC(10, 2), col_3_price NUMERIC(10, 2), col_4_range_1 NUMERIC(10, 2), col_4_range_2 NUMERIC(10, 2), col_4_price NUMERIC(10, 2), col_5_range NUMERIC(10, 2), col_5_price NUMERIC(10, 2), table_width INTEGER",foreignKey:""},lamination_factory_colors:{tableName:"lamination_factory_colors",prop:"name VARCHAR(255), lamination_type_id INTEGER, factory_id INTEGER",foreignKey:", FOREIGN KEY(lamination_type_id) REFERENCES lamination_default_colors(id), FOREIGN KEY(factory_id) REFERENCES factories(id)"},lamination_types:{tableName:"lamination_types",prop:"name VARCHAR(255)",foreignKey:""},lists_groups:{tableName:"lists_groups",prop:"name VARCHAR(255)",foreignKey:""},lists_types:{tableName:"lists_types",prop:"name VARCHAR(255), image_add_param VARCHAR(100)",foreignKey:""},options_coefficients:{tableName:"options_coefficients",prop:"rentability_percent INTEGER, rentability_hrn_m INTEGER, rentability_hrn INTEGER, others_percent INTEGER, others_hrn_m INTEGER, others_hrn INTEGER, transport_cost_percent INTEGER, transport_cost_hrn_m INTEGER, transport_cost_hrn INTEGER, salary_manager_percent INTEGER, salary_manager_hrn_m INTEGER, salary_manager_hrn INTEGER, rent_offices_percent INTEGER, rent_offices_hrn_m INTEGER, rent_offices_hrn INTEGER, salary_itr_percent INTEGER, salary_itr_hrn_m INTEGER, salary_itr_hrn INTEGER, rent_production_percent INTEGER, rent_production_hrn_m INTEGER, rent_production_hrn INTEGER, salary_glass_percent INTEGER, salary_glass_hrn_m INTEGER, salary_glass_hrn INTEGER, salary_assembly_percent INTEGER, salary_assembly_hrn_m INTEGER, salary_assembly_hrn INTEGER, estimated_cost INTEGER, factory_id INTEGER, plan_production INTEGER, margin NUMERIC(10, 2), coeff NUMERIC(10, 2)",foreignKey:""},options_discounts:{tableName:"options_discounts",prop:"factory_id INTEGER, min_time INTEGER, standart_time INTEGER, base_time INTEGER, week_1 INTEGER, week_2 INTEGER, week_3 INTEGER, week_4 INTEGER, week_5 INTEGER, week_6 INTEGER, week_7 INTEGER, week_8 INTEGER, percents ARRAY",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},elements:{tableName:"elements",prop:"heat_coeff INTEGER, name VARCHAR(255), element_group_id INTEGER, currency_id INTEGER, supplier_id INTEGER, margin_id INTEGER, waste NUMERIC(10, 2), is_optimized INTEGER, is_virtual INTEGER, is_additional INTEGER, weight_accounting_unit NUMERIC(10, 3), glass_folder_id INTEGER, min_width NUMERIC, min_height NUMERIC, max_width NUMERIC, max_height NUMERIC, max_sq NUMERIC, transcalency NUMERIC(10, 2), glass_width INTEGER, factory_id INTEGER, price NUMERIC(10, 2), amendment_pruning NUMERIC(10, 2), noise_coeff NUMERIC, sku VARCHAR(100), lamination_in_id INTEGER, lamination_out_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(glass_folder_id) REFERENCES glass_folders(id), FOREIGN KEY(margin_id) REFERENCES margin_types(id), FOREIGN KEY(supplier_id) REFERENCES suppliers(id), FOREIGN KEY(currency_id) REFERENCES currencies(id), FOREIGN KEY(element_group_id) REFERENCES elements_groups(id)"},profile_system_folders:{tableName:"profile_system_folders",prop:"name VARCHAR(255), factory_id INTEGER, position INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id)"},profile_systems:{tableName:"profile_systems",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, is_editable INTEGER, is_default INTEGER, position INTEGER, country VARCHAR(100), cameras INTEGER, heat_coeff INTEGER, noise_coeff INTEGER, heat_coeff_value NUMERIC(5,2), link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},profile_laminations:{tableName:"profile_laminations",prop:"profile_id INTEGER, lamination_in_id INTEGER, lamination_out_id INTEGER, rama_list_id INTEGER, rama_still_list_id INTEGER, stvorka_list_id INTEGER, impost_list_id INTEGER, shtulp_list_id INTEGER, code_sync VARCHAR",foreignKey:""},rules_types:{tableName:"rules_types",prop:"name VARCHAR(255), parent_unit INTEGER, child_unit INTEGER, suffix VARCHAR(15)",foreignKey:""},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"},users:{tableName:"users",prop:" email VARCHAR(255), password VARCHAR(255), factory_id INTEGER, name VARCHAR(255), phone VARCHAR(100), locked INTEGER, user_type INTEGER, city_phone VARCHAR(100), city_id INTEGER, fax VARCHAR(100), avatar VARCHAR(255), birthday DATE, sex VARCHAR(100), mount_mon NUMERIC(5,2), mount_tue NUMERIC(5,2), mount_wed NUMERIC(5,2), mount_thu NUMERIC(5,2), mount_fri NUMERIC(5,2), mount_sat NUMERIC(5,2), mount_sun NUMERIC(5,2), device_code VARCHAR(250), last_sync TIMESTAMP, address VARCHAR, therm_coeff_id INTEGER, factoryLink VARCHAR",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(city_id) REFERENCES cities(id)"},users_discounts:{tableName:"users_discounts",prop:"user_id INTEGER, max_construct NUMERIC(5,1), max_add_elem NUMERIC(5,1), default_construct NUMERIC(5,1), default_add_elem NUMERIC(5,1), week_1_construct NUMERIC(5,1), week_1_add_elem NUMERIC(5,1), week_2_construct NUMERIC(5,1), week_2_add_elem NUMERIC(5,1), week_3_construct NUMERIC(5,1), week_3_add_elem NUMERIC(5,1), week_4_construct NUMERIC(5,1), week_4_add_elem NUMERIC(5,1), week_5_construct NUMERIC(5,1), week_5_add_elem NUMERIC(5,1), week_6_construct NUMERIC(5,1), week_6_add_elem NUMERIC(5,1), week_7_construct NUMERIC(5,1), week_7_add_elem NUMERIC(5,1), week_8_construct NUMERIC(5,1), week_8_add_elem NUMERIC(5,1)",foreignKey:""},users_deliveries:{tableName:"users_deliveries",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},users_mountings:{tableName:"users_mountings",prop:"user_id INTEGER, active INTEGER, name VARCHAR, type INTEGER, price NUMERIC(6,1)",foreignKey:""},lists:{tableName:"lists",prop:"name VARCHAR(255), list_group_id INTEGER, list_type_id INTEGER, a NUMERIC(10, 2), b NUMERIC(10, 2), c NUMERIC(10, 2), d NUMERIC(10, 2), parent_element_id INTEGER, position NUMERIC, add_color_id INTEGER, addition_folder_id INTEGER, amendment_pruning NUMERIC(10, 2), waste NUMERIC(10, 2), cameras INTEGER, link VARCHAR, description VARCHAR, img VARCHAR, beed_lamination_id INTEGER",foreignKey:", FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(parent_element_id) REFERENCES elements(id), FOREIGN KEY(list_group_id) REFERENCES lists_groups(id), FOREIGN KEY(add_color_id) REFERENCES addition_colors(id)"},list_contents:{tableName:"list_contents",prop:"parent_list_id INTEGER, child_id INTEGER, child_type VARCHAR(255), value NUMERIC(10, 7), rules_type_id INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, lamination_type_id INTEGER",foreignKey:", FOREIGN KEY(parent_list_id) REFERENCES lists(id), FOREIGN KEY(rules_type_id) REFERENCES rules_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(lamination_type_id) REFERENCES lamination_types(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_types:{tableName:"window_hardware_types",prop:"name VARCHAR(255), short_name VARCHAR(100)",foreignKey:""},window_hardware_folders:{tableName:"window_hardware_folders",prop:"name VARCHAR, factory_id INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardware_groups:{tableName:"window_hardware_groups",prop:"name VARCHAR(255), short_name VARCHAR(100), folder_id INTEGER, is_editable INTEGER, is_group INTEGER, is_in_calculation INTEGER, is_default INTEGER, position INTEGER, producer VARCHAR(255), country VARCHAR(255), noise_coeff INTEGER, heat_coeff INTEGER, min_height INTEGER, max_height INTEGER, min_width INTEGER, max_width INTEGER, link VARCHAR, description VARCHAR, img VARCHAR",foreignKey:""},window_hardwares:{tableName:"window_hardwares",prop:"window_hardware_type_id INTEGER, min_width INTEGER, max_width INTEGER, min_height INTEGER, max_height INTEGER, direction_id INTEGER, window_hardware_color_id INTEGER, length INTEGER, count INTEGER, child_id INTEGER, child_type VARCHAR(100), position INTEGER, factory_id INTEGER, window_hardware_group_id INTEGER",foreignKey:", FOREIGN KEY(factory_id) REFERENCES factories(id), FOREIGN KEY(window_hardware_type_id) REFERENCES window_hardware_types(id), FOREIGN KEY(direction_id) REFERENCES directions(id), FOREIGN KEY(window_hardware_group_id) REFERENCES window_hardware_groups(id), FOREIGN KEY(window_hardware_color_id) REFERENCES window_hardware_colors(id)"},window_hardware_colors:{tableName:"window_hardware_colors",prop:"name VARCHAR(255)",foreignKey:""},window_hardware_handles:{tableName:"window_hardware_handles",prop:"element_id INTEGER, location VARCHAR(255), constant_value NUMERIC(10, 2)",foreignKey:""},elements_profile_systems:{tableName:"elements_profile_systems",prop:"profile_system_id INTEGER, element_id INTEGER",foreignKey:""},orders:{tableName:"orders",prop:"order_number VARCHAR, order_hz VARCHAR, order_date TIMESTAMP, order_type INTEGER, order_style VARCHAR, user_id INTEGER, created TIMESTAMP, additional_payment VARCHAR, sended TIMESTAMP, state_to TIMESTAMP, state_buch TIMESTAMP, batch VARCHAR, base_price NUMERIC(13, 2), factory_margin NUMERIC(11, 2), factory_id INTEGER, purchase_price NUMERIC(10, 2), sale_price NUMERIC(10, 2), climatic_zone INTEGER, heat_coef_min NUMERIC, products_qty INTEGER, templates_price NUMERIC, addelems_price NUMERIC, products_price NUMERIC, delivery_date TIMESTAMP, new_delivery_date TIMESTAMP, delivery_price NUMERIC, is_date_price_less INTEGER, is_date_price_more INTEGER, floor_id INTEGER, floor_price NUMERIC, mounting_id INTEGER, mounting_price NUMERIC, is_instalment INTEGER, instalment_id INTEGER, is_old_price INTEGER, payment_first NUMERIC, payment_monthly NUMERIC, payment_first_primary NUMERIC, payment_monthly_primary NUMERIC, order_price NUMERIC, order_price_dis NUMERIC, order_price_primary NUMERIC, discount_construct NUMERIC, discount_addelem NUMERIC, discount_construct_max NUMERIC, discount_addelem_max NUMERIC, delivery_user_id NUMERIC, mounting_user_id NUMERIC, default_term_plant NUMERIC, disc_term_plant NUMERIC, margin_plant NUMERIC, customer_name TEXT, customer_email TEXT, customer_phone VARCHAR(30), customer_phone_city VARCHAR(20), customer_city_id INTEGER, customer_city VARCHAR, customer_address TEXT, customer_house TEXT, customer_flat TEXT, customer_floor TEXT, customer_location VARCHAR, customer_itn INTEGER, customer_starttime VARCHAR, customer_endtime VARCHAR, customer_target VARCHAR, customer_sex INTEGER, customer_age INTEGER, customer_education INTEGER, customer_occupation INTEGER, customer_infoSource INTEGER",foreignKey:""},order_products:{tableName:"order_products",prop:"order_id NUMERIC, product_id INTEGER, is_addelem_only INTEGER, room_id INTEGER, construction_type INTEGER, template_id INTEGER, template_source TEXT, template_width NUMERIC, template_height NUMERIC, template_square NUMERIC, profile_id INTEGER, glass_id VARCHAR, hardware_id INTEGER, lamination_id INTEGER, lamination_out_id INTEGER, lamination_in_id INTEGER, door_shape_id INTEGER, door_sash_shape_id INTEGER, door_handle_shape_id INTEGER, door_lock_shape_id INTEGER, heat_coef_total NUMERIC, template_price NUMERIC, addelem_price NUMERIC, product_price NUMERIC, comment TEXT, product_qty INTEGER",foreignKey:""},order_addelements:{tableName:"order_addelements",prop:"order_id NUMERIC, product_id INTEGER, element_type INTEGER, element_id INTEGER, name VARCHAR, element_width NUMERIC, element_height NUMERIC, element_price NUMERIC, element_qty INTEGER, block_id INTEGER",foreignKey:""},template_groups:{tableName:"template_groups",prop:"name VARCHAR(255)",foreignKey:""},templates:{tableName:"templates",prop:"group_id INTEGER,name VARCHAR(255),icon TEXT,template_object TEXT",foreignKey:""},background_templates:{tableName:"background_templates",prop:"factory_id INTEGER,desc_1 VARCHAR(255),desc_2 VARCHAR(255),template_id INTEGER,group_id INTEGER,position INTEGER,img VARCHAR",foreignKey:""},factories:{tableName:"factories",prop:"name VARCHAR,app_token VARCHAR,link VARCHAR,therm_coeff_id INTEGER,max_construct_square INTEGER,max_construct_size INTEGER",foreignKey:""},mosquitos:{tableName:"mosquitos",prop:"profile_id INTEGER,name VARCHAR,bottom_id INTEGER,bottom_waste INTEGER,left_id INTEGER,left_waste INTEGER,top_id INTEGER,top_waste INTEGER,right_id INTEGER,right_waste INTEGER,cloth_id INTEGER,cloth_waste INTEGER",foreignKey:""},window_hardware_type_ranges:{tableName:"window_hardware_type_ranges",prop:"factory_id INTEGER,type_id INTEGER,max_width INTEGER,min_width INTEGER,max_height INTEGER,min_height INTEGER",foreignKey:""},"export":{tableName:"export",prop:"model VARCHAR, rowId INTEGER, field TEXT",foreignKey:""}},Q={cities:{tableName:"cities",prop:"name VARCHAR(255), region_id INTEGER, transport VARCHAR(2)",foreignKey:", FOREIGN KEY(region_id) REFERENCES regions(id)"},countries:{tableName:"countries",prop:"name VARCHAR(255), currency_id INTEGER",foreignKey:", FOREIGN KEY(currency_id) REFERENCES currencies(id)"},regions:{tableName:"regions",prop:"name VARCHAR(255), country_id INTEGER, heat_transfer NUMERIC(10, 2), climatic_zone NUMERIC",foreignKey:", FOREIGN KEY(country_id) REFERENCES countries(id)"}};return X.publicObj={tablesLocalDB:q,tablesLocationLocalDB:Q,cleanLocalDB:s,createTablesLocalDB:l,insertRowLocalDB:c,insertTablesLocalDB:u,selectLocalDB:p,updateLocalDB:_,deleteRowLocalDB:E,importUser:m,importLocation:g,importFactories:f,importAllDB:T,insertServer:I,updateServer:A,createUserServer:h,exportUserEntrance:S,deleteOrderServer:N,updateLocalServerDBs:L,sendIMGServer:O,md5:y,calculationPrice:Y,getAdditionalPrice:z,currencyExgange:G},X.publicObj}])}(),function(){angular.module("LoginModule").factory("loginServ",["$q","$cordovaGlobalization","$cordovaFileTransfer","$translate","$location","$filter","localDB","globalConstants","GeneralServ","optionsServ","GlobalStor","OrderStor","ProductStor","UserStor",function(e,t,i,r,n,o,a,s,l,d,c,u,p,_){function E(e){for(var t=s.languages.length;--t>-1;)if(s.languages[t].label.indexOf(e)+1){_.userInfo.langLabel=s.languages[t].label,_.userInfo.langName=s.languages[t].name;break}}function m(){if(c.global.isDevice=isDevice,c.global.isDevice)t.getPreferredLanguage().then(function(e){console.log("language++",e),E(e.value),r.use(_.userInfo.langLabel)},function(e){console.log("No language defined",e)});else{var e=navigator.language||navigator.userLanguage;E(e),r.use(_.userInfo.langLabel)}}function g(){var t=e.defer();return console.log("EXPORT"),a.selectLocalDB(a.tablesLocalDB["export"].tableName).then(function(e){e.length&&a.selectLocalDB(a.tablesLocalDB.users.tableName).then(function(i){i.length&&a.updateServer(i[0].phone,i[0].device_code,e).then(function(e){console.log("FINISH export",e),e&&(a.cleanLocalDB({"export":1}),t.resolve(1))})})}),t.promise}function f(){var t=e.defer();return a.selectLocalDB("sqlite_sequence").then(function(e){e&&e.length>5?t.resolve(1):t.resolve(0)}),t.promise}function T(t){var i,r,n,o=e.defer(),s=t?null:{id:_.userInfo.city_id};return a.selectLocalDB(a.tablesLocalDB.cities.tableName,s,"id as cityId, name as cityName, region_id as regionId").then(function(e){if(n=e.length){for(c.global.locations.cities=angular.copy(e);--n>-1;)for(r=c.global.locations.regions.length;--r>-1;)if(c.global.locations.cities[n].regionId===c.global.locations.regions[r].id)for(c.global.locations.cities[n].fullLocation=""+c.global.locations.cities[n].cityName+", "+c.global.locations.regions[r].name,
c.global.locations.cities[n].climaticZone=c.global.locations.regions[r].climaticZone,c.global.locations.cities[n].heatTransfer=c.global.locations.regions[r].heatTransfer,i=c.global.locations.countries.length;--i>-1;)c.global.locations.regions[r].countryId===c.global.locations.countries[i].id&&(c.global.locations.cities[n].countryId=c.global.locations.countries[i].id,c.global.locations.cities[n].currencyId=c.global.locations.countries[i].currency);o.resolve(1)}else o.resolve(0)}),o.promise}function I(t){var i,r,n=e.defer();return a.selectLocalDB(a.tablesLocalDB.countries.tableName,null,"id, name, currency_id as currency").then(function(e){i=e.length,i?c.global.locations.countries=angular.copy(e):console.log("Error!!!",e)}).then(function(){a.selectLocalDB(a.tablesLocalDB.regions.tableName,null,"id, name, country_id as countryId, climatic_zone as climaticZone, heat_transfer as heatTransfer").then(function(e){r=e.length,r?c.global.locations.regions=angular.copy(e):console.log("Error!!!",e)}).then(function(){T(t).then(function(){n.resolve(1)})})}),n.promise}function A(){var t=e.defer(),i=c.global.locations.cities.map(function(e){return e.countryId===_.userInfo.countryId?e.cityId:void 0}).join(",");return t.resolve(i),t.promise}function h(e,t,i,r,n){u.order.customer_city_id=e,u.order.customer_city=t,u.order.climatic_zone=i,u.order.heat_coef_min=r,u.order.customer_location=n}function S(){a.selectLocalDB(a.tablesLocalDB.factories.tableName,null,"therm_coeff_id, link, max_construct_size, max_construct_square").then(function(e){var t,i=_.userInfo.heatTransfer;e&&(t=e.length,t&&(_.userInfo.therm_coeff_id=angular.copy(e[0].therm_coeff_id),_.userInfo.therm_coeff_id&&(_.userInfo.heatTransfer=l.roundingValue(1/i)),e[0].link.length&&"null"!==e[0].link&&(_.userInfo.factoryLink=angular.copy(e[0].link)),+e[0].max_construct_square>0&&(c.global.maxSquareLimit=angular.copy(+e[0].max_construct_square)),+e[0].max_construct_size>0&&(c.global.maxSizeLimit=angular.copy(+e[0].max_construct_size)))),h(_.userInfo.city_id,_.userInfo.cityName,_.userInfo.climaticZone,_.userInfo.heatTransfer,_.userInfo.fullLocation)})}function N(){for(var e=c.global.locations.cities.length;--e>-1;)c.global.locations.cities[e].cityId===_.userInfo.city_id&&(_.userInfo.cityName=c.global.locations.cities[e].cityName,_.userInfo.countryId=c.global.locations.cities[e].countryId,_.userInfo.climaticZone=c.global.locations.cities[e].climaticZone,_.userInfo.heatTransfer=c.global.locations.cities[e].heatTransfer,_.userInfo.fullLocation=c.global.locations.cities[e].fullLocation)}function L(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.currencies.tableName,null,"id, is_base, name, value").then(function(e){var i=e.length;if(e&&i){for(c.global.currencies=e;--i>-1;)1===e[i].is_base&&(_.userInfo.currencyId=e[i].id,/uah/i.test(e[i].name)?_.userInfo.currency="₴":/rub/i.test(e[i].name)?_.userInfo.currency="":/(usd|\$)/i.test(e[i].name)?_.userInfo.currency="$":/eur/i.test(e[i].name)?_.userInfo.currency="€":_.userInfo.currency="¤");t.resolve(1)}else console.error("not find currencies!"),t.resolve(0)}),t.promise}function O(){var t=e.defer();return _.userInfo.avatar=s.serverIP+_.userInfo.avatar,a.selectLocalDB(a.tablesLocalDB.users_discounts.tableName).then(function(e){var i=angular.copy(e[0]);if(i){_.userInfo.discountConstr=+i.default_construct,_.userInfo.discountAddElem=+i.default_add_elem,_.userInfo.discountConstrMax=+i.max_construct,_.userInfo.discountAddElemMax=+i.max_add_elem;var r,n=Object.keys(i),o=n.length;for(r=0;o>r;r+=1)n[r].indexOf("week")+1&&(n[r].indexOf("construct")+1?_.userInfo.discConstrByWeek.push(+i[n[r]]):n[r].indexOf("add_elem")+1&&_.userInfo.discAddElemByWeek.push(+i[n[r]]));t.resolve(1)}else console.error("not find users_discounts!"),t.resolve(0)}),t.promise}function y(){return a.selectLocalDB(a.tablesLocalDB.options_coefficients.tableName,null,"margin, coeff").then(function(e){return e})}function C(){return a.selectLocalDB(a.tablesLocalDB.options_discounts.tableName).then(function(e){return e})}function R(e){if(e){if(/^.*\.(jpg|jpeg|png|gif|tiff)$/i.test(e)){var t=s.serverIP+""+e;if(c.global.isDevice){var r=e.split("/").pop(),n=cordova.file.documentsDirectory+""+r,o=!0,a={};return console.log("image name ====",r),console.log("image path ====",n),i.download(t,n,a,o).then(function(e){console.log("Success!",e)},function(e){console.log("Error!",e)},function(e){console.log("progress!",e)}),n}return t}return""}}function D(t,i,r,n){var o=e.defer();return a.selectLocalDB(t).then(function(t){var s=angular.copy(t).sort(function(e,t){return l.sorting(e.position,t.position)}),d=s.length;if(d){r.length=0,angular.extend(r,s);var c=s.map(function(t){var r=e.defer();return t.img=R(t.img),a.selectLocalDB(i,{folder_id:t.id}).then(function(e){if(e.length){var t=angular.copy(e).sort(function(e,t){return l.sorting(e.position,t.position)});r.resolve(t)}else r.resolve(0)}),r.promise});e.all(c).then(function(e){var t,i=e.length,a=[];for(t=0;i>t;t+=1){var s=e[t].length;if(e[t]&&s){for(;--s>-1;)e[t][s].img=R(e[t][s].img);n.push(e[t]),a.push(e[t][0].folder_id)}}var l=a.length,d=r.length;if(l)for(;--d>-1;){var c,u=0;for(c=0;l>c;c+=1)r[d].id===a[c]&&(u=1);u||r.splice(d,1)}o.resolve(1)})}else o.resolve(0)}),o.promise}function v(){for(var t=e.defer(),i=c.global.profiles.length,r=[];--i>-1;)for(var n=c.global.profiles[i].length;--n>-1;)r.push(c.global.profiles[i][n].id);var o=r.map(function(t){var i=e.defer(),r={profileId:t,glassTypes:[],glasses:[]};return a.selectLocalDB(a.tablesLocalDB.glass_folders.tableName).then(function(e){e.length?(r.glassTypes=angular.copy(e),c.global.glassesAll.push(r),i.resolve(1)):i.resolve(0)}),i.promise});return e.all(o).then(function(i){if(i){var r=c.global.glassesAll.map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.elements_profile_systems.tableName,{profile_system_id:t.profileId}).then(function(e){var t=e.length;t?i.resolve(e):i.resolve(0)}),i.promise});e.all(r).then(function(i){var r,n,o=i.length,s=[],l=[];for(r=0;o>r;r+=1){var d=e.defer();if(i[r]){var u=i[r].map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.elements.tableName,{id:t.element_id}).then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});d.resolve(e.all(u))}else d.resolve(0);s.push(d.promise)}for(n=0;o>n;n+=1){var p=e.defer(),_=i[n].map(function(t){var i=e.defer();return a.selectLocalDB(a.tablesLocalDB.lists.tableName,{parent_element_id:t.element_id}).then(function(e){var t=angular.copy(e),r=t.length;r?i.resolve(t[0]):i.resolve(0)}),i.promise});p.resolve(e.all(_)),l.push(p.promise)}e.all(s).then(function(e){var t=e.length;if(t)for(r=0;t>r;r+=1)c.global.glassesAll[r].glasses=e[r]}),e.all(l).then(function(e){var i=e.length;if(i)for(r=0;i>r;r+=1)c.global.glassesAll[r].glassLists=e[r],t.resolve(1)})})}}),t.promise}function b(){var e,t=c.global.glassesAll.length;for(e=0;t>e;e+=1){var i,r=c.global.glassesAll[e].glassLists.length,n=c.global.glassesAll[e].glassTypes.length,o=[],a=[];for(i=0;r>i;i+=1)c.global.glassesAll[e].glassLists[i].parent_element_id===c.global.glassesAll[e].glasses[i].id&&(c.global.glassesAll[e].glasses[i].elem_id=angular.copy(c.global.glassesAll[e].glasses[i].id),c.global.glassesAll[e].glasses[i].id=angular.copy(c.global.glassesAll[e].glassLists[i].id),c.global.glassesAll[e].glasses[i].name=angular.copy(c.global.glassesAll[e].glassLists[i].name),c.global.glassesAll[e].glasses[i].cameras=angular.copy(c.global.glassesAll[e].glassLists[i].cameras),c.global.glassesAll[e].glasses[i].position=angular.copy(c.global.glassesAll[e].glassLists[i].position),c.global.glassesAll[e].glasses[i].img=angular.copy(c.global.glassesAll[e].glassLists[i].img),c.global.glassesAll[e].glasses[i].img=R(c.global.glassesAll[e].glasses[i].img),c.global.glassesAll[e].glasses[i].link=angular.copy(c.global.glassesAll[e].glassLists[i].link),c.global.glassesAll[e].glasses[i].description=angular.copy(c.global.glassesAll[e].glassLists[i].description));for(c.global.glassesAll[e].glassTypes.sort(function(e,t){return l.sorting(e.position,t.position)});--n>-1;){c.global.glassesAll[e].glassTypes[n].img=R(c.global.glassesAll[e].glassTypes[n].img);var s=c.global.glassesAll[e].glasses.filter(function(t){return t.glass_folder_id===c.global.glassesAll[e].glassTypes[n].id});s.length&&(o.unshift(c.global.glassesAll[e].glassTypes[n]),s.sort(function(e,t){return l.sorting(e.position,t.position)}),a.unshift(s))}c.global.glassesAll[e].glassTypes=angular.copy(o),c.global.glassesAll[e].glasses=angular.copy(a),delete c.global.glassesAll[e].glassLists}}function P(){a.selectLocalDB(a.tablesLocalDB.window_hardware_type_ranges.tableName,null,"type_id, min_width, max_width, min_height, max_height").then(function(e){e&&e.length&&(c.global.hardwareLimits=angular.copy(e))})}function M(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.background_templates.tableName).then(function(e){var i=angular.copy(e),r=i.length;if(r){for(i=i.sort(function(e,t){return l.sorting(e.position,t.position)});--r>-1;)i[r].img=R(i[r].img),$("<img />").attr("src",i[r].img);c.global.rooms=i}t.resolve(1)}),t.promise}function x(){return a.selectLocalDB(a.tablesLocalDB.lamination_factory_colors.tableName,null,"id, name, lamination_type_id as type_id").then(function(e){return e})}function G(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.profile_laminations.tableName).then(function(e){if(e){c.global.laminatCouples=angular.copy(e);for(var i,r=c.global.laminatCouples.length,n=c.global.laminats.length;--r>-1;)for(delete c.global.laminatCouples[r].code_sync,delete c.global.laminatCouples[r].modified,i=0;n>i;i+=1)c.global.laminats[i].id===c.global.laminatCouples[r].lamination_in_id&&(c.global.laminatCouples[r].laminat_in_name=c.global.laminats[i].name,c.global.laminatCouples[r].img_in_id=c.global.laminats[i].type_id),c.global.laminats[i].id===c.global.laminatCouples[r].lamination_out_id&&(c.global.laminatCouples[r].laminat_out_name=c.global.laminats[i].name,c.global.laminatCouples[r].img_out_id=c.global.laminats[i].type_id);t.resolve(1)}else t.resolve(1)}),t.promise}function w(){var t=e.defer(),i=l.addElementDATA.map(function(e){return a.selectLocalDB(a.tablesLocalDB.lists.tableName,{list_group_id:e.id})});return e.all(i).then(function(e){var i,r=angular.copy(e),n=r.length;for(i=0;n>i;i+=1){var o={elementType:[],elementsList:r[i]};c.global.addElementsAll.push(o)}t.resolve(1)}),t.promise}function U(){var t=e.defer(),i=c.global.addElementsAll.map(function(t){var i=e.defer();if(t.elementsList&&t.elementsList.length){var r=t.elementsList.map(function(t){var i=e.defer();return t.img=R(t.img),a.selectLocalDB(a.tablesLocalDB.elements.tableName,{id:t.parent_element_id}).then(function(e){e&&e.length?(c.global.tempAddElements.push(angular.copy(e[0])),i.resolve(1)):i.resolve(0)}),i.promise});i.resolve(e.all(r))}else i.resolve(0);return i.promise});return t.resolve(e.all(i)),t.promise}function k(){var t=e.defer();return a.selectLocalDB(a.tablesLocalDB.addition_folders.tableName).then(function(e){var i=c.global.addElementsAll.length,r={id:0,name:o("translate")("add_elements.OTHERS")};for(e&&e.length&&(e=e.sort(function(e,t){return l.sorting(e.position,t.position)}));--i>-1;)if(c.global.addElementsAll[i].elementsList){e&&e.length&&(c.global.addElementsAll[i].elementType=angular.copy(e)),c.global.addElementsAll[i].elementType.push(r);var n,s=[],d=[],u=c.global.addElementsAll[i].elementType.length,p=c.global.addElementsAll[i].elementsList.length,_=c.global.tempAddElements.length;for(n=0;u>n;n+=1){var E,m=[];for(E=0;p>E;E+=1)if(c.global.addElementsAll[i].elementType[n].id===c.global.addElementsAll[i].elementsList[E].addition_folder_id){var g,f=0,T=0;switch(c.global.addElementsAll[i].elementsList[E].list_group_id){case 21:case 9:case 8:case 19:case 12:f=1e3;break;case 20:case 26:f=1e3,T=1e3}for(c.global.addElementsAll[i].elementsList[E].element_width=f,c.global.addElementsAll[i].elementsList[E].element_height=T,c.global.addElementsAll[i].elementsList[E].element_qty=1,g=0;_>g;g+=1)c.global.tempAddElements[g].id===c.global.addElementsAll[i].elementsList[E].parent_element_id&&(c.global.addElementsAll[i].elementsList[E].element_price=l.roundingValue(a.currencyExgange(c.global.tempAddElements[g].price,c.global.tempAddElements[g].currency_id),2));m.push(angular.copy(c.global.addElementsAll[i].elementsList[E]))}m.length?(m=o("orderBy")(m,"name"),s.push(m)):d.push(n)}s.length?c.global.addElementsAll[i].elementsList=angular.copy(s):c.global.addElementsAll[i].elementsList=0;var I=d.length;if(I)for(;--I>-1;)c.global.addElementsAll[i].elementType.splice(d[I],1)}t.resolve(1)}),t.promise}function H(){var t=e.defer();return w().then(function(){U().then(function(){k().then(function(){t.resolve(1)})})}),t.promise}function V(){a.selectLocalDB(a.tablesLocalDB.users_deliveries.tableName).then(function(e){e.length&&(c.global.supplyData=angular.copy(e))}),a.selectLocalDB(a.tablesLocalDB.users_mountings.tableName).then(function(e){e.length&&(c.global.assemblingData=angular.copy(e))}),d.getInstalment(function(e){e.status?c.global.instalmentsData=e.data.instalment:console.log(e)})}function B(){L().then(function(e){e&&O().then(function(e){e&&y().then(function(e){e&&e.length?(c.global.margins=angular.copy(e[0]),C().then(function(e){e&&e.length?(c.global.deliveryCoeff=angular.copy(e[0]),c.global.deliveryCoeff.percents=e[0].percents.split(",").map(function(e){return+e}),S(),D(a.tablesLocalDB.profile_system_folders.tableName,a.tablesLocalDB.profile_systems.tableName,c.global.profilesType,c.global.profiles).then(function(e){e&&v().then(function(e){e&&(b(),D(a.tablesLocalDB.window_hardware_folders.tableName,a.tablesLocalDB.window_hardware_groups.tableName,c.global.hardwareTypes,c.global.hardwares).then(function(e){e&&(P(),M().then(function(){H().then(function(){x().then(function(e){e&&e.length&&(c.global.laminats=angular.copy(e).map(function(e){return e.isActive=0,e}),c.global.laminats.push({id:1,type_id:1,isActive:0,name:o("translate")("mainpage.WHITE_LAMINATION")}),G().then(function(){c.global.laminatCouples.push(angular.copy(p.product.lamination))})),V(),c.global.isLoader=0,n.path("/main")})})}))}))})})):console.error("not find options_discounts!")})):console.error("not find options_coefficients!")})})})}var F=this;return F.publicObj={getDeviceLanguage:m,initExport:g,isLocalDBExist:f,prepareLocationToUse:I,downloadAllCities:T,collectCityIdsAsCountry:A,setUserLocation:N,setUserGeoLocation:h,downloadAllData:B},F.publicObj}])}(),function(){angular.module("MainModule").factory("MainServ",["$location","$q","$filter","$timeout","localDB","GeneralServ","SVGServ","loginServ","optionsServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","UserStor","AuxStor","CartStor","DesignStor",function(e,t,i,r,n,o,a,s,l,d,c,u,p,_,E,m,g){function f(){c.global.showRoomSelectorDialog=0,c.global.configMenuTips=c.global.startProgramm?1:0}function T(){p.product.door_shape_id=1,p.product.door_sash_shape_id=1,p.product.door_handle_shape_id=1,p.product.door_lock_shape_id=1}function I(){E.aux.isWindowSchemeDialog=0,E.aux.isAddElementListView=0,E.aux.isFocusedAddElement=0,E.aux.isTabFrame=0,E.aux.isAddElementListView=0,E.aux.showAddElementsMenu=0,E.aux.addElementGroups.length=0,E.aux.searchingWord="",E.aux.isGridSelectorDialog=0}function A(){c.global.isNavMenu=0,c.global.isConfigMenu=1,c.global.activePanel=0,I(),c.global.startProgramm&&(r(function(){c.global.showRoomSelectorDialog=1},2e3),r(f,5e3))}function h(){n.exportUserEntrance(_.userInfo.phone,_.userInfo.device_code)}function S(){var e=(new Date).getTime();return 1*(_.userInfo.id+""+e)}function N(){var e;u.order.id=S(),u.order.order_date=(new Date).getTime(),e=new Date(u.order.order_date).getDate()+c.global.deliveryCoeff.standart_time,u.order.delivery_date=(new Date).setDate(e),u.order.new_delivery_date=angular.copy(u.order.delivery_date)}function L(){u.order.discount_construct=angular.copy(_.userInfo.discountConstr),u.order.discount_addelem=angular.copy(_.userInfo.discountAddElem)}function O(){p.product.construction_type=c.global.rooms[0].group_id,p.product.template_id=c.global.rooms[0].template_id-1}function y(e){var r=t.defer();switch(e){case 1:l.getTemplatesWindow(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_WINDOW"),r.resolve(e.data.windows)):console.log(e)});break;case 2:l.getTemplatesWindowDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY_ENTER"),r.resolve(e.data.windowDoor)):console.log(e)});break;case 3:l.getTemplatesBalcony(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_BALCONY"),r.resolve(e.data.balconies)):console.log(e)});break;case 4:l.getTemplatesDoor(function(e){e.status?(c.global.templateLabel=i("translate")("panels.TEMPLATE_DOOR"),r.resolve(e.data.doors)):console.log(e)})}return r.promise}function C(e,t){for(var i,r=t.length;--r>-1;)for(i=t[r].length;--i>-1;)if(t[r][i].id===e)return t[r][i]}function R(e){var i=t.defer();return n.selectLocalDB(n.tablesLocalDB.lists.tableName,{id:e}).then(function(e){var t={};e.length&&(t.a=e[0].a,t.b=e[0].b,t.c=e[0].c,t.d=e[0].d),i.resolve(t)}),i.promise}function D(e,i){var r=t.defer();return i?e.profile=angular.copy(C(i,c.global.profiles)):e.profile=angular.copy(c.global.profiles[0][0]),t.all([R(e.profile.rama_list_id),R(e.profile.rama_still_list_id),R(e.profile.stvorka_list_id),R(e.profile.impost_list_id),R(e.profile.shtulp_list_id)]).then(function(t){e.profileDepths.frameDepth=t[0],e.profileDepths.frameStillDepth=t[1],e.profileDepths.sashDepth=t[2],e.profileDepths.impostDepth=t[3],e.profileDepths.shtulpDepth=t[4],r.resolve(1)}),r.promise}function v(e){for(var t=e.details.length,i=[];--t>0;)e.details[t].children.length||e.details[t].glassId&&i.push(angular.copy(e.details[t].glassId));return i}function b(e,t,i,r){for(var n=e.details.length;--n>0;)if(r){if(e.details[n].id===r){e.details[n].glassId=t,e.details[n].glassTxt=i;break}}else e.details[n].glassId=t,e.details[n].glassTxt=i}function P(e,t){if(e.glass.length=0,t)for(var i=o.removeDuplicates(v(p.product.template)),r=i.length;--r>-1;)e.glass.push(C(i[r],c.global.glasses));else{var n=c.global.glassesAll.filter(function(t){return t.profileId===e.profile.id});n.length&&(c.global.glassTypes=angular.copy(n[0].glassTypes),c.global.glasses=angular.copy(n[0].glasses),e.glass.push(angular.copy(c.global.glasses[0][0])),c.global.selectGlassId=e.glass[0].id,c.global.selectGlassName=e.glass[0].sku,b(p.product.template_source,e.glass[0].id,e.glass[0].sku))}}function M(e){for(var t=e.details.length,i=0;--t>0;)"sash"===e.details[t].blockType&&(i+=1);return i}function x(e){var i=t.defer();return c.global.isChangedTemplate||(p.product.template_source=angular.copy(c.global.templatesSource[e])),P(p.product),a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e),c.global.isSashesInTemplate=M(p.product.template_source),a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e),i.resolve(1)})}),i.promise}function G(e,t){t?e.hardware=C(t,c.global.hardwares):c.global.isSashesInTemplate?e.hardware=c.global.hardwares[0][0]:e.hardware={}}function w(e,i){var r=t.defer(),o=p.product.glass.map(function(r){var o=t.defer();return r.glass_width?(n.selectLocalDB(n.tablesLocalDB.beed_profile_systems.tableName,{profile_system_id:e,glass_width:r.glass_width},"list_id").then(function(e){var a=e.length,s={glassId:r.id,beadId:0};if(a)if(a>1){var l=e.map(function(e){var r=t.defer();return n.selectLocalDB(n.tablesLocalDB.lists.tableName,{id:e.list_id},"beed_lamination_id as id").then(function(e){e&&e[0].id===i?r.resolve(1):r.resolve(0)}),r.promise});t.all(l).then(function(t){for(var i=t.length;--i>-1;)t[i]&&(s.beadId=e[i].list_id,o.resolve(s));s.beadId||(console.log("Error in bead!!"),o.resolve(0))})}else s.beadId=e[0].list_id,o.resolve(s);else console.log("Error in bead!!"),o.resolve(0)}),o.promise):void 0});return r.resolve(t.all(o)),r.promise}function U(e){var t=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time],i=o.setPriceDis(e.template_price,u.order.discount_construct);e.product_price=o.roundingValue(e.template_price+e.addelem_price),e.productPriceDis=i+e.addelemPriceDis,t&&(e.productPriceDis=o.setPriceDis(e.productPriceDis,t)),c.global.isLoader=0}function k(e){var i=t.defer();return n.calculationPrice(e).then(function(e){if(e.priceTotal){var t=o.addMarginToPrice(e.priceTotal,c.global.margins.coeff);p.product.template_price=o.roundingValue(t,2),U(p.product),i.resolve(e)}else p.product.template_price=0,i.resolve(0)}),i.promise}function H(e){var t,i,r,n,a,s=[],l=e.length;if(l){for(t=0;l>t;t+=1)if(i=angular.copy(e[t]),i.element_id=angular.copy(i.id),i.amount=angular.copy(i.qty),delete i.id,delete i.amendment_pruninng,delete i.currency_id,delete i.qty,delete i.waste,t){if(r=s.length,n=0,r){for(;--r>-1;)s[r].element_id===i.element_id&&s[r].size===i.size&&(n++,s[r].amount+=i.amount,s[r].priceReal+=i.priceReal);n||s.push(i)}}else s.push(i);for(r=s.length;--r>-1;)s[r].amount=o.roundingValue(s[r].amount,3),a=o.addMarginToPrice(s[r].priceReal,c.global.margins.coeff),s[r].priceReal=o.roundingValue(a,2)}return s}function V(e){for(var t,i=0,r=e.sizes[5].length,n=p.product.glass.length,a=0,s=0,l=0;--r>-1;){for(t=0;n>t;t+=1)e.sizes[5][r].elemId==p.product.glass[t].id&&(angular.isNumber(p.product.glass[t].transcalency)||(p.product.glass[t].transcalency=1),a+=p.product.glass[t].transcalency*e.sizes[5][r].square);i+=e.sizes[5][r].square}a=o.roundingValue(a),i=o.roundingValue(i,3),angular.isNumber(p.product.profile.heat_coeff_value)||(p.product.profile.heat_coeff_value=1),s=p.product.profile.heat_coeff_value*(p.product.template_square-i),l=s+a,_.userInfo.therm_coeff_id?p.product.heat_coef_total=o.roundingValue(l/p.product.template_square):p.product.heat_coef_total=o.roundingValue(p.product.template_square/l)}function B(e,i,r,n,a){var s=t.defer();return c.global.isLoader=1,w(i,a).then(function(t){var i=o.removeDuplicates(angular.copy(t).map(function(t){for(var i=e.priceElements.beadsSize.length;--i>-1;)e.priceElements.beadsSize[i].glassId===t.glassId&&(e.priceElements.beadsSize[i].elemId=t.beadId);return t.beadId})),l={laminationId:a,ids:[p.product.profile.rama_list_id,p.product.profile.rama_still_list_id,p.product.profile.stvorka_list_id,p.product.profile.impost_list_id,p.product.profile.shtulp_list_id,r.length>1?r.map(function(e){return e.id}):r[0].id,i.length>1?i:i[0],n],sizes:[]};for(var E in e.priceElements)l.sizes.push(angular.copy(e.priceElements[E]));p.product.template_width=0,p.product.template_height=0,p.product.template_square=0;for(var m=p.product.template.details[0].overallDim.length;--m>-1;)p.product.template_width+=p.product.template.details[0].overallDim[m].w,p.product.template_height+=p.product.template.details[0].overallDim[m].h,p.product.template_square+=p.product.template.details[0].overallDim[m].square;k(l).then(function(e){s.resolve(1),e&&(5===_.userInfo.user_type||7===_.userInfo.user_type)&&(p.product.report=H(e.constrElements))}),V(l),c.global.startProgramm&&d.sendAnalyticsData(_.userInfo.id,u.order.id,p.product.template_id,p.product.profile.id,1)}),s.promise}function F(){var e=t.defer();return x(p.product.template_id).then(function(){G(p.product);var t=p.product.hardware.id||0;B(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){e.resolve(1)})}),e.promise}function W(e){var i=t.defer();return y(e).then(function(e){e?(c.global.templatesSourceSTORE=angular.copy(e),c.global.templatesSource=angular.copy(e),D(p.product).then(function(){F().then(function(){i.resolve(1)})})):i.resolve(0)}),i.promise}function Y(e){for(var t=c.global.lamGroupFiltered.length,i=1;--t>-1;)c.global.lamGroupFiltered[t].id===e&&(i=0);return i}function z(){var e,t=c.global.laminats.length,i=c.global.laminatCouples.filter(function(e){return e.profile_id?e.profile_id===p.product.profile.id:!0}),r=0;for(c.global.lamGroupFiltered.length=0;--t>-1;)if(c.global.laminats[t].isActive)for(r=1,e=i.length;--e>-1;)i[e].img_in_id===c.global.laminats[t].type_id?Y(i[e].id)&&c.global.lamGroupFiltered.push(i[e]):i[e].img_out_id===c.global.laminats[t].type_id&&Y(i[e].id)&&c.global.lamGroupFiltered.push(i[e]);c.global.lamGroupFiltered.length||r||(c.global.lamGroupFiltered=i)}function X(){for(var e=c.global.laminats.length;--e>-1;)c.global.laminats[e].isActive=0}function K(e){var t=c.global.laminatCouples.length;for(X();--t>-1;)e?c.global.laminatCouples[t].id===e&&(p.product.lamination=c.global.laminatCouples[t]):c.global.laminatCouples[t].id||(p.product.lamination=c.global.laminatCouples[t])}function q(e){var i=t.defer();return e?(p.product.profile.rama_list_id=p.product.lamination.rama_list_id,p.product.profile.rama_still_list_id=p.product.lamination.rama_still_list_id,p.product.profile.stvorka_list_id=p.product.lamination.stvorka_list_id,p.product.profile.impost_list_id=p.product.lamination.impost_list_id,p.product.profile.shtulp_list_id=p.product.lamination.shtulp_list_id):p.product.profile=angular.copy(C(p.product.profile.id,c.global.profiles)),t.all([R(p.product.profile.rama_list_id),R(p.product.profile.rama_still_list_id),R(p.product.profile.stvorka_list_id),R(p.product.profile.impost_list_id),R(p.product.profile.shtulp_list_id)]).then(function(e){p.product.profileDepths.frameDepth=e[0],p.product.profileDepths.frameStillDepth=e[1],p.product.profileDepths.sashDepth=e[2],p.product.profileDepths.impostDepth=e[3],p.product.profileDepths.shtulpDepth=e[4],a.createSVGTemplate(p.product.template_source,p.product.profileDepths).then(function(e){p.product.template=angular.copy(e);var t=p.product.hardware.id||0;B(p.product.template,p.product.profile.id,p.product.glass,t,p.product.lamination.lamination_in_id).then(function(){i.resolve(1)}),a.createSVGTemplateIcon(p.product.template_source,p.product.profileDepths).then(function(e){p.product.templateIcon=angular.copy(e)})})}),i.promise}function Q(e){var t,r,n,a,s,l,d,c=e.details,u=c.length;g.design.extraGlass.length=0,p.product.glass.forEach(function(e){if(e.max_sq||e.max_width&&e.max_height&&e.min_width&&e.min_height)for(d=1;u>d;d+=1)l=0,c[d].glassId===e.id&&c[d].glassPoints&&c[d].glassPoints.length&&(r=o.getMaxMinCoord(c[d].glassPoints),n=Math.round(r.maxX-r.minX),a=Math.round(r.maxY-r.minY),s=o.roundingValue(n*a/1e6,3),s>e.max_sq&&(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SQUARE")+" "+s+" "+i("translate")("design.MAX_VALUE_HIGHER")+" "+e.max_sq+" "+i("translate")("common_words.LETTER_M")+"2.",g.design.extraGlass.push(t)),(n>e.max_width||n<e.min_width)&&(l=1),(a>e.max_height||a<e.min_height)&&(l=1),l&&(t=i("translate")("design.GLASS")+" "+e.name+" "+i("translate")("design.GLASS_SIZE")+" "+n+" x "+a+" "+i("translate")("design.NO_MATCH_RANGE")+" "+e.max_width+" - "+e.max_height+".",g.design.extraGlass.push(t)))})}function j(e){var t,r,n,a,s,l,d,u=e.details,p=u.length,_=c.global.hardwareLimits,E=c.global.hardwareLimits.length,m=0;for(g.design.extraHardware.length=0,l=1;p>l;l+=1)if(s=0,"sash"===u[l].blockType){for(d=0;E>d;d+=1)if(_[d].type_id===u[l].sashType){_[d].max_width&&_[d].max_height&&_[d].min_width&&_[d].min_height&&(m=_[d]);break}m&&u[l].hardwarePoints.length&&(t=o.getMaxMinCoord(u[l].hardwarePoints),r=Math.round(t.maxX-t.minX),n=Math.round(t.maxY-t.minY),m.max_width=50,m.max_height=50,(r>m.max_width||r<m.min_width)&&(s=1),(n>m.max_height||n<m.min_height)&&(s=1),s&&(a=r+" x "+n+" "+i("translate")("design.NO_MATCH_RANGE")+" ("+m.min_width+" - "+m.max_width+") x ("+m.min_height+" - "+m.max_height+")",g.design.extraHardware.push(a)))}}function Z(e,t){if(c.global.isInfoBox!==e){for(var i=t.length,r={};--i>-1;)t[i].lamination_type_id?t[i].lamination_type_id===e&&(r=t[i]):t[i].id===e&&(r=t[i]);$.isEmptyObject(r)||(c.global.infoTitle=r.name,c.global.infoImg=r.img,c.global.infoLink=r.link,c.global.infoDescrip=r.description,c.global.isInfoBox=e)}}function J(){console.log("new project!!!!!!!!!!!!!!",u.order),p.product=p.setDefaultProduct(),N(),L(),c.global.isChangedTemplate=0,c.global.isShowCommentBlock=0,c.global.isCreatedNewProject=1,c.global.isCreatedNewProduct=1,O(),W(p.product.construction_type).then(function(){c.global.isLoader=0,A(),X(),z(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function ee(){console.log("new product!!!!!!!!!!!!!!!"),p.product=p.setDefaultProduct(),c.global.isCreatedNewProduct=1,c.global.isChangedTemplate=0,O(),W(p.product.construction_type).then(function(){A(),X(),z(),"main"!==c.global.currOpenPage&&(c.global.showRoomSelectorDialog=0,e.path("/main"),r(function(){c.global.showRoomSelectorDialog=1},1e3))})}function te(){for(var e=p.product.chosenAddElements.length,t=0;--e>-1;)p.product.chosenAddElements[e].length&&t++;return t}function ie(){var e=1;if(p.product.is_addelem_only&&(e=te()),e){if(c.global.tempAddElements.length=0,c.global.configMenuTips=0,c.global.isShowCommentBlock=0,I(),c.global.productEditNumber)for(var t=u.order.products.length;--t>-1;)u.order.products[t].product_id===c.global.productEditNumber&&(u.order.products[t]=angular.copy(p.product));else p.product.product_id=u.order.products.length>0?u.order.products.length+1:1,p.product.template_source.beads=angular.copy(p.product.template.priceElements.beadsSize),delete p.product.template,u.order.products.push(p.product);c.global.isCreatedNewProduct=0,o.stopStartProg()}return e}function re(){r(function(){o.setPreviosPage(),e.path("/cart")},100)}function ne(e){n.deleteRowLocalDB(n.tablesLocalDB.orders.tableName,{id:e}),n.deleteRowLocalDB(n.tablesLocalDB.order_products.tableName,{order_id:e}),n.deleteRowLocalDB(n.tablesLocalDB.order_addelements.tableName,{order_id:e})}function oe(e,i,r){var a=t.defer();c.global.orderEditNumber&&(ne(c.global.orderEditNumber),n.deleteOrderServer(_.userInfo.phone,_.userInfo.device_code,c.global.orderEditNumber),c.global.orderEditNumber=0),angular.extend(u.order,e);var l,d=u.order.products.length;for(l=0;d>l;l+=1){var p=angular.copy(u.order.products[l]);p.order_id=u.order.id,p.template_source=JSON.stringify(u.order.products[l].template_source),p.profile_id=u.order.products[l].profile.id,p.glass_id=u.order.products[l].glass.map(function(e){return e.id}).join(", "),p.hardware_id=u.order.products[l].hardware.id||0,p.lamination_id=u.order.products[l].lamination.id,p.lamination_in_id=u.order.products[l].lamination.lamination_in_id,p.lamination_out_id=u.order.products[l].lamination.lamination_out_id,p.modified=new Date,p.template&&delete p.template,delete p.templateIcon,delete p.profile,delete p.glass,delete p.hardware,delete p.lamination,delete p.chosenAddElements,delete p.profileDepths,delete p.addelemPriceDis,delete p.productPriceDis,delete p.report,u.order.products_qty+=u.order.products[l].product_qty,console.log("SEND PRODUCT------",p),n.insertRowLocalDB(p,n.tablesLocalDB.order_products.tableName),i&&n.insertServer(_.userInfo.phone,_.userInfo.device_code,n.tablesLocalDB.order_products.tableName,p);for(var E=angular.copy(u.order.products[l].report),g=E.length;--g>-1;)E[g].order_id=u.order.id,E[g].price=angular.copy(E[g].priceReal),delete E[g].priceReal;var f,T=u.order.products[l].chosenAddElements.length;for(f=0;T>f;f+=1){var I,A=u.order.products[l].chosenAddElements[f].length;if(A>0)for(I=0;A>I;I+=1){var h={order_id:u.order.id,product_id:u.order.products[l].product_id,element_type:u.order.products[l].chosenAddElements[f][I].element_type,element_id:u.order.products[l].chosenAddElements[f][I].id,name:u.order.products[l].chosenAddElements[f][I].name,element_width:u.order.products[l].chosenAddElements[f][I].element_width,element_height:u.order.products[l].chosenAddElements[f][I].element_height,element_price:u.order.products[l].chosenAddElements[f][I].element_price,element_qty:u.order.products[l].chosenAddElements[f][I].element_qty,block_id:u.order.products[l].chosenAddElements[f][I].block_id,
modified:new Date};console.log("SEND ADD",h),n.insertRowLocalDB(h,n.tablesLocalDB.order_addelements.tableName),i&&n.insertServer(_.userInfo.phone,_.userInfo.device_code,n.tablesLocalDB.order_addelements.tableName,h)}}}var S=angular.copy(u.order);return S.order_date=new Date(u.order.order_date),S.order_type=i,S.order_style=r,S.factory_id=_.userInfo.factory_id,S.user_id=_.userInfo.id,S.delivery_date=new Date(u.order.delivery_date),S.new_delivery_date=new Date(u.order.new_delivery_date),S.customer_sex=+u.order.customer_sex||0,S.customer_age=u.order.customer_age?u.order.customer_age.id:0,S.customer_education=u.order.customer_education?u.order.customer_education.id:0,S.customer_occupation=u.order.customer_occupation?u.order.customer_occupation.id:0,S.customer_infoSource=u.order.customer_infoSource?u.order.customer_infoSource.id:0,S.products_qty=o.roundingValue(u.order.products_qty),S.discount_construct_max=_.userInfo.discountConstrMax,S.discount_addelem_max=_.userInfo.discountAddElemMax,S.default_term_plant=c.global.deliveryCoeff.percents[c.global.deliveryCoeff.standart_time],S.disc_term_plant=m.cart.discountDeliveyPlant,S.margin_plant=m.cart.marginDeliveyPlant,i&&(S.additional_payment="",S.created=new Date,S.sended=new Date(0),S.state_to=new Date(0),S.state_buch=new Date(0),S.batch="---",S.base_price=0,S.factory_margin=0,S.purchase_price=0,S.sale_price=0,S.modified=new Date),delete S.products,delete S.floorName,delete S.mountingName,delete S.selectedInstalmentPeriod,delete S.selectedInstalmentPercent,delete S.productsPriceDis,delete S.orderPricePrimaryDis,delete S.paymentFirstDis,delete S.paymentMonthlyDis,delete S.paymentFirstPrimaryDis,delete S.paymentMonthlyPrimaryDis,console.log("!!!!orderData!!!!",S),i?n.insertServer(_.userInfo.phone,_.userInfo.device_code,n.tablesLocalDB.orders.tableName,S).then(function(e){e.status&&(S.order_number=e.order_number),n.insertRowLocalDB(S,n.tablesLocalDB.orders.tableName),a.resolve(1)}):(n.insertRowLocalDB(S,n.tablesLocalDB.orders.tableName),a.resolve(1)),u.order=u.setDefaultOrder(),s.setUserGeoLocation(_.userInfo.city_id,_.userInfo.cityName,_.userInfo.climaticZone,_.userInfo.heatTransfer,_.userInfo.fullLocation),c.global.isCreatedNewProject=0,a.promise}var ae=this;return ae.publicObj={saveUserEntry:h,createOrderData:N,createOrderID:S,setCurrDiscounts:L,setCurrTemplate:O,prepareTemplates:W,downloadAllTemplates:y,setCurrentProfile:D,setCurrentGlass:P,setGlassToTemplateBlocks:b,setCurrentHardware:G,fineItemById:C,parseTemplate:F,saveTemplateInProduct:x,checkSashInTemplate:M,preparePrice:B,setProductPriceTOTAL:U,showInfoBox:Z,closeRoomSelectorDialog:f,laminatFiltering:z,setCurrLamination:K,setProfileByLaminat:q,checkGlassSizes:Q,checkHardwareSizes:j,createNewProject:J,createNewProduct:ee,setDefaultDoorConfig:T,prepareMainPage:A,setDefaultAuxParam:I,inputProductInOrder:ie,goToCart:re,saveOrderInDB:oe,deleteOrderInDB:ne},ae.publicObj}])}(),function(){angular.module("MainModule").factory("NavMenuServ",["$location","$http","$filter","$cordovaGeolocation","GeneralServ","MainServ","CartMenuServ","GlobalStor","OrderStor","ProductStor",function(e,t,i,r,n,o,a,s,l,d){function c(){function e(e){var i=e.coords.latitude,r=e.coords.longitude;t.get("http://maps.googleapis.com/maps/api/geocode/json?latlng="+i+","+r+"&sensor=true&language=ru").then(function(e){var t=e.results[0].formatted_address.split(", ");l.order.customer_city_id=156,l.order.customer_city=t[t.length-3],l.order.climatic_zone=7,l.order.heat_coef_min=.99,l.order.customer_location=t[t.length-3]+", "+t[t.length-2]+", "+t[t.length-1]},function(e,t){console.log("Something went wrong with User recive!",e,t)})}function i(e){console.log(e.message)}r.getCurrentPosition().then(e,i)}function u(){var e="ru_RU";return e}function p(){s.global.isVoiceHelper=!s.global.isVoiceHelper,s.global.isVoiceHelper&&(s.global.voiceHelperLanguage=u(),playTTS(i("translate")("construction.VOICE_SWITCH_ON"),s.global.voiceHelperLanguage))}function _(){s.global.isNavMenu=!1,s.global.isConfigMenu=!0,n.setPreviosPage(),e.path("/history")}function E(){n.stopStartProg(),d.product.is_addelem_only?o.createNewProduct():(d.product=d.setDefaultProduct(),o.closeRoomSelectorDialog(),o.setDefaultAuxParam(),d.product.is_addelem_only=1,s.global.isNavMenu=0,s.global.isConfigMenu=1,s.global.activePanel=6)}function m(){s.global.startProgramm?(n.stopStartProg(),o.prepareMainPage()):(s.global.isLoader=1,s.global.isCreatedNewProject&&s.global.isCreatedNewProduct?o.inputProductInOrder()&&(a.calculateOrderPrice(),o.saveOrderInDB({},0,"")):s.global.isCreatedNewProject&&!s.global.isCreatedNewProduct&&o.saveOrderInDB({},0,""),n.setPreviosPage(),o.createNewProject())}var g=this;return g.publicObj={getCurrentGeolocation:c,setLanguageVoiceHelper:u,switchVoiceHelper:p,gotoHistoryPage:_,createAddElementsProduct:E,clickNewProject:m},g.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("optionsServ",["$filter",function(e){return{getTemplateImgIcons:function(t){t(new OkResult({templateImgs:[{id:1,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/1.png"},{id:2,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/3.png"},{id:3,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/4.png"},{id:4,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/5.png"},{id:5,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/6.png"},{id:6,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/7.png"},{id:7,name:e("translate")("panels.ONE_WINDOW_TYPE"),src:"img/templates/8.png"},{id:8,name:e("translate")("panels.TWO_WINDOW_TYPE"),src:"img/templates/9.png"},{id:9,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/10.png"},{id:10,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/11.png"},{id:11,name:e("translate")("panels.THREE_WINDOW_TYPE"),src:"img/templates/12.png"}]}))},getTemplatesWindow:function(e){e(new OkResult({windows:[{name:"Глухое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Двухстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:530,y:0,dir:"line"},{type:"impost",id:"ip1",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:0,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1060,y:300,dir:"line"},{type:"impost",id:"ip3",x:530,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Одностворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:1060,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1060,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1060,y:1320,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1320,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:530,y:0,dir:"line"},{type:"impost",id:"ip3",x:530,y:1320,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:["block_6","block_7"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1050,y:0,dir:"line"},{type:"impost",id:"ip3",x:1050,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]},{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:2100,y:300,dir:"line"},{type:"impost",id:"ip1",x:0,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:0,dir:"line"},{type:"impost",id:"ip3",x:700,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_6","block_7"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:700,y:300,dir:"line"},{type:"impost",id:"ip3",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_2",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_2",children:["block_8","block_9"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:300,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_6",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_7",level:3,blockType:"frame",parent:"block_3",children:["block_10","block_11"],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:300,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_8",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_9",level:4,blockType:"frame",parent:"block_5",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_10",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_11",level:4,blockType:"frame",parent:"block_7",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesWindowDoor:function(e){e(new OkResult({windowDoor:[{name:"Выход на балкон",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1","block_2"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:1300,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp5",x:1300,y:0,dir:"line",view:1},{type:"frame",id:"fp6",x:2e3,y:0,dir:"line",view:1},{type:"frame",id:"fp7",x:2e3,y:2100,dir:"line",view:1},{type:"frame",id:"fp8",x:1300,y:2100,dir:"line",view:1}],pointsIn:[],parts:[],glassId:0,glassTxt:"",openDir:[1,4],handlePos:4,sashType:2}]}]}))},getTemplatesBalcony:function(e){e(new OkResult({balconies:[{name:"Трехстворчатое",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"frame",parent:"block_0",children:["block_2","block_3"],impost:{impostAxis:[{type:"impost",id:"ip1",x:700,y:0,dir:"line"},{type:"impost",id:"ip1",x:700,y:1400,dir:"line"}],impostOut:[],impostIn:[]},pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:2100,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:2100,y:1400,dir:"line",view:1,sill:1},{type:"frame",id:"fp4",x:0,y:1400,dir:"line",view:1,sill:1}],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_2",level:2,blockType:"frame",parent:"block_1",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_3",level:2,blockType:"frame",parent:"block_1",children:["block_4","block_5"],pointsOut:[],pointsIn:[],impost:{impostAxis:[{type:"impost",id:"ip3",x:1400,y:0,dir:"line"},{type:"impost",id:"ip3",x:1400,y:1400,dir:"line"}],impostOut:[],impostIn:[]},parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_4",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""},{type:"skylight",id:"block_5",level:3,blockType:"frame",parent:"block_3",children:[],pointsOut:[],pointsIn:[],parts:[],glassId:0,glassTxt:""}]}]}))},getTemplatesDoor:function(e){e(new OkResult({doors:[{name:"Одностворчатая",details:[{type:"skylight",id:"block_0",level:0,blockType:"frame",children:["block_1"],maxSizeLimit:5e3},{type:"skylight",id:"block_1",level:1,blockType:"sash",parent:"block_0",children:[],pointsOut:[{type:"frame",id:"fp1",x:0,y:0,dir:"line",view:1},{type:"frame",id:"fp2",x:700,y:0,dir:"line",view:1},{type:"frame",id:"fp3",x:700,y:2100,dir:"line",view:1},{type:"frame",id:"fp4",x:0,y:2100,dir:"line",view:1}],pointsIn:[],parts:[],glassId:0,glassTxt:"",openDir:[1,4],handlePos:4,sashType:2}]}]}))},getInstalment:function(e){e(new OkResult({instalment:[{id:1,name:1,value:15},{id:2,name:2,value:20},{id:3,name:3,value:25},{id:4,name:4,value:30},{id:5,name:5,value:35}]}))}}}])}(),function(){angular.module("SettingsModule").factory("SettingServ",["$rootScope","$location","localDB","GlobalStor","UserStor",function(e,t,i,r,n){function o(e,t){n.userInfo.avatar=e,i.sendIMGServer(t),i.updateLocalDB(i.tablesLocalDB.users.tableName,{avatar:e},{id:n.userInfo.id})}function a(){t.path("/"+r.global.currOpenPage)}function s(){t.path("/location")}function l(){t.path("/change-pass")}function d(){t.path("/change-lang")}function c(){t.path("/settings")}function u(){console.log("prevOpenPage +++",r.global.prevOpenPage),t.path(r.global.prevOpenPage)}var p=this;return p.publicObj={changeAvatar:o,closeLocationPage:a,gotoLocationPage:s,gotoPasswordPage:l,gotoLanguagePage:d,gotoSettingsPage:c,closeSettingsPage:u},p.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("SoundPlayServ",function(){function e(){var e=document.getElementById("sounds");e.play()}var t=this;return t.soundsIntervals={menu:{start:7.93,end:11.7},swip:{start:8,end:9},price:{from:21.5,to:23.2},fly:{start:.57,end:1.59},switching:{start:1.81,end:2.88}},t.publicObj={playSound:e},t.publicObj})}(),function(){angular.module("MainModule").factory("SVGServ",["$q","globalConstants","GeneralServ","GlobalStor","ProductStor","DesignStor",function(e,t,i,r,n,o){function a(e,t){var r=e.coefA*t.coefB-t.coefA*e.coefB,n=e.coefB*t.coefC-t.coefB*e.coefC,o=t.coefA*e.coefC-e.coefA*t.coefC,a={x:i.roundingValue(i.roundingValue(n/r,3)),y:i.roundingValue(i.roundingValue(o/r,3))};return a.x===-0?a.x=0:a.y===-0&&(a.y=0),a}function s(e,t,r){var n={x:i.roundingValue((e.x-t.x)/(r.x-t.x)),y:i.roundingValue((e.y-t.y)/(r.y-t.y))};return n.x===-(1/0)?n.x=1/0:n.y===-(1/0)&&(n.y=1/0),n.x===-0?n.x=0:n.y===-0&&(n.y=0),n}function l(e,t){var i={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return i}function d(e,t){for(var i,r,n,o=t.length;--o>-1;){for(i=t.length,r=0,n=0;i>n;n+=1)switch(e){case 1:t[n].x===t[o].x&&(r+=1);break;case 2:t[n].y===t[o].y&&(r+=1);break;case 3:t[n].x===t[o].x&&t[n].y===t[o].y&&(r+=1)}r>1&&t.splice(o,1)}}function c(e){for(var t,i=[],r=e.length;--r>0;)if(t=e[r].pointsOut.length)for(;--t>-1;)i.push(angular.copy(e[r].pointsOut[t]));return d(3,i),i}function u(e,t){for(var i,r=t.length;--r>-1;)for(i=t.length;--i>-1;)if(r!==i&&t[r]&&t[i])switch(e){case 1:t[r].x===t[i].x&&("impost"!==t[i].type&&"shtulp"!==t[i].type||"frame"!==t[r].type&&"corner"!==t[r].type?delete t[r]:delete t[i]);break;case 2:t[r].y===t[i].y&&("impost"!==t[i].type&&"shtulp"!==t[i].type||"frame"!==t[r].type&&"corner"!==t[r].type?delete t[r]:delete t[i])}return t.filter(function(e){return e?1:0})}function p(e,t){return e.x-t.x}function _(e,t){return e.y-t.y}function E(e,t,i){return(i.x-t.x)*(i.y-e.y)-(i.y-t.y)*(i.x-e.x)}function m(e,t){var i=1,r=t.length;if(r)for(;--r>-1;)t[r].x===e.x&&t[r].y===e.y&&(i=0);return i}function g(e,t){var i=0,r=t.length;if(r)for(;--r>-1;)t[r].id.slice(0,3)===e.slice(0,3)&&t[r].id.slice(0,3).indexOf("q")+1&&(i=1);return i}function f(e,t,r){var n={x:i.roundingValue((1-e)*t.x+e*r.x),y:i.roundingValue((1-e)*t.y+e*r.y)};return n}function T(e,t,r){var n=l(t.from,t.to),o={};if(t.coefA&&t.coefB)switch(e){case 1:o.y=n.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),o.x=n.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)));break;case 2:o.y=n.y-Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2))),o.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)))+n.x;break;case 3:o.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+n.y,o.x=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.y-n.y,2)))+n.x;break;case 4:o.y=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+n.y,o.x=n.x-Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(n.y-o.y,2)))}else o.x=Math.sqrt(Math.pow(r,2)/(1+Math.pow(t.coefB/t.coefA,2)))+n.x,o.y=Math.sqrt(Math.abs(Math.pow(r,2)-Math.pow(o.x-n.x,2)))+n.y;return o.y=i.roundingValue(o.y,1),o.x=i.roundingValue(o.x,1),o}function I(e,t,r,n){return i.roundingValue(n*n*(e-2*t+r)-2*n*(e-t)+e)}function A(e){var t=e.length,i={x:e.reduce(function(e,t){return"curv"===t.dir?e+t.xQ:e+t.x},0)/t,y:e.reduce(function(e,t){return"curv"===t.dir?e+t.yQ:e+t.y},0)/t};return i}function h(e,t){var i;return i="curv"===t.dir?Math.atan2(e.y-t.yQ,t.xQ-e.x)*(180/Math.PI):Math.atan2(e.y-t.y,t.x-e.x)*(180/Math.PI),0>i&&(i+=360),i}function S(e,t){var i,r=e.length;for(i=0;r>i;i+=1)e[i].fi=h(t,e[i]);return e.sort(function(e,t){return t.fi-e.fi}),e}function N(e){e.coefA=e.from.y-e.to.y,e.coefB=e.to.x-e.from.x,e.coefC=e.from.x*e.to.y-e.to.x*e.from.y}function L(e,t){var i="";return i=e.indexOf("ip")+1&&t.indexOf("ip")+1?"impost":e.indexOf("sht")+1&&t.indexOf("sht")+1&&e===t?"shtulp":"frame"}function O(e){var t,r=[],n=e.length;for(t=0;n>t;t+=1)if("frame"!==e[t].type||e[t].view){var o,a={};a.from=angular.copy(e[t]),a.dir=e[t].dir,t===n-1?(o=0,"frame"!==e[o].type||e[o].view||(o=1)):(o=t+1,"frame"!==e[o].type||e[o].view||(o=o===n-1?0:t+2)),a.to=angular.copy(e[o]),a.type=L(e[t].id,e[o].id),"line"===a.dir&&(a.dir="curv"===e[o].dir?"curv":"line"),a.size=i.roundingValue(Math.hypot(a.to.x-a.from.x,a.to.y-a.from.y)),N(a),r.push(a)}var s=r.pop();return r.unshift(s),r}function y(e,t,i){var r=0,n=20;switch(i){case"frame":"frame"===t.type?r=e.frameDepth.c:"impost"===t.type?r=e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.b/2);break;case"frame-bead":case"sash-bead":r=n;break;case"frame-glass":"frame"===t.type?r=e.frameDepth.d-e.frameDepth.c:"impost"===t.type&&(r=e.impostDepth.b-e.impostDepth.c/2);break;case"sash-out":"frame"===t.type?r=e.frameDepth.b-e.frameDepth.c:"impost"===t.type?r=e.impostDepth.d-e.impostDepth.c/2:"shtulp"===t.type&&(r=e.shtulpDepth.a/2-e.shtulpDepth.b/2);break;case"sash-in":r=e.sashDepth.c;break;case"hardware":r=e.sashDepth.b;break;case"sash-glass":r=e.sashDepth.d-e.sashDepth.c}var o=t.coefC-r*Math.hypot(t.coefA,t.coefB);return o}function C(e){var t=e.from.x,i=e.from.y,r=e.to.x,n=e.to.y;return Math.round((n-i)/(r-t))}function R(e,t){var i=C(e),r=C(t);return i===r?1:0}function D(e,t){var i={},r={},n=R(e,t);if(n){var o=e.to.x,s=e.to.y,l={coefA:e.coefB,coefB:-e.coefA,coefC:e.coefA*s-e.coefB*o};r=a(e,l)}else r=a(e,t);return i.x=r.x,i.y=r.y,"impost"===e.type||"impost"===t.type?i.type="impost":"shtulp"===e.type||"shtulp"===t.type?i.type="shtulp":i.type="frame","curv"===e.to.dir?(i.dir="curv",i.xQ=e.to.xQ,i.yQ=e.to.yQ):i.dir="line",
i.id=e.to.id,i.view=1,i}function v(e,t,i){var r,n=[],o=e.length;for(r=0;o>r;r+=1){var a,s=angular.copy(e[r]),l={},d={};s.coefC=y(t,s,i),a=r===o-1?0:r+1,l=angular.copy(e[a]),l.coefC=y(t,l,i),d=D(s,l),n.push(d)}return n}function b(e,t){return Math.round(t/2+e*e/(8*t))}function P(e,r,n,o){e.startX=I(r.x,n.x,o.x,.5),e.startY=I(r.y,n.y,o.y,.5),e.lengthChord=i.roundingValue(Math.hypot(o.x-r.x,o.y-r.y)),e.radius=b(e.lengthChord,e.heightQ),e.radiusMax=b(e.lengthChord,e.lengthChord/4),e.radiusMin=b(e.lengthChord,t.minRadiusHeight)}function M(e){var t,i=e.pointsQ.length;if(i)for(t=0;i>t;t+=1){var r,n=e.pointsOut.length,o=0,a=0;for(r=0;n>r;r+=1)e.pointsQ[t].fromPId===e.pointsOut[r].id&&(o=e.pointsOut[r]),e.pointsQ[t].toPId===e.pointsOut[r].id&&(a=e.pointsOut[r]);if(o&&a){var s,d={from:o,to:a},c=l(o,a),u={type:e.pointsQ[t].type,id:e.pointsQ[t].id,dir:"curv",xQ:c.x,yQ:c.y};N(d),s=T(e.pointsQ[t].positionQ,d,2*e.pointsQ[t].heightQ),u.x=s.x,u.y=s.y,d.coefA||1!==e.pointsQ[t].positionQ?d.coefB||4!==e.pointsQ[t].positionQ||(u.x-=4*e.pointsQ[t].heightQ):u.y-=4*e.pointsQ[t].heightQ,e.pointsOut.push(angular.copy(u)),e.pointsQ[t].midleX=u.xQ,e.pointsQ[t].midleY=u.yQ,P(e.pointsQ[t],o,u,a)}}}function x(e){var t=0;return e.x===1/0&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&e.y===1/0?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)?t=1:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&$.isNumeric(e.y)?(e.y<-2||e.y>2)&&(t=1):$.isNumeric(e.x)&&e.y>=0&&e.y<=1&&(e.x<-2||e.x>2)&&(t=1),t}function G(e,t){var i=l(t.from,t.to);if(e)return i;var r={coefA:t.coefB,coefB:-t.coefA,coefC:t.coefA*i.y-t.coefB*i.x};return a(t,r)}function w(e,t,i,r,n){var o,a,s,d,c;i[e].from.id.indexOf("q")+1?(s=e-1,i[s]||(s=t-1),d=i[s].from,c=i[e].to,o=angular.copy(i[e].from)):i[e].to.id.indexOf("q")+1&&(s=e+1,i[s]||(s=0),d=i[e].from,c=i[s].to,o=angular.copy(i[e].to)),a=angular.copy(o);var u=f(r.t,d,o),p=f(r.t,a,c),_=l(d,r),E=l(r,c);o.x=u.x,o.y=u.y,o.xQ=_.x,o.yQ=_.y,a.x=p.x,a.y=p.y,a.xQ=E.x,a.yQ=E.y;for(var g=n.length;--g>-1;)n[g].id===o.id&&n.splice(g,1);var T=m(o,n);T&&n.push(o);var I=m(a,n);I&&n.push(a)}function U(e,t,i){var r,n=[];if(t?(r={type:"impost",id:i.impostAxis[2].id,dir:"curv"},n.push(i.impostOut[0],i.impostOut[1])):(r=angular.copy(i.impostOut[2]),n=i.impostIn.filter(function(t){return t.group===e&&"line"===t.dir?1:0})),2===n.length){var o,a={from:angular.copy(n[0]),to:angular.copy(n[1])},s=l(a.from,a.to);if(N(a),o=T(i.impostAxis[2].positionQ,a,2*i.impostAxis[2].heightQ),r.x=o.x,r.y=o.y,r.xQ=s.x,r.yQ=s.y,r.group=e,a.coefA||1!==i.impostAxis[2].positionQ?a.coefB||4!==i.impostAxis[2].positionQ||(r.x-=4*i.impostAxis[2].heightQ):r.y-=4*i.impostAxis[2].heightQ,t)return i.impostOut.push(r),r;i.impostIn.push(r)}}function k(e,t,i,r){var n,o,a,s=t.length;for(n=0;s>n;n+=1)a=E(e[0],e[1],t[n]),a>0?(o=0,r.length&&(o=g(t[n].id,r)),o||r.push(angular.copy(t[n]))):0>a&&(o=0,i.length&&(o=g(t[n].id,i)),o||i.push(angular.copy(t[n])))}function H(e,t,i){var r,n=e.length;for(r=0;n>r;r+=1)e[r].group?i.push(angular.copy(e[r])):t.push(angular.copy(e[r]))}function V(e,t,r,n,o){var a,s,l,d,c,u=[],p={x:n.y-o.y,y:o.x-n.x},_={x:e.x-2*t.x+r.x,y:e.y-2*t.y+r.y},E={x:2*(t.x-e.x),y:2*(t.y-e.y)},m={x:e.x,y:e.y},g=n.x*o.y-o.x*n.y,f=[];if(a=Math.abs(p.x)===Math.abs(p.y)?Math.abs(p.x*_.x)+Math.abs(p.y*_.y):Math.abs(p.x)?Math.abs(p.y)?p.x*_.x+p.y*_.y:p.x*_.x+_.y:_.x+p.y*_.y,s=(p.x*E.x+p.y*E.y)/a,l=(p.x*m.x+p.y*m.y+g)/a,d=s*s-4*l,d>0){var T=Math.sqrt(d);f.push(i.roundingValue((-s+T)/2),i.roundingValue((-s-T)/2))}else 0===d&&f.push(i.roundingValue(-s/2));for(c=0;c<f.length;c+=1){var A=f[c];if(A>0&&1>A){var h={t:A,x:I(e.x,t.x,r.x,A),y:I(e.y,t.y,r.y,A)},S=Math.min(n.x,o.x,e.x,t.x,r.x),N=Math.min(n.y,o.y,e.y,t.y,r.y),L=Math.max(n.x,o.x,e.x,t.x,r.x),O=Math.max(n.y,o.y,e.y,t.y,r.y);n.x===o.x&&h.y>=N&&h.y<=O?u.push(h):n.y===o.y&&h.x>=S&&h.x<=L?u.push(h):h.x>=S&&h.y>=N&&h.x<=L&&h.y<=O&&u.push(h)}}return u}function B(e,t,i,r,n){var o,a,s,l,d,c;return i[e].from.id.indexOf("q")+1?(c=e-1,i[c]||(c=t-1),o=i[c].from,a=i[e].from,s=i[e].to):i[e].to.id.indexOf("q")+1&&(c=e+1,i[c]||(c=0),o=i[e].from,a=i[e].to,s=i[c].to),l=r,d=n,V(o,a,s,l,d)}function F(e,t,i,r,n,o,l,d,c){var u=a(n[i],o),p=s(u,n[i].to,n[i].from),_=x(p);if(_){var E=angular.copy(l);if(E.group=e,E.x=u.x,E.y=u.y,"curv"===n[i].dir){var g=G(t,o),f=B(i,r,n,g,u);f.length&&(E.x=f[0].x,E.y=f[0].y,E.t=f[0].t)}var T=m(E,d);T&&("curv"===n[i].dir&&t&&w(i,r,n,E,c),d.push(angular.copy(E)))}}function W(e,t,i){if(e.children.length){var r,n,o,a,s,l=t.length,d=e.impost.impostAxis.length,c=angular.copy(e.impost.impostAxis[0]),u=angular.copy(e.impost.impostAxis[1]),p=angular.copy(e.pointsOut);"sash"===e.blockType?(r=angular.copy(e.sashPointsIn),n=e.sashLinesIn):(r=angular.copy(e.pointsIn),n=e.linesIn);var _=n.length;for(s=1;l>s;s+=1)t[s].id===e.children[0]?o=s:t[s].id===e.children[1]&&(a=s);var E={type:"impost"===c.type?"impost":"shtulp",from:c,to:u},m={type:"impost"===c.type?"impost":"shtulp",from:u,to:c};N(E),N(m);var g=angular.copy(E),f=angular.copy(m);for(g.coefC=y(i,g,"frame"),f.coefC=y(i,f,"frame"),s=0;_>s;s+=1)F(0,0,s,_,n,g,c,e.impost.impostIn),F(1,0,s,_,n,f,u,e.impost.impostIn),F(0,1,s,_,n,E,c,e.impost.impostOut,r);if(3===d){var T,I=e.impost.impostOut.length;for(s=0;I>s;s+=1)e.impost.impostOut[s].fi=h(e.center,e.impost.impostOut[s]),e.impost.impostAxis[s].fi=h(e.center,e.impost.impostAxis[s]);e.impost.impostOut[0].fi!==e.impost.impostAxis[0].fi&&e.impost.impostOut.reverse(),T=U(0,1,e.impost),U(0,0,e.impost),U(1,0,e.impost),t[o].pointsOut.push(angular.copy(T)),t[a].pointsOut.push(angular.copy(T)),e.impost.impostAxis[2].midleX=T.xQ,e.impost.impostAxis[2].midleY=T.yQ,P(e.impost.impostAxis[2],e.impost.impostOut[0],T,e.impost.impostOut[1])}var A=angular.copy(e.impost.impostAxis);k(A,p,t[o].pointsOut,t[a].pointsOut),k(A,r,t[o].pointsIn,t[a].pointsIn),H(e.impost.impostIn,t[o].pointsIn,t[a].pointsIn);var S,L=e.linesOut.length;for(e.impost.impostAxis[2]&&(S=angular.copy(e.impost.impostAxis[2])),e.impost.impostAxis.length=0,s=0;L>s;s+=1)F(0,0,s,L,e.linesOut,E,c,e.impost.impostAxis);for(S&&e.impost.impostAxis.push(S),s=0;2>s;s+=1)t[o].pointsOut.push(angular.copy(e.impost.impostAxis[s])),t[a].pointsOut.push(angular.copy(e.impost.impostAxis[s]))}}function Y(e,t,i,r,n){e.points.push(t,i,r,n),("corner"===t.type||"corner"===i.type)&&(e.type="corner"),t.sill&&i.sill&&(e.sill=1)}function z(e){var t="M "+e[0].x+","+e[0].y,i=1,r=e.length;if(4===r)for(;r>i;i+=1)t+=" L "+e[i].x+","+e[i].y,i===r-1&&(t+=" Z");else if(6===r)for(;r>i;i+=1)3===i?t+=" L "+e[i].x+","+e[i].y:(t+=" Q "+e[i].x+","+e[i].y+" "+e[i+1].x+","+e[i+1].y,i+=1),i===r-1&&(t+=" Z");return t}function X(e){var t=e.length,r=0;if(2===t||4===t)r=i.roundingValue(Math.hypot(e[1].x-e[0].x,e[1].y-e[0].y),1);else if(3===t||6===t)for(var n=.01,o=0;1>=o;){var a=2*((1-o)*(e[1].x-e[0].x)+o*(e[2].x-e[1].x)),s=2*((1-o)*(e[1].y-e[0].y)+o*(e[2].y-e[1].y));r+=Math.hypot(a,s)*n,o+=n}return r}function K(e,t,r,a){var s,l,d,c=e.filter(function(e){return"frame"!==e.type||e.view?!0:!1}),u=[],p=c.length,_={glassId:a,sizes:[]};for(d=0;p>d;d+=1)if(0!==d||"curv"!==c[d].dir){var E={type:c[d].type,dir:"line",points:[]};if(d===p-1){if("curv"===c[d].dir)break;"curv"===c[0].dir?(E.type="arc",E.points.push(c[d],c[0],c[1],t[1],t[0],t[d]),("corner"===c[d].type||"corner"===c[1].type)&&(E.type="arc-corner"),E.dir="curv"):4!==n.product.construction_type||1!==o.design.doorConfig.doorShapeIndex&&2!==o.design.doorConfig.doorShapeIndex?4===n.product.construction_type&&3===o.design.doorConfig.doorShapeIndex&&"frame"===c[0].type&&"fp3"===c[0].id?(s=angular.copy(c[0]),s.y=1*t[0].y,Y(E,c[d],s,t[0],t[d])):Y(E,c[d],c[0],t[0],t[d]):"frame"===c[0].type&&"fp3"===c[0].id?(s=angular.copy(t[0]),s.y=1*c[0].y,Y(E,c[d],c[0],s,t[d])):Y(E,c[d],c[0],t[0],t[d])}else if("curv"===c[d].dir||"curv"===c[d+1].dir)E.type="arc",E.points.push(c[d],c[d+1]),c[d+2]?(E.points.push(c[d+2],t[d+2]),("corner"===c[d].type||"corner"===c[d+2].type)&&(E.type="arc-corner")):(E.points.push(c[0],t[0]),("corner"===c[d].type||"corner"===c[0].type)&&(E.type="arc-corner")),E.points.push(t[d+1],t[d]),E.dir="curv",d+=1;else if(4!==n.product.construction_type||1!==o.design.doorConfig.doorShapeIndex&&2!==o.design.doorConfig.doorShapeIndex)4===n.product.construction_type&&3===o.design.doorConfig.doorShapeIndex?("frame"===c[d].type&&"fp3"===c[d].id&&(s=angular.copy(t[d]),s.x=1*c[d].x,l=angular.copy(t[d+1]),l.x=1*c[d+1].x,Y(E,c[d],c[d+1],l,s),E.doorstep=1),"frame"===c[d].type&&"fp4"===c[d].id?(s=angular.copy(c[d]),s.y=1*t[d].y,Y(E,s,c[d+1],t[d+1],t[d])):("frame"===c[d].type&&"fp3"!==c[d].id||"frame"!==c[d].type)&&Y(E,c[d],c[d+1],t[d+1],t[d])):Y(E,c[d],c[d+1],t[d+1],t[d]);else{if(1===o.design.doorConfig.doorShapeIndex&&"frame"===c[d].type&&"fp3"===c[d].id)continue;2===o.design.doorConfig.doorShapeIndex&&"frame"===c[d].type&&"fp3"===c[d].id&&(s=angular.copy(c[d]),s.x=1*t[d].x,l=angular.copy(c[d+1]),l.x=1*t[d+1].x,Y(E,s,l,t[d+1],t[d]),E.doorstep=1),"frame"===c[d].type&&"fp4"===c[d].id?(s=angular.copy(t[d]),s.y=1*c[d].y,Y(E,c[d],c[d+1],t[d+1],s)):("frame"===c[d].type&&"fp3"!==c[d].id||"frame"!==c[d].type)&&Y(E,c[d],c[d+1],t[d+1],t[d])}E.path=z(E.points),E.size=X(E.points);var m=i.roundingValue(angular.copy(E.size)/1e3,3);"bead"===c[d].type?(E.type="bead",_.sizes.push(m)):"sash"===c[d].type?(E.type="sash",r.sashsSize.push(m)):"frame"===E.type&&(E.sill?r.frameSillSize.push(m):r.framesSize.push(m)),u.push(E)}return _.sizes.length&&r.beadsSize.push(_),u}function q(e){var t,i=0,r=e.length;for(t=0;r>t;t+=1)i+=e[t+1]?e[t].x*e[t+1].y-e[t].y*e[t+1].x:e[t].x*e[0].y-e[t].y*e[0].x;return i/=2e6}function Q(e){var t,r=e.length,n=[];for(t=0;r>t;t+=1){var o,a=0;if(0!==t||"curve"!==e[t].dir){if(o=e[t+1]?t+1:0,"curve"===e[o].dir){var s,l=.01,d=0;for(s=e[t+2]?t+2:1;1>=d;){var c=2*((1-d)*(e[o].x-e[t].x)+d*(e[s].x-e[o].x)),u=2*((1-d)*(e[o].y-e[t].y)+d*(e[s].y-e[o].y));a+=Math.hypot(c,u)*l,d+=l}t+=1}else a=i.roundingValue(Math.hypot(e[o].x-e[t].x,e[o].y-e[t].y),1);n.push(a)}}return n}function j(e,t,r){var n,o={type:"glass",points:e,path:"M ",square:0},a={elemId:r},s=e.length;for(n=0;s>n;n+=1)0===n&&("curv"===e[n].dir?o.path+=e[s-1].x+","+e[s-1].y:o.path+=e[n].x+","+e[n].y),"curv"===e[n].dir?(o.path+=" Q "+e[n].x+","+e[n].y+",",e[n+1]?o.path+=e[n+1].x+","+e[n+1].y:o.path+=e[0].x+","+e[0].y+" Z",n+=1):(o.path+=" L "+e[n].x+","+e[n].y,n===s-1&&(o.path+=" Z"));return o.square=q(e),o.sizes=Q(e),a.square=angular.copy(o.square),a.sizes=angular.copy(o.sizes).map(function(e){return i.roundingValue(e/1e3,3)}),t.glassSquares.push(a),o}function Z(e,t,i){return 0===i?"arc"!==e[t].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0:i===t?"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[0].type?1:0:"arc"!==e[i-1].type&&"frame"===e[i].type&&"arc"!==e[i+1].type?1:0}function J(e){var t,i=e.length;for(t=1;i>t;t+=1)if(1===e[t].level){var r,n=e[t].pointsOut.length;if("single"===e[t].position)for(r=0;n>r;r+=1)e[t].pointsOut[r].corner=Z(e[t].pointsOut,n-1,r);else if("first"===e[t].position)for(r=0;n>r;r+=1)e[t].pointsOut[r].fi>90&&e[t].pointsOut[r].fi<270&&(e[t].pointsOut[r].corner=Z(e[t].pointsOut,n-1,r));else if("last"===e[t].position)for(r=0;n>r;r+=1)(e[t].pointsOut[r].fi<90||e[t].pointsOut[r].fi>270)&&(e[t].pointsOut[r].corner=Z(e[t].pointsOut,n-1,r))}}function ee(e,t){for(var i=angular.copy(e),r=i.length;--r>-1;)i[r].type=t;return i}function te(e){var t,i=[],r=e.length;for(t=0;r>t;t+=1)if("curv"===e[t].dir){var n,o,a=.5,s={},l=t;0===t?(n=r-1,o=t+1):t===r-1?(n=t-1,o=0):(n=t-1,o=t+1),s.x=I(e[n].to.x,e[l].to.x,e[o].to.x,a),s.y=I(e[n].to.y,e[l].to.y,e[o].to.y,a),i.push(s)}else i.push(e[t].to);return i}function ie(e,t){var i=Math.tan(t*Math.PI/180),r={center:e,coefA:i,coefB:-1,coefC:e.y-i*e.x};return r}function re(e,t,i){var r,n=i.length;for(r=0;n>r;r+=1){var o,l,d,c;if(o=a(t,i[r]),o.x>=0&&o.y>=0&&(l=s(o,i[r].to,i[r].from),d=x(l))){if("curv"===i[r].dir&&(c=B(r,n,i,t.center,o),c.length&&(o.x=c[0].x,o.y=c[0].y)),o.fi=h(t.center,o),!e)return o;switch(e){case 1:if(o.fi>180)return o;break;case 2:if(o.fi>90&&o.fi<270)return o;break;case 3:if(o.fi<180)return o;break;case 4:if(o.fi>270||o.fi<90)return o}}}}function ne(e,t,i,r){var n=ie(t,i),o=re(e,n,r);return o}function oe(e,t){var i,r=[],n=te(t),o=A(n),a=e.length;for(i=0;a>i;i+=1){var s={type:"sash-dir",points:[]};switch(e[i]){case 1:s.points.push(ne(1,o,225,t),ne(3,o,90,t),ne(1,o,315,t));break;case 2:s.points.push(ne(2,o,225,t),ne(4,o,180,t),ne(2,o,135,t));break;case 3:s.points.push(ne(3,o,135,t),ne(1,o,270,t),ne(3,o,45,t));break;case 4:s.points.push(ne(4,o,45,t),ne(2,o,180,t),ne(4,o,315,t))}r.push(s)}return r}function ae(e,t,i,r){for(var n={sizes:[],openDir:t,type:e},o=i.length;--o>-1;)n.sizes.push(i[o].size);r.sashesBlock.push(n)}function se(e){var t,i,r,n,o,a=[],s=[],l=[],d=e.length;for(r=0;d>r;r+=1)e[r].id.indexOf("qi")+1&&(e[r].group?i=e[r]:t=e[r]);for(r=0;d>r;r+=1)if(!(e[r].id.indexOf("qi")+1)){var c=E(t,i,e[r]);c>0?s.push(e[r]):l.push(e[r])}for(n=0;n<s.length;n+=1)s[n].group?a.unshift(s[n]):a.push(s[n]);for(a.unshift(i),a.push(t),o=0;o<l.length;o+=1)l[o].group?a.unshift(l[o]):a.push(l[o]);return a}function le(e,t){var i,r=[];if(4===e)for(;--e>-1;)t[e].group&&r.push(t[e]);else if(6===e){for(i=0;e>i;i+=1)t[i].group&&(t[i].id.indexOf("ip")+1||t[i].id.indexOf("sht")+1)&&r.push(t[i]);for(i=0;e>i;i+=1)t[i].group&&t[i].id.indexOf("qi")+1&&r.splice(1,0,t[i])}return r}function de(e,t){var r=e[0].type,n=e.length,o={type:r,dir:"line"};if(4===n){var a=A(e);o.points=S(e,a)}else 6===n&&(o.dir="curv",o.points=se(e));o.path=z(o.points);var s=le(n,o.points);o.size=X(s);var l=i.roundingValue(angular.copy(o.size)/1e3,3);return"impost"===r?t.impostsSize.push(l):"shtulp"===r&&t.shtulpsSize.push(l),o}function ce(e,r,n,o,a,s){for(var l=n.length;--l>-1;){var d,c,u={blockId:r,level:e,dimId:n[l].id,minLimit:t.minRadiusHeight};for(d=1;s>d;d+=1)if(1===a[d].level&&a[d].pointsQ){var p=a[d].pointsQ.length;if(p)for(c=0;p>c;c+=1)if(a[d].pointsQ[c].id===u.dimId){switch(a[d].pointsQ[c].positionQ){case 1:u.axis="y",u.from=angular.copy(a[d].pointsQ[c].startY),u.to=angular.copy(a[d].pointsQ[c].midleY);break;case 2:u.axis="x",u.from=angular.copy(a[d].pointsQ[c].midleX),u.to=angular.copy(a[d].pointsQ[c].startX);break;case 3:u.axis="y",u.from=angular.copy(a[d].pointsQ[c].midleY),u.to=angular.copy(a[d].pointsQ[c].startY);break;case 4:u.axis="x",u.from=angular.copy(a[d].pointsQ[c].startX),u.to=angular.copy(a[d].pointsQ[c].midleX)}u.text=i.roundingValue(angular.copy(a[d].pointsQ[c].heightQ),1),u.maxLimit=a[d].pointsQ[c].lengthChord/4}}"x"===u.axis?o.dimX.push(u):o.dimY.push(u)}}function ue(e,t){for(var i=t.dimX.length,r=t.dimY.length;--i>-1;)t.dimX[i].level&&(e.w+=t.dimX[i].text);for(;--r>-1;)t.dimY[r].level&&(e.h+=t.dimY[r].text)}function pe(e,t){for(var i=t.length;--i>-1;)t[i].t||"curv"===t[i].dir||t[i].id.indexOf("fp")+1&&!t[i].view||e.push(t[i])}function _e(e){var t=e.filter(function(e){return 1===e.level}),i=t.length,r=e.filter(function(e){var r,n=0;for(r=0;i>r;r+=1)e.level||e.from!==t[r].from||e.to!==t[r].to||(n+=1);return n?void 0:1});return r}function Ee(e,r,n){var o,a={},s=r.length;for(o=0;s>o;o+=1)"x"===e.axis?r[o].x===e.to&&(a.minL=r[o-1]?i.roundingValue(r[o-1].x+t.minSizeLimit,1):t.minSizeLimit,a.maxL=r[o+1]?i.roundingValue(r[o+1].x-e.from-t.minSizeLimit,1):n):r[o].y===e.to&&(a.minL=r[o-1]?i.roundingValue(r[o-1].y+t.minSizeLimit,1):t.minSizeLimit,a.maxL=r[o+1]?i.roundingValue(r[o+1].y-e.from-t.minSizeLimit,1):n);return a}function me(e,t,i){var r,n=[],o=i.length;if("x"===e){for(r=0;o>r;r+=1)(t.y===i[r].y||i[r].id.indexOf("fp")+1)&&n.push(i[r]);d(1,n),n.sort(p)}else{for(r=0;o>r;r+=1)(t.x===i[r].x||i[r].id.indexOf("fp")+1)&&n.push(i[r]);d(2,n),n.sort(_)}return n}function ge(e,r,n,o,a){var s,l={},d=me(e,r,o),c=d.length;for(s=0;c>s;s+=1){var u,p=0;for(u=0;c>u;u+=1)if(d[u].id===r.id){var _=r.x-d[u].x,E=r.y-d[u].y;"x"===e&&_>0?p=1:"y"===e&&E>0&&(p=1)}"x"===e?d[s].x===r.x&&(d[s-1]&&p?r.id===d[s-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.x-d[s-1].x-t.minSizeLimit,1):l.minL=t.minSizeLimit,l.maxL=d[s+1]?i.roundingValue(r.x-n+(d[s+1].x-r.x-t.minSizeLimit),1):a):d[s].y===r.y&&(d[s-1]&&p?r.id===d[s-1].id?l.minL=t.minSizeLimit:l.minL=i.roundingValue(r.y-d[s-1].y-t.minSizeLimit,1):l.minL=t.minSizeLimit,l.maxL=d[s+1]?i.roundingValue(r.y-n+(d[s+1].y-r.y-t.minSizeLimit),1):a)}return l}function fe(e,t,r,n,o,a,s,l){var d,c={blockId:s,level:e,axis:t,dimId:o[n].id,from:"x"===t?angular.copy(o[r].x):angular.copy(o[r].y),to:"x"===t?angular.copy(o[n].x):angular.copy(o[n].y)};return c.text=i.roundingValue(Math.abs(c.to-c.from),1),d=e?Ee(c,a,l):ge(t,o[n],c.from,a,l),c.minLimit=d.minL,c.maxLimit=d.maxL,c}function Te(e,t,i,r,n,o,a){var s,l=i.length-1;for(s=0;l>s;s+=1)r.push(fe(e,t,s,s+1,i,n,o,a))}function Ie(e){var t=0;return e.x===1/0||e.y===1/0?t=0:e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1?t=1:isNaN(e.x)&&e.y>=0&&e.y<=1?t=1:e.x>=0&&e.x<=1&&isNaN(e.y)&&(t=1),t}function Ae(e){var t,i,n,o,a={dimX:[],dimY:[],dimQ:[]},s=e.length,l=r.global.maxSizeLimit;for(n=c(e),n=n.filter(function(e){return"curv"===e.dir||e.t?0:1}),t=angular.copy(n),i=angular.copy(n),d(1,t),d(2,i),t.sort(p),i.sort(_),o=1;s>o;o+=1){var E=e[o].pointsOut.length;if(1===e[o].level){var m,g,f=[],T=[],I={w:0,h:0};for(g=0;E>g;g+=1)e[o].pointsOut[g].id.indexOf("fp")+1?f.push(e[o].pointsOut[g]):e[o].pointsOut[g].id.indexOf("qa")+1&&T.push(e[o].pointsOut[g]);if(m=angular.copy(f),d(1,f),d(2,m),f.sort(p),m.sort(_),Te(1,"x",f,a.dimX,t,e[o].id,l),Te(1,"y",m,a.dimY,i,e[o].id,l),ce(1,e[o].id,T,a,e,s),e[o].pointsQ){var A=e[o].pointsQ.length;if(A)for(;--A>-1;)a.dimQ.push(e[o].pointsQ[A])}ue(I,a),I.square=q(e[o].pointsOut),e[0].overallDim.push(I)}if(!e[o].children.length){var h,S,N=[],L=[];for(pe(N,e[o].pointsOut),S=1;s>S;S+=1)e[S].id===e[o].parent&&e[S].impost&&e[S].impost.impostAxis[2]&&a.dimQ.push(e[S].impost.impostAxis[2]);L=angular.copy(n),h=angular.copy(N),N.length>1&&(N=u(1,N),N.sort(p),Te(0,"x",N,a.dimX,L,e[o].id,l),h=u(2,h),h.sort(_),Te(0,"y",h,a.dimY,L,e[o].id,l))}}return a.dimX=angular.copy(_e(a.dimX)),a.dimY=angular.copy(_e(a.dimY)),a}function he(t,i){var r,n={},o=e.defer();n.details=angular.copy(t.details),n.priceElements={framesSize:[],frameSillSize:[],sashsSize:[],impostsSize:[],shtulpsSize:[],glassSquares:[],beadsSize:[],sashesBlock:[]};var a=n.details.length;for(r=0;a>r;r+=1)if(n.details[r].level)1===n.details[r].level&&n.details[r].pointsQ&&M(n.details[r]),n.details[r].center=A(n.details[r].pointsOut),n.details[r].pointsOut=S(n.details[r].pointsOut,n.details[r].center),n.details[r].linesOut=O(n.details[r].pointsOut),1===n.details[r].level?n.details[r].pointsIn=v(n.details[r].linesOut,i,"frame"):(n.details[r].center=A(n.details[r].pointsIn),n.details[r].pointsIn=S(n.details[r].pointsIn,n.details[r].center)),n.details[r].linesIn=O(n.details[r].pointsIn),1===n.details[r].level&&(J(n.details),$.merge(n.details[r].parts,K(n.details[r].pointsOut,n.details[r].pointsIn,n.priceElements))),n.details[r].children.length?"sash"===n.details[r].blockType&&(n.details[r].sashPointsOut=ee(v(n.details[r].linesIn,i,"sash-out"),"sash"),n.details[r].sashLinesOut=O(n.details[r].sashPointsOut),n.details[r].sashPointsIn=v(n.details[r].sashLinesOut,i,"sash-in"),n.details[r].sashLinesIn=O(n.details[r].sashPointsIn),n.details[r].hardwarePoints=v(n.details[r].sashLinesOut,i,"hardware"),n.details[r].hardwareLines=O(n.details[r].hardwarePoints),$.merge(n.details[r].parts,K(n.details[r].sashPointsOut,n.details[r].sashPointsIn,n.priceElements)),n.details[r].sashOpenDir=oe(n.details[r].openDir,n.details[r].sashLinesIn),ae(n.details[r].sashType,n.details[r].openDir,n.details[r].hardwareLines,n.priceElements)):"frame"===n.details[r].blockType?(n.details[r].beadPointsOut=ee(n.details[r].pointsIn,"bead"),n.details[r].beadLinesOut=O(n.details[r].beadPointsOut),n.details[r].beadPointsIn=v(n.details[r].beadLinesOut,i,"frame-bead"),n.details[r].glassPoints=v(n.details[r].beadLinesOut,i,"frame-glass"),n.details[r].parts.push(j(n.details[r].glassPoints,n.priceElements,n.details[r].glassId)),$.merge(n.details[r].parts,K(n.details[r].beadPointsOut,n.details[r].beadPointsIn,n.priceElements,n.details[r].glassId))):"sash"===n.details[r].blockType&&(n.details[r].sashPointsOut=ee(v(n.details[r].linesIn,i,"sash-out"),"sash"),n.details[r].sashLinesOut=O(n.details[r].sashPointsOut),n.details[r].sashPointsIn=v(n.details[r].sashLinesOut,i,"sash-in"),n.details[r].sashLinesIn=O(n.details[r].sashPointsIn),n.details[r].hardwarePoints=v(n.details[r].sashLinesOut,i,"hardware"),n.details[r].hardwareLines=O(n.details[r].hardwarePoints),n.details[r].beadPointsOut=ee(n.details[r].sashPointsIn,"bead"),n.details[r].beadLinesOut=O(n.details[r].beadPointsOut),n.details[r].beadPointsIn=v(n.details[r].beadLinesOut,i,"sash-bead"),n.details[r].beadLinesIn=O(n.details[r].beadPointsIn),n.details[r].glassPoints=v(n.details[r].beadLinesOut,i,"sash-glass"),$.merge(n.details[r].parts,K(n.details[r].sashPointsOut,n.details[r].sashPointsIn,n.priceElements)),n.details[r].parts.push(j(n.details[r].glassPoints,n.priceElements,n.details[r].glassId)),$.merge(n.details[r].parts,K(n.details[r].beadPointsOut,n.details[r].beadPointsIn,n.priceElements,n.details[r].glassId)),n.details[r].sashOpenDir=oe(n.details[r].openDir,n.details[r].beadLinesIn),ae(n.details[r].sashType,n.details[r].openDir,n.details[r].hardwareLines,n.priceElements)),W(n.details[r],n.details,i),n.details[r].children.length&&n.details[r].parts.push(de(n.details[r].impost.impostIn,n.priceElements));else{var s,l=n.details[r].children.length;if(1===l)for(s=0;a>s;s+=1)n.details[r].children[0]===n.details[s].id&&(n.details[s].position="single");else if(l>1)for(s=0;a>s;s+=1)n.details[r].children[0]===n.details[s].id?n.details[s].position="first":n.details[r].children[l-1]===n.details[s].id&&(n.details[s].position="last");n.details[r].overallDim=[]}return n.dimension=Ae(n.details),o.resolve(n),o.promise}function Se(t,i){var r=e.defer(),n=angular.copy(i),o=2;for(var a in n)for(var s in n[a])n[a][s]*=o;return he(t,n).then(function(e){r.resolve(e)}),r.promise}function Ne(e,t,i,r){var n,o=e.maxX-e.minX+300,a=e.maxY-e.minY,s=d3.scale.linear().domain([0,1]).range([0,r]);return o>a?n=s(t>o?o/t:o>t?t/o:1):a>=o&&(n=s(i>a?a/i:a>i?i/a:1)),n}function Le(e,t,i,r){var n={x:(t-(e.minX+e.maxX)*r)/2,y:(i-(e.minY+e.maxY)*r)/2};return n}var Oe=this;return Oe.publicObj={createSVGTemplate:he,createSVGTemplateIcon:Se,collectAllPointsOut:c,setTemplateScale:Ne,setTemplatePosition:Le,centerBlock:A,sortingPoints:S,getAngelPoint:h,setLines:O,setLineCoef:N,getNewCoefC:y,setPointLocationToLine:E,intersectionQ:V,cteateLineByAngel:ie,getIntersectionInCurve:B,getCoordCrossPoint:a,checkLineOwnPoint:s,isInsidePointInLine:x,getCoordSideQPCurve:f,checkEqualPoints:m,setQPointCoord:T,getCenterLine:l,calcSquare:q,checkInsidePointInLineEasy:Ie,sortByX:p},Oe.publicObj}])}(),function(){angular.module("MainModule").factory("TemplatesServ",["$filter","GeneralServ","MainServ","DesignServ","AnalyticsServ","GlobalStor","OrderStor","ProductStor","DesignStor","UserStor",function(e,t,i,r,n,o,a,s,l,d){function c(e){s.product.template_id=e,i.saveTemplateInProduct(e).then(function(){if(s.product.glass.length=0,i.setCurrentGlass(s.product),i.setCurrentHardware(s.product),"design"===o.global.currOpenPage)r.setDefaultConstruction();else{var e=s.product.hardware.id||0;i.preparePrice(s.product.template,s.product.profile.id,s.product.glass,e,s.product.lamination.lamination_in_id),n.sendAnalyticsData(d.userInfo.id,a.order.id,s.product.template_id,s.product.profile.id,1)}})}function u(e,t){t?(i.closeRoomSelectorDialog(),s.product.room_id=t-1,s.product.construction_type!==o.global.rooms[t-1].group_id?(s.product.construction_type=o.global.rooms[t-1].group_id,i.downloadAllTemplates(s.product.construction_type).then(function(t){t&&(o.global.templatesSourceSTORE=angular.copy(t),o.global.templatesSource=angular.copy(t),c(e))})):c(e)):c(e)}function p(){var e=angular.copy(o.global.templatesSourceSTORE[s.product.template_id]);o.global.templatesSource[s.product.template_id]=e}function _(i,r){function n(){p(),o.global.isChangedTemplate=0,l.design.designSteps.length=0,u(i,r)}o.global.isTemplateTypeMenu=0,"design"===o.global.currOpenPage&&(o.global.isChangedTemplate=l.design.designSteps.length?1:0),o.global.isChangedTemplate?t.confirmAlert(e("translate")("common_words.NEW_TEMPLATE_TITLE"),e("translate")("common_words.TEMPLATE_CHANGES_LOST"),n):u(i,r)}function E(e){s.product.construction_type=e,s.product.template_id=0,i.prepareTemplates(e).then(function(){"design"===o.global.currOpenPage&&r.setDefaultConstruction()})}var m=this;return m.publicObj={selectNewTemplate:_,initNewTemplateType:E},m.publicObj}])}(),function(){angular.module("MainModule").factory("AuxStor",function(){function e(){return angular.copy(t.publicObj.auxiliarySource)}var t=this;return t.publicObj={auxiliarySource:{addElementsType:[],addElementsList:[],showAddElementsMenu:0,addElementsMenuStyle:0,isFocusedAddElement:0,isAddElement:0,currentAddElementId:0,auxParameter:0,tempSize:[],currAddElementPrice:0,isTabFrame:0,isAddElementListView:0,isWindowSchemeDialog:0,isGridSelectorDialog:0,selectedGrid:0,calculatorStyle:"",addElementGroups:[],searchingWord:""},setDefaultAuxiliary:e},t.publicObj.aux=e(),t.publicObj})}(),function(){angular.module("CartModule").factory("CartStor",["$filter","OrderStor",function(e,t){function i(){return angular.copy(n.publicObj.cartSource)}function r(){n.publicObj.cart.customer.customer_name=angular.copy(t.order.customer_name),n.publicObj.cart.customer.customer_location=angular.copy(t.order.customer_location),n.publicObj.cart.customer.customer_address=angular.copy(t.order.customer_address),n.publicObj.cart.customer.customer_house=angular.copy(t.order.customer_house),n.publicObj.cart.customer.customer_flat=angular.copy(t.order.customer_flat),n.publicObj.cart.customer.customer_floor=angular.copy(t.order.customer_floor),n.publicObj.cart.customer.customer_city=angular.copy(t.order.customer_city),n.publicObj.cart.customer.customer_city_id=angular.copy(t.order.customer_city_id),n.publicObj.cart.customer.customer_email=angular.copy(t.order.customer_email),n.publicObj.cart.customer.customer_phone=angular.copy(t.order.customer_phone),n.publicObj.cart.customer.customer_phone_city=angular.copy(t.order.customer_phone_city),n.publicObj.cart.customer.customer_itn=angular.copy(t.order.customer_itn),n.publicObj.cart.customer.customer_starttime=angular.copy(t.order.customer_starttime),n.publicObj.cart.customer.customer_endtime=angular.copy(t.order.customer_endtime),n.publicObj.cart.customer.customer_target=angular.copy(t.order.customer_target),n.publicObj.cart.customer.customer_sex=angular.copy(t.order.customer_sex),n.publicObj.cart.customer.customer_age=angular.copy(t.order.customer_age),n.publicObj.cart.customer.customer_education=angular.copy(t.order.customer_education),n.publicObj.cart.customer.customer_occupation=angular.copy(t.order.customer_occupation),n.publicObj.cart.customer.customer_infoSource=angular.copy(t.order.customer_infoSource)}var n=this;return n.publicObj={cartSource:{allAddElements:[],isShowDiscount:0,tempConstructDisc:0,tempAddelemDisc:0,discountPriceDiff:0,discountDeliveyPlant:0,marginDeliveyPlant:0,squareTotal:0,perimeterTotal:0,qtyTotal:0,isExistAddElems:0,isAllAddElems:0,allAddElemsOrder:[],addElemsOrderPriceTOTAL:0,isSelectedProduct:0,selectedProducts:[],isMasterDialog:0,isOrderDialog:0,isCreditDialog:0,submitted:0,isCityBox:0,customer:{customer_sex:0}},optionAge:[{id:1,name:"20-30"},{id:2,name:"31-40"},{id:3,name:"41-50"},{id:4,name:"51-60"},{id:5,name:e("translate")("cart.CLIENT_AGE_OLDER")+" 61"}],optionEductaion:[{id:1,name:e("translate")("cart.CLIENT_EDUC_MIDLE")},{id:2,name:e("translate")("cart.CLIENT_EDUC_SPEC")},{id:3,name:e("translate")("cart.CLIENT_EDUC_HIGH")},{id:4,name:e("translate")("cart.CLIENT_EDUC_4")}],optionOccupation:[{id:1,name:e("translate")("cart.CLIENT_OCCUP_WORKER")},{id:2,name:e("translate")("cart.CLIENT_OCCUP_HOUSE")},{id:3,name:e("translate")("cart.CLIENT_OCCUP_BOSS")},{id:4,name:e("translate")("cart.CLIENT_OCCUP_STUD")},{id:5,name:e("translate")("cart.CLIENT_OCCUP_PENSION")},{id:6,name:e("translate")("cart.UNKNOWN")}],optionInfo:[{id:1,name:"TV"},{id:2,name:"InterNET"},{id:3,name:e("translate")("cart.CLIENT_INFO_PRESS")},{id:4,name:e("translate")("cart.CLIENT_INFO_FRIEND")},{id:5,name:e("translate")("cart.CLIENT_INFO_ADV")}],setDefaultCart:i,fillOrderForm:r},n.publicObj.cart=i(),n.publicObj}])}(),function(){angular.module("DesignModule").factory("DesignStor",["$filter",function(e){function t(){return angular.copy(r.publicObj.designSource)}function i(){return angular.copy(r.publicObj.designSource.doorConfig)}var r=this;return r.publicObj={designSource:{templateSourceTEMP:{},templateTEMP:{},designSteps:[],activeMenuItem:0,activeSubMenuItem:0,isDropSubMenu:0,isImpostDelete:0,selectedGlass:[],selectedCorner:[],selectedImpost:[],selectedArc:[],openVoiceHelper:!1,loudVoice:!1,quietVoice:!1,voiceTxt:"",selectedGlassId:0,isDimAnimate:0,oldSize:0,prevSize:0,tempSize:[],isMinSizeRestriction:0,isMaxSizeRestriction:0,minSizeLimit:0,maxSizeLimit:0,isDimExtra:0,isSquareExtra:0,extraGlass:[],isGlassExtra:0,extraHardware:[],isHardwareExtra:0,doorShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.DOOR_TYPE1"),shapeIcon:"img/door-config/doorstep.png",shapeIconSelect:"img/door-config-selected/doorstep.png"},{shapeId:2,shapeLabel:e("translate")("panels.DOOR_TYPE2"),shapeIcon:"img/door-config/no-doorstep.png",shapeIconSelect:"img/door-config-selected/no-doorstep.png"},{shapeId:3,shapeLabel:e("translate")("panels.DOOR_TYPE3")+"1",shapeIcon:"img/door-config/doorstep-al1.png",shapeIconSelect:"img/door-config-selected/doorstep-al1.png"},{shapeId:4,shapeLabel:e("translate")("panels.DOOR_TYPE3")+"2",shapeIcon:"img/door-config/doorstep-al2.png",shapeIconSelect:"img/door-config-selected/doorstep-al2.png"}],sashShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.SASH_TYPE1")+", 98"+e("translate")("mainpage.MM")},{shapeId:2,shapeLabel:e("translate")("panels.SASH_TYPE2")+", 116"+e("translate")("mainpage.MM")},{shapeId:3,shapeLabel:e("translate")("panels.SASH_TYPE3")+", 76"+e("translate")("mainpage.MM")}],handleShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.HANDLE_TYPE1"),shapeIcon:"img/door-config/lever-handle.png",shapeIconSelect:"img/door-config-selected/lever-handle.png"},{shapeId:2,shapeLabel:e("translate")("panels.HANDLE_TYPE2"),shapeIcon:"img/door-config/standart-handle.png",shapeIconSelect:"img/door-config-selected/standart-handle.png"}],lockShapeList:[{shapeId:1,shapeLabel:e("translate")("panels.LOCK_TYPE1"),shapeIcon:"img/door-config/onelock.png",shapeIconSelect:"img/door-config-selected/onelock.png"},{shapeId:2,shapeLabel:e("translate")("panels.LOCK_TYPE2"),shapeIcon:"img/door-config/multilock.png",shapeIconSelect:"img/door-config-selected/multilock.png"}],doorConfig:{doorShapeIndex:0,sashShapeIndex:0,handleShapeIndex:0,lockShapeIndex:0}},setDefaultDesign:t,setDefaultDoor:i},r.publicObj.design=t(),r.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("GlobalStor",function(){function e(){return angular.copy(t.publicObj.globalSource)}var t=this;return t.publicObj={globalSource:{isDevice:0,isLoader:0,startProgramm:1,isNavMenu:1,isConfigMenu:0,activePanel:0,configMenuTips:0,isCreatedNewProject:1,isCreatedNewProduct:1,productEditNumber:0,orderEditNumber:0,prevOpenPage:"",currOpenPage:"main",isChangedTemplate:0,isVoiceHelper:0,voiceHelperLanguage:"",showGlassSelectorDialog:0,isShowCommentBlock:0,isTemplateTypeMenu:0,showRoomSelectorDialog:0,rooms:[],templateLabel:"",templatesSource:[],templatesSourceSTORE:[],isSashesInTemplate:0,profiles:[],profilesType:[],glassesAll:[],glassTypes:[],glasses:[],selectGlassId:0,selectGlassName:"",prevGlassId:0,prevGlassName:"",hardwares:[],hardwareTypes:[],hardwareLimits:[],laminats:[],laminatCouples:[],lamGroupFiltered:[],addElementsAll:[],tempAddElements:[],supplyData:[],assemblingData:[],instalmentsData:[],isInfoBox:0,infoTitle:"",infoImg:"",infoLink:"",infoDescrip:"",isReport:0,currencies:[],locations:{countries:[],
regions:[],cities:[]},margins:{},deliveryCoeff:{},isAlert:0,alertTitle:"",alertDescr:"",confirmAction:0,isQtyCalculator:0,isSizeCalculator:0,isWidthCalculator:0,maxSizeLimit:3200,maxSquareLimit:6},setDefaultGlobal:e},t.publicObj.global=e(),t.publicObj})}(),function(){angular.module("HistoryModule").factory("HistoryStor",function(){function e(){return angular.copy(t.publicObj.historySource)}var t=this;return t.publicObj={historySource:{orders:[],ordersSource:[],isEmptyResult:0,isOrderSearch:0,searchingWord:"",isOrderDate:0,startDate:"",finishDate:"",isStartDate:0,isFinishDate:0,isAllPeriod:1,isOrderSort:0,isSortType:"last",isFilterType:void 0,isDraftView:0,drafts:[],draftsSource:[],isEmptyResultDraft:0,isOrderDateDraft:0,startDateDraft:"",finishDateDraft:"",isStartDateDraft:0,isFinishDateDraft:0,isAllPeriodDraft:1,isOrderSortDraft:0,isSortTypeDraft:"last",reverseDraft:1},setDefaultHistory:e},t.publicObj.history=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").factory("OrderStor",function(){function e(){return angular.copy(t.publicObj.orderSource)}var t=this;return t.publicObj={orderSource:{id:0,order_number:0,order_hz:"---",order_type:1,order_date:0,order_style:"",climatic_zone:0,heat_coef_min:0,discount_construct:0,discount_addelem:0,discount_construct_max:0,discount_addelem_max:0,delivery_user_id:0,mounting_user_id:0,default_term_plant:0,disc_term_plant:0,margin_plant:0,products_qty:0,products:[],templates_price:0,addelems_price:0,products_price:0,productsPriceDis:0,delivery_date:0,new_delivery_date:0,delivery_price:0,is_date_price_less:0,is_date_price_more:0,floor_id:0,floorName:"",floor_price:0,mounting_id:0,mountingName:"",mounting_price:0,is_instalment:0,instalment_id:0,selectedInstalmentPeriod:0,selectedInstalmentPercent:0,is_old_price:0,payment_first:0,payment_monthly:0,payment_first_primary:0,payment_monthly_primary:0,paymentFirstDis:0,paymentMonthlyDis:0,paymentFirstPrimaryDis:0,paymentMonthlyPrimaryDis:0,order_price:0,order_price_dis:0,order_price_primary:0,orderPricePrimaryDis:0,customer_name:"",customer_email:"",customer_phone:"",customer_phone_city:"",customer_address:"",customer_location:"",customer_city:"",customer_city_id:0,customer_itn:0,customer_starttime:"",customer_endtime:"",customer_target:"",customer_sex:0,customer_age:0,customer_education:0,customer_occupation:0,customer_infoSource:0},setDefaultOrder:e},t.publicObj.order=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").factory("ProductStor",["$filter",function(e){function t(){return angular.copy(i.publicObj.productSource)}var i=this;return i.publicObj={productSource:{product_id:0,is_addelem_only:0,room_id:0,construction_type:1,heat_coef_total:0,template_id:0,template_source:{},template:{},templateIcon:{},template_width:0,template_height:0,template_square:0,profile:{},glass:[],hardware:{},profileDepths:{frameDepth:{},frameStillDepth:{},sashDepth:{},impostDepth:{},shtulpDepth:{}},lamination:{id:0,lamination_in_id:1,lamination_out_id:1,laminat_in_name:e("translate")("mainpage.WHITE_LAMINATION"),laminat_out_name:e("translate")("mainpage.WHITE_LAMINATION"),img_in_id:1,img_out_id:1},chosenAddElements:[[],[],[],[],[],[],[],[],[],[],[]],door_shape_id:1,door_sash_shape_id:1,door_handle_shape_id:1,door_lock_shape_id:1,template_price:0,addelem_price:0,addelemPriceDis:0,product_price:0,productPriceDis:0,report:[],comment:"",product_qty:1},setDefaultProduct:t},i.publicObj.product=t(),i.publicObj}])}(),function(){angular.module("BauVoiceApp").factory("UserStor",function(){function e(){return angular.copy(t.publicObj.userInfoSource)}var t=this;return t.publicObj={userInfoSource:{cityName:"",regionName:"",countryName:"",fullLocation:"",climaticZone:0,heatTransfer:0,langLabel:"en",langName:"English",currencyId:0,currency:"",discountConstr:0,discountAddElem:0,discountConstrMax:0,discountAddElemMax:0,discConstrByWeek:[],discAddElemByWeek:[],factoryLink:""},setDefaultUser:e},t.publicObj.userInfo=e(),t.publicObj})}(),function(){angular.module("BauVoiceApp").constant("germanDictionary",{common_words:{CHANGE:"untreu sein",MONTHS:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTHS_SHOT:"Jan, Feb, Mär, Apr, Mai, Jun, Jul, Aug, Sep, Okt, Nov, Dez",MONTHA:"Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember",MONTH_LABEL:"Monat",MONTHA_LABEL:"Monats",MONTHS_LABEL:"Monate",ALL:"alles",MIN:"min.",MAX:"maks.",BUTTON_Y:"JA",BUTTON_N:"NEIN",DELETE_PRODUCT_TITLE:"Die Entfernung!",DELETE_PRODUCT_TXT:"Sie wollen das Produkt entfernen?",DELETE_ORDER_TITLE:"Die Entfernung der Bestellung!",DELETE_ORDER_TXT:"Sie wollen die Bestellung entfernen?",COPY_ORDER_TITLE:"Das Kopieren!",COPY_ORDER_TXT:"Sie wollen der Bestellung kopieren?",SEND_ORDER_TITLE:"In die Produktion!",SEND_ORDER_TXT:"Sie wollen die Bestellung auf den Betrieb absenden?",NEW_TEMPLATE_TITLE:"Template-Wechsel",TEMPLATE_CHANGES_LOST:"Die Template-Änderungen gehen verloren! Fortfahren?",PAGE_REFRESH:"Das Neuladen der Seite zu Datenverlust führen!",SELECT:"wählen",AND:"und",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Einloggen",PASS_CODE:"Teilen Sie diesen Kode dem Manager mit.",YOUR_CODE:"Ihr Kode: ",EMPTY_FIELD:"Füllen Sie dieses Feld aus.",WRONG_NUMBER:"Die falsche Nummer.",SHORT_NAME:"Eine zu kurze Namen",SHORT_PASSWORD:"Die viel zu kleine Parole",SHORT_PHONE:"Zu wenig Telefonnummer.",IMPORT_DB_START:"Warten begann Laden der Datenbank",IMPORT_DB_FINISH:"Vielen Dank für das Herunterladen abgeschlossen ist",MOBILE:"Handy",PASSWORD:"Passwort",REGISTRATION:"Anmeldung",SELECT_COUNTRY:"Land wählen",SELECT_REGION:"Region wählen",SELECT_CITY:"Wählen Sie die Stadt",USER_EXIST:"Dieser Benutzer ist bereits vorhanden! Versuchen Sie es erneut.",USER_NOT_EXIST:"Ein solcher Benutzer nicht existiert. Registrieren.",USER_NOT_ACTIVE:"Sie haben Ihr Profil aktiviert. Überprüfen Sie Ihre E-Mail.",USER_CHECK_EMAIL:"Bestätigungsemail wurde Ihnen in der E-Mail gesendet.",SELECT_PRODUCER:"Hersteller auswählen",SELECT_FACTORY:"Sie haben noch keine gewählten Hersteller",USER_PASSWORD_ERROR:"ungültiges Kennwort!",OFFLINE:"Keine Verbindung zum Internet!",IMPORT_DB:"Databases JETZT HERUNTERLADEN! Warten Sie mal!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"Die Klimazone",THERMAL_RESISTANCE:"Wärmeübertragung",AIR_CIRCULATION:"Der Koeffizient des Luftwechsels",NAVMENU_GEOLOCATION:"Die Anordnung zu wählen",NAVMENU_CURRENT_GEOLOCATION:"Die laufende Anordnung",NAVMENU_CURRENT_CALCULATION:"Die laufende Berechnung",NAVMENU_CART:"Der Korb der Berechnung",NAVMENU_ADD_ELEMENTS:"Die zusätzlichen Elemente",NAVMENU_ALL_CALCULATIONS:"Bestellverlauf",NAVMENU_SETTINGS:"Einstellungen",NAVMENU_MORE_INFO:"Es gibt als mehrere Informationen",NAVMENU_VOICE_HELPER:"Der Stimmverwaltung",NAVMENU_CALCULATIONS:"Die Berechnungen",NAVMENU_APPENDIX:"Anwendung",NAVMENU_NEW_CALC:"+Neue Berechnungs",CONFIGMENU_CONFIGURATION:"Die Konfiguration und die Umfänge",CONFIGMENU_SIZING:"Die Breite * die Höhe",CONFIGMENU_PROFILE:"Profil",CONFIGMENU_GLASS:"Bauglasplatte",CONFIGMENU_HARDWARE:"Zubehör",CONFIGMENU_LAMINATION:"Laminierung",CONFIGMENU_LAMINATION_TYPE:"in den Zimmer / Die Fassade",WHITE_LAMINATION:"Weiß",CONFIGMENU_ADDITIONAL:"Zusätzlich",CONFIGMENU_IN_CART:"Zum Warenkorb",VOICE_SPEACH:"Sprechen...",COMMENT:"Lassen Sie eine Notiz in der Größenordnung hier.",ROOM_SELECTION:"Die Wahl Template",CONFIGMENU_NO_ADDELEMENTS:"Zusätzliche Elemente ausgewählt",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Um die Größe zu ändern, klicken Sie hier",PROFILE_TIP:"Um ein Profil auszuwählen, klicken Sie hier",GLASS_TIP:"Um eine doppelt verglasten Fenster auszuwählen, klicken Sie hier"},panels:{TEMPLATE_WINDOW:"Fenster",TEMPLATE_BALCONY:"Altan",TEMPLATE_DOOR:"Tür",TEMPLATE_BALCONY_ENTER:"Der Ausgang auf den Balkon",TEMPLATE_EDIT:"Editieren",TEMPLATE_DEFAULT:"Das Projekt als Voreinstellung",COUNTRY:"Land",BRAND:"Das Warenzeichen",HEAT_INSULATION:"warm Isolation",NOICE_INSULATION:"Isolierung",CORROSION_COEFF:"Korrosionsschutz",BURGLAR_COEFF:"Diebstahlschutz",LAMINAT_INSIDE:"im Raum",LAMINAT_OUTSIDE:"Straßenfront",ONE_WINDOW_TYPE:"Das Einaufklappbare",TWO_WINDOW_TYPE:"Das Zweiaufklappbare",THREE_WINDOW_TYPE:"Das Dreiaufklappbare",CAMERa:"Kameras",CAMER:"Kameras",CAMERs:"Kameras",ENERGY_SAVE:"+Energiesparen",DOOR_TYPE1:"Nach dem Perimeter",DOOR_TYPE2:"Ohne Schwelle",DOOR_TYPE3:"Die Aluminiumschwelle, Typ",SASH_TYPE1:"Interzimmer",SASH_TYPE2:"Tür- t-bildlich",SASH_TYPE3:"Fenster",HANDLE_TYPE1:"Druck- die Garnitur",HANDLE_TYPE2:"Der standardmäßige Bürogriff",LOCK_TYPE1:"One-Stop-Verriegelung",LOCK_TYPE2:"Multipoint-Latch",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Wählen",ADD:"drauflegen",GRID:"Moskitonetz",VISOR:"Deflektor",SPILLWAY:"Entwässerungsanlage",OUTSIDE:"Außen Pisten",LOUVERS:"Jalousie",INSIDE:"Innen Pisten",CONNECTORS:"Zwischenstepsel",FAN:"Mikroventilation",WINDOWSILL:"Fensterbank",HANDLEL:"Griff",OTHERS:"Übrige",GRIDS:"Moskitonetze",VISORS:"Visiere",SPILLWAYS:"Entwässerungsanlagen",WINDOWSILLS:"Fensterbänke",HANDLELS:"Griff",NAME_LABEL:"Benennung",ARTICUL_LABEL:"Nachschlagewerke",QTY_LABEL:"pcs",SIZE_LABEL:"Größe",WIDTH_LABEL:"Breite",HEIGHT_LABEL:"Höhe",OTHER_ELEMENTS1:"Noch",OTHER_ELEMENTS2:"Komponente ...",SCHEME_VIEW:"Schematisch",LIST_VIEW:"Liste",INPUT_ADD_ELEMENT:"Komponente hinzufügen",CANCEL:"Stornierung",TOTAL_PRICE_TXT:"Gesamte zusätzliche Komponenten in der Menge von:",ELEMENTS:"Komponenten",ELEMENT:"Komponente",ELEMENTA:"Komponente"},add_elements_menu:{TIP:"Wählen Sie ein Element aus der Liste",EMPTY_ELEMENT:"Ohne das Element",TAB_NAME_SIMPLE_FRAME:"Einfacher Aufbau",TAB_NAME_HARD_FRAME:"Verbundstruktur",TAB_EMPTY_EXPLAIN:"Wählen Sie den Anfangspunkt zu starten Bau."},design:{SASH_SHAPE:"Flügel",ANGEL_SHAPE:"Winkel",IMPOST_SHAPE:"Abgaben",ARCH_SHAPE:"Gewölbe",POSITION_SHAPE:"Position",UNITS_DESCRIP:"Da die Einheiten in mm",PROJECT_DEFAULT:"Standardprojekt",DOOR_CONFIG_LABEL:"Anordnung der Türen",DOOR_CONFIG_DESCTIPT:"Türrahmen",SASH_CONFIG_DESCTIPT:"Torblatt",HANDLE_CONFIG_DESCTIPT:"Griff",LOCK_CONFIG_DESCTIPT:"Verschluss",STEP:"Schritt",LABEL_DOOR_TYPE:"Wählen Sie ein Design Türrahmen",LABEL_SASH_TYPE:"Wählen Sie die Art des Türblattes",LABEL_HANDLE_TYPE:"Wählen Sie die Art der Griff",LABEL_LOCK_TYPE:"Wählen Sie die Art der Sperre",VOICE_SWITCH_ON:"Voice-Modus aktiviert ist",VOICE_NOT_UNDERSTAND:"es ist nicht klar",VOICE_SMALLEST_SIZE:"zu klein",VOICE_BIGGEST_SIZE:"zu groß",VOICE_SMALL_GLASS_BLOCK:"zu kleine Oberlichter",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"nicht Verfügbar!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Suche nach Stichwort",DRAFT_VIEW:"Entwürfe Berechnungen",HISTORY_VIEW:"Siedlungsgeschichte",PHONE:"Telefon",CLIENT:"Der Kunde",ADDRESS:"Anschrift",FROM:"von ",UNTIL:"vor ",PAYMENTS:"Zahlungen",ALLPRODUCTS:"Produkte",ON:"bis",DRAFT:"Entwurf",DATE_RANGE:"Datumsbereich",ALL_TIME:"Die ganze Zeit",SORTING:"Sortierung",NEWEST_FIRST:"Mit der Zeit: neue zuerst",NEWEST_LAST:"Zu der Zeit, neue am Ende",SORT_BY_TYPE:"Nach Art",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Nur aktiv",SORT_SHOW_WAIT:"Nur angemeldete",SORT_SHOW_DONE:"nur abgeschlossen",BY_YOUR_REQUEST:"Je nach Wunsch",NOT_FIND:"nichts gefunden",WAIT_MASTER:"erwartet Gager",INCLUDED:"inbegriffen",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Alle Anbauteile bestellen",ADD_ORDER:"Fügen Sie das Produkt",PRODUCT_QTY:"Anzahl der Produkte",LIGHT_VIEW:"Kurzansicht",FULL_VIEW:"Vollansicht",DELIVERY:"Lieferung",SELF_EXPORT:"Abholen",FLOOR:"Etage",ASSEMBLING:"Montage",WITHOUT_ASSEMBLING:"ohne Montage",FREE:"kostenlos",PAYMENT_BY_INSTALMENTS:"Ratenzahlung",WITHOUT_INSTALMENTS:"losen Raten",DELIVERY_DATE:"Liefertermin",TOTAL_PRICE_LABEL:"Insgesamt Lieferung auf",MONTHLY_PAYMENT_LABEL:"monatlichen Zahlungen auf",DATE_DELIVERY_LABEL:"Geliefert auf",FIRST_PAYMENT_LABEL:"Die erste Zahlung",ORDER:"Bestellen",MEASURE:"Maßnahme",READY:"Bereit",CALL_MASTER:"Rufen Gager zu berechnen",CALL_MASTER_DESCRIP:"Um Gager nennen wir brauchen etwas für Sie zu wissen. Beide Felder sind Pflichtfelder.",CLIENT_LOCATION:"Lage",CLIENT_ADDRESS:"Anschrift",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Bestellung zur Berechnung",CALL_ORDER_DESCRIP:"Um den Auftrag zu erfüllen, müssen wir etwas über Sie wissen.",CALL_ORDER_CLIENT_INFO:"Kundeninformation (muss ausgefüllt werden):",CLIENT_NAME:"Vollständiger Name",CALL_ORDER_DELIVERY:"Liefern Sie eine Bestellung für",CALL_ORDER_TOTAL_PRICE:"insgesamt",CALL_ORDER_ADD_INFO:"Extras (optional):",CLIENT_EMAIL:"E-Mail",ADD_PHONE:"Zusätzliche Telefon",CALL_CREDIT:"Machen Tranche und um zu berechnen",CALL_CREDIT_DESCRIP:"Um Raten anordnen und erfüllen den Auftrag, wir haben etwas für Sie zu wissen.",CALL_CREDIT_CLIENT_INFO:"Ratenzahlung:",CREDIT_TARGET:"Der Zweck der Registrierung von Raten",CLIENT_ITN:"Individuelle Steuernummers",CALL_START_TIME:"Rufen Sie aus:",CALL_END_TIME:"vor:",CALL_CREDIT_PARTIAL_PRICE:"auf",ADDELEMENTS_EDIT_LIST:"Liste bearbeiten ...",ADDELEMENTS_PRODUCT_COST:"einem Produkt",HEAT_TRANSFER:"Wärmeübertragung",WRONG_EMAIL:"Falsche E-Mail",LINK_BETWEEN_COUPLE:"zwischen einem Paar von",LINK_BETWEEN_ALL:"unter allen",CLIENT_SEX:"Paul",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Alter",CLIENT_AGE_OLDER:"älteren",CLIENT_EDUCATION:"Das wichtigste Kriterium Ihrer Wahl",CLIENT_EDUC_MIDLE:"Guter Preis",CLIENT_EDUC_SPEC:"Bildermacher",CLIENT_EDUC_HIGH:"Markenprofil und Hardware",CLIENT_EDUC_4:"Empfehlungen Verkäufers",CLIENT_OCCUPATION:"Beschäftigung",CLIENT_OCCUP_WORKER:"Mitarbeiter",CLIENT_OCCUP_HOUSE:"Hausfrau",CLIENT_OCCUP_BOSS:"Entrepreneur",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Retired",CLIENT_INFO_SOURCE:"Source",CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"Von Freunden",CLIENT_INFO_ADV:"Visuelle Werbung",SELECT_PLACEHOLD:"wählen Sie Ihre Variante",NO_DISASSEMBL:"Ohne Demontage",STANDART_ASSEMBL:"Der Standardmäßige",VIP_ASSEMBL:"Der VIP-Montage",DISCOUNT:"Rabatt",DISCOUNT_SELECT:"Die Auswahl der Preisnachlässe",DISCOUNT_WITH:"Im Hinblick auf die Preisnachlässe",DISCOUNT_WITHOUT:"Ohne Rabatte",DISCOUNT_WINDOW:"Rabatt auf ein Produkt",DISCOUNT_ADDELEM:"Discount auf zusätzliche Elemente",ORDER_COMMENT:"Anmerkung Bestellen",UNKNOWN:"unbekannt"},settings:{AUTHORIZATION:"Autorisierung:",CHANGE_PASSWORD:"Kennwort ändern",CHANGE_LANGUAGE:"ändern Sie die Sprache",PRIVATE_INFO:"Persönliche Informationen:",USER_NAME:"Gesprächspartner",CITY:"Stadt",ADD_PHONES:"Zusätzliche Telefone:",INSERT_PHONE:"Hinzufügen einer Telefon",CLIENT_SUPPORT:"Poderzhka Benutzer",LOGOUT:"Beenden Sie die Anwendung",SAVE:"Speichern",CURRENT_PASSWORD:"Die Jetzige",NEW_PASSWORD:"Neu",CONFIRM_PASSWORD:"Bestätigen",NO_CONFIRM_PASS:"Ungültiges Passwort"}})}(),function(){angular.module("BauVoiceApp").constant("englishDictionary",{common_words:{CHANGE:"Change",MONTHS:"January, February, March, April, May, June, July, August, September, October, November, December",MONTHS_SHOT:"Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sept, Oct, Nov, Dec",MONTHA:"January, February, March, April, May, June, July, August, September, October, November, December",MONTH_LABEL:"month",MONTHA_LABEL:"months",MONTHS_LABEL:"months",ALL:"All",MIN:"min.",MAX:"max.",BUTTON_Y:"YES",BUTTON_N:"NO",DELETE_PRODUCT_TITLE:"Delete!",DELETE_PRODUCT_TXT:"Do you want to delete a product?",DELETE_ORDER_TITLE:"Delete of order!",DELETE_ORDER_TXT:"Do you want to delete an order?",COPY_ORDER_TITLE:"Printing-down!",COPY_ORDER_TXT:"Do you want to do the copy of order?",SEND_ORDER_TITLE:"In a production!",SEND_ORDER_TXT:"Do you want to send an order on a factory?",NEW_TEMPLATE_TITLE:"Template changing",TEMPLATE_CHANGES_LOST:"The template changes will lost! Continue?",PAGE_REFRESH:"Reloading the page will lead to data loss!",SELECT:"Select",AND:"and",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"To enter",PASS_CODE:"You will reveal to this code the manager.",YOUR_CODE:"Your code: ",EMPTY_FIELD:"You should to fill this field.",WRONG_NUMBER:"Incorrect number.",SHORT_NAME:"Too short name",SHORT_PASSWORD:"Too little password.",SHORT_PHONE:"Too little phone number.",IMPORT_DB_START:"Wait, began loading the database",IMPORT_DB_FINISH:"Thank you for the download is complete",MOBILE:"Mobile telephone",PASSWORD:"Password",REGISTRATION:"Registration",SELECT_COUNTRY:"Select country",SELECT_REGION:"Select region",SELECT_CITY:"Select city",USER_EXIST:"Sorry, but this user already exists! Please, try again.",USER_NOT_EXIST:"Sorry, but this user not exists! Registrate please.",USER_NOT_ACTIVE:"Sorry, but your profile is not active. Please check your email.",USER_CHECK_EMAIL:"The confirmed email was send to you. Please check your email.",SELECT_PRODUCER:"Choose the producer",SELECT_FACTORY:"Please select the producer",USER_PASSWORD_ERROR:"Sorry, but your password is wrong!",OFFLINE:"No internet connection!",IMPORT_DB:"DataBase Import was started! Waite please!"},mainpage:{MM:" mm ",CLIMATE_ZONE:"climatic area",THERMAL_RESISTANCE:"heat transfer",AIR_CIRCULATION:"coefficient of ventilation",NAVMENU_GEOLOCATION:"To choose a location",NAVMENU_CURRENT_GEOLOCATION:"Current location",NAVMENU_CURRENT_CALCULATION:"Current calculation",NAVMENU_CART:"Basket of calculation",NAVMENU_ADD_ELEMENTS:"Add. elements",NAVMENU_ALL_CALCULATIONS:"Order history",NAVMENU_SETTINGS:"Settings",NAVMENU_MORE_INFO:"More information",NAVMENU_VOICE_HELPER:"Voice control",NAVMENU_CALCULATIONS:"Calculations",NAVMENU_APPENDIX:"Appendix",NAVMENU_NEW_CALC:"+New calculation",CONFIGMENU_CONFIGURATION:"Configuration and sizes",CONFIGMENU_SIZING:"width * height",CONFIGMENU_PROFILE:"Profile",CONFIGMENU_GLASS:"Glazing",CONFIGMENU_HARDWARE:"accessories",CONFIGMENU_LAMINATION:"Lamination",CONFIGMENU_LAMINATION_TYPE:"room / Facade",WHITE_LAMINATION:"White",CONFIGMENU_ADDITIONAL:"Additionally",CONFIGMENU_IN_CART:"In a basket",VOICE_SPEACH:"You talk...",COMMENT:"Leave a note on the order here.",ROOM_SELECTION:"Template selection",CONFIGMENU_NO_ADDELEMENTS:"Add Elements are not choosen",HEATCOEF_VAL:"W",TEMPLATE_TIP:"To change the size, click here",PROFILE_TIP:"To select a profile, click here",GLASS_TIP:"To select a double-glazed window, click here"},panels:{TEMPLATE_WINDOW:"Window",TEMPLATE_BALCONY:"Balcony",TEMPLATE_DOOR:"Door",TEMPLATE_BALCONY_ENTER:"Exit to a balcony",TEMPLATE_EDIT:"edit",TEMPLATE_DEFAULT:"Project by default",COUNTRY:"country",BRAND:"trademark",HEAT_INSULATION:"thermal insulation",NOICE_INSULATION:"noise isolation",CORROSION_COEFF:"Anticorrosion",BURGLAR_COEFF:"Burglar",LAMINAT_INSIDE:"In room",LAMINAT_OUTSIDE:"Facade",ONE_WINDOW_TYPE:"One-casement",TWO_WINDOW_TYPE:"Two-casement",THREE_WINDOW_TYPE:"Three-leaf",CAMERa:"cameras",CAMER:"cameras",CAMERs:"cameras",ENERGY_SAVE:"+energy saving",DOOR_TYPE1:"on perimeter",DOOR_TYPE2:"without threshold",DOOR_TYPE3:"aluminum threshold, type",SASH_TYPE1:"the interroom",SASH_TYPE2:"the door T-shaped",SASH_TYPE3:"the window",HANDLE_TYPE1:"press set",HANDLE_TYPE2:"standard office handle",LOCK_TYPE1:"one-locking with a latch",LOCK_TYPE2:"multilocking with a latch",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"select",ADD:"add",GRID:"mosquito grid",VISOR:"peak",SPILLWAY:"water outflow",OUTSIDE:"external slopes",LOUVERS:"blinds",INSIDE:"internal slopes",CONNECTORS:"connector",FAN:"microairing",WINDOWSILL:"windowsill",HANDLEL:"handle",OTHERS:"other",GRIDS:"mosquito grids",VISORS:"peaks",SPILLWAYS:"Drainages",WINDOWSILLS:"sills",HANDLELS:"handle",NAME_LABEL:"name",ARTICUL_LABEL:"reference",QTY_LABEL:"pcs.",SIZE_LABEL:"size",WIDTH_LABEL:"width",HEIGHT_LABEL:"height",OTHER_ELEMENTS1:"Yet",OTHER_ELEMENTS2:"component...",SCHEME_VIEW:"Schematically",LIST_VIEW:"List",INPUT_ADD_ELEMENT:"Add Component",CANCEL:"cancel",TOTAL_PRICE_TXT:"Total additional components in the amount of:",ELEMENTS:"components",ELEMENT:"component",ELEMENTA:"component"},add_elements_menu:{TIP:"Select an item from the list",EMPTY_ELEMENT:"Without the element",TAB_NAME_SIMPLE_FRAME:"Simple design",TAB_NAME_HARD_FRAME:"Composite structure",TAB_EMPTY_EXPLAIN:"Please select the first item to start up construction."},design:{SASH_SHAPE:"shutters",ANGEL_SHAPE:"corners",IMPOST_SHAPE:"imposts",ARCH_SHAPE:"arches",POSITION_SHAPE:"position",UNITS_DESCRIP:"All Units are in mm",PROJECT_DEFAULT:"Default project",DOOR_CONFIG_LABEL:"configuration of doors",DOOR_CONFIG_DESCTIPT:"door frame",SASH_CONFIG_DESCTIPT:"door leaf",HANDLE_CONFIG_DESCTIPT:"handle",LOCK_CONFIG_DESCTIPT:"lock",STEP:"step",LABEL_DOOR_TYPE:"Select a design door frame",LABEL_SASH_TYPE:"Select the type of door leaf",LABEL_HANDLE_TYPE:"Select the type of handle",LABEL_LOCK_TYPE:"Select the type of lock",VOICE_SWITCH_ON:"The voice helper is switched on",VOICE_NOT_UNDERSTAND:"It is not clear",VOICE_SMALLEST_SIZE:"The smallest size",VOICE_BIGGEST_SIZE:"The biggest size",VOICE_SMALL_GLASS_BLOCK:"too small skylights",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Not Available!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Search by keyword",DRAFT_VIEW:"Drafts calculations",HISTORY_VIEW:"History of settlements",PHONE:"phone",CLIENT:"client",ADDRESS:"address",FROM:"from ",UNTIL:"to ",PAYMENTS:"payments",ALLPRODUCTS:"products",ON:"on",DRAFT:"Draft",DATE_RANGE:"Date Range",ALL_TIME:"For all time",SORTING:"Sorting",NEWEST_FIRST:"By the time: new first",NEWEST_LAST:"By the time new at the end of",SORT_BY_TYPE:"By type",SORT_SHOW:"Show",SORT_SHOW_ACTIVE:"Only active",SORT_SHOW_WAIT:"Only pending",SORT_SHOW_DONE:"Only completed",BY_YOUR_REQUEST:"According to your request",NOT_FIND:"nothing found",WAIT_MASTER:"expects gager",INCLUDED:"included",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"All additional elements order",ADD_ORDER:"Add the product",PRODUCT_QTY:"number of products",LIGHT_VIEW:"Short view",FULL_VIEW:"Full view",DELIVERY:"Delivery",SELF_EXPORT:"Pickup",FLOOR:"floor",ASSEMBLING:"mounting",WITHOUT_ASSEMBLING:"without mounting",FREE:"free",PAYMENT_BY_INSTALMENTS:"Payment by installments",WITHOUT_INSTALMENTS:"free installments",DELIVERY_DATE:"Delivery date",TOTAL_PRICE_LABEL:"Total Delivered on",MONTHLY_PAYMENT_LABEL:"monthly payments on",DATE_DELIVERY_LABEL:"Delivered on",FIRST_PAYMENT_LABEL:"The first payment",ORDER:"To order",MEASURE:"Measure",READY:"Ready",CALL_MASTER:"Call gager to calculate",CALL_MASTER_DESCRIP:"To call gager we need something for you to know. Both fields are required.",CLIENT_LOCATION:"Location",CLIENT_ADDRESS:"address",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Ordering for calculating",CALL_ORDER_DESCRIP:"In order to fulfill the order, we need to something about you know.",CALL_ORDER_CLIENT_INFO:"Customer Information (must be filled):",CLIENT_NAME:"Full Name",CALL_ORDER_DELIVERY:"Deliver an order for",CALL_ORDER_TOTAL_PRICE:"in all",CALL_ORDER_ADD_INFO:"Extras (Optional):",CLIENT_EMAIL:"Email",ADD_PHONE:"Additional phone",CALL_CREDIT:"Making installment and order to calculate",CALL_CREDIT_DESCRIP:"To arrange installments and fulfill the order, we have something for you to know.",CALL_CREDIT_CLIENT_INFO:"Installment:",CREDIT_TARGET:"The purpose of registration of installments",CLIENT_ITN:"Individual Tax Number",CALL_START_TIME:"Call from:",CALL_END_TIME:"prior to:",CALL_CREDIT_PARTIAL_PRICE:"on",ADDELEMENTS_EDIT_LIST:"Edit List ...",ADDELEMENTS_PRODUCT_COST:"one product",HEAT_TRANSFER:"heat transfer",WRONG_EMAIL:"Incorrect e-mail",LINK_BETWEEN_COUPLE:"between couple",LINK_BETWEEN_ALL:"between all",CLIENT_SEX:"Sex",CLIENT_SEX_M:"m",CLIENT_SEX_F:"F",CLIENT_AGE:"Age",CLIENT_AGE_OLDER:"older",CLIENT_EDUCATION:"The main criterion of your choice",CLIENT_EDUC_MIDLE:"Good price",CLIENT_EDUC_SPEC:"image maker",CLIENT_EDUC_HIGH:"brand profile and hardware",CLIENT_EDUC_4:"Recommendations seller",CLIENT_OCCUPATION:"Occupation",CLIENT_OCCUP_WORKER:"Employee",CLIENT_OCCUP_HOUSE:"Householder",CLIENT_OCCUP_BOSS:"Employer",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensioner",CLIENT_INFO_SOURCE:"Information source",CLIENT_INFO_PRESS:"Press",CLIENT_INFO_FRIEND:"From friends",CLIENT_INFO_ADV:"Visual advertising",SELECT_PLACEHOLD:"select your option",NO_DISASSEMBL:"without dismantle",STANDART_ASSEMBL:"the standard",VIP_ASSEMBL:"VIP-installation",DISCOUNT:"Discount",DISCOUNT_SELECT:"The choice of discounts",DISCOUNT_WITH:"In view of the discounts",DISCOUNT_WITHOUT:"Excluding discounts",DISCOUNT_WINDOW:"Discount on a product",DISCOUNT_ADDELEM:"Discount on additional elements",ORDER_COMMENT:"Order note",UNKNOWN:"Unknown"},settings:{AUTHORIZATION:"Authorization:",CHANGE_PASSWORD:"Change password",CHANGE_LANGUAGE:"Change language",PRIVATE_INFO:"Personal information:",USER_NAME:"Contact person",CITY:"City",ADD_PHONES:"Additional phones:",INSERT_PHONE:"Add a phone",CLIENT_SUPPORT:"Customer Support",LOGOUT:"Exit the application",SAVE:"Save",CURRENT_PASSWORD:"The Current",NEW_PASSWORD:"New",CONFIRM_PASSWORD:"Confirm",NO_CONFIRM_PASS:"Invalid password"}})}(),function(){angular.module("BauVoiceApp").constant("italianDictionary",{common_words:{CHANGE:"Cambiare",MONTHS:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTHS_SHOT:"Gen., Febb., Marzo, Apr., Mag., Giu., Luglio, Ago., Sett., Ott., Nov., Dic.",MONTHA:"Gennaio, Febbraio, Marzo, Aprile, Maggio, Giugno, Luglio, Agosto, Settembre, Ottobre, Novembre, Dicembre",MONTH_LABEL:"mese",MONTHA_LABEL:"del mese",MONTHS_LABEL:"mesi",ALL:"tutto",MIN:"Min",MAX:"Max",BUTTON_Y:"Sì",BUTTON_N:"No",DELETE_PRODUCT_TITLE:"Cancella!",DELETE_PRODUCT_TXT:"Volete cancellare il prodotto?",DELETE_ORDER_TITLE:"Cancellazione dell’ordine!",DELETE_ORDER_TXT:"Volete cancellare l’ordine?",COPY_ORDER_TITLE:"Copia!",COPY_ORDER_TXT:"Volete fare una copia dell’ordine?",SEND_ORDER_TITLE:"La produzione !",SEND_ORDER_TXT:" Volete inviare l’ordine in fabbrica?",NEW_TEMPLATE_TITLE:"Cambiamento di una sagoma",TEMPLATE_CHANGES_LOST:" I cambiamenti in una sagoma saranno persi! Continuare?",PAGE_REFRESH:"L'azzerramento della pagina porterà a perdita di dati!",SELECT:" Scegliere ",AND:" e ",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"Entrare",PASS_CODE:"Comunicate il codice al manager.",YOUR_CODE:"Il vostro codice: ",EMPTY_FIELD:"Riempite questo campo.",WRONG_NUMBER:"Numero errato, formato +XX(XXX)XXX-XXXX.",SHORT_NAME:"Nome troppo piccolo.",SHORT_PASSWORD:"Password troppo breve.",SHORT_PHONE:"Numero del telefono troppo piccolo.",IMPORT_DB_START:"Aspetti, il carico di un database ha cominciato",IMPORT_DB_FINISH:" Grazie, caricandolo sono complete",MOBILE:"Il cellulare",PASSWORD:"Password",REGISTRATION:"Registrazione",SELECT_COUNTRY:"Il paese di Veberite",SELECT_REGION:"Scelga la regione",SELECT_CITY:"Scelga la città",USER_EXIST:"Un tal utente già esiste! Provi ancora una volta.",USER_NOT_EXIST:"Un tal utente non esiste. Esser registrato.",USER_NOT_ACTIVE:"Non ha attivato il Suo profilo. Controlli la Sua posta.",USER_CHECK_EMAIL:"La lettera di conferma La è stata mandata a posta.",SELECT_PRODUCER:"Scelga il produttore",SELECT_FACTORY:"Non ha scelto il produttore",USER_PASSWORD_ERROR:"Parola d'ordine scorretta!",OFFLINE:"Non c'è connessione con l'Internet!",IMPORT_DB:"Il carico di Database ha cominciato! Aspetti, per favore!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"Zona  climatica",THERMAL_RESISTANCE:"Resistenza alla trasmissione termica",AIR_CIRCULATION:"Coefficiente della circolazione d’aria",NAVMENU_GEOLOCATION:"Scegliere la disposizione",NAVMENU_CURRENT_GEOLOCATION:"La disposizione corrente",NAVMENU_CURRENT_CALCULATION:"Pagamento corrente",NAVMENU_CART:"Cestino per il pagamento",NAVMENU_ADD_ELEMENTS:"Elementi aggiuntivi",NAVMENU_ALL_CALCULATIONS:"Tutti i pagamenti",NAVMENU_SETTINGS:"Impostazioni",NAVMENU_MORE_INFO:"Maggiore informazione",NAVMENU_VOICE_HELPER:"Assistenza a voce",NAVMENU_CALCULATIONS:"Pagamenti",NAVMENU_APPENDIX:"Allegato",NAVMENU_NEW_CALC:"Il nuovo pagamento",CONFIGMENU_CONFIGURATION:"Configurazioni e dimensioni",CONFIGMENU_SIZING:"larghezza * altezza -",CONFIGMENU_PROFILE:"Profilo",CONFIGMENU_GLASS:"Parquet di vetro",CONFIGMENU_HARDWARE:"Fornitura",CONFIGMENU_LAMINATION:"Laminazione",CONFIGMENU_LAMINATION_TYPE:"in camera / facciata",WHITE_LAMINATION:"La bianca",CONFIGMENU_ADDITIONAL:"In aggiunta",CONFIGMENU_IN_CART:"Nel cestino",VOICE_SPEACH:"Parlate...",COMMENT:"Lasci la nota sull'ordine qui.",ROOM_SELECTION:"Scelta template",CONFIGMENU_NO_ADDELEMENTS:"Gli elementi supplementari non sono scelti",HEATCOEF_VAL:"Wt",TEMPLATE_TIP:"Poiché il cambiamento delle dimensioni preme qui",PROFILE_TIP:"Poiché una scelta di un profilo preme qui",GLASS_TIP:"Poiché una scelta di una finestra doppio invetriata preme qui"},panels:{TEMPLATE_WINDOW:"Finestra",TEMPLATE_BALCONY:"Balcone",TEMPLATE_DOOR:"Porta",TEMPLATE_BALCONY_ENTER:"Uscita sul balcone",TEMPLATE_EDIT:"Redigere",TEMPLATE_DEFAULT:"Progetto per difetto",COUNTRY:"paese",BRAND:"marchio commerciale",HEAT_INSULATION:"isolamento termico",NOICE_INSULATION:"isolamento acustico",CORROSION_COEFF:"anticorrosione",BURGLAR_COEFF:"protezione contro rottura",LAMINAT_INSIDE:"in camera",LAMINAT_OUTSIDE:"la facciata",ONE_WINDOW_TYPE:"La porta sola",TWO_WINDOW_TYPE:"L'ala doppio",THREE_WINDOW_TYPE:"Il da tre foglie",CAMERa:"di camera",CAMER:" di camera ",CAMERs:"di camere",ENERGY_SAVE:"+risparmio di energia",DOOR_TYPE1:"su perimetro",DOOR_TYPE2:"senza soglia",DOOR_TYPE3:"la soglia di alluminio, battere a macchina",SASH_TYPE1:"l'intercamera",SASH_TYPE2:"la porta T-shaped",SASH_TYPE3:"la finestra",HANDLE_TYPE1:"prema la serie",HANDLE_TYPE2:"maniglia di ufficio standard",LOCK_TYPE1:"una chiusura con una serratura a scatto",LOCK_TYPE2:"la multichiusura con una serratura a scatto",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Scegliere",ADD:"Aggiungere",GRID:"zanzaniera",VISOR:"tettoia",SPILLWAY:"scolo d’acqua",OUTSIDE:"spallette esterne",LOUVERS:"le serrande",INSIDE:"spallette interne",CONNECTORS:"connettore",FAN:"microventilazione",WINDOWSILL:"davanzale",HANDLEL:"maniglia",OTHERS:"altro",GRIDS:"le zanzariere",VISORS:"le tettoie",SPILLWAYS:"gli scoli d’acqua",WINDOWSILLS:"i davanzali",HANDLELS:"le maniglie",NAME_LABEL:"denominazione",ARTICUL_LABEL:"riferimento",QTY_LABEL:"pz.",SIZE_LABEL:"dimensione, misura",WIDTH_LABEL:"larghezza",HEIGHT_LABEL:"altezza",OTHER_ELEMENTS1:"Ancora",OTHER_ELEMENTS2:"componenti...",SCHEME_VIEW:"Schematicamente",LIST_VIEW:"Lista",INPUT_ADD_ELEMENT:"Aggiungere un componente elemento",CANCEL:"Revoca",TOTAL_PRICE_TXT:"Totale componenti aggiuntivi:",ELEMENTS:"componenti",ELEMENT:"componente",ELEMENTA:"di componente"},add_elements_menu:{TIP:"Scegliete un componente dalal lista",EMPTY_ELEMENT:"Senza elemento",TAB_NAME_SIMPLE_FRAME:"Schema semplice",TAB_NAME_HARD_FRAME:"Schema complesso",TAB_EMPTY_EXPLAIN:"Scegliete il primo elemento dalla lista."},design:{SASH_SHAPE:"battenti",ANGEL_SHAPE:"angoli",IMPOST_SHAPE:"imposte",ARCH_SHAPE:"archi",POSITION_SHAPE:"posizione",UNITS_DESCRIP:"come unità di musura sono usati millimetri",
PROJECT_DEFAULT:"progetto per difetto",DOOR_CONFIG_LABEL:"configurazione delal porta",DOOR_CONFIG_DESCTIPT:"infisso porta",SASH_CONFIG_DESCTIPT:"battente della porta",HANDLE_CONFIG_DESCTIPT:"maniglia",LOCK_CONFIG_DESCTIPT:"la serratura",STEP:"passo",LABEL_DOOR_TYPE:"Scegliete il modello dell’infisso porta",LABEL_SASH_TYPE:"Scegliete un tipo dibattente portamaniglia",LABEL_HANDLE_TYPE:"Scegliete un tipo di maniglia",LABEL_LOCK_TYPE:"Scegliete un tipo di serratura",VOICE_SWITCH_ON:"il modo di voce è incluso",VOICE_NOT_UNDERSTAND:"Non è chiaro",VOICE_SMALLEST_SIZE:"dimensioni troppo piccole",VOICE_BIGGEST_SIZE:"dimensioni troppo grandi",VOICE_SMALL_GLASS_BLOCK:"apertura leggera troppo piccola",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"È inaccessibile!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Ricerca per parole chiave",DRAFT_VIEW:"Brutte copie dei conteggi",HISTORY_VIEW:"Storia deiconteggi",PHONE:"telefono",CLIENT:"cliente",ADDRESS:"indirizzo",FROM:"da ",UNTIL:"fino a ",PAYMENTS:"dei pagamenti",ALLPRODUCTS:"prodotti",ON:"per",DRAFT:"Brutta copia",DATE_RANGE:"Diapason delle date",ALL_TIME:"Per tutto il tempo",SORTING:"Cernita",NEWEST_FIRST:"Per cronologia: i nuovi all’inizio",NEWEST_LAST:"Per cronologia: i nuovi alal fine",SORT_BY_TYPE:"Per tipo",SORT_SHOW:"Mostrare",SORT_SHOW_ACTIVE:"Solo attivi",SORT_SHOW_WAIT:"Solo in attesa",SORT_SHOW_DONE:"Appena finito",BY_YOUR_REQUEST:"Su vostra richiesta",NOT_FIND:"Non è stato trovato niente",WAIT_MASTER:"Aspetta il misuratore ",INCLUDED:"sono inclusi",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Tutti gli elementi supplementari dell’oedine",ADD_ORDER:"Aggiungere un prodotto",PRODUCT_QTY:"quantitativo di prodotti",LIGHT_VIEW:"Aspetto ridotto",FULL_VIEW:"Aspetto integrale ",DELIVERY:"Consegna",SELF_EXPORT:"Trasporto individuale",FLOOR:"piano",ASSEMBLING:"Montaggio",WITHOUT_ASSEMBLING:"senza montaggio",FREE:"gratuitamente",PAYMENT_BY_INSTALMENTS:"Rateazione",WITHOUT_INSTALMENTS:"senza rateazione",DELIVERY_DATE:"Data consegna",TOTAL_PRICE_LABEL:"Totale per la consegna",MONTHLY_PAYMENT_LABEL:"pagamenti mensili per",DATE_DELIVERY_LABEL:"con consegna per ",FIRST_PAYMENT_LABEL:"Nuovo pagamento",ORDER:"Ordinare",MEASURE:"Misurare",READY:"Pronto",CALL_MASTER:"Chiamata del misuratore per il conteggio",CALL_MASTER_DESCRIP:"Per la telefonata del measurer abbiamo bisogno di sapere qualcosa su Lei. Entrambi i campi sono obbligatori per riempitura.",CLIENT_LOCATION:"Località",CLIENT_ADDRESS:"Indirizzo",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Stesura dell’ordine per il conteggio",CALL_ORDER_DESCRIP:"Per poter eseguire il vostro ordine dobbiamo sapere qualccosa di voi.",CALL_ORDER_CLIENT_INFO:"Informazioni sul cliente (campo obbligatorio):",CLIENT_NAME:"Cognome Nome Patronimico",CALL_ORDER_DELIVERY:"Consegnare l’ordine per",CALL_ORDER_TOTAL_PRICE:"In totale",CALL_ORDER_ADD_INFO:"In aggiunta (campo facoltativo):",CLIENT_EMAIL:"posta elettronica",ADD_PHONE:"Telefono supplementare",CALL_CREDIT:"Concessione rateazione e Accettazione dell’ordine per il conteggio",CALL_CREDIT_DESCRIP:"Per emettere il pagamento di rate ed eseguire l'ordine, dobbiamo sapere qualcosa su Lei.",CALL_CREDIT_CLIENT_INFO:"Rateazione:",CREDIT_TARGET:"Finalità della concessione di rateazione",CLIENT_ITN:"Codice  fiscale ",CALL_START_TIME:"Telefonare da:",CALL_END_TIME:"fino a:",CALL_CREDIT_PARTIAL_PRICE:"per",ADDELEMENTS_EDIT_LIST:"Redigere la lista ...",ADDELEMENTS_PRODUCT_COST:"in un prodotto",HEAT_TRANSFER:"tarsmissione di calore",WRONG_EMAIL:"Posta elettronica errata",LINK_BETWEEN_COUPLE:"tra coppia",LINK_BETWEEN_ALL:"tra tutti",CLIENT_SEX:"di sesso",CLIENT_SEX_M:"U",CLIENT_SEX_F:"D",CLIENT_AGE:"Età",CLIENT_AGE_OLDER:"è più più anziano",CLIENTE_ISTRUZIONE:"Il criterio principale della vostra scelta",CLIENT_EDUC_MIDLE:"Il buon prezzo",CLIENTE_EDUC_SPEC:"creatore di immagine",CLIENT_EDUC_HIGH:"il profilo del marchio e hardware",CLIENT_EDUC_4:"Raccomandazioni venditore",CLIENT_OCCUPATION:"Occupazione",CLIENT_OCCUP_WORKER:"Dipendente",CLIENT_OCCUP_HOUSE:"Casalinga",CLIENT_OCCUP_BOSS:"Uomo d'affari",CLIENT_OCCUP_STUD:"Studente",CLIENT_OCCUP_PENSION:"Pensionato",CLIENT_INFO_SOURCE:"Fonte di informazioni",CLIENT_INFO_PRESS:"Premere",CLIENT_INFO_FRIEND:"Da conoscenti",CLIENT_INFO_ADV:"Fare annunci visivo",SELECT_PLACEHOLD:"selezionare l'opzione",NO_DISASSEMBL:"senza smontano",STANDART_ASSEMBL:"lo standard",VIP_ASSEMBL:"INSTALLAZIONE DEL VIP",DISCOUNT:"Sconto",DISCOUNT_SELECT:"Scelta di sconto",DISCOUNT_WITH:"Prendere in considerazione uno sconto",DISCOUNT_WITHOUT:"Senza uno sconto",DISCOUNT_WINDOW:"Sconto a un prodotto",DISCOUNT_ADDELEM:"Sconto a elementi supplementari",ORDER_COMMENT:"Nota Order",UNKNOWN:"Sconosciuto"},settings:{AUTHORIZATION:"Autorizzazione:",CHANGE_PASSWORD:"Cambiare la parola d'ordine",CHANGE_LANGUAGE:"Cambiare la lingua",PRIVATE_INFO:"Dati personalio:",USER_NAME:"Persona di contatto",CITY:"Città",ADD_PHONES:"Telefoni supplementari:",INSERT_PHONE:"Aggiungere un telefono",CLIENT_SUPPORT:"Assistenza agli utentui",LOGOUT:"Uscire dall’allegato",SAVE:"Salvare",CURRENT_PASSWORD:"Corrente",NEW_PASSWORD:"Nuovo",CONFIRM_PASSWORD:"Confermare",NO_CONFIRM_PASS:"Password errata"}})}(),function(){angular.module("BauVoiceApp").constant("romanianDictionary",{common_words:{CHANGE:"modifică",MONTHS:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Novembie, Decembrie",MONTHS_SHOT:"Ian, Feb, Mart, Apr, Mai, Iun, Iul, Aug, Sept, Oct, Nov, Dec",MONTHA:"Ianuarie, Februarie, Martie, Aprilie, Mai, Iunie, Iulie, August, Septembrie, Octombrie, Novembie, Decembrie",MONTH_LABEL:"lună",MONTHA_LABEL:"lunii",MONTHS_LABEL:"luni",ALL:"toate",MIN:"minimum",MAX:"maximum",BUTTON_Y:"Da",BUTTON_N:"Nu",DELETE_PRODUCT_TITLE:"STERGE!",DELETE_PRODUCT_TXT:"Doriți să eliminați produsul?",DELETE_ORDER_TITLE:"Sterge comanda!",DELETE_ORDER_TXT:"Doriți să anulați comanda?",COPY_ORDER_TITLE:"Copierea!",COPY_ORDER_TXT:"Doriți să facă o copie la comandă?",SEND_ORDER_TITLE:"în producție!",SEND_ORDER_TXT:"Doriți să trimiteți comanda la uzină?",NEW_TEMPLATE_TITLE:"Template changing",TEMPLATE_CHANGES_LOST:"The template changes will lost! Continue?",PAGE_REFRESH:"Reîncărcarea paginii va duce la pierderi de date!",SELECT:"Select",AND:"și",OK:"OK",BACK:"Back",LETTER_M:"m"},login:{ENTER:"autentificare",PASS_CODE:"Spune-i managerului acest cod.",YOUR_CODE:"codul dvs: ",EMPTY_FIELD:"Completați acest câmp.",WRONG_NUMBER:"numar incorrect.",SHORT_NAME:"Too short name",SHORT_PASSWORD:"parola e prea mica.",SHORT_PHONE:"Too little phone number.",IMPORT_DB_START:"Stai, a început încărcarea de date",IMPORT_DB_FINISH:"Vă mulțumim pentru descărcarea este completă",MOBILE:"telefon mobil",PASSWORD:"Parola",REGISTRATION:"înregistrare",SELECT_COUNTRY:"Select country",SELECT_REGION:"Select region",SELECT_CITY:"Select city",USER_EXIST:"Sorry, but this user already exists! Please, try again.",USER_NOT_EXIST:"Sorry, but this user not exists! Registrate please.",USER_NOT_ACTIVE:"Sorry, but your profile is not active. Please check your email.",USER_CHECK_EMAIL:"The confirmed email was send to you. Please check your email.",SELECT_PRODUCER:"Choose the producer",SELECT_FACTORY:"Please select the producer",USER_PASSWORD_ERROR:"Sorry, but your password is wrong!",OFFLINE:"Nu există conexiune la Internet!",IMPORT_DB:"Baze de date începe descărcarea! Va rugam asteptati! "},mainpage:{MM:" mm ",CLIMATE_ZONE:"zona climatica ",THERMAL_RESISTANCE:"transfer de căldură",AIR_CIRCULATION:"coeficientul circulatiei aerului",NAVMENU_GEOLOCATION:"Selectați locația",NAVMENU_CURRENT_GEOLOCATION:"Locul de amplasare actual",NAVMENU_CURRENT_CALCULATION:"calcul actual",NAVMENU_CART:"cosul de cumparaturi",NAVMENU_ADD_ELEMENTS:"elemente suplimentare",NAVMENU_ALL_CALCULATIONS:"Istoric comenzi",NAVMENU_SETTINGS:"Setări",NAVMENU_MORE_INFO:"Mai multe informații",NAVMENU_VOICE_HELPER:"Сontrolul voce-activat",NAVMENU_CALCULATIONS:"calcule",NAVMENU_APPENDIX:"Propunere",NAVMENU_NEW_CALC:"+Calcul Nou",CONFIGMENU_CONFIGURATION:"Configurația și dimensiunile",CONFIGMENU_SIZING:"Lățime * Înălțime",CONFIGMENU_PROFILE:"profil",CONFIGMENU_GLASS:"geam termopan",CONFIGMENU_HARDWARE:"furnitura ",CONFIGMENU_LAMINATION:"laminare",CONFIGMENU_LAMINATION_TYPE:"camera / fațadă",WHITE_LAMINATION:"alb",CONFIGMENU_ADDITIONAL:"Suplimentar",CONFIGMENU_IN_CART:"Adaugă in coș",VOICE_SPEACH:"Vorbiți...",COMMENT:"Lasă un bilet pe ordinea de aici.",ROOM_SELECTION:"Template selection",CONFIGMENU_NO_ADDELEMENTS:"Suplimentare sunt selectate",HEATCOEF_VAL:"W",TEMPLATE_TIP:"Pentru a schimba dimensiunea, faceți clic aici",PROFILE_TIP:"Pentru a selecta un profil, faceți clic aici",GLASS_TIP:"Pentru a selecta o fereastră termopan, click aici"},panels:{TEMPLATE_WINDOW:"Fereastră",TEMPLATE_BALCONY:"Balcon",TEMPLATE_DOOR:"Ușă",TEMPLATE_BALCONY_ENTER:"Ieșire la balcon",TEMPLATE_EDIT:"Editare",TEMPLATE_DEFAULT:"Proiect Standard",COUNTRY:"țara",BRAND:"marcă comercială",HEAT_INSULATION:"izolație termică",NOICE_INSULATION:"izolare fonica",CORROSION_COEFF:"anticoroziune",BURGLAR_COEFF:"hoț",LAMINAT_INSIDE:"in camera",LAMINAT_OUTSIDE:"față",ONE_WINDOW_TYPE:"One-casement",TWO_WINDOW_TYPE:"Two-casement",THREE_WINDOW_TYPE:"Three-leaf",CAMERa:"cameras",CAMER:"cameras",CAMERs:"cameras",ENERGY_SAVE:"+energy saving",DOOR_TYPE1:"on perimeter",DOOR_TYPE2:"without threshold",DOOR_TYPE3:"aluminum threshold, type",SASH_TYPE1:"the interroom",SASH_TYPE2:"the door T-shaped",SASH_TYPE3:"the window",HANDLE_TYPE1:"press set",HANDLE_TYPE2:"standard office handle",LOCK_TYPE1:"one-locking with a latch",LOCK_TYPE2:"multilocking with a latch",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Alege",ADD:"Adauga",GRID:"plasă contra țânțarilor",VISOR:"parasolară",SPILLWAY:"scurgere",OUTSIDE:"pante exterioare",LOUVERS:"jaluzele",INSIDE:"pante interne",CONNECTORS:"conector",FAN:"micro ventilare",WINDOWSILL:"pervaz",HANDLEL:"mâner",OTHERS:"altele",GRIDS:"plase de țânțari",VISORS:"viziere",SPILLWAYS:"scurgeri",WINDOWSILLS:"Pervaze",HANDLELS:"manere",NAME_LABEL:"nume",ARTICUL_LABEL:"referință",QTY_LABEL:"Bucăți",SIZE_LABEL:"dimensiune",WIDTH_LABEL:"lățime",HEIGHT_LABEL:"înălțime",OTHER_ELEMENTS1:"încă",OTHER_ELEMENTS2:"componenta...",SCHEME_VIEW:"schematic",LIST_VIEW:"Lista",INPUT_ADD_ELEMENT:"Adaugă Componenta",CANCEL:"anulare",TOTAL_PRICE_TXT:"Total componente suplimentare în valoare de",ELEMENTS:"componente",ELEMENT:"component",ELEMENTA:"componenta"},add_elements_menu:{TIP:"Selectați un element din listă",EMPTY_ELEMENT:"fără elementul",TAB_NAME_SIMPLE_FRAME:"construcție simplă",TAB_NAME_HARD_FRAME:"construcție component",TAB_EMPTY_EXPLAIN:"Vă rugăm să selectați primul element,pentru a porni construcția."},design:{SASH_SHAPE:"cercevea",ANGEL_SHAPE:"unghiuri",IMPOST_SHAPE:"impost",ARCH_SHAPE:"arcuri",POSITION_SHAPE:"poziția",UNITS_DESCRIP:"Unitățile de măsură sunt în mm",PROJECT_DEFAULT:"Proiect Standard",DOOR_CONFIG_LABEL:"configurația uși",DOOR_CONFIG_DESCTIPT:"cadru de ușă",SASH_CONFIG_DESCTIPT:"ori usi",HANDLE_CONFIG_DESCTIPT:"mâner",LOCK_CONFIG_DESCTIPT:"blocare a ușii",STEP:"pas",LABEL_DOOR_TYPE:"Selectaţi un toc de proiectare a ușii",LABEL_SASH_TYPE:"Selectați tipul de cercevea la ușă",LABEL_HANDLE_TYPE:"Selectați tipul de mâner",LABEL_LOCK_TYPE:"Selectați tipul de blocare",VOICE_SWITCH_ON:"Modul Voce este activat",VOICE_NOT_UNDERSTAND:"nu este clar",VOICE_SMALLEST_SIZE:"prea mic",VOICE_BIGGEST_SIZE:"prea mare",VOICE_SMALL_GLASS_BLOCK:"luminatoare prea mici",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"nu Este Disponibil!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Căutare după cuvinte cheie",DRAFT_VIEW:"calcule Ciorne",HISTORY_VIEW:"istoria calculelor",PHONE:"telefon",CLIENT:"client",ADDRESS:"adresa",FROM:"de la ",UNTIL:"pînă la ",PAYMENTS:"achitare prin",ALLPRODUCTS:"Construcți",ON:"pe",DRAFT:"ciornă",DATE_RANGE:"intervalul de date",ALL_TIME:"Pentru tot timpul",SORTING:"Sortarea",NEWEST_FIRST:"după timp:cele noi primele",NEWEST_LAST:"după timp:cele noi la urmă",SORT_BY_TYPE:"După tipul",SORT_SHOW:"Arată",SORT_SHOW_ACTIVE:"Doar activi",SORT_SHOW_WAIT:"Numai în așteptarea",SORT_SHOW_DONE:"Numai finalizat",BY_YOUR_REQUEST:"Potrivit cererea dvs.",NOT_FIND:"nimic nu a fost găsit",WAIT_MASTER:"aşteaptă inginerul",INCLUDED:"inclus",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"toate elemente suplimentare a comenzii",ADD_ORDER:"adaugă produsul",PRODUCT_QTY:"numărul de produse",LIGHT_VIEW:"Vizualizare scurtă",FULL_VIEW:"Vizualizare completă",DELIVERY:"livrare",SELF_EXPORT:"Fara livrare",FLOOR:"etajul",ASSEMBLING:"instalare",WITHOUT_ASSEMBLING:"fără montare",FREE:"gratuit",PAYMENT_BY_INSTALMENTS:"Plata în rate",WITHOUT_INSTALMENTS:"fără rate",DELIVERY_DATE:"data de livrare",TOTAL_PRICE_LABEL:"în total la livrare ",MONTHLY_PAYMENT_LABEL:"plata lunara cîte",DATE_DELIVERY_LABEL:"La livrare",FIRST_PAYMENT_LABEL:"prima achitare",ORDER:"a comanda",MEASURE:"Măsura",READY:"Gata",CALL_MASTER:"chemarea inginerului pentru calcul",CALL_MASTER_DESCRIP:"Pentru a solicita inginerul, avem nevoie de ceva informatie despre dvs. Ambele campurile sunt obligatorii.",CLIENT_LOCATION:"locație",CLIENT_ADDRESS:"adresa",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Pentru a calcula",CALL_ORDER_DESCRIP:"Pentru a îndeplini comanda,este necesar informatie despre dvs.",CALL_ORDER_CLIENT_INFO:"Informații client (câmpuri obligatorii):",CLIENT_NAME:"numele prenumele patronimicul",CALL_ORDER_DELIVERY:"livrarea comenzi pe",CALL_ORDER_TOTAL_PRICE:"Total",CALL_ORDER_ADD_INFO:"suplimentar (completarea la dorinţă):",CLIENT_EMAIL:"poșta electronică",ADD_PHONE:"telefon suplimentar",CALL_CREDIT:"Efectuarea rate și calculul comenzi",CALL_CREDIT_DESCRIP:"Pentru a aranja rate și îndeplini comanda, avem ceva pentru tine să știu.",CALL_CREDIT_CLIENT_INFO:"Plata în rate:",CREDIT_TARGET:"Scopul clearance de rate",CLIENT_ITN:"Cod fiscal individual",CALL_START_TIME:"sunați de la:",CALL_END_TIME:"pînă la :",CALL_CREDIT_PARTIAL_PRICE:"pe ",ADDELEMENTS_EDIT_LIST:"redactarea listei ...",ADDELEMENTS_PRODUCT_COST:"într-o construcţie",HEAT_TRANSFER:"transferul de căldură",WRONG_EMAIL:"poșta electronica este incorectă",LINK_BETWEEN_COUPLE:"între o pereche de",LINK_BETWEEN_ALL:"printre toate",CLIENT_SEX:"Sex",CLIENT_SEX_M:"M",CLIENT_SEX_F:"F",CLIENT_AGE:"Age",CLIENT_AGE_OLDER:"mai vechi","CLIENT_EDUCAȚIE":"Principalul criteriu de alegere",CLIENT_EDUC_MIDLE:"preț bun",CLIENT_EDUC_SPEC:"filtru de imagine",CLIENT_EDUC_HIGH:"profilul de brand și hardware ",CLIENT_EDUC_4:" vânzător Recomandări",CLIENT_OCCUPATION:"Ocuparea forței de muncă",CLIENT_OCCUP_WORKER:"angajat",CLIENT_OCCUP_HOUSE:"Casnică",CLIENT_OCCUP_BOSS:"Antreprenor",CLIENT_OCCUP_STUD:"Student",CLIENT_OCCUP_PENSION:"Pensionar",CLIENT_INFO_SOURCE:"sursa",CLIENT_INFO_PRESS:"Presă",CLIENT_INFO_FRIEND:"De la prieteni",CLIENT_INFO_ADV:"publicitate vizuala",SELECT_PLACEHOLD:"selectați opțiunea dumneavoastră",NO_DISASSEMBL:"fără demontare",STANDART_ASSEMBL:"standard",VIP_ASSEMBL:"montaj VIP",DISCOUNT:"Discount",DISCOUNT_SELECT:"Alegerea de reduceri",DISCOUNT_WITH:"Având în vedere reduceri",DISCOUNT_WITHOUT:"Discount Excluderea",DISCOUNT_WINDOW:"Discount pe un produs",DISCOUNT_ADDELEM:"Discount pe elemente suplimentare",ORDER_COMMENT:"Nota Ordine",UNKNOWN:"Necunoscut"},settings:{AUTHORIZATION:"Autentificare:",CHANGE_PASSWORD:"schimbați parola",CHANGE_LANGUAGE:"Change language",PRIVATE_INFO:"Informații personale:",USER_NAME:"persoana de contact",CITY:"oraș",ADD_PHONES:"telefon suplimentar:",INSERT_PHONE:"adaugați  nr de telefon",CLIENT_SUPPORT:"suport clienți",LOGOUT:"Ieșirea din aplicația",SAVE:"Salvați",CURRENT_PASSWORD:"Current",NEW_PASSWORD:"nou",CONFIRM_PASSWORD:"Confirmare",NO_CONFIRM_PASS:"parolă incorectă"}})}(),function(){angular.module("BauVoiceApp").constant("russianDictionary",{common_words:{CHANGE:"Изменить",MONTHS:"Январь, Февраль, Март, Апрель, Май, Июнь, Июль, Август, Сентябрь, Октябрь, Ноябрь, Декабрь",MONTHS_SHOT:"Янв, Февр, Март, Апр, Май, Июнь, Июль, Авг, Сент, Окт, Ноя, Дек",MONTHA:"Января, Февраля, Марта, Апреля, Мая, Июня, Июля, Августа, Сентября, Октября, Ноября, Декабря",MONTH_LABEL:"месяц",MONTHA_LABEL:"месяца",MONTHS_LABEL:"месяцeв",ALL:"Все",MIN:"мин.",MAX:"макс.",BUTTON_Y:"ДА",BUTTON_N:"НЕТ",DELETE_PRODUCT_TITLE:"Удаление!",DELETE_PRODUCT_TXT:"Хотите удалить продукт?",DELETE_ORDER_TITLE:"Удаление заказа!",DELETE_ORDER_TXT:"Хотите удалить заказ?",COPY_ORDER_TITLE:"Копирование!",COPY_ORDER_TXT:"Хотите сделать копию заказа?",SEND_ORDER_TITLE:"В производство!",SEND_ORDER_TXT:"Хотите отправить заказ на завод?",NEW_TEMPLATE_TITLE:"Изменение шаблона",TEMPLATE_CHANGES_LOST:"Изменения в шаблоне будут потеряны! Продолжить?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"и",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Войти",PASS_CODE:"Сообщите этот код менеджеру.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заполните это поле.",WRONG_NUMBER:"Неверный номер.",SHORT_NAME:"Слишком маленькое имя.",SHORT_PASSWORD:"Слишком маленький пароль.",SHORT_PHONE:"Слишком маленький номер телефона.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",MOBILE:"Мобильный телефон",PASSWORD:"Пароль",REGISTRATION:"Регистрация",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нет соединения с интернетом!",IMPORT_DB:"Началась загрузка Баз данных! Подождите пожалуйста!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"климатическая зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коэффициент воздухообмена",NAVMENU_GEOLOCATION:"Выбрать расположение",NAVMENU_CURRENT_GEOLOCATION:"Текущее расположение",NAVMENU_CURRENT_CALCULATION:"Текущий расчет",NAVMENU_CART:"Корзина расчета",NAVMENU_ADD_ELEMENTS:"Доп. элементы",NAVMENU_ALL_CALCULATIONS:"История заказов",NAVMENU_SETTINGS:"Настройки",NAVMENU_MORE_INFO:"Больше информации",NAVMENU_VOICE_HELPER:"Голосовое управление",NAVMENU_CALCULATIONS:"Расчеты",NAVMENU_APPENDIX:"Приложение",NAVMENU_NEW_CALC:"+Новый расчет",CONFIGMENU_CONFIGURATION:"Конфигурация и размеры",CONFIGMENU_SIZING:"ширина * высота",CONFIGMENU_PROFILE:"Профиль",CONFIGMENU_GLASS:"Стеклопакет",CONFIGMENU_HARDWARE:"Фурнитура",CONFIGMENU_LAMINATION:"Ламинация",CONFIGMENU_LAMINATION_TYPE:"в комнате / фасад",WHITE_LAMINATION:"Белая",CONFIGMENU_ADDITIONAL:"Дополнительно",CONFIGMENU_IN_CART:"В корзину",VOICE_SPEACH:"Говорите...",COMMENT:"Оставьте свою заметку о заказе здесь.",ROOM_SELECTION:"Выбор шаблона",CONFIGMENU_NO_ADDELEMENTS:"Доп.элементы не выбраны",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для изменения размеров нажмите сюда",PROFILE_TIP:"Для выбора профиля нажмите сюда",GLASS_TIP:"Для выбора стеклопакета нажмите сюда"},panels:{TEMPLATE_WINDOW:"Oкно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Дверь",TEMPLATE_BALCONY_ENTER:"Выход на балкон",TEMPLATE_EDIT:"Редактировать",TEMPLATE_DEFAULT:"Проект по умолчанию",COUNTRY:"страна",BRAND:"торговая марка",HEAT_INSULATION:"теплоизоляция",NOICE_INSULATION:"шумоизоляция",CORROSION_COEFF:"aнтикоррозийность",BURGLAR_COEFF:"противовзломность",LAMINAT_INSIDE:"в комнате",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминиевый порог, тип",SASH_TYPE1:"межкомнатная",SASH_TYPE2:"дверная т-образная",SASH_TYPE3:"оконная",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Выбрать",ADD:"Добавить",GRID:"москитная сетка",VISOR:"козырек",SPILLWAY:"водоотлив",OUTSIDE:"наружные откосы",LOUVERS:"жалюзи",INSIDE:"внутренние откосы",CONNECTORS:"соединитель",FAN:"микропроветривание",WINDOWSILL:"подоконник",HANDLEL:"ручка",OTHERS:"прочее",GRIDS:"москитные сетки",VISORS:"козырьки",SPILLWAYS:"водоотливы",WINDOWSILLS:"подоконники",HANDLELS:"ручки",NAME_LABEL:"наименование",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"размер",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"высота",OTHER_ELEMENTS1:"Еще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематически",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Добавить компонент",CANCEL:"Отмена",TOTAL_PRICE_TXT:"Итого дополнительных компонентов на сумму:",ELEMENTS:"компонентов",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Выберите элемент из списка",EMPTY_ELEMENT:"Без элемента",TAB_NAME_SIMPLE_FRAME:"Простая конструкция",TAB_NAME_HARD_FRAME:"Составная конструкция",TAB_EMPTY_EXPLAIN:"Выберите из списка первый элемент, чтобы начать составлять конструкцию."},design:{SASH_SHAPE:"створки",ANGEL_SHAPE:"углы",IMPOST_SHAPE:"импосты",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиция",UNITS_DESCRIP:"В качестве единиц измерения используются миллиметры",PROJECT_DEFAULT:"Проект по умолчанию",DOOR_CONFIG_LABEL:"конфигурация двери",DOOR_CONFIG_DESCTIPT:"рама двери",SASH_CONFIG_DESCTIPT:"створка двери",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"шаг",LABEL_DOOR_TYPE:"Выберите конструкцию рамы двери",LABEL_SASH_TYPE:"Выберите тип створки двери",LABEL_HANDLE_TYPE:"Выберите тип ручки",LABEL_LOCK_TYPE:"Выберите тип замка",VOICE_SWITCH_ON:"голосовой режим включен",VOICE_NOT_UNDERSTAND:"Не понятно",VOICE_SMALLEST_SIZE:"слишком маленький размер",VOICE_BIGGEST_SIZE:"слишком большой размер",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Недоступно!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Поиск по ключевым словам",DRAFT_VIEW:"Черновики расчетов",HISTORY_VIEW:"История расчетов",PHONE:"телефон",CLIENT:"клиент",ADDRESS:"адрес",FROM:"от ",UNTIL:"до ",PAYMENTS:"платежей по",ALLPRODUCTS:"изделий",ON:"на",DRAFT:"Черновик",DATE_RANGE:"Диапазон дат",ALL_TIME:"За все время",SORTING:"Сортировка",NEWEST_FIRST:"По времени: новые в начале",NEWEST_LAST:"По времени: новые в конце",SORT_BY_TYPE:"По типам",SORT_SHOW:"Показать",SORT_SHOW_ACTIVE:"Только активные",SORT_SHOW_WAIT:"Только в ожидании",SORT_SHOW_DONE:"Только завершенные",BY_YOUR_REQUEST:"По вашему запросу",NOT_FIND:"ничего не найдено",WAIT_MASTER:"ожидает замерщика",INCLUDED:"включены",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Все доп.элементы заказа",ADD_ORDER:"Добавить изделие",PRODUCT_QTY:"количество изделий",LIGHT_VIEW:"Сокращенный вид",FULL_VIEW:"Полный вид",DELIVERY:"Доставка",SELF_EXPORT:"самовывоз",FLOOR:"этаж",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажа",FREE:"бесплатно",PAYMENT_BY_INSTALMENTS:"Рассрочка",WITHOUT_INSTALMENTS:"без рассрочки",DELIVERY_DATE:"Дата поставки",TOTAL_PRICE_LABEL:"Итого при поставке на",MONTHLY_PAYMENT_LABEL:"ежемесячных платежа по",DATE_DELIVERY_LABEL:"при поставке на",FIRST_PAYMENT_LABEL:"Первый платеж",ORDER:"Заказать",MEASURE:"Замерить",READY:"Готово",CALL_MASTER:"Вызов замерщика для рассчета",CALL_MASTER_DESCRIP:"Для вызова замерщика нам нужно кое-что о вас знать. Оба поля являются обязательными для заполнения.",CLIENT_LOCATION:"Местоположение",CLIENT_ADDRESS:"Адрес",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Оформление заказа для рассчета",CALL_ORDER_DESCRIP:"Для того, чтобы выполнить заказ, мы должны кое-что о вас знать.",CALL_ORDER_CLIENT_INFO:"Информация о клиенте (заполняйте обязательно):",CLIENT_NAME:"Фамилия Имя Отчество",CALL_ORDER_DELIVERY:"Доставить заказ на",CALL_ORDER_TOTAL_PRICE:"Всего",CALL_ORDER_ADD_INFO:"Дополнительно (заполняйте по желанию):",CLIENT_EMAIL:"Электронная почта",ADD_PHONE:"Дополнительный телефон",CALL_CREDIT:"Оформление рассрочки и заказа для рассчета",CALL_CREDIT_DESCRIP:"Для того, чтобы оформить рассрочку и выполнить заказ, мы должны кое-что о вас знать.",CALL_CREDIT_CLIENT_INFO:"Рассрочка:",CREDIT_TARGET:"Цель оформления рассрочки",CLIENT_ITN:"Индивидуальный налоговый номер",CALL_START_TIME:"Звонить от:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редактировать список ...",ADDELEMENTS_PRODUCT_COST:"в одном изделии",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Неверная электронная почта",LINK_BETWEEN_COUPLE:"между парой",LINK_BETWEEN_ALL:"между всеми",CLIENT_SEX:"Пол",CLIENT_SEX_M:"M",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Возраст",CLIENT_AGE_OLDER:"старше",CLIENT_EDUCATION:"Главный критерий вашего выбора",CLIENT_EDUC_MIDLE:"Выгодная цена",CLIENT_EDUC_SPEC:"Имидж производителя",CLIENT_EDUC_HIGH:"Бренд профиля или фурнитуры",CLIENT_EDUC_4:"Рекомендации продавца",CLIENT_OCCUPATION:"Занятость",CLIENT_OCCUP_WORKER:"Служащий",CLIENT_OCCUP_HOUSE:"Домохозяйка",CLIENT_OCCUP_BOSS:"Предприниматель",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсионер",CLIENT_INFO_SOURCE:"Источник информации",CLIENT_INFO_PRESS:"Пресса",CLIENT_INFO_FRIEND:"От знакомых",CLIENT_INFO_ADV:"Визуальная реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Cкидка",DISCOUNT_SELECT:"Выбор скидки",DISCOUNT_WITH:"С учетом скидки",DISCOUNT_WITHOUT:"Без учета скидки",DISCOUNT_WINDOW:"Скидка на изделие",DISCOUNT_ADDELEM:"Скидка на дополнительные элементы",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизация:",CHANGE_PASSWORD:"Изменить пароль",CHANGE_LANGUAGE:"Изменить язык",PRIVATE_INFO:"Личная информация:",USER_NAME:"Контактное лицо",CITY:"Город",ADD_PHONES:"Дополнительные телефоны:",INSERT_PHONE:"Добавить телефон",CLIENT_SUPPORT:"Подержка пользователей",LOGOUT:"Выйти из приложения",SAVE:"Сохранить",CURRENT_PASSWORD:"Текущий",NEW_PASSWORD:"Новый",CONFIRM_PASSWORD:"Подтвердить",NO_CONFIRM_PASS:"Неверный пароль"}})}(),function(){angular.module("BauVoiceApp").constant("ukrainianDictionary",{common_words:{CHANGE:"Змінити",MONTHS:"Січень, Лютий, Березень, Квітень, Травень, Червень, Липень, Серпень, Вересень, Жовтень, Листопад, Грудень",MONTHS_SHOT:"Січ, Лют, Бер, Квіт, Трав, Черв, Лип, Серп, Вер, Жовт, Лист, Груд",MONTHA:"Січня, Лютого, Березня, Квітня, Травня, Червня, Липня, Серпня, Вересня, Жовтня, Листопада, Грудня",MONTH_LABEL:"місяць",MONTHA_LABEL:"місяця",MONTHS_LABEL:"місяців",ALL:"Все",MIN:"мін.",MAX:"макс.",BUTTON_Y:"ТАК",BUTTON_N:"НІ",DELETE_PRODUCT_TITLE:"Видалення!",DELETE_PRODUCT_TXT:"Хочете видалити продукт?",DELETE_ORDER_TITLE:"Видалення замовлення!",DELETE_ORDER_TXT:"Хочете видалити замовлення?",COPY_ORDER_TITLE:"Копіювання!",COPY_ORDER_TXT:"Хочете зробити копію замовлення?",SEND_ORDER_TITLE:"На виробництво!",SEND_ORDER_TXT:"Хочете відправити замовлення на завод?",NEW_TEMPLATE_TITLE:"Зміна шаблона",TEMPLATE_CHANGES_LOST:"Зміни у шаблоні будуть загублені. Продовжити?",PAGE_REFRESH:"Перезагрузка страницы приведет к потерю данных!",SELECT:"Выбрать",AND:"та",OK:"OK",BACK:"Назад",LETTER_M:"м"},login:{ENTER:"Увійти",PASS_CODE:"Повідомте цей код менеджерові.",YOUR_CODE:"Ваш код: ",EMPTY_FIELD:"Заповніть це поле.",WRONG_NUMBER:"Невірний номер.",SHORT_NAME:"Слишком маленькое имя.",SHORT_PASSWORD:"Занадто маленький пароль.",SHORT_PHONE:"Занадто маленький номер телефона.",IMPORT_DB_START:"Подождите, началась загрузка базы данных",IMPORT_DB_FINISH:"Спасибо, загрузка завершена",MOBILE:"Мобільный телефон",PASSWORD:"Пароль",REGISTRATION:"Регістрація",SELECT_COUNTRY:"Веберите страну",SELECT_REGION:"Выберите регион",SELECT_CITY:"Выберите город",USER_EXIST:"Такой пользователь уже существует! Попробуйте еще раз.",USER_NOT_EXIST:"Такой пользователь не существует. Зарегистрируйтесь.",USER_NOT_ACTIVE:"Вы не активировали Ваш профиль. Проверьте Вашу почту.",USER_CHECK_EMAIL:"Подтвердительное письмо было отправлено Вам на почту.",SELECT_PRODUCER:"Выберите производителя",SELECT_FACTORY:"Вы не выбрали производителя",USER_PASSWORD_ERROR:"Неверный пароль!",OFFLINE:"Нема зв`язку з iнтернетом!",IMPORT_DB:"Почалась загрузка Баз данних! Почекайте будь ласка!"},mainpage:{MM:" мм ",CLIMATE_ZONE:"кліматична зона",THERMAL_RESISTANCE:"теплопередачa",AIR_CIRCULATION:"коефіцієнт повітрообміну",NAVMENU_GEOLOCATION:"Вибрати розташування",NAVMENU_CURRENT_GEOLOCATION:"Поточне розташування",NAVMENU_CURRENT_CALCULATION:"Поточний розрахунок",NAVMENU_CART:"Кошик розрахунку",NAVMENU_ADD_ELEMENTS:"Дод. елементи",NAVMENU_ALL_CALCULATIONS:"Історія замовлень",NAVMENU_SETTINGS:"Налаштування",NAVMENU_MORE_INFO:"Більше інформації",NAVMENU_VOICE_HELPER:"Голосове управління",NAVMENU_CALCULATIONS:"Розрахунки",NAVMENU_APPENDIX:"Додаток",NAVMENU_NEW_CALC:"+Новий розрахунок",CONFIGMENU_CONFIGURATION:"Конфігурація і розміри",CONFIGMENU_SIZING:"ширина * висота -",CONFIGMENU_PROFILE:"Профіль",CONFIGMENU_GLASS:"Склопакет",CONFIGMENU_HARDWARE:"Фурнітура",CONFIGMENU_LAMINATION:"Ламінація",CONFIGMENU_LAMINATION_TYPE:"в кімнаті / фасад",WHITE_LAMINATION:"Біла",CONFIGMENU_ADDITIONAL:"Додатково",CONFIGMENU_IN_CART:"В кошик",VOICE_SPEACH:"Говоріть...",COMMENT:"Залиште свою замітку про заказ тут.",ROOM_SELECTION:"Вибір шаблону",CONFIGMENU_NO_ADDELEMENTS:"Дод.елементи не вибранi",HEATCOEF_VAL:"Вт",TEMPLATE_TIP:"Для зміни розмірів натисніть сюди",PROFILE_TIP:"Для вибору профілю натисніть сюди",GLASS_TIP:"Для вибору склопакета натисніть сюди"},panels:{TEMPLATE_WINDOW:"Вікно",TEMPLATE_BALCONY:"Балкон",TEMPLATE_DOOR:"Двері",TEMPLATE_BALCONY_ENTER:"Вихід на балкон",TEMPLATE_EDIT:"Редагувати",TEMPLATE_DEFAULT:"Проект за умовчанням",COUNTRY:"країна",BRAND:"торгова марка",HEAT_INSULATION:"теплоізоляція",NOICE_INSULATION:"шумоізоляція",CORROSION_COEFF:"aнтикорозійність",BURGLAR_COEFF:"протизламність",LAMINAT_INSIDE:"в кімнаті",LAMINAT_OUTSIDE:"фасад",ONE_WINDOW_TYPE:"Одностворчатое",TWO_WINDOW_TYPE:"Двухстворчатое",THREE_WINDOW_TYPE:"Трехстворчатое",CAMERa:"камера",CAMER:"камеры",CAMERs:"камер",ENERGY_SAVE:"+энергосбережение",DOOR_TYPE1:"по периметру",DOOR_TYPE2:"без порога",DOOR_TYPE3:"алюминевый порог, тип",SASH_TYPE1:"межкомнатная",SASH_TYPE2:"дверная т-образная",SASH_TYPE3:"оконная",HANDLE_TYPE1:"нажимной гарнитур",HANDLE_TYPE2:"стандартная офисная ручка",LOCK_TYPE1:"однозапорный с защелкой",LOCK_TYPE2:"многозапорный с защелкой",EXTRA_GLASS1:"Нет возможности установки стеклопакета ",
EXTRA_GLASS2:" для данной конфигурации конструкции"},add_elements:{CHOOSE:"Вибрати",ADD:"Додати",GRID:"москітна сітка",VISOR:"Козирок",SPILLWAY:"водовідлив",OUTSIDE:"зовнішні укоси",LOUVERS:"жалюзі",INSIDE:"внутрішні укоси",CONNECTORS:"з`єднувач",FAN:"мікропровітрювання",WINDOWSILL:"підвіконня",HANDLEL:"ручка",OTHERS:"інше",GRIDS:"москітні сітки",VISORS:"козирки",SPILLWAYS:"водовідливи",WINDOWSILLS:"підвіконня",HANDLELS:"ручки",NAME_LABEL:"найменування",ARTICUL_LABEL:"aртикул",QTY_LABEL:"шт.",SIZE_LABEL:"розмір",WIDTH_LABEL:"ширина",HEIGHT_LABEL:"висота",OTHER_ELEMENTS1:"Ще",OTHER_ELEMENTS2:"компонента...",SCHEME_VIEW:"Схематично",LIST_VIEW:"Cписок",INPUT_ADD_ELEMENT:"Додати компонент",CANCEL:"Відміна",TOTAL_PRICE_TXT:"Разом додаткових компонентів на суму:",ELEMENTS:"компонентів",ELEMENT:"компонент",ELEMENTA:"компонента"},add_elements_menu:{TIP:"Виберіть елемент зі списку",EMPTY_ELEMENT:"Без элементу",TAB_NAME_SIMPLE_FRAME:"Проста конструкція",TAB_NAME_HARD_FRAME:"Складена конструкція",TAB_EMPTY_EXPLAIN:"Виберіть зі списку перший елемент, щоб почати складати конструкцію."},design:{SASH_SHAPE:"стулки",ANGEL_SHAPE:"кути",IMPOST_SHAPE:"імпости",ARCH_SHAPE:"арки",POSITION_SHAPE:"позиція",UNITS_DESCRIP:"Як одиниці виміру використовуються міліметри",PROJECT_DEFAULT:"Проект за умовчанням",DOOR_CONFIG_LABEL:"конфігурація дверей",DOOR_CONFIG_DESCTIPT:"рама дверей",SASH_CONFIG_DESCTIPT:"стулка дверей",HANDLE_CONFIG_DESCTIPT:"ручка",LOCK_CONFIG_DESCTIPT:"замок",STEP:"крок",LABEL_DOOR_TYPE:"Виберіть конструкцію рами дверей",LABEL_SASH_TYPE:"Виберіть тип стулки дверей",LABEL_HANDLE_TYPE:"Виберіть тип ручки",LABEL_LOCK_TYPE:"Виберіть тип замка",VOICE_SWITCH_ON:"голосовий режим включен",VOICE_NOT_UNDERSTAND:"Не зрозуміло",VOICE_SMALLEST_SIZE:"замалий розмір",VOICE_BIGGEST_SIZE:"завеликий розмір",VOICE_SMALL_GLASS_BLOCK:"слишком маленький световой проем",SQUARE_EXTRA:"Площадь конструкции превышает допустимую",DIM_EXTRA:"Габаритный размер конструкции превышает допустимый",NOT_AVAILABLE:"Недоступно!",TEST_STAGE:"Находится в стадии тестирования",GLASS:"Стеклопакет",GLASS_SIZE:"размером",NO_MATCH_RANGE:"не соответствует допустимому диапазону",GLASS_SQUARE:"с площадью",MAX_VALUE_HIGHER:"перевышает допустимое максимальное значение",EXTRA_SASH:"Текущий размер створки по фальцу",CHANGE_SIZE:"Для сохранения конструкции измените размеры."},history:{SEARCH_PLACEHOLDER:"Пошук за ключовими словами",DRAFT_VIEW:"Чернетки розрахунків",HISTORY_VIEW:"Історія розрахунків",PHONE:"телефон",CLIENT:"клієнт",ADDRESS:"адреса",FROM:"від ",UNTIL:"до ",PAYMENTS:"платежів по",ALLPRODUCTS:"виробів",ON:"на",DRAFT:"Чернетка",DATE_RANGE:"Діапазон дат",ALL_TIME:"За весь час",SORTING:"Сортування",NEWEST_FIRST:"За часом: нові на початку",NEWEST_LAST:"За часом: нові у кінці",SORT_BY_TYPE:"По типах",SORT_SHOW:"Показати",SORT_SHOW_ACTIVE:"Тільки активні",SORT_SHOW_WAIT:"Тільки в очікуванні",SORT_SHOW_DONE:"Тільки завершені",BY_YOUR_REQUEST:"По вашому запиту",NOT_FIND:"нічого не знайдено",WAIT_MASTER:"очікує замірювача",INCLUDED:"включені",NO_PRINT:"Вывод спецификации невозможен ввиду отсутствия интернет-соединения"},cart:{ALL_ADD_ELEMENTS:"Всі дод.елементи замовлення",ADD_ORDER:"Додати виріб",PRODUCT_QTY:"кількість виробів",LIGHT_VIEW:"Скорочений вид",FULL_VIEW:"Повний вид",DELIVERY:"Доставка",SELF_EXPORT:"самовивезення",FLOOR:"поверх",ASSEMBLING:"Монтаж",WITHOUT_ASSEMBLING:"без монтажу",FREE:"безкоштовно",PAYMENT_BY_INSTALMENTS:"Розстрочка",WITHOUT_INSTALMENTS:"без розстрочки",DELIVERY_DATE:"Дата постачання",TOTAL_PRICE_LABEL:"Разом при постачанні на",MONTHLY_PAYMENT_LABEL:"щомісячних платежів по",DATE_DELIVERY_LABEL:"при постачанні на",FIRST_PAYMENT_LABEL:"Перший платіж",ORDER:"Замовити",MEASURE:"Заміряти",READY:"Готово",CALL_MASTER:"Виклик замірювача для розрахунку",CALL_MASTER_DESCRIP:"Для виклику замірювача нам потрібно дещо про вас знати. Обидва поля є обов`язковими для заповнення.",CLIENT_LOCATION:"Місце розташування",CLIENT_ADDRESS:"Адреса",CLIENT_HOUSE:"Буд",CLIENT_FLAT:"Кв",CLIENT_FLOOR:"Пов",CALL_ORDER:"Оформлення замовлення для розрахунку",CALL_ORDER_DESCRIP:"Для того, щоб виконати замовлення, ми повинні дещо про вас знати.",CALL_ORDER_CLIENT_INFO:"Інформація про клієнта (заповнюйте обов`язково):",CLIENT_NAME:"Прізвище Ім`я По батькові",CALL_ORDER_DELIVERY:"Доставити замовлення на",CALL_ORDER_TOTAL_PRICE:"Загалом",CALL_ORDER_ADD_INFO:"Додатково (заповнюйте за бажанням):",CLIENT_EMAIL:"Електронна пошта",ADD_PHONE:"Додатковий телефон",CALL_CREDIT:"Оформлення розстрочки і замовлення для розрахунку",CALL_CREDIT_DESCRIP:"Для того, щоб оформити розстрочку і виконати замовлення, ми повинні дещо про вас знати.",CALL_CREDIT_CLIENT_INFO:"Розстрочка:",CREDIT_TARGET:"Мета оформлення розстрочки",CLIENT_ITN:"Індивідуальний податковий номер",CALL_START_TIME:"Дзвонити від:",CALL_END_TIME:"до:",CALL_CREDIT_PARTIAL_PRICE:"по",ADDELEMENTS_EDIT_LIST:"Редагувати список ...",ADDELEMENTS_PRODUCT_COST:"в одному виробі",HEAT_TRANSFER:"теплопередача",WRONG_EMAIL:"Невірна електронна пошта",LINK_BETWEEN_COUPLE:"між парою",LINK_BETWEEN_ALL:"між усіма",CLIENT_SEX:"Стать",CLIENT_SEX_M:"Ч",CLIENT_SEX_F:"Ж",CLIENT_AGE:"Вік",CLIENT_AGE_OLDER:"старше",CLIENT_EDUCATION:"Головний критерій вашого вибору",CLIENT_EDUC_MIDLE:"Вигідна ціна",CLIENT_EDUC_SPEC:"Імідж виробника",CLIENT_EDUC_HIGH:"Бренд профілю або фурнітури",CLIENT_EDUC_4:"Рекомендації продавця",CLIENT_OCCUPATION:"Зайнятість",CLIENT_OCCUP_WORKER:"Службовець",CLIENT_OCCUP_HOUSE:"Домогосподарка",CLIENT_OCCUP_BOSS:"Підприэмиць",CLIENT_OCCUP_STUD:"Студент",CLIENT_OCCUP_PENSION:"Пенсіонер",CLIENT_INFO_SOURCE:"Джерело информаціі",CLIENT_INFO_PRESS:"Преса",CLIENT_INFO_FRIEND:"Від знайомих",CLIENT_INFO_ADV:"Візуальна реклама",SELECT_PLACEHOLD:"выберите свой вариант",NO_DISASSEMBL:"без демонтажа",STANDART_ASSEMBL:"стандартный",VIP_ASSEMBL:"VIP-монтаж",DISCOUNT:"Знижка",DISCOUNT_SELECT:"Вибір знижки",DISCOUNT_WITH:"Зі знижкою",DISCOUNT_WITHOUT:"Без знижки",DISCOUNT_WINDOW:"Знижка на виріб",DISCOUNT_ADDELEM:"Знижка на додаткові елементи",ORDER_COMMENT:"Заметка о заказе",UNKNOWN:"Не известно"},settings:{AUTHORIZATION:"Авторизація:",CHANGE_PASSWORD:"Змінити пароль",CHANGE_LANGUAGE:"Змінити мову",PRIVATE_INFO:"Особиста інформація:",USER_NAME:"Контактна особа",CITY:"Місто",ADD_PHONES:"Додаткові телефони:",INSERT_PHONE:"Додати телефон",CLIENT_SUPPORT:"Підтримка користувачів",LOGOUT:"Вийти з додатка",SAVE:"Зберегти",CURRENT_PASSWORD:"Поточний",NEW_PASSWORD:"Новий",CONFIRM_PASSWORD:"Підтвердити",NO_CONFIRM_PASS:"Невірний пароль"}})}();var speechKit=new NuanceSpeechKitPlugin;