
<div ng-controller="CartCtrl as cartPage" ng-if="mobilePage.isSet(4)" class="cart-mobile mobile-common-panel">
  <div class="box-rehau">
    <div class="top-container">
      <div ng-if="mobilePage.isSet(1)" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Выбор шаблона</div>
          <div ng-if="!mobilePage.G.global.SelectedTemplateName" data-output="Левое глухое, правое поворотно–откидное" typing="{{ lightPage.config.typing }}" typing-delay="{{ lightPage.config.DELAY_TYPE_ITEM_TITLE }}" class="top-container-subtitle"></div>
          <div ng-if="mobilePage.G.global.SelectedTemplateName" class="top-container-subtitle">{{ mobilePage.G.global.SelectedTemplateName }}</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile()" class="top-container-close"></button>
      </div>
      <div ng-if="mobilePage.G.global.activePanel === 2" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Профиль</div>
          <div class="top-container-subtitle">{{ mobilePage.P.product.profile.name  }}</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile(); mobilePage.setTab(5)" class="top-container-close"></button>
      </div>
      <div ng-if="mobilePage.G.global.activePanel === 3" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Стелопакет</div>
          <div class="top-container-subtitle">{{ mobilePage.P.product.glass[0].name }}</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile(); mobilePage.setTab(5)" class="top-container-close"></button>
      </div>
      <div ng-if="mobilePage.G.global.activePanel === 5" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Ламинация (в комнате | фасад)</div>
          <div class="top-container-subtitle">{{ mobilePage.P.product.lamination.laminat_in_name | translate}} | {{ mobilePage.P.product.lamination.laminat_out_name | translate}}</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile(); mobilePage.setTab(5)" class="top-container-close"></button>
      </div>
      <div ng-if="mobilePage.G.global.activePanel === 6" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Дополнительные элементы</div>
          <div class="top-container-subtitle">Общая цена доп. элементов ({{ mobilePage.P.product.addelemPriceDis.toFixed(0)}} руб)</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile(); mobilePage.setTab(5)" class="top-container-close"></button>
      </div>
      <div ng-if="mobilePage.isSet(4)" class="top-container-item">
        <div class="top-container-header">
          <div class="top-container-title">Корзина</div>
          <div class="top-container-subtitle">Расчёт стоимости и услуги</div>
        </div>
        <button ng-click="mobilePage.closePanelMobile(); mobilePage.setTab(5)" class="top-container-close"></button>
      </div>
    </div>
    <div class="product-container">
      <div ng-click="cartPage.showMoundDeliveryFunc()" class="mounting-rehau">
        <label>Монтаж / Доставка</label>
      </div>
      <div ng-repeat="product in cartPage.O.order.products track by $index" class="product-rehau">
        <div class="col">
          <div ng-click="cartPage.clickDeleteProduct($index)" class="order-delete-rehau"></div>
          <div class="prod-number">{{$index+1}}</div>
          <div class="prod-template">
            <svg-template template="product.templateIcon" template-width="cartPage.constants.svgTemplateIconWidthCart" template-height="cartPage.constants.svgTemplateIconHeightCart" type-construction="cartPage.constants.SVG_CLASS_ICON"></svg-template>
          </div>
          <div class="prod-heat-coef">
            <div ng-if="cartPage.U.userInfo.therm_coeff_id" class="order-u-coeff">
              <div class="coeff-mark">
                <div>Оценка </div>
                <div>энергоэфф</div><span>{{product.heat_coef_expert_mark}}</span>
              </div>
              <div class="price-info">
                <div>Стоимость</div>
                <div class="discount-price-rehau">
                  <div ng-if="cartPage.U.userInfo.discountConstr &gt; 0" class="price-discount-text"><span price-fixed="{{product.product_price.toFixed(0)}}" qty-element="{{product.product_qty}}" currency-element="{{cartPage.U.userInfo.currency}}" class="price-discount-span"></span><span class="price-discount-percentage">-{{cartPage.U.userInfo.discountConstr}}%  </span></div><span price-fixed="{{product.productPriceDis.toFixed(0)}}" qty-element="{{product.product_qty}}" currency-element="{{cartPage.U.userInfo.currency}}" class="price-discount-span-fixed"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="prod-count">
            <div ng-click="cartPage.decreaseProductQty($index)" class="count-button"><img src="./img/rehau-img/rehua_-.png" alt="Rehau - image"></div>
            <div class="count">{{ product.product_qty }}</div>
            <div ng-click="cartPage.increaseProductQty($index)" class="count-button"><img src="./img/rehau-img/+.png" alt="Rehau + image"></div>
          </div>
        </div>
        <div class="col">
          <div class="order-item">
            <div class="order-label">{{ ::cartPage.CONFIGMENU_SIZING }}</div>
            <div ng-if="cartPage.U.userInfo.factory_id!==1966" class="order-value">{{ product.template_width }} {{ ::cartPage.MM +"*"}} {{ product.template_height }} {{ ::cartPage.MM }}</div>
            <div ng-if="cartPage.U.userInfo.factory_id===1966" class="order-value splice">{{ product.template_width *0.0393701 | number : 0}} {{ ::cartPage.INCH +"\u00A0 *\u00A0"}} {{ product.template_height *0.0393701 | number : 0}} {{ ::cartPage.INCH }}</div>
          </div>
          <div class="order-item">
            <div class="order-label">{{ ::cartPage.CONFIGMENU_PROFILE }}</div>
            <div class="order-value">{{ product.profile.name }}</div>
          </div>
          <div ng-if="product.glass.length &gt; 1" class="order-item">
            <div class="order-label">{{ ::cartPage.CONFIGMENU_GLASS }}</div>
            <div class="order-value">{{ product.glass[0].name + ', ...' }}</div>
          </div>
          <div ng-if="product.glass.length &lt;= 1" class="order-item">
            <div class="order-label">{{ ::cartPage.CONFIGMENU_GLASS }}</div>
            <div class="order-value">{{ product.glass[0].name }}</div>
          </div>
          <div class="order-item">
            <div class="order-label">{{ ::cartPage.CONFIGMENU_LAMINATION }}</div>
            <div class="order-value"><span ng-if="product.lamination.lamination_in_id &gt; 1">{{ product.lamination.laminat_in_name }}</span><span ng-if="product.lamination.lamination_in_id === 1">{{ product.lamination.laminat_in_name |translate }}</span><span>| </span><span ng-if="product.lamination.lamination_out_id &gt; 1">{{ product.lamination.laminat_out_name }}</span><span ng-if="product.lamination.lamination_out_id === 1">{{ product.lamination.laminat_out_name |translate }}</span></div>
          </div>
          <div class="order-item">
            <div class="order-label">Доп. элементы</div>
            <div ng-repeat="addelement in cartPage.C.cart.allAddElements[$index] track by $index" ng-switch="addelement.element_type" class="order-value">{{ addelement.name }}</div>
          </div>
          <div ng-click="cartPage.mobileBox($index, 'product')" class="order-edit-rehau"><span>Изменить </span></div>
        </div>
      </div>
      <div ng-if="cartPage.O.order.products.length === 1" class="empty"></div>
    </div>
    <div class="cart-footer-container">
      <div class="cart-footer">
        <div ng-click="cartPage.swipeDiscountBlock()" class="price">
          <price price-value="cartPage.O.order.orderPricePrimaryDis" price-currency="cartPage.U.userInfo.currency"></price>
        </div>
        <div ng-click="cartPage.openOrderDialog()" class="spesification">
          <label>{{cartPage.ORDER_LV}}</label>
        </div>
      </div>
    </div>
    <div ng-show="cartPage.C.cart.showCurrentTemp" class="template-window">
      <div ng-click="cartPage.C.cart.showCurrentTemp=0" class="order-delete-rehau"></div>
      <div ng-click="cartPage.mobileBox(cartPage.C.cart.curProd, 'product')" class="order-edit alert-no"><span>{{::cartPage.BUTTON_E}}</span></div>
      <svg-template template="cartPage.O.order.products[cartPage.C.cart.curProd].template" template-width="mobilePage.mobWidthGlass" template-height="mobilePage.mobWidthGlass" type-construction="cartPage.constants.SVG_ID_GLASS"></svg-template>
    </div>
    <div ng-if="cartPage.config.isAddElementDetail" class="addelements-detail">
      <div class="addelements-detail-header">
        <div class="addelements-detail-tools">
          <button fs-click="cartPage.editProduct(cartPage.config.detailProductIndex, 'auxiliary')" class="addelements-detail-edit">{{ ::cartPage.ADDELEMENTS_EDIT_LIST }}</button>
          <div fs-click="cartPage.closeAddElementDetail()" class="order-delete-rehau"></div>
        </div>
        <div ng-hide="cartPage.O.order.products[cartPage.config.detailProductIndex].is_addelem_only" class="product-template">
          <div class="addelements-detail-row">
            <div class="product-value">
              <div class="product-icon-thumb">
                <svg-template template="cartPage.O.order.products[cartPage.config.detailProductIndex].templateIcon" template-width="cartPage.constants.svgTemplateIconWidth" template-height="cartPage.constants.svgTemplateIconHeight" type-construction="cartPage.constants.SVG_CLASS_ICON"></svg-template>
              </div><span class="product-template-qty">X {{ cartPage.O.order.products[cartPage.config.detailProductIndex].product_qty }}</span>
            </div>
            <div class="product-icon-label">{{ ::cartPage.PRODUCT_QTY }}</div>
          </div>
          <div class="addelements-detail-row">
            <div ng-if="cartPage.U.userInfo.factory_id!==1966" class="product-value">{{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_width }} {{ ::cartPage.MM }} *</div>
            <div ng-if="cartPage.U.userInfo.factory_id===1966" class="product-value">{{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_width*0.0393701 | number : 0 }} {{ ::cartPage.INCH }} *</div>
            <div class="product-label">{{ ::cartPage.WIDTH_LABEL }}</div>
          </div>
          <div class="addelements-detail-row">
            <div ng-if="cartPage.U.userInfo.factory_id!==1966" class="product-value">{{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_height }} {{ ::cartPage.MM }}</div>
            <div ng-if="cartPage.U.userInfo.factory_id===1966" class="product-value">{{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_height*0.0393701 | number : 0 }} {{ ::cartPage.INCH }}</div>
            <div class="product-label">{{ ::cartPage.HEIGHT_LABEL }}</div>
          </div>
        </div>
      </div>
      <!--.addelements-detail-content
      .addelements-detail-list
          .addelements-detail-item(ng-repeat="addelement in cartPage.C.cart.allAddElements[cartPage.config.detailProductIndex] track by $index", ng-switch="addelement.element_type")
              .product-value {{ addelement.name }}
              .product-value(ng-switch-when="0") {{ ::cartPage.GRID }}
              .product-value(ng-switch-when="1") {{ ::cartPage.VISOR }}
              .product-value(ng-switch-when="2") {{ ::cartPage.SPILLWAY }}
              .product-value(ng-switch-when="3") {{ ::cartPage.OUTSIDE }}
              .product-value(ng-switch-when="4") {{ ::cartPage.LOUVERS }}
              .product-value(ng-switch-when="5") {{ ::cartPage.INSIDE }}
              .product-value(ng-switch-when="6") {{ ::cartPage.CONNECTORS }}
              .product-value(ng-switch-when="7") {{ ::cartPage.FAN }}
              .product-value(ng-switch-when="8") {{ ::cartPage.WINDOWSILL }}
              .product-value(ng-switch-when="9") {{ ::cartPage.HANDLEL }}
              .product-value(ng-switch-when="10") {{ ::cartPage.OTHERS }}
              .addelement-parameters
                  .addelement-parameter(ng-show="addelement.element_width")
                      .addelement-value(ng-if='cartPage.U.userInfo.factory_id===1966') {{ addelement.element_width*0.0393701 | number : 0  }}
                      .addelement-value(ng-if='cartPage.U.userInfo.factory_id!==1966') {{ addelement.element_width }}
                      .addelement-label {{ ::cartPage.WIDTH_LABEL }}
                  .addelement-parameter(ng-show="addelement.element_height")
                      .addelement-value(ng-if='cartPage.U.userInfo.factory_id===1966') {{ addelement.element_height*0.0393701 | number : 0  }}
                      .addelement-value(ng-if='cartPage.U.userInfo.factory_id!==1966') {{ addelement.element_height }}
                      .addelement-label {{ ::cartPage.HEIGHT_LABEL }}
                  .addelement-parameter(ng-show="addelement.element_qty")
                      .addelement-value {{ addelement.element_qty }}
                      .addelement-label {{ ::cartPage.QTY_LABEL }}
              .addelement-parameters
                  .addelement-price-value + {{ addelement.element_qty * addelement.elementPriceDis }} {{ cartPage.U.userInfo.currency }}
                  .addelement-label ({{ addelement.element_qty }} x {{ addelement.elementPriceDis }}{{ cartPage.U.userInfo.currency }})
      .service-block
          .sb-1(ng-if="cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[0]")
              | {{cartPage.SERV1}} - {{cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[0]}} {{cartPage.U.userInfo.currency}}
          .sb-2(ng-if="cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[1]")
              | {{cartPage.SERV2}} - {{cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[1]}} {{cartPage.U.userInfo.currency}}
          .sb-3(ng-if="cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[2]")
              | {{cartPage.SERV3}} - {{cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[2]}} {{cartPage.U.userInfo.currency}}
          .sb-4(ng-if="cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[3]")
              | {{cartPage.SERV4}} - {{cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[3]}} {{cartPage.U.userInfo.currency}}
          .sb-5(ng-if="cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[4]")
              | {{cartPage.OTHER }}- {{cartPage.O.order.products[cartPage.config.detailProductIndex].services_price_arr[4]}} {{cartPage.U.userInfo.currency}}
      .addelements-detail-row.price-one-product
          .addelement-price-value(price-fixed="{{cartPage.O.order.products[cartPage.config.detailProductIndex].addelemPriceDis+ cartPage.O.order.products[cartPage.config.detailProductIndex].service_price_dis}}", qty-element="1", currency-element="{{cartPage.U.userInfo.currency}}")
          .product-label {{ ::cartPage.ADDELEMENTS_PRODUCT_COST }}
      -->
      <div class="addelements-detail-footer">
        <div price-fixed="{{cartPage.O.order.products[cartPage.config.detailProductIndex].addelemPriceDis + cartPage.O.order.products[cartPage.config.detailProductIndex].service_price_dis}}" qty-element="{{cartPage.O.order.products[cartPage.config.detailProductIndex].product_qty}}" currency-element="{{cartPage.U.userInfo.currency}}"></div>
        <div>&#8721;</div>
      </div>
    </div>
    <div ng-if="cartPage.G.global.showMountDelivery" class="mount-delivery">
      <div class="box">
        <div class="mount-delivery-header-rehau">
          <div ng-click="cartPage.cancelMoundDeliveryFunc()" class="header-title-rehau">
            <label>Монтаж / Доставка</label>
          </div>
          <div ng-click="cartPage.cancelMoundDeliveryFunc()" class="header-buttons-cancel-rehau"><img src="./img/rehau-img/close.png" alt=""></div>
        </div>
        <div ng-controller="CartMenuCtrl as cartMenu" class="mount-delivery-mountings-container-rehau">
          <div class="mobile-delivery-rehau">
            <div ng-click="cartMenu.selectMenuItem(1)" class="mobile-delivery-title-rehau">
              <label>{{::cartMenu.DELIVERY}}
                <div class="tooltip"><img ng-src="./img/rehau-img/tooltip-question.png"><span class="tooltiptext">Точная стоимость уточняется менеджером. В зависимости от расстояния объекта от Москвы замер может быть платным</span></div>
              </label>
              <div ng-class="{'active': cartMenu.config.activeMenuItem == 1}" class="arrow"><img ng-src="./img/calc/right-arrow-white.svg"></div>
            </div>
            <div ng-if="cartMenu.O.order.floor_id" ng-hide="cartMenu.config.activeMenuItem == 1" class="mobile-delivery-selected-rehau">
              <div class="mobile-delivery-value-rehau">
                <label>{{cartMenu.O.order.floorName}}</label>
              </div>
              <div class="mobile-delivery-price-rehau">
                <label>{{ cartMenu.O.order.floor_price }} {{ cartMenu.U.userInfo.currency }}</label>
              </div>
            </div>
            <div ng-if="cartMenu.O.order.delivery_add" ng-hide="cartMenu.config.activeMenuItem == 1" class="mobile-delivery-selected-rehau"> 
              <div class="mobile-delivery-value-rehau">
                <label>{{ ::cartMenu.DELIVERY}}</label>
              </div>
              <div class="mobile-delivery-price-rehau">
                <label>{{ cartMenu.O.order.delivery_add }} {{ cartMenu.U.userInfo.currency }}</label>
              </div>
            </div>
            <div ng-if="!cartMenu.O.order.floor_id" ng-hide="cartMenu.config.activeMenuItem == 1" class="mobile-delivery-selected-rehau">
              <div class="mobile-delivery-value-rehau">
                <label> {{ ::cartMenu.SELF_EXPORT }}</label>
              </div>
              <div class="mobile-delivery-price-rehau">
                <label>{{ 0 }} {{ cartMenu.U.userInfo.currency }}</label>
              </div>
            </div>
            <div ng-if="cartMenu.config.activeMenuItem == 1 &amp;&amp; cartMenu.G.global.supplyData.length" class="mobile-delivery-items-rehau">
              <div fs-click="cartMenu.selectFloorPrice(0)" ng-class="{'selected': !cartMenu.O.order.floor_id}" ng-click="cartMenu.config.activeMenuItem = 0" class="mobile-delivery-selected-rehau">
                <div class="mobile-delivery-value-rehau">
                  <label>{{ ::cartMenu.SELF_EXPORT }}</label>
                </div>
                <div class="mobile-delivery-price-rehau">
                  <label>{{ 0 }} {{ cartMenu.U.userInfo.currency }}</label>
                </div>
              </div>
              <div ng-repeat="supplyList in cartMenu.G.global.supplyData" ng-class="{'selected': supplyList.id == cartMenu.O.order.floor_id}" fs-click="cartMenu.selectFloorPrice(supplyList)" ng-click="cartMenu.config.activeMenuItem = 0" onClick="this.setSelectionRange(0, this.value.length)" class="mobile-delivery-selected-rehau">
                <div class="mobile-delivery-value-rehau">{{supplyList.name}} {{ ::cartMenu.FLOOR }}</div>
                <div class="name-rehau"> {{supplyList.priceReal}} {{ cartMenu.U.userInfo.currency }}</div>
              </div>
            </div>
          </div>
          <div ng-if="cartMenu.G.global.assemblingData.length" class="mobile-delivery-rehau">
            <div ng-click="cartMenu.selectMenuItem(2)" class="mobile-delivery-title-rehau">
              <label>{{::cartMenu.ASSEMBLING }}
                <div class="tooltip"><img ng-src="./img/rehau-img/tooltip-question.png"><span class="tooltiptext">Точная стоимость уточняется менеджером. В зависимости от расстояния объекта от Москвы замер может быть платным</span></div>
              </label>
              <div ng-class="{'active': cartMenu.config.activeMenuItem == 2}" class="arrow"><img ng-src="./img/calc/right-arrow-white.svg"></div>
            </div>
            <div ng-hide="cartMenu.config.activeMenuItem == 2" class="mobile-delivery-selected-rehau">
              <div class="mobile-delivery-value-rehau">
                <label ng-show="!cartMenu.O.order.mounting_id">{{ ::cartMenu.WITHOUT_ASSEMBLING }}</label>
                <label ng-show="cartMenu.O.order.mounting_id">{{ cartMenu.O.order.mountingName }}</label>
              </div>
              <div class="mobile-delivery-price-rehau">
                <label> {{ cartMenu.O.order.mounting_price }} {{ cartMenu.U.userInfo.currency }}</label>
              </div>
            </div>
            <div ng-if="cartMenu.config.activeMenuItem == 2 &amp;&amp; cartMenu.G.global.assemblingData.length" class="mobile-delivery-items-rehau">
              <div ng-class="{'selected': !cartMenu.O.order.mounting_id}" fs-click="cartMenu.selectAssembling(0)" ng-click="cartMenu.config.activeMenuItem = 0" class="mobile-delivery-selected-rehau">
                <div class="mobile-delivery-value-rehau drop-txt">{{ ::cartMenu.WITHOUT_ASSEMBLING }}</div>
                <div class="name-rehau">{{ ::cartMenu.FREE }}</div>
              </div>
              <div ng-repeat="assemb in cartMenu.G.global.assemblingData" ng-class="{'selected': assemb.id == cartMenu.O.order.mounting_id}" fs-click="cartMenu.selectAssembling(assemb)" ng-click="cartMenu.config.activeMenuItem = 0" class="mobile-delivery-selected-rehau">
                <div class="mobile-delivery-value-rehau drop-txt">{{ assemb.name }}</div>
                <div class="name-rehau"> {{ assemb.priceReal }} {{ cartMenu.U.userInfo.currency }}</div>
              </div>
            </div>
          </div>
          <div ng-click="cartPage.showMoundDeliveryFunc()" class="buttons-apply-rehau">
            <label>{{mobilePage.APPLY}}</label>
          </div>
        </div>
      </div>
    </div>
    <div ng-if="cartPage.C.cart.isShowDiscount" class="mobile-discount fullScreen">
      <div class="mobile-discount-row">
        <label>{{ ::cartPage.PRICE}}</label>
      </div>
      <div class="mobile-discount-row">
        <div class="discount-price-box">
          <div class="discount-price-label">{{ ::cartPage.DISCOUNT_WITHOUT }}</div>
          <div class="discount-price">{{ cartPage.O.order.order_price }} {{cartPage.U.userInfo.currency}}</div>
        </div>
        <div class="discount-price-box">
          <div class="discount-price-label">{{ ::cartPage.DISCOUNT_WITH }}</div>
          <div class="discount-price">{{ cartPage.O.order.productsPriceDis }} {{cartPage.U.userInfo.currency}}</div>
        </div>
      </div>
      <div class="mobile-discount-row">
        <label>{{ ::cartPage.DISCOUNT}}</label>
      </div>
      <div class="mobile-discount-col">
        <div ng-click="cartPage.toggleDiscount()" class="discount-box selected">
          <div class="discount-data">
            <label id="disc-input-main" class="disc-input noPreventDefault">{{cartPage.C.cart.averageDisc | number : 1}}</label>
            <label>%</label>
          </div>
          <div class="discount-txt-arrow">
            <div class="discounts-label">{{ cartPage.C.cart.discountPriceDiff }} {{cartPage.U.userInfo.currency}}</div>
            <div ng-if="!cartPage.G.global.toggleDiscount" class="discounts-icon-down"></div>
            <div ng-if="cartPage.G.global.toggleDiscount" class="discounts-icon-up"></div>
          </div>
        </div>
        <div ng-if="cartPage.G.global.toggleDiscount" class="disc">
          <div class="discount-box selected">
            <div ng-keyup="cartPage.enterKeyPrice($event)" class="discount-data red">
              <div ng-show="cartPage.C.cart.tempConstructDisc &gt; cartPage.U.userInfo.discountConstrMax" class="disc-max">{{ ::cartPage.MAX }} {{cartPage.U.userInfo.discountConstrMax}}%</div>
              <input id="disc-input" data-ng-keydown="cartPage.keyUp($event)" onClick="this.setSelectionRange(0, this.value.length)" ng-model="cartPage.C.cart.tempConstructDisc" ng-change="cartPage.approveNewDisc(0)" class="disc-input noPreventDefault">%
            </div>
            <div ng-click="cartPage.approveNewDisc(0)" class="discount-txt">
              <div class="discounts-label">{{ ::cartPage.DISCOUNT_WINDOW }}</div>
            </div>
          </div>
          <div class="discount-box selected">
            <div ng-keyup="cartPage.enterKeyDop(event)" class="discount-data red">
              <div ng-show="cartPage.C.cart.tempAddelemDisc &gt; cartPage.U.userInfo.discountAddElemMax" class="disc-max">{{ ::cartPage.MAX }} {{cartPage.U.userInfo.discountAddElemMax}}%</div>
              <input id="disc-input-add" data-ng-keydown="cartPage.keyUp($event)" onClick="this.setSelectionRange(0, this.value.length)" ng-model="cartPage.C.cart.tempAddelemDisc" ng-change="cartPage.approveNewDisc(1)" class="disc-input noPreventDefault">%
            </div>
            <div ng-click="cartPage.approveNewDisc(1)" class="discount-txt">
              <div class="discounts-label">{{ cartPage.DISCOUNT_ADDELEM }}</div>
            </div>
          </div>
          <div class="discount-box selected">
            <div ng-keyup="cartPage.enterKeyDopService(event)" class="discount-data red">
              <div ng-show="cartPage.U.userInfo.discount_service &gt; 100" class="disc-max">{{ ::cartPage.MAX }} {{'100'}}%</div>
              <input id="disc-input-service" data-ng-keydown="cartPage.keyUp($event)" onClick="this.setSelectionRange(0, this.value.length)" ng-model="cartPage.C.cart.discount_service" ng-change="cartPage.approveNewDisc(2)" class="disc-input noPreventDefault">%
            </div>
            <div ng-click="cartPage.approveNewDisc(2)" class="discount-txt">
              <div class="discounts-label">{{cartPage.DISCOUNT_SERVICE}}</div>
            </div>
          </div>
        </div>
      </div>
      <div ng-click="cartPage.swipeDiscountBlock()" class="mobile-discount-row delete">
        <label>{{mobilePage.APPLY}}</label>
      </div>
    </div>
    <div ng-controller="AddElemCartCtrl as elemCartPanel" ng-class="{'active': cartPage.C.cart.isAllAddElems}" class="alladdelements-view-mobiile">
      <div class="add-elem-header-mobile cart-header">
        <div ng-click="cartPage.C.cart.isAllAddElems = 0" class="back-button"></div>
        <div class="add-elem-price">
          <label>{{cartPage.TOTAL_PRICE_SHORT}}&nbsp;{{ cartPage.C.cart.addElemsOrderPriceTOTAL }} {{ cartPage.U.userInfo.currency }}</label>
        </div>
      </div>
      <div class="add-elems-scroll">
        <div ng-repeat="elemType in elemCartPanel.config.addElementDATA track by $index" class="add-elem-item">
          <div ng-if="(cartPage.C.cart.allAddElemsOrder | filter: {list_group_id: elemType.id}).length &amp;&amp; elemType.mainTypeMenu" class="add-elem-current">
            <div class="add-elem-current-title dynamic-gray">
              <label>{{ elemCartPanel.config.addElementDATA[$index].name | translate }}</label>
            </div>
            <div ng-repeat="addElem in cartPage.C.cart.allAddElemsOrder | filter: {list_group_id: elemType.id} track by $index" ng-if="addElem.list_group_id === elemType.id" class="add-elem-current-row">
              <div class="add-elem-row-title dynamic-gray">
                <label class="splice">{{ addElem.name }}</label>
                <div fs-click="elemCartPanel.deleteAddElemsItem(addElem,cartPage.C.cart.selectedProduct)" class="order-delete"></div>
              </div>
              <div class="add-elem-row-info dynamic-gray">
                <div class="add-elem-row">
                  <label ng-show="addElem.element_qty">{{ addElem.element_qty }}</label><span ng-show="addElem.element_qty">{{ ::cartPage.QTY_LABEL }}</span>
                </div>
                <div class="add-elem-row">
                  <label ng-if="cartPage.U.userInfo.factory_id===1966" ng-show="addElem.element_width">{{ addElem.element_width*0.0393701 | number : 0  }}</label>
                  <label ng-if="cartPage.U.userInfo.factory_id!==1966" ng-show="addElem.element_width">{{ addElem.element_width }}</label><span ng-show="addElem.element_width">{{ ::cartPage.MM }}</span>
                </div>
                <div class="add-elem-row">
                  <label ng-if="cartPage.U.userInfo.factory_id===1966" ng-show="addElem.element_height">{{ addElem.element_height*0.0393701 | number : 0  }}</label>
                  <label ng-if="cartPage.U.userInfo.factory_id!==1966" ng-show="addElem.element_height">{{ addElem.element_height }}</label><span ng-show="addElem.element_height">{{ ::cartPage.MM }}</span>
                </div>
                <div class="add-elem-row red-color">
                  <label>{{ addElem.element_qty * addElem.elementPriceDis }} {{ cartPage.U.userInfo.currency }}</label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div ng-show="cartPage.C.cart.showCurrentTemp || cartPage.config.isAddElementDetail" class="backDarkView"></div>
  </div>
  <div class="bottom-block">
    <div ng-if="!mobilePage.isSet(4) &amp;&amp; !mobilePage.isSet(1) &amp;&amp; !mobilePage.isSet(2) &amp;&amp; !mobilePage.isSet(3) &amp;&amp; !mobilePage.isSet(4) &amp;&amp; !mobilePage.isSet(5)" ng-click="mobilePage.checkForAddElem();" class="to-basket-button">
      <button class="add-to-basket">Добавить в корзину</button>
      <div class="add-to-basket-img"><img src="./img/rehau-img/add-to-cart-2.svg" alt="" class="go-to-basket-img"></div>
    </div>
    <div ng-if="!mobilePage.isSet(4) &amp;&amp; !mobilePage.isSet(1) &amp;&amp; !mobilePage.isSet(2) &amp;&amp; !mobilePage.isSet(3) &amp;&amp; !mobilePage.isSet(5)" class="to-basket-button-for-landing disabled">
      <button class="add-to-basket">Добавить в корзину</button>
      <div class="add-to-basket-img"><img src="./img/rehau-img/add-to-cart-2.svg" alt="" class="go-to-basket-img"></div>
    </div>
    <div class="price-and-coeff-block">
      <div ng-if="!mobilePage.isSet(4) &amp;&amp; !mobilePage.isSet(1) &amp;&amp; !mobilePage.isSet(2) &amp;&amp; !mobilePage.isSet(3) &amp;&amp; !mobilePage.isSet(4)" class="heat-coeff-txt"><span class="heat-coeff-span">Оценка энергоэффективности</span>
        <div ng-if="mobilePage.U.userInfo.discountConstr &gt; 0" class="price-discount-text"><span class="price-discount-span">{{mobilePage.P.product.product_price.toFixed(0)}}</span><span class="price-discount-percentage">-{{mobilePage.U.userInfo.discountConstr}}%</span></div>
      </div>
      <div ng-if="!mobilePage.isSet(4) &amp;&amp; !mobilePage.isSet(1) &amp;&amp; !mobilePage.isSet(2) &amp;&amp; !mobilePage.isSet(3) &amp;&amp; !mobilePage.isSet(4)" class="price-and-heat-coeff">
        <div class="expert-mark-row">
          <div class="expert-mark">{{mobilePage.P.product.heat_coef_expert_mark}} -</div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &lt; 6.1" class="title-rehau"><span> Для балконов</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark&gt; 6.1 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 6.5" class="title-rehau"><span> Нормально</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 6.5 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 7" class="title-rehau"><span> Достаточно хорошо!</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 7 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 7.5" class="title-rehau"><span> Хорошо!</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 7.5 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 8.2" class="title-rehau"><span> Очень хорошо!</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 8.2 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 9" class="title-rehau"><span> Отлично!</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 9 &amp;&amp; mobilePage.P.product.heat_coef_expert_mark &lt;= 9.4" class="title-rehau"><span> Превосходно!</span></div>
          <div ng-if="mobilePage.P.product.heat_coef_expert_mark &gt; 9.4" class="title-rehau"><span> Лучший выбор!</span></div>
        </div>
        <div class="price-block">
          <price price-value="mobilePage.G.global.tempPrice" price-currency="mobilePage.U.userInfo.currency" ng-click="mobilePage.checkForAddElem()"></price>
        </div>
      </div>
    </div>
    <div ng-if="mobilePage.isSet(4)" class="price-total">
      <div class="total-txt"><span>Итого:</span></div>
      <div class="price-total-price">  
        <div ng-if="mobilePage.U.userInfo.discountConstr &gt; 0" class="price-discount-text"><span class="price-discount-span">{{cartPage.O.order.order_price.toFixed(0)}}</span><span class="price-discount-percentage">-{{mobilePage.U.userInfo.discountConstr}}%</span></div>
        <price price-value="cartPage.O.order.orderPricePrimaryDis" price-currency="cartPage.U.userInfo.currency"></price>
      </div>
    </div>
    <!--main screen-->
    <div ng-if="!mobilePage.isSet(4)" class="control-buttons-container-rehau">
      <div class="mobile-price-block-rehau">
        <div fs-click="mobilePage.closePanelMobile()" ng-class="{'active': mobilePage.isSet(0)}" class="menu-block">
          <div class="menu-icon"> <img src="./img/rehau-img/razmeri.svg" alt="rectangle" class="active-img"></div>
          <div class="menu-text">Размеры</div>
        </div>
        <div fs-click="mobilePage.setTab(1)" ng-class="{'active': mobilePage.isSet(1)}" class="menu-block">
          <div class="menu-icon"> <img src="./img/rehau-img/shabloni.svg" alt="template" class="active-img"></div>
          <div class="menu-text">Конструкции</div>
        </div>
        <div fs-click="mobilePage.setTab(5)" ng-class="{'active': mobilePage.isSet(5)}" class="menu-block">
          <div class="menu-icon"> <img src="./img/rehau-img/settings.svg" alt="settings" class="active-img"></div>
          <div class="menu-text">Параметры</div>
        </div>
        <div fs-click="mobilePage.checkSavingProductMobile()" ng-class="{'active': mobilePage.isSet(4)}" class="menu-block basket-mobile">
          <div class="menu-icon-basket"><img src="./img/rehau-img/korzina.svg" alt="basket-icon" class="active-img">
            <input readonly="readonly" ng-model="mobilePage.G.global.construction_count" class="construction-count-mobile">
          </div>
          <div class="menu-text">Корзина</div>
        </div>
        <div class="menu-block for-landing-mobile disabled">
          <div class="menu-icon-basket"><img src="./img/rehau-img/korzina.svg" alt="basket-icon" class="active-img">
            <input readonly="readonly" ng-model="mobilePage.G.global.construction_count" class="construction-count-mobile">
          </div>
          <div class="menu-text">Корзина</div>
        </div>
      </div>
    </div>
    <!--basket-->
    <div ng-if="mobilePage.isSet(4)" class="go-to-spec">
      <button ng-click="mobilePage.openOrderDialog()" class="spec">Оставить заявку</button>
      <button ng-click="cartPage.addNewProductInOrder()" class="add-product-rehau">Добавить окно</button>
    </div>
  </div>
</div>