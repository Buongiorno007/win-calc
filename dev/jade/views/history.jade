section.page-container(ng-class="{ 'swiped': !historyPage.G.global.isNavMenu }")
  section.left-side
    include menus/_navigation-menu
  section.right-side
    section.main-history

      section.history-page

        section.accounts-container.history-view(ng-class="{'dark-fon': historyPage.H.history.isOrderDate || historyPage.H.history.isOrderSort }")
          .history-header
            button.history-back(ng-click="historyPage.toCurrentCalculation()" )
            .history-user-info(ng-hide="historyPage.H.history.isOrderSearch")
              include parts/_user-info
            .history-search(ng-show="historyPage.H.history.isOrderSearch")
              include parts/_search-block

            .history-tools-panel
              .tools-block.search-tool(ng-class="{ 'active': historyPage.H.history.isOrderSearch }")
                button.tool.search-btn(ng-click="historyPage.orderSearching()")

              .tools-block.tool-drop(ng-class="{ 'active': historyPage.H.history.isOrderDate }")
                button.tool.calendar-btn(ng-click="historyPage.orderDateSelecting()")
                .time-interval(ng-class="{ 'empty': historyPage.H.history.startDate === '' &&  historyPage.H.history.finishDate === ''}")
                  span(ng-if="historyPage.H.history.startDate !== ''") {{ 'history.FROM' | translate }} {{historyPage.H.history.startDate | date:"dd.MM.yyyy"}}
                  span(ng-hide="historyPage.H.history.startDate == '' || historyPage.H.history.finishDate == ''") &nbsp; - &nbsp;
                  span(ng-if="historyPage.H.history.finishDate !== ''") {{ 'history.UNTIL' | translate }} {{historyPage.H.history.finishDate | date:"dd.MM.yyyy"}}

                .dropdown-tool-dialog.date-filter(ng-if="!historyPage.H.history.isDraftView")
                  .filter-title {{ 'history.DATE_RANGE' | translate }}
                  .period.start-date(ng-class="{ 'selected': historyPage.H.history.isStartDate }", ng-click="historyPage.openCalendarScroll('start-date')") {{ 'history.FROM' | translate }} {{historyPage.H.history.startDate | date:"dd.MM.yyyy"}}
                  .dropdown-calendar-scroll(ng-class="{ 'active': historyPage.H.history.isStartDate }")
                    calendar-scroll(order-type="1", calendar-type="1")

                  .period.finish-date(ng-class="{ 'selected': historyPage.H.history.isFinishDate }", ng-click="historyPage.openCalendarScroll('finish-date')") {{ 'history.UNTIL' | translate }} {{historyPage.H.history.finishDate | date:"dd.MM.yyyy"}}
                  .dropdown-calendar-scroll(ng-class="{ 'active': historyPage.H.history.isFinishDate }")
                    calendar-scroll(order-type="1", calendar-type="0")

                  .period.total-date(ng-class="{ 'selected': historyPage.H.history.isAllPeriod }", ng-click="historyPage.openCalendarScroll('full-date')") {{ 'history.ALL_TIME' | translate }}

              .tools-block.tool-drop(ng-class="{ 'active': historyPage.H.history.isOrderSort }")
                button.tool.settings-btn(ng-click="historyPage.orderSorting()")
                .dropdown-tool-dialog.sort-filter
                  .filter-divider {{ 'history.SORTING' | translate }}
                  ul.filter-list
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isSortType == 'first' }", ng-click="historyPage.sortingInit(0, 'first')")
                      .filter-label {{ 'history.NEWEST_FIRST' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isSortType == 'last' }", ng-click="historyPage.sortingInit(0, 'last')")
                      .filter-label {{ 'history.NEWEST_LAST' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isSortType == 'type' }", ng-click="historyPage.sortingInit(0, 'type')")
                      .filter-label {{ 'history.SORT_BY_TYPE' | translate }}
                      .filter-select-icon
                  .filter-divider {{ 'history.SORT_SHOW' | translate }}
                  ul.filter-list
                    li.filter-item(ng-class="{ 'selected': !historyPage.H.history.isFilterType }", ng-click="historyPage.sortingInit(1, undefined)")
                      .filter-label {{ 'common_words.ALL' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isFilterType == 'order' }", ng-click="historyPage.sortingInit(1, 'order')")
                      .filter-label {{ 'history.SORT_SHOW_ACTIVE' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isFilterType == 'master' }", ng-click="historyPage.sortingInit(1, 'master')")
                      .filter-label {{ 'history.SORT_SHOW_WAIT' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isFilterType == 'done' }", ng-click="historyPage.sortingInit(1, 'done')")
                      .filter-label {{ 'history.SORT_SHOW_DONE' | translate }}
                      .filter-select-icon


          .scroll-vert-container
            .account-block(ng-repeat="order in historyPage.H.history.orders | orderSorting:historyPage.H.history.isSortType | filter: {order_style: historyPage.H.history.isFilterType} | filter:historyPage.H.history.searchingWord track by $index")
              .account(ng-class="{'current': order.order_style == 'order', 'wait': order.order_style == 'master', 'done': order.order_style == 'done' }")
                .account-row.header
                  .account-data.title
                    .complete-icon(ng-show="order.order_style == 'done'")
                    .account-id(ng-if="order.order_number") id {{ order.order_number }}
                      span(ng-if="order.order_hz && order.order_hz !== '---'") {{ order.order_hz }}
                    .account-addinfo
                      span(ng-hide="!order.floor_id && !order.mounting_id") - {{ 'history.INCLUDED' | translate }}:
                      span(ng-hide="!order.floor_id") &nbsp; {{ 'cart.DELIVERY' | translate }}
                      span(ng-hide="!order.floor_id || !order.mounting_id") &nbsp; {{ 'common_words.AND' | translate }}
                      span(ng-hide="!order.mounting_id") &nbsp; {{ 'cart.ASSEMBLING' | translate }}
                  .account-data
                    .account-label.account-date-filter {{ 'history.FROM' | translate }} {{order.order_date | date:"dd MMMM, yyyy"}}
                .account-row
                  .account-data
                    .user-data.account-user {{ order.customer_name }}
                    .account-label {{ 'history.CLIENT' | translate }}
                .account-row
                  .account-data.phone
                    .user-data.account-user-phone {{ order.customer_phone }}
                    .account-label {{ 'history.PHONE' | translate }}
                  .account-data
                    .user-data.account-user-adress {{ order.customer_location }}, {{ order.customer_address }}
                    .account-label {{ 'history.ADDRESS' | translate }}
                .account-row.footer
                  .account-value {{ order.order_price_dis }} {{ historyPage.U.userInfo.currency }}
                    span(ng-show="order.is_instalment") , {{ order.selectedInstalmentPeriod }} {{ 'history.PAYMENTS' | translate }} {{order.payment_monthly}} {{ historyPage.U.userInfo.currency }}
                  .account-value(ng-show="order.order_style == 'master'") {{ 'history.WAIT_MASTER' | translate }}
                  .account-date {{ order.products_qty }} {{ 'history.ALLPRODUCTS' | translate }} {{ 'history.ON' | translate }} {{order.new_delivery_date | date:"dd.MM.yyyy"}}

              button.account-tool.account-select-btn(ng-hide="order.order_style == 'done'", ng-click="historyPage.sendOrderToFactory(order.order_style, order.id)")
              button.account-tool.account-copy-btn(ng-hide="order.order_style == 'done'", ng-click="historyPage.makeOrderCopy(order.order_style, order.id)")
              button.account-tool.account-print-btn(ng-click="")
              button.account-delete-btn(ng-hide="order.order_style == 'done'", ng-click="historyPage.clickDeleteOrder(order.order_type, order.id, $event)")
              button.account-change-btn(ng-hide="order.order_style == 'done'", ng-click="historyPage.editOrder(1, order.id)") {{ 'common_words.CHANGE' | translate }}

            .empty-search-result(ng-show="historyPage.H.history.searchingWord.length && (historyPage.H.history.orders | filter:historyPage.H.history.searchingWord).length == 0")
              .result-icon
              .result-text {{ 'history.BY_YOUR_REQUEST' | translate }} "<span class="searchin-text"> {{ historyPage.H.history.searchingWord }} </span>" {{ 'history.NOT_FIND' | translate }}.

            .empty-search-result(ng-show="!historyPage.H.history.searchingWord.length && ((historyPage.H.history.orders | filter:{order_style: historyPage.H.history.isFilterType}).length == 0 || historyPage.H.history.isEmptyResult)")
              .result-icon
              .result-text {{ 'history.BY_YOUR_REQUEST' | translate }} {{ 'history.NOT_FIND' | translate }}.

          button.view-switch-tab(ng-click="historyPage.viewSwitching()") {{ 'history.DRAFT_VIEW' | translate }}








        section.accounts-container.draft-view(ng-class="{'active': historyPage.H.history.isDraftView, 'dark-fon': historyPage.H.history.isOrderDateDraft || historyPage.H.history.isOrderSortDraft }")
          .history-header
            include parts/_user-info
            .history-tools-panel
              .tools-block.tool-drop(ng-class="{ 'active': historyPage.H.history.isOrderDateDraft }")
                button.tool.calendar-btn(ng-click="historyPage.orderDateSelecting()")
                .time-interval(ng-class="{ 'empty': historyPage.H.history.startDateDraft === '' && historyPage.H.history.finishDateDraft === ''}")
                  span(ng-if="historyPage.H.history.startDateDraft !== ''") {{ 'history.FROM' | translate }} {{historyPage.H.history.startDateDraft | date:"dd.MM.yyyy"}}
                  span(ng-show="historyPage.H.history.startDateDraft !== ''") &nbsp; - &nbsp;
                  span(ng-if="historyPage.H.history.finishDateDraft !== ''") {{ 'history.UNTIL' | translate }} {{historyPage.H.history.finishDateDraft | date:"dd.MM.yyyy"}}

                .dropdown-tool-dialog.date-filter(ng-if="historyPage.H.history.isDraftView")
                  .filter-title {{ 'history.DATE_RANGE' | translate }}
                  .period.start-date(ng-class="{ 'selected': historyPage.H.history.isStartDateDraft }", ng-click="historyPage.openCalendarScroll('start-date')") {{ 'history.FROM' | translate }} {{historyPage.H.history.startDateDraft | date:"dd.MM.yyyy"}}
                  .dropdown-calendar-scroll(ng-class="{ 'active': historyPage.H.history.isStartDateDraft }")
                    calendar-scroll(order-type="0", calendar-type="1")

                  .period.finish-date(ng-class="{ 'selected': historyPage.H.history.isFinishDateDraft }", ng-click="historyPage.openCalendarScroll('finish-date')") {{ 'history.UNTIL' | translate }} {{historyPage.H.history.finishDateDraft | date:"dd.MM.yyyy"}}
                  .dropdown-calendar-scroll(ng-class="{ 'active': historyPage.H.history.isFinishDateDraft }")
                    calendar-scroll(order-type="0", calendar-type="0")

                  .period.total-date(ng-class="{ 'selected': historyPage.H.history.isAllPeriodDraft }", ng-click="historyPage.openCalendarScroll('full-date')") {{ 'history.ALL_TIME' | translate }}

              .tools-block.tool-drop(ng-class="{ 'active': historyPage.H.history.isOrderSortDraft }")
                button.tool.settings-btn(ng-click="historyPage.orderSorting()")
                .dropdown-tool-dialog.sort-filter
                  .filter-divider {{ 'history.SORTING' | translate }}
                  ul.filter-list
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isSortTypeDraft == 'first' }", ng-click="historyPage.sortingInit('first')")
                      .filter-label {{ 'history.NEWEST_FIRST' | translate }}
                      .filter-select-icon
                    li.filter-item(ng-class="{ 'selected': historyPage.H.history.isSortTypeDraft == 'last' }", ng-click="historyPage.sortingInit('last')")
                      .filter-label {{ 'history.NEWEST_LAST' | translate }}
                      .filter-select-icon

          .scroll-vert-container
            .scrolling-container
              .account-block(ng-repeat="draft in historyPage.H.history.drafts | orderBy:historyPage.createdDate:historyPage.H.history.reverseDraft")
                .account(ng-click="historyPage.editOrder(0, draft.id)")
                  .account-row.header
                    .account-id {{ 'history.DRAFT' | translate }}
                    .account-label.account-date-filter {{ 'history.FROM' | translate }} {{draft.order_date | date:"dd MMMM, yyyy"}}
                  .account-row.footer
                    .account-value {{ draft.order_price_dis }} {{ historyPage.U.userInfo.currency }}
                      span(ng-show="draft.is_instalment") , {{ draft.selectedInstalmentPeriod }} {{ 'history.PAYMENTS' | translate }} {{draft.payment_monthly}} {{ historyPage.U.userInfo.currency }}
                    .account-qty {{ draft.products_qty }} {{ 'history.ALLPRODUCTS' | translate }} {{ 'history.ON' | translate }} {{draft.new_delivery_date | date:"dd.MM.yyyy"}}
                button.account-tool.account-print-btn(ng-click="")
                button.account-delete-btn(ng-click="historyPage.clickDeleteOrder(draft.order_type, draft.id, $event)")


            .empty-search-result(ng-show="historyPage.H.history.isEmptyResultDraft")
              .result-icon
              .result-text {{ 'history.BY_YOUR_REQUEST' | translate }} {{ 'history.NOT_FIND' | translate }}.

          button.view-switch-tab(ng-click="historyPage.viewSwitching()") {{ 'history.HISTORY_VIEW' | translate }}
include parts/_loader
include parts/_alert