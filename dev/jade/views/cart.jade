section.page-container(ng-class="{ 'swiped': !cartPage.G.global.isNavMenu }")
  section.left-side
    include menus/_navigation-menu
  section.right-side
    section.main-content

      section.cart-page

        section.cart-container.full-view(ng-class="{'discount': cartPage.C.cart.isShowDiscount}" hm-swipedown="cartPage.swipeDiscountBlock()")
          .cart-header
            include parts/_user-info
            button.cart-tool.additional-elements(ng-show="cartPage.C.cart.isExistAddElems", hm-tap="cartPage.showAllAddElements()") {{ 'cart.ALL_ADD_ELEMENTS' | translate }}
            button.cart-tool.new-order(hm-tap="cartPage.addNewProductInOrder()") {{ 'cart.ADD_ORDER' | translate }}

          .scroll-hor-container
            .order-block
              .order(ng-repeat="product in cartPage.O.order.products track by $index")
                button.order-delete(hm-tap="cartPage.clickDeleteProduct($index)")
                .order-header(hm-tap="cartPage.editProduct($index, 'product')")
                  img.order-header-fon(ng-src="{{cartPage.G.global.rooms[product.room_id].img}}")
                  .order-template
                    svg-template(template="product.templateIcon", template-width="cartPage.constants.svgTemplateIconWidth", template-height="cartPage.constants.svgTemplateIconHeight", type-construction="icon")
                  .order-u-coeff(ng-if="cartPage.U.userInfo.therm_coeff_id", ng-class="{'coeff-low': product.heat_coef_total < cartPage.O.order.heat_coef_min}")
                    div R = {{ product.heat_coef_total }}
                    div {{'common_words.LETTER_M'| translate}} &sup2;&middot;&deg;C/{{'mainpage.HEATCOEF_VAL' | translate}}
                  .order-u-coeff(ng-if="!cartPage.U.userInfo.therm_coeff_id", ng-class="{'coeff-low': product.heat_coef_total > cartPage.O.order.heat_coef_min}")
                    div U = {{ product.heat_coef_total }}
                    div {{'mainpage.HEATCOEF_VAL' | translate}}/{{'common_words.LETTER_M'| translate}} &sup2;&middot;&deg;C
                .order-content
                  ul.order-list
                    li.order-item
                      .order-value {{ product.template_width }} {{ 'mainpage.MM' | translate }}
                      .order-value {{ product.template_height }} {{ 'mainpage.MM' | translate }}
                      .order-label {{ 'mainpage.CONFIGMENU_SIZING' | translate }}
                    li.order-item
                      .order-value {{ product.profile.name }}
                      .order-label {{ 'mainpage.CONFIGMENU_PROFILE' | translate }}
                    li.order-item
                      .order-value {{ product.glass[0].sku }}
                      .order-label {{ 'mainpage.CONFIGMENU_GLASS' | translate }}
                    li.order-item
                      .order-value {{ product.hardware.name }}
                      .order-label {{ 'mainpage.CONFIGMENU_HARDWARE' | translate }}
                    li.order-item
                      .order-label {{ 'mainpage.CONFIGMENU_LAMINATION_TYPE' | translate }}
                      .order-value {{ product.laminationOutName }} / {{ product.laminationInName }}
                      .order-label {{ 'mainpage.CONFIGMENU_LAMINATION' | translate }}
                    li.order-item.addelements-btn(hm-tap="cartPage.showAddElementDetail($index)")
                      .order-value {{cartPage.C.cart.allAddElements[$index].length}}
                        ng-pluralize(count="cartPage.C.cart.allAddElements[$index].length",
                        when="{'0': '{{ cartPage.config.elements }}', '1': '{{ cartPage.config.element }}', '2': '{{ cartPage.config.elementa }}', '3': '{{ cartPage.config.elementa }}', '4': '{{ cartPage.config.elementa }}', 'other': '{{ cartPage.config.elements }}'}")
                      .order-label {{ 'mainpage.CONFIGMENU_ADDITIONAL' | translate }}
                  .order-qty
                    button.order-tool(hm-tap="cartPage.decreaseProductQty($index)") -
                    .order-value {{ product.product_qty }}
                    button.order-tool(hm-tap="cartPage.increaseProductQty($index)") +
                    .order-label.qty-label {{ 'cart.PRODUCT_QTY' | translate }}
                .order-footer
                  .order-price(price-fixed="{{product.productPriceDis}}", qty-element="{{product.product_qty}}", currency-element="{{cartPage.U.userInfo.currency}}")
                  .order-comment-btn(ng-show="product.comment.length", ng-class="{'active': cartPage.config.isProductComment === $index+1}", hm-tap="cartPage.switchProductComment($index)")
                .order-comment(ng-class="{'active': cartPage.config.isProductComment === $index+1}")
                  .order-comment-box
                    .order-comment-title {{ 'cart.ORDER_COMMENT' | translate }}
                    .order-comment-content {{ product.comment }}

            .discount-swipe-up(hm-swipeup="cartPage.swipeDiscountBlock()")
            button.view-switch-tab(hm-tap="cartPage.viewSwitching()") {{ 'cart.LIGHT_VIEW' | translate }}


          .discount-container
            .discount-title {{ 'cart.DISCOUNT_SELECT' | translate }}

            .discount-box(ng-class="{'selected': cartPage.O.order.discount_construct }")
              .discount-data(hm-tap="cartPage.openDiscInput(0)")
                .disc-curr-data(ng-hide="cartPage.config.isShowDiscInput") {{cartPage.C.cart.tempConstructDisc}}%
                .disc-input-box(ng-show="cartPage.config.isShowDiscInput")
                  .disc-max(ng-show="cartPage.C.cart.tempConstructDisc > cartPage.U.userInfo.discountConstrMax") {{ 'common_words.MAX' | translate }} {{cartPage.U.userInfo.discountConstrMax}}%
                  input.disc-input(type="number", ng-model="cartPage.C.cart.tempConstructDisc")
              .discount-txt(hm-tap="cartPage.approveNewDisc(0)")
                .discounts-label {{ 'cart.DISCOUNT_WINDOW' | translate }}

            .discount-box(ng-class="{'selected': cartPage.O.order.discount_addelem }")
              .discount-data(hm-tap="cartPage.openDiscInput(1)")
                .disc-curr-data(ng-hide="cartPage.config.isShowDiscInputAdd") {{cartPage.C.cart.tempAddelemDisc}}%
                .disc-input-box(ng-show="cartPage.config.isShowDiscInputAdd")
                  .disc-max(ng-show="cartPage.C.cart.tempAddelemDisc > cartPage.U.userInfo.discountAddElemMax") {{ 'common_words.MAX' | translate }} {{cartPage.U.userInfo.discountAddElemMax}}%
                  input.disc-input(type="number", ng-model="cartPage.C.cart.tempAddelemDisc")
              .discount-txt(hm-tap="cartPage.approveNewDisc(1)")
                .discounts-label {{ 'cart.DISCOUNT_ADDELEM' | translate }}


          .discount-container
            .discount-title {{ 'cart.DISCOUNT' | translate }}
            .discount-price-container
              .discount-price-box
                .discount-price-label {{ 'cart.DISCOUNT_WITHOUT' | translate }}
                .discount-price {{ cartPage.O.order.order_price }} {{cartPage.U.userInfo.currency}}
              .discount-price-box
                .discount-price-label {{ 'cart.DISCOUNT_WITH' | translate }}
                .discount-price {{ cartPage.O.order.order_price_dis }} {{cartPage.U.userInfo.currency}}
              .discount-price-box
                .discount-price-label {{ 'cart.DISCOUNT' | translate }}
                .discount-price {{ cartPage.C.cart.discountPriceDiff }} {{cartPage.U.userInfo.currency}}





        section.cart-container.light-view(ng-class="{'active': cartPage.config.isCartLightView}")
          .cart-header
            include parts/_user-info
            button.cart-tool.additional-elements(hm-tap="cartPage.showAllAddElements()") {{ 'cart.ALL_ADD_ELEMENTS' | translate }}
            button.cart-tool.new-order(hm-tap="cartPage.addNewProductInOrder()") {{ 'cart.ADD_ORDER' | translate }}

          .order-block.scroll-vert-container
            .order(ng-repeat="product in cartPage.O.order.products track by $index")
              button.order-delete(hm-tap="cartPage.clickDeleteProduct($index)")
              .order-header
                .order-template(hm-tap="cartPage.editProduct($index, 'product')")
                  svg-template(template="product.templateIcon", template-width="cartPage.constants.svgTemplateIconWidth", template-height="cartPage.constants.svgTemplateIconHeight", type-construction="icon")
              .order-content
                .order-value {{ product.template_width }} * {{ product.template_height }} {{ 'mainpage.MM' | translate }}

                .order-item.addelements-btn(hm-tap="cartPage.showAddElementDetail($index)")
                  .order-value {{cartPage.C.cart.allAddElements[$index].length}}
                    ng-pluralize(count="cartPage.C.cart.allAddElements[$index].length",
                    when="{'0': '{{ cartPage.config.elements }}', '1': '{{ cartPage.config.element }}', '2': '{{ cartPage.config.elementa }}', '3': '{{ cartPage.config.elementa }}', '4': '{{ cartPage.config.elementa }}', 'other': '{{ cartPage.config.elements }}'}")
                  .order-label {{ 'mainpage.CONFIGMENU_ADDITIONAL' | translate }}

                .order-qty
                  button.order-tool(hm-tap="cartPage.decreaseProductQty($index)") -
                  .order-value {{ product.product_qty }}
                  button.order-tool(hm-tap="cartPage.increaseProductQty($index)") +
                .order-label {{ 'cart.PRODUCT_QTY' | translate }}
              .order-footer
                .order-price(price-fixed="{{product.productPriceDis}}", qty-element="{{product.product_qty}}", currency-element="{{cartPage.U.userInfo.currency}}")
                .order-comment-btn(ng-show="product.comment.length", ng-class="{'active': cartPage.config.isProductComment === $index+1}", hm-tap="cartPage.switchProductComment($index)")
              .order-comment(ng-class="{'active': cartPage.config.isProductComment === $index+1}")
                .order-comment-box
                  .order-comment-title {{ 'cart.ORDER_COMMENT' | translate }}
                  .order-comment-content {{ product.comment }}


          button.view-switch-tab(hm-tap="cartPage.viewSwitching()") {{ 'cart.FULL_VIEW' | translate }}


        .addelements-detail(ng-if="cartPage.config.isAddElementDetail")
          .addelements-detail-header
            .addelements-detail-tools
              button.addelements-detail-edit(hm-tap="cartPage.editProduct(cartPage.config.detailProductIndex, 'auxiliary')") {{ 'cart.ADDELEMENTS_EDIT_LIST' | translate }}
              button.addelements-detail-close(hm-tap="cartPage.closeAddElementDetail()")
            .product-template(ng-hide="cartPage.O.order.products[cartPage.config.detailProductIndex].is_addelem_only")
              .addelements-detail-row
                .product-value
                  .product-icon-thumb
                    svg-template(template="cartPage.O.order.products[cartPage.config.detailProductIndex].templateIcon", template-width="cartPage.constants.svgTemplateIconWidth", template-height="cartPage.constants.svgTemplateIconHeight", type-construction="icon")
                  span.product-template-qty X {{ cartPage.O.order.products[cartPage.config.detailProductIndex].product_qty }}
                .product-icon-label {{ 'cart.PRODUCT_QTY' | translate }}
              .addelements-detail-row
                .product-value {{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_width }} {{ 'mainpage.MM' | translate }} *
                .product-label {{ 'add_elements.WIDTH_LABEL' | translate }}
              .addelements-detail-row
                .product-value {{ cartPage.O.order.products[cartPage.config.detailProductIndex].template_height }} {{ 'mainpage.MM' | translate }}
                .product-label {{ 'add_elements.HEIGHT_LABEL' | translate }}
          .addelements-detail-content
            ul.addelements-detail-list
              li.addelements-detail-item(ng-repeat="addelement in cartPage.C.cart.allAddElements[cartPage.config.detailProductIndex] track by $index", ng-switch="addelement.element_type")
                .product-value {{ addelement.name }}
                .product-value(ng-switch-when="0") {{ 'add_elements.GRID' | translate }}
                .product-value(ng-switch-when="1") {{ 'add_elements.VISOR' | translate }}
                .product-value(ng-switch-when="2") {{ 'add_elements.SPILLWAY' | translate }}
                .product-value(ng-switch-when="3") {{ 'add_elements.OUTSIDE' | translate }}
                .product-value(ng-switch-when="4") {{ 'add_elements.LOUVERS' | translate }}
                .product-value(ng-switch-when="5") {{ 'add_elements.INSIDE' | translate }}
                .product-value(ng-switch-when="6") {{ 'add_elements.CONNECTORS' | translate }}
                .product-value(ng-switch-when="7") {{ 'add_elements.FAN' | translate }}
                .product-value(ng-switch-when="8") {{ 'add_elements.WINDOWSILL' | translate }}
                .product-value(ng-switch-when="9") {{ 'add_elements.HANDLEL' | translate }}
                .product-value(ng-switch-when="10") {{ 'add_elements.OTHERS' | translate }}
                .addelement-parameters
                  .addelement-parameter(ng-show="addelement.element_width")
                    .addelement-value {{ addelement.element_width }}
                    .addelement-label {{ 'add_elements.WIDTH_LABEL' | translate }}
                  .addelement-parameter(ng-show="addelement.element_height")
                    .addelement-value {{ addelement.element_height }}
                    .addelement-label {{ 'add_elements.HEIGHT_LABEL' | translate }}
                  .addelement-parameter(ng-show="addelement.element_qty")
                    .addelement-value {{ addelement.element_qty }}
                    .addelement-label {{ 'add_elements.QTY_LABEL' | translate }}
                .addelement-parameters
                  .addelement-price-value + {{ addelement.element_qty * addelement.elementPriceDis }} {{ cartPage.U.userInfo.currency }}
                  .addelement-label ({{ addelement.element_qty }} x {{ addelement.elementPriceDis }}{{ cartPage.U.userInfo.currency }})
            .addelements-detail-row.price-one-product
              .addelement-price-value(price-fixed="{{cartPage.O.order.products[cartPage.config.detailProductIndex].addelemPriceDis}}", qty-element="1", currency-element="{{cartPage.U.userInfo.currency}}")
              .product-label {{ 'cart.ADDELEMENTS_PRODUCT_COST' | translate }}
          .addelements-detail-footer
            div(price-fixed="{{cartPage.O.order.products[cartPage.config.detailProductIndex].addelemPriceDis}}", qty-element="{{cartPage.O.order.products[cartPage.config.detailProductIndex].product_qty}}", currency-element="{{cartPage.U.userInfo.currency}}")
            div &#8721;

        .backDarkView(ng-if="cartPage.config.isAddElementDetail", hm-tap="cartPage.closeAddElementDetail()")



        include panels/_add-elements-cart


    section.right-menu
      include menus/_cart-menu
      include menus/_addelems-menu

    include parts/_call-master
    include parts/_call-order
    include parts/_call-credit

include parts/_loader
include parts/_alert